(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{EqWC:function(t,e,i){"use strict";i.r(e),i.d(e,"ManageContentListComponent",(function(){return k}));var n=i("5/c3"),o=i("9Saw"),r=i("LR82"),c=i("z5yO"),s=i("uuTa"),a=i("1C3z"),d=i("BLjT"),p=i("PlBB"),b=i("2pW/"),u=i("8AiQ"),l=i("9HSk"),h=i("Qc/f"),g=i("r4gC"),f=i("kVtj");function m(t,e){if(1&t){var i=a.Xb();a.Ub(0),a.Wb(1,"span"),a.Qc(2),a.Vb(),a.Wb(3,"button",11),a.ec("click",(function(){return a.Fc(i),a.ic(2).editHeader()})),a.Wb(4,"mat-icon"),a.Qc(5,"edit"),a.Vb(),a.Vb(),a.Tb()}if(2&t){var n=a.ic(2);a.Bb(2),a.Rc(n.header.Title)}}function v(t,e){1&t&&(a.Ub(0),a.Qc(1,"(this list has no header)"),a.Tb())}function x(t,e){if(1&t&&(a.Ub(0),a.Wb(1,"p",10),a.Qc(2," You can manage the list header here (if it is defined): "),a.Vb(),a.Wb(3,"p",10),a.Oc(4,m,6,1,"ng-container",3),a.Oc(5,v,2,0,"ng-container",3),a.Vb(),a.Tb()),2&t){var i=a.ic();a.Bb(4),a.oc("ngIf",i.header.Type),a.Bb(1),a.oc("ngIf",!i.header.Type)}}function C(t,e){if(1&t){var i=a.Xb();a.Wb(0,"div"),a.Wb(1,"button",16),a.ec("click",(function(){a.Fc(i);var t=a.ic().$implicit;return a.ic().editItem(t.Id)})),a.Wb(2,"mat-icon"),a.Qc(3,"edit"),a.Vb(),a.Vb(),a.Vb()}}function O(t,e){if(1&t&&(a.Wb(0,"div",12),a.Wb(1,"div",13),a.Wb(2,"mat-icon",14),a.Qc(3,"drag_handle"),a.Vb(),a.Wb(4,"span",15),a.Qc(5),a.Vb(),a.Vb(),a.Oc(6,C,4,0,"div",3),a.Vb()),2&t){var i=e.$implicit;a.Bb(5),a.Tc("",i.Title," (",i.Id,")"),a.Bb(1),a.oc("ngIf",0!==i.Id)}}var k=function(){function t(t,e,i,n,o){this.dialogRef=t,this.contentGroupService=e,this.route=i,this.router=n,this.snackBar=o,this.hostClass="dialog-component",this.subscription=new r.a,this.hasChild=!!this.route.snapshot.firstChild,this.contentGroup={id:null,guid:this.route.snapshot.paramMap.get("guid"),part:this.route.snapshot.paramMap.get("part"),index:parseInt(this.route.snapshot.paramMap.get("index"),10)}}return t.prototype.ngOnInit=function(){this.fetchList(),this.fetchHeader(),this.refreshOnChildClosed()},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.saveList=function(){var t=this;this.snackBar.open("Saving..."),this.contentGroupService.saveList(this.contentGroup,this.items).subscribe((function(e){t.snackBar.open("Saved"),t.closeDialog()}))},t.prototype.editHeader=function(){var t={items:[{Group:{Guid:this.contentGroup.guid,Index:0,Part:"listcontent",Add:0===this.header.Id}},{Group:{Guid:this.contentGroup.guid,Index:0,Part:"listpresentation",Add:0===this.header.Id}}]},e=Object(s.a)(t);this.router.navigate(["edit/"+e],{relativeTo:this.route})},t.prototype.editItem=function(t){var e={items:[{EntityId:t}]},i=Object(s.a)(e);this.router.navigate(["edit/"+i],{relativeTo:this.route})},t.prototype.drop=function(t){Object(o.d)(this.items,t.previousIndex,t.currentIndex)},t.prototype.closeDialog=function(){this.dialogRef.close()},t.prototype.fetchList=function(){var t=this;this.contentGroupService.getList(this.contentGroup).subscribe((function(e){t.items=e}))},t.prototype.fetchHeader=function(){var t=this;this.contentGroupService.getHeader(this.contentGroup).subscribe((function(e){t.header=e}))},t.prototype.refreshOnChildClosed=function(){var t=this;this.subscription.add(this.router.events.pipe(Object(c.a)((function(t){return t instanceof n.b}))).subscribe((function(e){var i=t.hasChild;t.hasChild=!!t.route.snapshot.firstChild,!t.hasChild&&i&&(t.fetchList(),t.fetchHeader())})))},t.\u0275fac=function(e){return new(e||t)(a.Qb(d.g),a.Qb(p.a),a.Qb(n.a),a.Qb(n.c),a.Qb(b.b))},t.\u0275cmp=a.Kb({type:t,selectors:[["app-manage-content-list"]],hostVars:1,hostBindings:function(t,e){2&t&&a.Zb("className",e.hostClass)},decls:15,vars:2,consts:[["mat-dialog-title",""],[1,"dialog-title-box"],[1,"dialog-component-content","fancy-scrollbar-light"],[4,"ngIf"],[1,"dialog-description","sort-title"],["cdkDropList","",1,"dnd-list",3,"cdkDropListDropped"],["class","dnd-item","cdkDrag","",4,"ngFor","ngForOf"],[1,"dialog-component-actions"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"click"],[1,"dialog-description"],["mat-icon-button","","matTooltip","Edit header",3,"click"],["cdkDrag","",1,"dnd-item"],[1,"dnd-item__title"],["matTooltip","Drag to reorder the list",1,"dnd-item__title-icon"],[1,"dnd-item__title-text"],["mat-icon-button","","matTooltip","Edit item","appMousedownStopPropagation","",3,"click"]],template:function(t,e){1&t&&(a.Wb(0,"div",0),a.Wb(1,"div",1),a.Qc(2,"Manage content-item lists"),a.Vb(),a.Vb(),a.Rb(3,"router-outlet"),a.Wb(4,"div",2),a.Oc(5,x,6,2,"ng-container",3),a.Wb(6,"p",4),a.Qc(7,"Sort the items by dragging as you need, then save:"),a.Vb(),a.Wb(8,"div",5),a.ec("cdkDropListDropped",(function(t){return e.drop(t)})),a.Oc(9,O,7,3,"div",6),a.Vb(),a.Vb(),a.Wb(10,"div",7),a.Wb(11,"button",8),a.ec("click",(function(){return e.closeDialog()})),a.Qc(12,"Cancel"),a.Vb(),a.Wb(13,"button",9),a.ec("click",(function(){return e.saveList()})),a.Qc(14,"Save"),a.Vb(),a.Vb()),2&t&&(a.Bb(5),a.oc("ngIf",e.header),a.Bb(4),a.oc("ngForOf",e.items))},directives:[d.h,n.e,u.m,o.b,u.l,l.a,h.a,g.a,o.a,f.a],styles:[".sort-title[_ngcontent-%COMP%]{padding-top:16px}.dnd-list[_ngcontent-%COMP%]{margin:16px 0;border:1px solid #ccc;border-radius:4px;overflow:hidden}.dnd-item[_ngcontent-%COMP%]{cursor:move;height:40px;border-bottom:1px solid #ccc;padding:0 8px;display:flex;align-items:center;justify-content:space-between;background:#fff;box-sizing:border-box;font-size:14px}.dnd-item[_ngcontent-%COMP%]:last-child{border:none}.dnd-item__title[_ngcontent-%COMP%]{display:flex;align-items:center;overflow:hidden}.dnd-item__title-icon[_ngcontent-%COMP%]{margin-right:8px;opacity:.4}.dnd-item__title-text[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%], .dnd-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .dnd-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),t}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.04.01/ng-edit/manage-content-list-component.64c7c5e0d397c26b4bf8.js.map