(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{"/ciH":function(e,t,n){"use strict";var i=n("PYp2"),o=n("SEb4"),a=n("TPB+"),r=/^(?:0|[1-9]\d*)$/,c=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t},s=n("HuQ3"),l=Object.prototype.hasOwnProperty;t.a=function(e,t){var n=Object(o.a)(e),r=!n&&Object(i.a)(e),d=!n&&!r&&Object(a.a)(e),u=!n&&!r&&!d&&Object(s.a)(e),p=n||r||d||u,f=p?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],g=f.length;for(var b in e)!t&&!l.call(e,b)||p&&("length"==b||d&&("offset"==b||"parent"==b)||u&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||c(b,g))||f.push(b);return f}},BaCy:function(e,t,n){"use strict";var i=n("lnqP"),o=n("qd5q"),a=n("FoV5");t.a=function(e){return Object(i.a)(e,a.a,o.a)}},CYhr:function(e,t,n){"use strict";var i=n("y7Du"),o=Object(i.a)(Object,"create"),a=Object.prototype.hasOwnProperty,r=Object.prototype.hasOwnProperty;function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}c.prototype.clear=function(){this.__data__=o?o(null):{},this.size=0},c.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},c.prototype.get=function(e){var t=this.__data__;if(o){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return a.call(t,e)?t[e]:void 0},c.prototype.has=function(e){var t=this.__data__;return o?void 0!==t[e]:r.call(t,e)},c.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=o&&void 0===t?"__lodash_hash_undefined__":t,this};var s=c,l=n("Go5w"),d=n("OJPH"),u=function(e,t){var n,i,o=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map};function p(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}p.prototype.clear=function(){this.size=0,this.__data__={hash:new s,map:new(d.a||l.a),string:new s}},p.prototype.delete=function(e){var t=u(this,e).delete(e);return this.size-=t?1:0,t},p.prototype.get=function(e){return u(this,e).get(e)},p.prototype.has=function(e){return u(this,e).has(e)},p.prototype.set=function(e,t){var n=u(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},t.a=p},DHAC:function(e,t,n){"use strict";var i=n("Go5w"),o=n("OJPH"),a=n("CYhr");function r(e){var t=this.__data__=new i.a(e);this.size=t.size}r.prototype.clear=function(){this.__data__=new i.a,this.size=0},r.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},r.prototype.get=function(e){return this.__data__.get(e)},r.prototype.has=function(e){return this.__data__.has(e)},r.prototype.set=function(e,t){var n=this.__data__;if(n instanceof i.a){var r=n.__data__;if(!o.a||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new a.a(r)}return n.set(e,t),this.size=n.size,this},t.a=r},FoV5:function(e,t,n){"use strict";var i=n("/ciH"),o=n("tyTC"),a=n("GIvL");t.a=function(e){return Object(a.a)(e)?Object(i.a)(e):Object(o.a)(e)}},Go5w:function(e,t,n){"use strict";var i=n("HVAe"),o=function(e,t){for(var n=e.length;n--;)if(Object(i.a)(e[n][0],t))return n;return-1},a=Array.prototype.splice;function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}r.prototype.clear=function(){this.__data__=[],this.size=0},r.prototype.delete=function(e){var t=this.__data__,n=o(t,e);return!(n<0||(n==t.length-1?t.pop():a.call(t,n,1),--this.size,0))},r.prototype.get=function(e){var t=this.__data__,n=o(t,e);return n<0?void 0:t[n][1]},r.prototype.has=function(e){return o(this.__data__,e)>-1},r.prototype.set=function(e,t){var n=this.__data__,i=o(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},t.a=r},HVAe:function(e,t,n){"use strict";t.a=function(e,t){return e===t||e!=e&&t!=t}},NUo7:function(e,t,n){"use strict";t.a=function(){return[]}},gFym:function(e,t,n){"use strict";t.a=function(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e}},ji8j:function(e,t,n){"use strict";n.r(t);var i=n("D57K"),o=n("LiEJ"),a=n("sna8"),r=n("snle"),c=n("DwTn"),s=n("leiK"),l=n("Lh+r"),d=n("e7y7");function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return"function"==typeof n&&e.pop(),Object(a.a)(e,void 0).lift(new p(n))}var p=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.resultSelector))},e}(),f=function(e){function t(t,n,i){void 0===i&&(i=Object.create(null));var o=e.call(this,t)||this;return o.iterators=[],o.active=0,o.resultSelector="function"==typeof n?n:null,o.values=i,o}return i.d(t,e),t.prototype._next=function(e){var t=this.iterators;Object(r.a)(e)?t.push(new b(e)):t.push("function"==typeof e[d.a]?new g(e[d.a]()):new h(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var n=0;n<t;n++){var i=e[n];i.stillUnsubscribed?this.destination.add(i.subscribe(i,n)):this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,i=0;i<t;i++)if("function"==typeof(r=e[i]).hasValue&&!r.hasValue())return;var o=!1,a=[];for(i=0;i<t;i++){var r,c=(r=e[i]).next();if(r.hasCompleted()&&(o=!0),c.done)return void n.complete();a.push(c.value)}this.resultSelector?this._tryresultSelector(a):n.next(a),o&&n.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(c.a),g=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),b=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[d.a]=function(){return this},e.prototype.next=function(e){var t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),h=function(e){function t(t,n,i){var o=e.call(this,t)||this;return o.parent=n,o.observable=i,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return i.d(t,e),t.prototype[d.a]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t,n,i,o){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return Object(l.a)(this,this.observable,this,t)},t}(s.a),m=n("pN2L"),v=n("G2Mx"),y=n("AouM"),w=n("Jg5f"),C=n("U3QC"),_=n("IMYO"),O=n("S6KJ"),x=(n("qzOT"),n("gZep")),k=n("1C3z"),I=n("z5yO"),M=n("cGAd"),S=n("ZSGP"),T=n("AytR"),P=n("50eG"),j=n("JXuk"),V=n("nsG0"),E=n("LR82"),$=n("W/Ou"),B=n("lqvn"),L=n("EfUY"),F=n("ubup"),D=function(){function e(e,t){this.eavService=e,this.validationMessagesService=t,this.subscription=new E.a}return e.prototype.ngOnInit=function(){var e=this;this.control=this.group.controls[this.config.field.name],this.settings$=this.config.field.settings$,this.label$=this.settings$.pipe(Object(w.a)((function(e){return e.Name}))),this.placeholder$=this.settings$.pipe(Object(w.a)((function(e){return e.Placeholder}))),this.required$=this.settings$.pipe(Object(w.a)((function(e){return L.a.isRequired(e)}))),this.invalid$=this.control.statusChanges.pipe(Object(w.a)((function(e){return"INVALID"===e})),Object($.a)(this.control.invalid)),this.showValidation$=this.validationMessagesService.showValidation$.pipe(Object(I.a)((function(t){return t===e.control}))),this.value$=this.eavService.formValueChange$.pipe(Object(I.a)((function(t){return t.formId===e.config.form.formId&&t.entityGuid===e.config.entity.entityGuid})),Object(w.a)((function(t){return e.control.value})),Object($.a)(this.control.value),Object(B.a)()),this.disabled$=this.eavService.formDisabledChange$.asObservable().pipe(Object(I.a)((function(t){return t.formId===e.config.form.formId&&t.entityGuid===e.config.entity.entityGuid})),Object(w.a)((function(t){return e.control.disabled})),Object($.a)(this.control.disabled),Object(B.a)())},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(k.Qb(j.a),k.Qb(F.a))},e.\u0275dir=k.Lb({type:e,inputs:{config:"config",group:"group"}}),e}(),W=n("1MVu"),z=function(e){this.rootSubfolder="",this.fileFilter="",this.allowAssetsInRoot=!0,this.folderDepth=0,this.metadataContentTypes="",this.usePortalRoot=!1,this.showImagesOnly=!1,this.autoLoad=!1,this.enableSelect=!0,this.subfolder="",this.allowEdit=!0,this.disabled=!0,this.maxDepthReached=!1,this.disabled=e},A=n("o9tz"),R=n("4UCL"),Q=n("mULc"),G=n("IMfk"),N=n("tPMb"),U=function(){function e(e,t,n,i,o){this.enabled=e,this.expires=t,this.id=n,this.isPublic=i,this.ui=o,this.enabled=e,this.expires=t,this.id=n,this.isPublic=i,this.ui=o}return e.createFeatureArray=function(t){var n=[];return t.forEach((function(t){n.push(new e(t.enabled,t.expires,t.id,t.public,t.ui))})),n},e}(),q=function(e){function t(t){return e.call(this,"Feature",t)||this}return Object(i.d)(t,e),t.prototype.loadFeatures=function(e){var t=U.createFeatureArray(e);this.addAllToCache(t)},t.prototype.isFeatureEnabled=function(e){var t=!1;return this.entities$.pipe(Object(v.a)(1)).subscribe((function(n){n.forEach((function(n){n.id===e&&(t=n.enabled)}))})),t},t.\u0275fac=function(e){return new(e||t)(k.ac(N.b))},t.\u0275prov=k.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(N.a),H=n("dkRO"),K=n("0adC"),X=n("8AiQ"),Z=n("pJJP"),Y=n("Qc/f"),J=n("r4gC"),ee=function(){function e(e,t){this.elementRef=e,this.featureService=t,this.eventListeners=[]}return e.prototype.ngOnInit=function(){if(this.featureService.isFeatureEnabled("f6b8d6da-4744-453b-9543-0de499aa2352")){switch(this.elementType){case"input":this.elementRef.nativeElement.pastableTextarea();break;case"element":this.elementRef.nativeElement.pastableNonInputable()}var e=this.handleImage.bind(this);this.elementRef.nativeElement.addEventListener("handleImage",e),this.eventListeners.push({element:this.elementRef.nativeElement,type:"handleImage",listener:e})}},e.prototype.ngOnDestroy=function(){this.eventListeners.forEach((function(e){e.element.removeEventListener(e.type,e.listener)}))},e.prototype.handleImage=function(e){Object(P.a)("PASTE IMAGE","event:",e);var t=this.getFile(e.detail);this.config.dropzone.uploadFile(t)},e.prototype.getFile=function(e){var t=e.file;try{var n=new FormData;n.append("file",e.file,e.imageFileName),t=n.get("file")}catch(i){console.error("paste image error",i)}return t},e.\u0275fac=function(t){return new(t||e)(k.Qb(k.l),k.Qb(q))},e.\u0275dir=k.Lb({type:e,selectors:[["","appPasteClipboardImage",""]],inputs:{config:"config",elementType:"elementType"}}),e}(),te=n("Zfm5"),ne=n("D3iX");function ie(e,t){1&e&&(k.Wb(0,"mat-icon"),k.Qc(1,"public"),k.Vb())}function oe(e,t){1&e&&k.Rb(0,"mat-icon",12)}function ae(e,t){if(1&e){var n=k.Xb();k.Wb(0,"div",8),k.ec("click",(function(e){return k.Fc(n),k.ic(3).openUploadClick(e)})),k.jc(1,"translate"),k.Wb(2,"div",9),k.Wb(3,"mat-icon"),k.Qc(4,"cloud_upload"),k.Vb(),k.Wb(5,"div",10),k.Qc(6),k.jc(7,"translate"),k.Oc(8,ie,2,0,"mat-icon",0),k.Oc(9,oe,1,0,"mat-icon",11),k.Vb(),k.Vb(),k.Vb()}if(2&e){var i=k.ic(2).ngIf;k.oc("matTooltip",k.kc(1,4,"Fields.Hyperlink.AdamFileManager.UploadTip")),k.Bb(6),k.Sc(" ",k.kc(7,6,"Fields.Hyperlink.AdamFileManager.UploadLabel")," \xa0 "),k.Bb(2),k.oc("ngIf",i.adamConfig.usePortalRoot),k.Bb(1),k.oc("ngIf",!i.adamConfig.usePortalRoot)}}function re(e,t){1&e&&(k.Wb(0,"div",10),k.Qc(1),k.jc(2,"translate"),k.Vb()),2&e&&(k.Bb(1),k.Sc(" ",k.kc(2,1,"Fields.Hyperlink.AdamFileManager.UploadPasteLabel")," "))}function ce(e,t){1&e&&(k.Wb(0,"div",10),k.Qc(1),k.jc(2,"translate"),k.Vb()),2&e&&(k.Bb(1),k.Sc(" ",k.kc(2,1,"Fields.Hyperlink.AdamFileManager.UploadPasteFocusedLabel")," "))}function se(e,t){if(1&e&&(k.Wb(0,"div",13,14),k.jc(2,"translate"),k.Wb(3,"div",9),k.Wb(4,"mat-icon"),k.Qc(5,"filter"),k.Vb(),k.Oc(6,re,3,3,"div",15),k.Oc(7,ce,3,3,"div",15),k.Vb(),k.Vb()),2&e){var n=k.Dc(1),i=k.ic(3);k.oc("config",i.config)("elementType","element")("matTooltip",k.kc(2,5,"Fields.Hyperlink.AdamFileManager.UploadPasteTip")),k.Bb(6),k.oc("ngIf",!n.classList.contains("pastable-focus")),k.Bb(1),k.oc("ngIf",n.classList.contains("pastable-focus"))}}function le(e,t){if(1&e){var n=k.Xb();k.Wb(0,"div",16),k.ec("click",(function(){return k.Fc(n),k.ic(3).addFolder()})),k.jc(1,"translate"),k.Wb(2,"div",9),k.Rb(3,"mat-icon",17),k.Wb(4,"div",18),k.Qc(5),k.jc(6,"translate"),k.Vb(),k.Vb(),k.Rb(7,"div",19),k.Vb()}2&e&&(k.oc("matTooltip",k.kc(1,2,"Fields.Hyperlink.AdamFileManager.NewFolderTip")),k.Bb(5),k.Rc(k.kc(6,4,"Fields.Hyperlink.AdamFileManager.NewFolder")))}function de(e,t){if(1&e){var n=k.Xb();k.Ub(0),k.Wb(1,"div",16),k.ec("click",(function(){return k.Fc(n),k.ic(3).goUp()})),k.jc(2,"translate"),k.Wb(3,"div",9),k.Rb(4,"mat-icon",20),k.Wb(5,"div",18),k.Qc(6),k.jc(7,"translate"),k.Vb(),k.Vb(),k.Wb(8,"div",21),k.Wb(9,"mat-icon",22),k.Qc(10,"arrow_back"),k.Vb(),k.Vb(),k.Vb(),k.Tb()}2&e&&(k.Bb(1),k.oc("matTooltip",k.kc(2,2,"Fields.Hyperlink.AdamFileManager.BackFolderTip")),k.Bb(5),k.Rc(k.kc(7,4,"Fields.Hyperlink.AdamFileManager.BackFolder")))}var ue=function(e){return{"adam-button-disabled":e}};function pe(e,t){if(1&e){var n=k.Xb();k.Wb(0,"mat-icon",31),k.ec("click",(function(){k.Fc(n);var e=k.ic(2).$implicit;return k.ic(3).del(e)})),k.jc(1,"translate"),k.Qc(2,"clear "),k.Vb()}if(2&e){var i=k.ic(4).ngIf;k.oc("matTooltip",k.kc(1,2,"Fields.Hyperlink.AdamFileManager.Delete"))("ngClass",k.tc(4,ue,i.disabled))}}function fe(e,t){if(1&e){var n=k.Xb();k.Wb(0,"mat-icon",32),k.ec("click",(function(){k.Fc(n);var e=k.ic(2).$implicit;return k.ic(3).rename(e)})),k.jc(1,"translate"),k.Qc(2,"edit "),k.Vb()}if(2&e){var i=k.ic(4).ngIf;k.oc("matTooltip",k.kc(1,2,"Fields.Hyperlink.AdamFileManager.Edit"))("ngClass",k.tc(4,ue,i.disabled))}}var ge=function(e){return{"metadata-exists":e}};function be(e,t){if(1&e){var n=k.Xb();k.Wb(0,"mat-icon",33),k.ec("click",(function(){k.Fc(n);var e=k.ic(2).$implicit;return k.ic(3).editItemMetadata(e)})),k.Qc(1,"local_offer"),k.Vb()}if(2&e){var i=k.ic(2).$implicit;k.rc("matTooltip","",i._metadataContentType,": ",i.MetadataId,""),k.oc("ngClass",k.tc(3,ge,i.MetadataId>0))}}function he(e,t){if(1&e){var n=k.Xb();k.Ub(0),k.Wb(1,"div",23),k.ec("click",(function(){k.Fc(n);var e=k.ic().$implicit;return k.ic(3).goIntoFolder(e)})),k.Wb(2,"div",24),k.Rb(3,"mat-icon",20),k.Wb(4,"div",25),k.Qc(5),k.Vb(),k.Vb(),k.Wb(6,"div"),k.Oc(7,pe,3,6,"mat-icon",26),k.Oc(8,fe,3,6,"mat-icon",27),k.Wb(9,"div",28),k.Wb(10,"div",29),k.Qc(11),k.Vb(),k.Vb(),k.Vb(),k.Oc(12,be,2,5,"mat-icon",30),k.Vb(),k.Tb()}if(2&e){var i=k.ic().$implicit,o=k.ic(2).ngIf;k.Bb(5),k.Rc(i.Name),k.Bb(1),k.Eb("dz-details file-type-",i.Type,""),k.Bb(1),k.oc("ngIf",o.adamConfig.allowEdit),k.Bb(1),k.oc("ngIf",o.adamConfig.allowEdit),k.Bb(2),k.oc("title",i.Name),k.Bb(1),k.Rc(i.Name),k.Bb(1),k.oc("ngIf",i._metadataContentType)}}function me(e,t){if(1&e&&(k.Wb(0,"mat-icon"),k.Qc(1),k.Vb()),2&e){var n=k.ic(3).$implicit;k.Bb(1),k.Rc(n._icon)}}function ve(e,t){if(1&e&&k.Rb(0,"mat-icon",45),2&e){var n=k.ic(3).$implicit;k.oc("svgIcon",n._icon)}}function ye(e,t){if(1&e&&(k.Wb(0,"div",24),k.Oc(1,me,2,1,"mat-icon",0),k.Oc(2,ve,1,1,"mat-icon",44),k.Wb(3,"div",18),k.Qc(4),k.Vb(),k.Vb()),2&e){var n=k.ic(2).$implicit;k.Bb(1),k.oc("ngIf",n._isMaterialIcon),k.Bb(1),k.oc("ngIf",!n._isMaterialIcon),k.Bb(2),k.Rc(n.Name)}}function we(e,t){if(1&e&&(k.Wb(0,"div",46),k.Rb(1,"img",47),k.Vb()),2&e){var n=k.ic(2).$implicit;k.Bb(1),k.oc("alt",n.Id+":"+n.Name)("src",n.FullPath+"?w=120&h=120&mode=crop",k.Ic)}}function Ce(e,t){if(1&e){var n=k.Xb();k.Wb(0,"mat-icon",31),k.ec("click",(function(){k.Fc(n);var e=k.ic(2).$implicit;return k.ic(3).del(e)})),k.jc(1,"translate"),k.Qc(2,"clear "),k.Vb()}if(2&e){var i=k.ic(4).ngIf;k.oc("matTooltip",k.kc(1,2,"Fields.Hyperlink.AdamFileManager.Delete"))("ngClass",k.tc(4,ue,i.disabled))}}function _e(e,t){if(1&e){var n=k.Xb();k.Wb(0,"mat-icon",32),k.ec("click",(function(){k.Fc(n);var e=k.ic(2).$implicit;return k.ic(3).rename(e)})),k.jc(1,"translate"),k.Qc(2,"edit "),k.Vb()}if(2&e){var i=k.ic(4).ngIf;k.oc("matTooltip",k.kc(1,2,"Fields.Hyperlink.AdamFileManager.Edit"))("ngClass",k.tc(4,ue,i.disabled))}}function Oe(e,t){if(1&e){var n=k.Xb();k.Wb(0,"mat-icon",33),k.ec("click",(function(){k.Fc(n);var e=k.ic(2).$implicit;return k.ic(3).editItemMetadata(e)})),k.Qc(1,"local_offer"),k.Vb()}if(2&e){var i=k.ic(2).$implicit;k.rc("matTooltip","",i._metadataContentType,": ",i.MetadataId,""),k.oc("ngClass",k.tc(3,ge,i.MetadataId>0))}}var xe=function(e,t){return{"dz-success":e,"disable-select":t}};function ke(e,t){if(1&e){var n=k.Xb();k.Ub(0),k.Wb(1,"div",34),k.ec("click",(function(){k.Fc(n);var e=k.ic().$implicit;return k.ic(3).select(e)})),k.jc(2,"async"),k.Oc(3,ye,5,3,"div",35),k.Oc(4,we,2,2,"div",36),k.Wb(5,"div"),k.Oc(6,Ce,3,6,"mat-icon",26),k.Oc(7,_e,3,6,"mat-icon",27),k.Wb(8,"div",28),k.Wb(9,"div",29),k.Qc(10),k.Vb(),k.Vb(),k.Wb(11,"div",37),k.Wb(12,"span"),k.Qc(13),k.Vb(),k.Vb(),k.Wb(14,"a",38),k.Wb(15,"mat-icon",39),k.jc(16,"translate"),k.Qc(17,"open_in_new"),k.Vb(),k.Vb(),k.Vb(),k.Oc(18,Oe,2,5,"mat-icon",30),k.Wb(19,"div",40),k.hc(),k.Wb(20,"svg",41),k.Wb(21,"title"),k.Qc(22,"Check"),k.Vb(),k.Rb(23,"defs"),k.Wb(24,"g",42),k.Rb(25,"path",43),k.Vb(),k.Vb(),k.Vb(),k.Vb(),k.Tb()}if(2&e){var i=k.ic().$implicit,o=k.ic(2).ngIf,a=k.ic();k.Bb(1),k.oc("ngClass",k.uc(21,xe,k.kc(2,17,a.value$)==="file:"+i.Id,!o.adamConfig.enableSelect)),k.Bb(2),k.oc("ngIf","image"!==i.Type),k.Bb(1),k.oc("ngIf","image"===i.Type),k.Bb(1),k.Eb("dz-details file-type-",i.Type,""),k.Bb(1),k.oc("ngIf",o.adamConfig.allowEdit),k.Bb(1),k.oc("ngIf",o.adamConfig.allowEdit),k.Bb(2),k.oc("title",i.Name),k.Bb(1),k.Rc(i.Name),k.Bb(1),k.rc("title","#",i.Id," - ",i._displaySize," KB"),k.Bb(2),k.Tc("#",i.Id," - ",i._displaySize," KB"),k.Bb(1),k.oc("href",i.FullPath,k.Ic),k.Bb(1),k.oc("matTooltip",k.kc(16,19,"Fields.Hyperlink.AdamFileManager.Show")),k.Bb(3),k.oc("ngIf",i._metadataContentType)}}function Ie(e,t){if(1&e&&(k.Ub(0),k.Oc(1,he,13,9,"ng-container",0),k.Oc(2,ke,26,24,"ng-container",0),k.Tb()),2&e){var n=t.$implicit;k.Bb(1),k.oc("ngIf",n.IsFolder),k.Bb(1),k.oc("ngIf",!n.IsFolder)}}var Me=function(e,t){return{"adam-scope-site":e,"adam-scope-field":t}};function Se(e,t){if(1&e&&(k.Wb(0,"div",3),k.Oc(1,ae,10,8,"div",4),k.Oc(2,se,8,7,"div",5),k.Oc(3,le,8,6,"div",6),k.Oc(4,de,11,6,"ng-container",0),k.Oc(5,Ie,3,2,"ng-container",7),k.jc(6,"async"),k.Vb()),2&e){var n=k.ic().ngIf,i=k.ic();k.oc("ngClass",k.uc(9,Me,n.adamConfig.usePortalRoot,!n.adamConfig.usePortalRoot)),k.Bb(1),k.oc("ngIf",!n.disabled&&n.adamConfig.allowEdit&&!((""===n.adamConfig.subfolder||n.adamConfig.usePortalRoot&&n.adamConfig.subfolder===n.adamConfig.rootSubfolder)&&!n.adamConfig.allowAssetsInRoot)),k.Bb(1),k.oc("ngIf",i.pasteClipboardImage&&!n.disabled&&n.adamConfig.allowEdit&&!((""===n.adamConfig.subfolder||n.adamConfig.usePortalRoot&&n.adamConfig.subfolder===n.adamConfig.rootSubfolder)&&!n.adamConfig.allowAssetsInRoot)),k.Bb(1),k.oc("ngIf",!n.adamConfig.maxDepthReached&&!n.disabled&&n.adamConfig.allowEdit&&!((""===n.adamConfig.subfolder||n.adamConfig.usePortalRoot&&n.adamConfig.subfolder===n.adamConfig.rootSubfolder)&&!n.adamConfig.allowAssetsInRoot)),k.Bb(1),k.oc("ngIf",""!==n.adamConfig.subfolder||n.adamConfig.usePortalRoot&&n.adamConfig.subfolder!==n.adamConfig.rootSubfolder),k.Bb(1),k.oc("ngForOf",k.kc(6,7,i.items$))("ngForTrackBy",i.trackByFn)}}function Te(e,t){if(1&e&&(k.Ub(0),k.Wb(1,"div",1),k.Oc(2,Se,7,12,"div",2),k.jc(3,"async"),k.Vb(),k.Tb()),2&e){var n=t.ngIf,i=k.ic();k.Bb(1),k.oc("@adamShowAnimate",null!=n.adamConfig&&n.adamConfig.autoLoad?"open":"closed"),k.Bb(1),k.oc("ngIf",(null==n.adamConfig?null:n.adamConfig.autoLoad)&&k.kc(3,2,i.expanded$))}}var Pe=function(e,t){return{adamConfig:e,disabled:t}},je=function(){function e(e,t,n,i,a,r,c){this.adamService=e,this.fileTypeService=t,this.featureService=n,this.dnnContext=i,this.eavService=a,this.editRoutingService=r,this.zone=c,this.openUpload=new k.n,this.adamConfig$=new o.a(null),this.items$=new o.a([]),this.subscription=new E.a}return e.prototype.ngOnInit=function(){var e=this;this.control=this.group.controls[this.config.field.name],this.refreshOnChildClosed(),this.url=this.dnnContext.$2sxc.http.apiUrl("app-content/"+this.config.entity.header.ContentTypeName+"/"+this.config.entity.header.Guid+"/"+this.config.field.name),this.pasteClipboardImage=this.featureService.isFeatureEnabled("f6b8d6da-4744-453b-9543-0de499aa2352"),this.config.adam={items$:this.items$.asObservable(),toggle:function(t,n){e.zone.run((function(){e.toggle(t,n)}))},setConfig:function(t){e.zone.run((function(){e.setConfig(t)}))},getConfig:function(){return e.adamConfig$.value},getConfig$:function(){return e.adamConfig$.asObservable()},onItemClick:function(){},onItemUpload:function(){},refresh:function(){e.zone.run((function(){e.fetchItems()}))},addFullPath:function(t){e.adamService.addFullPath(t)}},this.subscription.add(this.adamConfig$.subscribe((function(t){e.fetchItems()}))),this.expanded$=this.editRoutingService.isExpanded(this.config.field.index,this.config.entity.entityGuid),this.value$=this.eavService.formValueChange$.pipe(Object(I.a)((function(t){return t.formId===e.config.form.formId&&t.entityGuid===e.config.entity.entityGuid})),Object(w.a)((function(t){return e.control.value})),Object($.a)(this.control.value),Object(B.a)()),this.disabled$=this.eavService.formDisabledChange$.asObservable().pipe(Object(I.a)((function(t){return t.formId===e.config.form.formId&&t.entityGuid===e.config.entity.entityGuid})),Object(w.a)((function(t){return e.control.disabled})),Object($.a)(this.control.disabled),Object(B.a)())},e.prototype.ngOnDestroy=function(){this.adamConfig$.complete(),this.items$.complete(),this.subscription.unsubscribe()},e.prototype.addFolder=function(){var e=this;if(!this.control.disabled){var t=window.prompt("Please enter a folder name");t&&this.adamService.addFolder(t,this.url,this.adamConfig$.value).subscribe((function(t){e.fetchItems()}))}},e.prototype.del=function(e){var t=this;this.control.disabled||window.confirm("Are you sure you want to delete this item?")&&this.adamService.deleteItem(e,this.url,this.adamConfig$.value).subscribe((function(e){t.fetchItems()}))},e.prototype.editItemMetadata=function(e){this.editRoutingService.open(this.config.field.index,this.config.entity.entityGuid,{items:[0===e.MetadataId?{ContentTypeName:e._metadataContentType,For:{Target:A.a.metadata.cmsObject.target,String:("folder"===e.Type?"folder":"file")+":"+e.Id}}:{EntityId:e.MetadataId}]})},e.prototype.goUp=function(){var e=this.adamConfig$.value.subfolder;e=e.includes("/")?e.slice(0,e.lastIndexOf("/")):"",this.config.adam.setConfig({subfolder:e})},e.prototype.getMetadataContentType=function(e){var t;return"folder"===e.Type?(t=this.adamConfig$.value.metadataContentTypes.match(/^(folder)(:)([^\n]*)/im))?t[3]:null:(t=this.adamConfig$.value.metadataContentTypes.match(/^([^:\n]*)(\n|$)/im))?t[1]:null},e.prototype.goIntoFolder=function(e){var t=this.adamConfig$.value.subfolder;this.config.adam.setConfig({subfolder:t=t?t+"/"+e.Name:e.Name})},e.prototype.openUploadClick=function(e){this.openUpload.emit()},e.prototype.rename=function(e){var t=this;if(!this.control.disabled){var n=window.prompt("Rename the file / folder to: ",e.Name);n&&this.adamService.rename(e,n,this.url,this.adamConfig$.value).subscribe((function(e){t.fetchItems()}))}},e.prototype.select=function(e){!this.control.disabled&&this.adamConfig$.value.enableSelect&&this.config.adam.onItemClick(e)},e.prototype.fetchItems=function(){var e=this,t=this.adamConfig$.value;null!=t&&t.autoLoad&&this.adamService.getAll(this.url,t).subscribe((function(n){var o,a,r=[],c=t.fileFilter?t.fileFilter.split(",").map((function(e){return e.replace("*","").trim()})):[];try{for(var s=Object(i.i)(n),l=s.next();!l.done;l=s.next()){var d=l.value;if("."!==d.Name){if("2sxc"!==d.Name&&"adam"!==d.Name&&(d.IsFolder||!t.showImagesOnly||"image"===d.Type)&&(!d.IsFolder||!t.maxDepthReached)){if(c.length>0){var u=d.Name.substring(d.Name.lastIndexOf("."));if(!c.includes(u))continue}d._metadataContentType=e.getMetadataContentType(d),d._icon=e.fileTypeService.getIconClass(d.Name),d._isMaterialIcon=e.fileTypeService.isKnownType(d.Name),d._displaySize=(d.Size/1024).toFixed(0),r.push(d)}}else{var p=d.AllowEdit;p!==t.allowEdit&&e.config.adam.setConfig({allowEdit:p})}}}catch(f){o={error:f}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}r.sort((function(e,t){return e.Name.toLocaleLowerCase().localeCompare(t.Name.toLocaleLowerCase())})),r.sort((function(e,t){return t.IsFolder.toString().localeCompare(e.IsFolder.toString())})),e.items$.next(r)}))},e.prototype.toggle=function(e,t){var n=Object(i.a)(Object(i.a)({},this.adamConfig$.value),{usePortalRoot:e,showImagesOnly:t});JSON.stringify(n)===JSON.stringify(this.adamConfig$.value)?n.autoLoad=!n.autoLoad:n.autoLoad||(n.autoLoad=!0),this.config.adam.setConfig(n)},e.prototype.trackByFn=function(e,t){return t.Id},e.prototype.setConfig=function(e){var t,n,o=this.config.field.isExternal,a=null!=this.adamConfig$.value?this.adamConfig$.value:new z(o),r=new z(o),c=Object.keys(r);try{for(var s=Object(i.i)(c),l=s.next();!l.done;l=s.next()){var d=l.value;r[d]=null!=e[d]?e[d]:a[d]}}catch(m){t={error:m}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}if(a.usePortalRoot!==r.usePortalRoot&&(r.subfolder=""),r.usePortalRoot&&(r.rootSubfolder.includes("\\")&&(r.rootSubfolder=r.rootSubfolder.replace(/\\/g,"/")),r.rootSubfolder.startsWith("/")&&(r.rootSubfolder=r.rootSubfolder.replace("/","")),!r.subfolder.startsWith(r.rootSubfolder)&&(r.subfolder=r.rootSubfolder),r.maxDepthReached=!1),!r.usePortalRoot)if((r.subfolder?r.subfolder.split("/").length:0)>=r.folderDepth){var u=r.subfolder.split("/");u=u.slice(0,r.folderDepth),r.subfolder=u.join("/"),r.maxDepthReached=!0}else r.maxDepthReached=!1;this.adamConfig$.next(r);var p=this.config.dropzone.getConfig(),f={},g=R.a.getUrlParams(p.url);if((g.subfolder||"")!==r.subfolder||g.usePortalRoot!==r.usePortalRoot.toString()){var b=p.url;b=R.a.replaceUrlParam(b,"subfolder",r.subfolder),b=R.a.replaceUrlParam(b,"usePortalRoot",r.usePortalRoot.toString()),f.url=b}var h=!r.allowEdit||(""===r.subfolder||r.usePortalRoot&&r.subfolder===r.rootSubfolder)&&!r.allowAssetsInRoot;p.disabled!==h&&(f.disabled=h),Object.keys(f).length>0&&this.config.dropzone.setConfig(f)},e.prototype.refreshOnChildClosed=function(){var e=this;this.subscription.add(this.editRoutingService.childFormClosed().subscribe((function(t){e.fetchItems()})))},e.\u0275fac=function(t){return new(t||e)(k.Qb(Q.a),k.Qb(G.a),k.Qb(q),k.Qb(H.a),k.Qb(j.a),k.Qb(K.a),k.Qb(k.z))},e.\u0275cmp=k.Kb({type:e,selectors:[["adam-browser"]],inputs:{config:"config",group:"group"},outputs:{openUpload:"openUpload"},decls:3,vars:8,consts:[[4,"ngIf"],[1,"dropzone"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["class","dz-preview dropzone-adam",3,"matTooltip","click",4,"ngIf"],["appPasteClipboardImage","","class","dz-preview dropzone-adam paste-image",3,"config","elementType","matTooltip",4,"ngIf"],["class","dz-preview",3,"matTooltip","click",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"dz-preview","dropzone-adam",3,"matTooltip","click"],[1,"dz-image","adam-browse-background-icon","adam-browse-background"],[1,"adam-upload-label"],["svgIcon","appleFilled",4,"ngIf"],["svgIcon","appleFilled"],["appPasteClipboardImage","",1,"dz-preview","dropzone-adam","paste-image",3,"config","elementType","matTooltip"],["pasteDiv",""],["class","adam-upload-label",4,"ngIf"],[1,"dz-preview",3,"matTooltip","click"],["svgIcon","folder-plus"],[1,"adam-short-label"],[1,"dz-details",2,"opacity","1"],["svgIcon","folder"],[1,"adam-background","adam-browse-background-icon"],[1,"adam-back-folder-arrow"],[1,"dz-preview",3,"click"],[1,"dz-image","adam-blur","adam-browse-background-icon","adam-browse-background"],[1,"short-label"],["appClickStopPropagation","","class","adam-delete-button",3,"matTooltip","ngClass","click",4,"ngIf"],["appClickStopPropagation","","class","adam-rename-button",3,"matTooltip","ngClass","click",4,"ngIf"],[1,"adam-full-name-area"],[1,"adam-full-name",3,"title"],["class","adam-tag","appClickStopPropagation","",3,"ngClass","matTooltip","click",4,"ngIf"],["appClickStopPropagation","",1,"adam-delete-button",3,"matTooltip","ngClass","click"],["appClickStopPropagation","",1,"adam-rename-button",3,"matTooltip","ngClass","click"],["appClickStopPropagation","",1,"adam-tag",3,"ngClass","matTooltip","click"],[1,"dz-preview",3,"ngClass","click"],["class","dz-image adam-blur adam-browse-background-icon adam-browse-background",4,"ngIf"],["class","dz-image adam-browse-background-image",4,"ngIf"],["appClickStopPropagation","",1,"dz-filename","adam-short-label",3,"title"],["target","_blank","appClickStopPropagation","",1,"adam-link-button",3,"href"],[3,"matTooltip"],[1,"dz-success-mark"],["width","54px","height","54px","viewBox","0 0 54 54","version","1.1","xmlns","https://www.w3.org/2000/svg",0,"xmlns","xlink","https://www.w3.org/1999/xlink",0,"xmlns","sketch","https://www.bohemiancoding.com/sketch/ns"],["id","Page-1","stroke","none","stroke-width","1","fill","none","fill-rule","evenodd",0,"sketch","type","MSPage"],["d","M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z","id","Oval-2","stroke-opacity","0.198794158","stroke","#747474","fill-opacity","0.816519475","fill","#FFFFFF",0,"sketch","type","MSShapeGroup"],[3,"svgIcon",4,"ngIf"],[3,"svgIcon"],[1,"dz-image","adam-browse-background-image"],["data-dz-thumbnail","",3,"alt","src"]],template:function(e,t){1&e&&(k.Oc(0,Te,4,4,"ng-container",0),k.jc(1,"async"),k.jc(2,"async")),2&e&&k.oc("ngIf",k.uc(5,Pe,k.kc(1,1,t.adamConfig$),k.kc(2,3,t.disabled$)))},directives:[X.m,X.k,Z.a,X.l,Y.a,J.a,ee,te.a],pipes:[X.b,ne.d],styles:['.metadata-exists[_ngcontent-%COMP%]{color:#0088f4}.adam-browse-background-icon[_ngcontent-%COMP%]{padding:20px 5px 10px;min-width:100%;min-height:100%;text-align:center}.adam-browse-background-icon[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px}.adam-browse-background-image[_ngcontent-%COMP%]{display:flex!important;justify-content:center;align-items:center}.adam-background[_ngcontent-%COMP%]{z-index:20;position:absolute;top:0;left:0;font-size:13px;min-width:100%;max-width:100%;padding:2em 1em;text-align:center;line-height:150%;cursor:pointer}.adam-background[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .adam-tag[_ngcontent-%COMP%]{cursor:pointer}.adam-tag[_ngcontent-%COMP%]{font-size:large;position:absolute;right:-15px;top:50px;font-size:34px;width:34px;height:34px;z-index:30}.adam-back-folder-arrow[_ngcontent-%COMP%]{font-size:35px!important;top:13px;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.adam-link-button[_ngcontent-%COMP%]{left:4px;color:rgba(0,0,0,.9)}.adam-delete-button[_ngcontent-%COMP%], .adam-link-button[_ngcontent-%COMP%], .adam-rename-button[_ngcontent-%COMP%]{position:absolute;top:4px;font-size:24px;width:24px;height:24px}.adam-delete-button[_ngcontent-%COMP%], .adam-rename-button[_ngcontent-%COMP%]{right:4px;cursor:pointer;font-weight:700}.adam-delete-button[_ngcontent-%COMP%]:hover:not(.adam-button-disabled), .adam-link-button[_ngcontent-%COMP%]:hover:not(.adam-button-disabled), .adam-rename-button[_ngcontent-%COMP%]:hover:not(.adam-button-disabled){color:#0088f4}.adam-button-disabled[_ngcontent-%COMP%]{color:rgba(29,39,61,.24);cursor:default}.adam-rename-button[_ngcontent-%COMP%]{right:26px;font-size:22px;width:22px;height:22px}.dz-details[_ngcontent-%COMP%]{bottom:0}.dz-details[_ngcontent-%COMP%], .dz-image[_ngcontent-%COMP%]{cursor:pointer}.disable-select[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%], .disable-select[_ngcontent-%COMP%]   .dz-image[_ngcontent-%COMP%]{cursor:default}.disable-select[_ngcontent-%COMP%]   .adam-full-name[_ngcontent-%COMP%]{cursor:text}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]:hover   .adam-blur[_ngcontent-%COMP%]{transform:scale(1.05);-webkit-filter:blur(8px);filter:blur(8px)}.adam-short-label[_ngcontent-%COMP%]{cursor:text}.adam-short-label[_ngcontent-%COMP%], .adam-upload-label[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;left:0;right:0;bottom:10px}.adam-upload-label[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{font-size:19px;width:19px;height:19px}.adam-full-name[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.8);border-radius:3px;word-break:break-all;width:80%;max-height:3em;position:absolute;top:48%;left:50%;transform:translate(-50%,-50%);overflow-x:scroll;-ms-overflow-style:none;overflow:-moz-scrollbars-none;scrollbar-width:none}.adam-full-name[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.adam-full-name-area[_ngcontent-%COMP%]{height:60px;display:block}.adam-browse-background[_ngcontent-%COMP%]{background-color:#f5f5f5}.mce-ico[class*=" icon-"][_ngcontent-%COMP%]:before, .mce-ico[class^=icon-][_ngcontent-%COMP%]:before{margin-left:0}.dropzone[_ngcontent-%COMP%], .dropzone[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box;outline-color:#0069bf}.dropzone.dz-drag-hover[_ngcontent-%COMP%], .eav-dragging[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]{min-height:0;outline:2px dashed #0069bf;background:#fff;padding:0;border-radius:5px;transition:outline-color .5s}.dropzone.dz-clickable[_ngcontent-%COMP%]{cursor:pointer}.dropzone.dz-clickable[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.dropzone.dz-clickable[_ngcontent-%COMP%]   .dz-message[_ngcontent-%COMP%], .dropzone.dz-clickable[_ngcontent-%COMP%]   .dz-message[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:pointer}.dropzone.dz-started[_ngcontent-%COMP%]   .dz-message[_ngcontent-%COMP%]{display:none}.dropzone.dz-drag-hover[_ngcontent-%COMP%]{outline-color:#0087f7}.dropzone.dz-drag-hover[_ngcontent-%COMP%]   .dz-message[_ngcontent-%COMP%]{opacity:.5}.dropzone[_ngcontent-%COMP%]   .dz-message[_ngcontent-%COMP%]{text-align:center;margin:2em 0}.dropzone-previews[_ngcontent-%COMP%]{margin:5px -5px}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]{position:relative;display:inline-block;vertical-align:top;margin:5px;min-height:100px}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]:hover{z-index:1000}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-file-preview[_ngcontent-%COMP%]   .dz-image[_ngcontent-%COMP%]{border-radius:6px;background:#999;background:linear-gradient(180deg,#eee,#ddd)}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-file-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]{opacity:1}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-image-preview[_ngcontent-%COMP%]{background:#fff}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-image-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]{transition:opacity .2s linear}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-remove[_ngcontent-%COMP%]{font-size:14px;text-align:center;display:block;cursor:pointer;border:none}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-remove[_ngcontent-%COMP%]:hover{text-decoration:underline}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]:hover   .dz-details[_ngcontent-%COMP%]{opacity:1}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]{z-index:20;position:absolute;top:0;left:0;opacity:0;font-size:13px;min-width:100%;max-width:100%;padding:2em 1em;text-align:center;color:rgba(0,0,0,.9);line-height:150%}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]   .dz-size[_ngcontent-%COMP%]{margin-bottom:1em;font-size:16px}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]   .dz-filename[_ngcontent-%COMP%]{white-space:nowrap}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]   .dz-filename[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{border:1px solid hsla(0,0%,78.4%,.8);background-color:hsla(0,0%,100%,.8)}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]   .dz-filename[_ngcontent-%COMP%]:not(:hover){overflow:hidden;text-overflow:ellipsis}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]   .dz-filename[_ngcontent-%COMP%]:not(:hover)   span[_ngcontent-%COMP%]{border:1px solid transparent}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]   .dz-filename[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]   .dz-size[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.4);padding:0 .4em;border-radius:3px}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]:hover   .dz-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05);-webkit-filter:blur(8px);filter:blur(8px)}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-image[_ngcontent-%COMP%]{border-radius:6px;overflow:hidden;width:120px;height:120px;position:relative;display:block;z-index:10}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-success[_ngcontent-%COMP%]   .dz-success-mark[_ngcontent-%COMP%]{-webkit-animation:passing-through 3s cubic-bezier(.77,0,.175,1);animation:passing-through 3s cubic-bezier(.77,0,.175,1)}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-error[_ngcontent-%COMP%]   .dz-error-mark[_ngcontent-%COMP%]{opacity:1;-webkit-animation:slide-in 3s cubic-bezier(.77,0,.175,1);animation:slide-in 3s cubic-bezier(.77,0,.175,1)}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-error-mark[_ngcontent-%COMP%], .dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-success-mark[_ngcontent-%COMP%]{pointer-events:none;opacity:0;z-index:500;position:absolute;display:block;top:50%;left:50%;margin-left:-27px;margin-top:-27px}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-error-mark[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-success-mark[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block;width:54px;height:54px}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-processing[_ngcontent-%COMP%]   .dz-progress[_ngcontent-%COMP%]{opacity:1;transition:all .2s linear}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-complete[_ngcontent-%COMP%]   .dz-progress[_ngcontent-%COMP%]{opacity:0;transition:opacity .4s ease-in}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]:not(.dz-processing)   .dz-progress[_ngcontent-%COMP%]{-webkit-animation:pulse 6s ease infinite;animation:pulse 6s ease infinite}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-progress[_ngcontent-%COMP%]{opacity:1;z-index:1000;pointer-events:none;position:absolute;height:16px;left:50%;top:50%;margin-top:-8px;width:80px;margin-left:-40px;background:hsla(0,0%,100%,.9);-webkit-transform:scale(1);border-radius:8px;overflow:hidden}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-progress[_ngcontent-%COMP%]   .dz-upload[_ngcontent-%COMP%]{background:#333;background:linear-gradient(180deg,#666,#444);position:absolute;top:0;left:0;bottom:0;width:0;transition:width .3s ease-in-out}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-error[_ngcontent-%COMP%]   .dz-error-message[_ngcontent-%COMP%]{display:block}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-error[_ngcontent-%COMP%]:hover   .dz-error-message[_ngcontent-%COMP%]{opacity:1;pointer-events:auto}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-error-message[_ngcontent-%COMP%]{pointer-events:none;z-index:1000;position:absolute;display:block;display:none;opacity:0;transition:opacity .3s ease;border-radius:8px;font-size:13px;top:130px;left:-10px;width:140px;background:#be2626;background:linear-gradient(180deg,#be2626,#a92222);padding:.5em 1.2em;color:#fff}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-error-message[_ngcontent-%COMP%]:after{content:"";position:absolute;top:-6px;left:64px;width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:6px solid #be2626}'],data:{animation:[Object(W.n)("adamShowAnimate",[Object(W.k)("closed",Object(W.l)({height:"0",overflow:"hidden"})),Object(W.k)("open",Object(W.l)({height:"*",overflow:"hidden"})),Object(W.m)("closed => open",[Object(W.e)("300ms cubic-bezier(0.4, 0.0, 0.2, 1)")])])]},changeDetection:0}),e}(),Ve=n("obyE"),Ee=function(){function e(){}return e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.Kb({type:e,selectors:[["adam-hint"]],decls:18,vars:9,consts:[[1,"hint-box","u-border-radius-bottom","mat-caption","u-shadow-top"],[1,"hint-box__hint"],[1,"hint-box__sponsor"],["href","https://2sxc.org/help?tag=adam","target","_blank","tabindex","-1",1,"adam-link",3,"matTooltip"],["svgIcon","appleFilled"],["href","https://www.2sic.com","target","_blank","tabindex","-1"]],template:function(e,t){1&e&&(k.Rb(0,"mat-divider"),k.Wb(1,"div",0),k.Wb(2,"div",1),k.Qc(3),k.jc(4,"translate"),k.Vb(),k.Wb(5,"div",2),k.Wb(6,"a",3),k.jc(7,"translate"),k.Rb(8,"mat-icon",4),k.Wb(9,"span"),k.Qc(10,"Adam"),k.Vb(),k.Vb(),k.Qc(11," \xa0 "),k.Wb(12,"span"),k.Qc(13),k.jc(14,"translate"),k.Vb(),k.Qc(15," \xa0 "),k.Wb(16,"a",5),k.Qc(17,"2sic.com"),k.Vb(),k.Vb(),k.Vb()),2&e&&(k.Bb(3),k.Rc(k.kc(4,3,"Fields.Hyperlink.AdamFileManager.Hint")),k.Bb(3),k.oc("matTooltip",k.kc(7,5,"Fields.Hyperlink.AdamFileManager.SponsorTooltip")),k.Bb(7),k.Rc(k.kc(14,7,"Fields.Hyperlink.AdamFileManager.SponsorLine")))},directives:[Ve.a,Y.a,J.a],pipes:[ne.d],styles:[".hint-box[_ngcontent-%COMP%]{padding:2px 24px;background-color:#fff;color:rgba(29,39,61,.44);display:flex}.hint-box__hint[_ngcontent-%COMP%]{flex:1 1 auto}.hint-box__sponsor[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.adam-link[_ngcontent-%COMP%]{display:flex;align-items:center}.adam-link[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;line-height:14px}"],changeDetection:0}),e}(),$e=["fieldComponent"],Be=["invisibleClickable"],Le=function(e,t){return{"adam-browser-container--short u-hide-scrollbar":e,"u-display-none":t}},Fe=function(e){return{"u-display-none":e}},De=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.adamDisabled$=new o.a(!0),i}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.fullscreenAdam=this.config.field.inputType===V.a.HyperlinkLibrary},t.prototype.ngAfterViewInit=function(){var e=this;this.subscription.add(this.config.adam.getConfig$().subscribe((function(t){null!=t&&e.adamDisabled$.next(t.disabled)})))},t.prototype.ngOnDestroy=function(){this.adamDisabled$.complete(),e.prototype.ngOnDestroy.call(this)},t.prototype.openUpload=function(){this.invisibleClickableRef.nativeElement.click()},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["app-adam-attach-wrapper"]],viewQuery:function(e,t){var n;1&e&&(k.Lc($e,!0,k.O),k.Wc(Be,!0)),2&e&&(k.Cc(n=k.fc())&&(t.fieldComponent=n.first),k.Cc(n=k.fc())&&(t.invisibleClickableRef=n.first))},features:[k.yb],decls:13,vars:21,consts:[[1,"adam-dialog-container"],[1,"adam-dialog-content"],["fieldComponent",""],[1,"u-shadow-top",3,"config","group","ngClass","openUpload"],[3,"ngClass"],[1,"dropzone-previews"],["data-note","just a fake, invisible area for dropzone",1,"invisible-clickable"],["invisibleClickable",""],[1,"field-hints",3,"ngClass"]],template:function(e,t){1&e&&(k.Wb(0,"div",0),k.Wb(1,"div",1),k.Sb(2,null,2),k.Vb(),k.Wb(4,"adam-browser",3),k.ec("openUpload",(function(){return t.openUpload()})),k.jc(5,"async"),k.Vb(),k.Wb(6,"div",4),k.jc(7,"async"),k.Rb(8,"div",5),k.Rb(9,"span",6,7),k.Vb(),k.Rb(11,"adam-hint",8),k.jc(12,"async"),k.Vb()),2&e&&(k.Bb(4),k.oc("config",t.config)("group",t.group)("ngClass",k.uc(14,Le,!t.fullscreenAdam,k.kc(5,8,t.adamDisabled$))),k.Bb(2),k.Db("field-"+t.config.field.index),k.oc("ngClass",k.tc(17,Fe,k.kc(7,10,t.adamDisabled$))),k.Bb(5),k.oc("ngClass",k.tc(19,Fe,k.kc(12,12,t.adamDisabled$))))},directives:[je,X.k,Z.a,Ee],pipes:[X.b],styles:[".adam-browser-container--short[_ngcontent-%COMP%]{flex-shrink:0;max-height:45%;overflow-y:scroll}"],changeDetection:0}),t}(D),We=n("oi6A"),ze=["fieldComponent"],Ae=function(e){return{display:e}},Re=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.collapse$=new o.a(!0),i}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.prototype.ngOnDestroy=function(){this.collapse$.complete(),e.prototype.ngOnDestroy.call(this)},t.prototype.toggleCollapse=function(){this.collapse$.next(!this.collapse$.value)},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["app-collapsible-field-wrapper"]],viewQuery:function(e,t){var n;1&e&&k.Lc(ze,!0,k.O),2&e&&k.Cc(n=k.fc())&&(t.fieldComponent=n.first)},features:[k.yb],decls:14,vars:14,consts:[["fxLayout","row","fxLayoutAlign","start center",1,"mat-card-header-group-child"],["fxFlex","auto","fxLayoutAlign","start center",1,"mat-caption",3,"click"],["fxLayoutAlign","start center",1,"mat-caption","field-title"],[2,"padding-top","8px",3,"ngStyle"],["fieldComponent",""]],template:function(e,t){1&e&&(k.Wb(0,"div",0),k.Wb(1,"div",1),k.ec("click",(function(){return t.toggleCollapse()})),k.Wb(2,"div",2),k.Wb(3,"mat-icon"),k.Qc(4),k.jc(5,"async"),k.Vb(),k.Wb(6,"span"),k.Qc(7),k.jc(8,"async"),k.jc(9,"async"),k.Vb(),k.Vb(),k.Vb(),k.Vb(),k.Wb(10,"div",3),k.jc(11,"async"),k.Sb(12,null,4),k.Vb()),2&e&&(k.Bb(4),k.Sc(" ",k.kc(5,4,t.collapse$)?"keyboard_arrow_down":"keyboard_arrow_up",""),k.Bb(3),k.Tc("",k.kc(8,6,t.label$),"\xa0",k.kc(9,8,t.required$)?"*":"",""),k.Bb(3),k.oc("ngStyle",k.tc(12,Ae,k.kc(11,10,t.collapse$)?"none":"block")))},directives:[We.c,We.b,We.a,J.a,X.n,Z.c],pipes:[X.b],styles:[".mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;line-height:20px;margin-right:8px}.field-title[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0}),t}(D),Qe=n("qRWW"),Ge=n("DHBU"),Ne=n("ywpU"),Ue=n("C+g0"),qe=function(e){function t(t){return e.call(this,"ContentType",t)||this}return Object(i.d)(t,e),t.prototype.addContentTypes=function(e){var t=e.map((function(e){return Ue.a.create(e)}));this.addManyToCache(t)},t.prototype.getContentTypeById=function(e){return this.entities$.pipe(Object(w.a)((function(t){return t.find((function(t){return t.contentType.id===e}))})))},t.\u0275fac=function(e){return new(e||t)(k.ac(N.b))},t.\u0275prov=k.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(N.a),He=n("Bata"),Ke=n("F7GT"),Xe=n("DHAC"),Ze=n("CYhr");function Ye(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Ze.a;++t<n;)this.add(e[t])}Ye.prototype.add=Ye.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ye.prototype.has=function(e){return this.__data__.has(e)};var Je=Ye,et=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1},tt=function(e,t,n,i,o,a){var r=1&n,c=e.length,s=t.length;if(c!=s&&!(r&&s>c))return!1;var l=a.get(e);if(l&&a.get(t))return l==t;var d=-1,u=!0,p=2&n?new Je:void 0;for(a.set(e,t),a.set(t,e);++d<c;){var f=e[d],g=t[d];if(i)var b=r?i(g,f,d,t,e,a):i(f,g,d,e,t,a);if(void 0!==b){if(b)continue;u=!1;break}if(p){if(!et(t,(function(e,t){if(!p.has(t)&&(f===e||o(f,e,n,i,a)))return p.push(t)}))){u=!1;break}}else if(f!==g&&!o(f,g,n,i,a)){u=!1;break}}return a.delete(e),a.delete(t),u},nt=n("GAvS"),it=n("mY74"),ot=n("HVAe"),at=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n},rt=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},ct=nt.a?nt.a.prototype:void 0,st=ct?ct.valueOf:void 0,lt=n("BaCy"),dt=Object.prototype.hasOwnProperty,ut=n("EaxY"),pt=n("SEb4"),ft=n("TPB+"),gt=n("HuQ3"),bt="[object Object]",ht=Object.prototype.hasOwnProperty,mt=n("gfy7"),vt=function(e,t){return function e(t,n,i,o,a){return t===n||(null==t||null==n||!Object(mt.a)(t)&&!Object(mt.a)(n)?t!=t&&n!=n:function(e,t,n,i,o,a){var r=Object(pt.a)(e),c=Object(pt.a)(t),s=r?"[object Array]":Object(ut.a)(e),l=c?"[object Array]":Object(ut.a)(t),d=(s="[object Arguments]"==s?bt:s)==bt,u=(l="[object Arguments]"==l?bt:l)==bt,p=s==l;if(p&&Object(ft.a)(e)){if(!Object(ft.a)(t))return!1;r=!0,d=!1}if(p&&!d)return a||(a=new Xe.a),r||Object(gt.a)(e)?tt(e,t,n,i,o,a):function(e,t,n,i,o,a,r){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new it.a(e),new it.a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Object(ot.a)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var c=at;case"[object Set]":if(c||(c=rt),e.size!=t.size&&!(1&i))return!1;var s=r.get(e);if(s)return s==t;i|=2,r.set(e,t);var l=tt(c(e),c(t),i,o,a,r);return r.delete(e),l;case"[object Symbol]":if(st)return st.call(e)==st.call(t)}return!1}(e,t,s,n,i,o,a);if(!(1&n)){var f=d&&ht.call(e,"__wrapped__"),g=u&&ht.call(t,"__wrapped__");if(f||g){var b=f?e.value():e,h=g?t.value():t;return a||(a=new Xe.a),o(b,h,n,i,a)}}return!!p&&(a||(a=new Xe.a),function(e,t,n,i,o,a){var r=1&n,c=Object(lt.a)(e),s=c.length;if(s!=Object(lt.a)(t).length&&!r)return!1;for(var l=s;l--;){var d=c[l];if(!(r?d in t:dt.call(t,d)))return!1}var u=a.get(e);if(u&&a.get(t))return u==t;var p=!0;a.set(e,t),a.set(t,e);for(var f=r;++l<s;){var g=e[d=c[l]],b=t[d];if(i)var h=r?i(b,g,d,t,e,a):i(g,b,d,e,t,a);if(!(void 0===h?g===b||o(g,b,n,i,a):h)){p=!1;break}f||(f="constructor"==d)}if(p&&!f){var m=e.constructor,v=t.constructor;m!=v&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof v&&v instanceof v)&&(p=!1)}return a.delete(e),a.delete(t),p}(e,t,n,i,o,a))}(t,n,i,o,e,a))}(e,t)},yt=n("nwk6"),wt=n("BLjT"),Ct=n("3riI"),_t=function(){function e(){}return e.Translate="translate",e.DontTranslate="dontTranslate",e.MissingDefaultLangValue="missingDefaultLangValue",e.LinkReadOnly="linkReadOnly",e.LinkReadWrite="linkReadWrite",e.LinkCopyFrom="linkCopyFrom",e}(),Ot=function(){function e(){}return e.NoTranslate="NoTranslate",e.FromPrimary="FromPrimary",e.FromOther="FromOther",e.LinkReadOnly="LinkReadOnly",e.LinkShared="LinkShared",e}(),xt=n("+Isi"),kt=n("t4s+"),It=n("9HSk"),Mt=n("OeRG");function St(e,t){1&e&&k.Sb(0)}function Tt(e,t){1&e&&k.Sb(0)}function Pt(e,t){1&e&&k.Sb(0)}function jt(e,t){1&e&&k.Sb(0)}function Vt(e,t){1&e&&k.Sb(0)}var Et=function(e){return{"mat-list-item-focus":e}},$t=function(e){return{primary:e}};function Bt(e,t){if(1&e){var n=k.Xb();k.Wb(0,"mat-list-item",11),k.ec("click",(function(){k.Fc(n);var e=t.i18nKey;return k.ic(2).select(e)})),k.Wb(1,"mat-icon",12),k.Qc(2),k.Vb(),k.Wb(3,"div",13),k.Qc(4),k.jc(5,"translate"),k.Vb(),k.Wb(6,"div",14),k.Qc(7),k.jc(8,"translate"),k.Vb(),k.Vb()}if(2&e){var i=t.icon,o=t.link,a=t.i18nKey,r=k.ic().ngIf,c=k.ic();k.oc("ngClass",k.tc(10,Et,r.selected.linkType===o)),k.Bb(2),k.Rc(i),k.Bb(2),k.Sc(" ",k.lc(5,4,"LangMenu.Dialog."+a+".Title",k.tc(12,$t,c.dialogData.defaultLanguage)),""),k.Bb(3),k.Sc(" ",k.lc(8,7,"LangMenu.Dialog."+a+".Body",k.tc(14,$t,c.dialogData.defaultLanguage)),"")}}var Lt=function(e,t){return{"mat-list-item-focus":e,"mat-list-item--disabled":t}};function Ft(e,t){if(1&e){var n=k.Xb();k.Wb(0,"button",16),k.ec("click",(function(){k.Fc(n);var e=t.$implicit;return k.ic(3).selectLanguage(e.key)})),k.Wb(1,"mat-icon",12),k.Qc(2,"language"),k.Vb(),k.Qc(3),k.Vb()}if(2&e){var i=t.$implicit,o=k.ic(2).ngIf,a=k.ic();k.oc("disabled",a.isLanguageDisabled(i.key))("ngClass",k.uc(3,Lt,o.selected.language===i.key,a.isLanguageDisabled(i.key))),k.Bb(3),k.Sc(" ",i.key," ")}}function Dt(e,t){if(1&e&&(k.Wb(0,"div"),k.Wb(1,"div",2),k.Wb(2,"div",3),k.Qc(3),k.jc(4,"translate"),k.Vb(),k.Wb(5,"div",4),k.Qc(6),k.jc(7,"translate"),k.Vb(),k.Vb(),k.Wb(8,"mat-action-list"),k.Oc(9,Ft,4,6,"button",15),k.Vb(),k.Vb()),2&e){var n=k.ic().ngIf;k.Bb(3),k.Sc(" ",k.kc(4,3,n.i18nRoot+".Subtitle")," "),k.Bb(3),k.Sc(" ",k.kc(7,5,"LangMenu.Dialog.PickLanguageIntro")," "),k.Bb(3),k.oc("ngForOf",n.languages)}}var Wt=function(e){return{name:e}},zt=function(e,t){return{link:e,icon:"lock",i18nKey:t}},At=function(e,t){return{link:e,icon:"lock_open",i18nKey:t}},Rt=function(e,t){return{link:e,icon:"translate",i18nKey:t}},Qt=function(e,t){return{link:e,icon:"link",i18nKey:t}},Gt=function(e,t){return{link:e,icon:"share",i18nKey:t}};function Nt(e,t){if(1&e&&(k.Wb(0,"mat-card",1),k.Wb(1,"div",2),k.Wb(2,"div",3),k.Qc(3),k.jc(4,"translate"),k.Vb(),k.Wb(5,"div",4),k.Qc(6),k.jc(7,"translate"),k.Vb(),k.Vb(),k.Wb(8,"mat-nav-list",5),k.Oc(9,St,1,0,"ng-container",6),k.Oc(10,Tt,1,0,"ng-container",6),k.Oc(11,Pt,1,0,"ng-container",6),k.Oc(12,jt,1,0,"ng-container",6),k.Oc(13,Vt,1,0,"ng-container",6),k.Vb(),k.Oc(14,Bt,9,16,"ng-template",null,7,k.Pc),k.Oc(16,Dt,10,7,"div",8),k.Wb(17,"mat-dialog-actions",9),k.Wb(18,"button",10),k.Qc(19,"OK"),k.Vb(),k.Vb(),k.Vb()),2&e){var n=t.ngIf,i=k.Dc(15),o=k.ic();k.Bb(3),k.Sc(" ",k.lc(4,15,"LangMenu.Dialog.Title",k.tc(20,Wt,o.dialogData.attributeKey))," "),k.Bb(3),k.Sc(" ",k.kc(7,18,"LangMenu.Dialog.Intro")," "),k.Bb(3),k.oc("ngTemplateOutlet",i)("ngTemplateOutletContext",k.uc(22,zt,o.TranslationLinks.DontTranslate,o.I18nKeys.NoTranslate)),k.Bb(1),k.oc("ngTemplateOutlet",i)("ngTemplateOutletContext",k.uc(25,At,o.TranslationLinks.Translate,o.I18nKeys.FromPrimary)),k.Bb(1),k.oc("ngTemplateOutlet",i)("ngTemplateOutletContext",k.uc(28,Rt,o.TranslationLinks.LinkCopyFrom,o.I18nKeys.FromOther)),k.Bb(1),k.oc("ngTemplateOutlet",i)("ngTemplateOutletContext",k.uc(31,Qt,o.TranslationLinks.LinkReadOnly,o.I18nKeys.LinkReadOnly)),k.Bb(1),k.oc("ngTemplateOutlet",i)("ngTemplateOutletContext",k.uc(34,Gt,o.TranslationLinks.LinkReadWrite,o.I18nKeys.LinkShared)),k.Bb(3),k.oc("ngIf",n.showLanguages),k.Bb(2),k.oc("disabled",o.isOkDisabled(n.selected))("mat-dialog-close",n.selected)}}var Ut=function(e,t,n,i){return{languages:e,selected:t,showLanguages:n,i18nRoot:i}},qt=function(){function e(e,t,n){this.dialogData=e,this.languageService=t,this.languageInstanceService=n,this.TranslationLinks=_t,this.I18nKeys=Ot,this.selected$=new o.a(Object(i.a)({},this.dialogData)),this.showLanguages$=new o.a(""!==this.dialogData.language);var a=function(e){switch(e){case _t.Translate:return Ot.FromPrimary;case _t.DontTranslate:return Ot.NoTranslate;case _t.LinkReadOnly:return Ot.LinkReadOnly;case _t.LinkReadWrite:return Ot.LinkShared;case _t.LinkCopyFrom:return Ot.FromOther}}(this.dialogData.linkType);this.i18nRoot$=new o.a("LangMenu.Dialog."+a)}return e.prototype.ngOnInit=function(){this.languages$=Object(Ct.a)([this.languageService.entities$,this.languageInstanceService.getCurrentLanguage(this.dialogData.formId)]).pipe(Object(w.a)((function(e){var t=e[1];return e[0].filter((function(e){return e.key!==t}))})))},e.prototype.ngOnDestroy=function(){this.selected$.complete(),this.showLanguages$.complete(),this.i18nRoot$.complete()},e.prototype.select=function(e){var t=e!==Ot.FromPrimary&&e!==Ot.NoTranslate,n=Object(i.a)({},this.selected$.value);t||(n.language=""),n.linkType=function(e){switch(e){case Ot.FromPrimary:return _t.Translate;case Ot.NoTranslate:return _t.DontTranslate;case Ot.LinkReadOnly:return _t.LinkReadOnly;case Ot.LinkShared:return _t.LinkReadWrite;case Ot.FromOther:return _t.LinkCopyFrom}}(e),this.showLanguages$.next(t),this.selected$.next(n),this.i18nRoot$.next("LangMenu.Dialog."+e)},e.prototype.selectLanguage=function(e){this.selected$.next(Object(i.a)(Object(i.a)({},this.selected$.value),{language:e}))},e.prototype.isOkDisabled=function(e){return""===e.language&&e.linkType!==_t.Translate&&e.linkType!==_t.DontTranslate},e.prototype.isLanguageDisabled=function(e){return!this.dialogData.attributes||!Qe.a.isEditableTranslationExist(this.dialogData.attributes[this.dialogData.attributeKey],e,this.dialogData.defaultLanguage)},e.\u0275fac=function(t){return new(t||e)(k.Qb(wt.a),k.Qb(xt.a),k.Qb(Ne.a))},e.\u0275cmp=k.Kb({type:e,selectors:[["app-link-to-other-language"]],decls:5,vars:14,consts:[["class","link-other-lang-container u-hide-scrollbar",4,"ngIf"],[1,"link-other-lang-container","u-hide-scrollbar"],[1,"mat-card__header"],[1,"mat-card__title"],[1,"mat-card__description"],["toggle",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["item",""],[4,"ngIf"],["fxLayoutAlign","end center"],["mat-button","","color","accent",3,"disabled","mat-dialog-close"],[3,"ngClass","click"],["matListIcon","","color","accent"],["matLine","",1,"mat-list-item__title"],["matLine","",1,"mat-list-item__body"],["mat-list-item","",3,"disabled","ngClass","click",4,"ngFor","ngForOf"],["mat-list-item","",3,"disabled","ngClass","click"]],template:function(e,t){1&e&&(k.Oc(0,Nt,20,37,"mat-card",0),k.jc(1,"async"),k.jc(2,"async"),k.jc(3,"async"),k.jc(4,"async")),2&e&&k.oc("ngIf",k.wc(9,Ut,k.kc(1,1,t.languages$),k.kc(2,3,t.selected$),k.kc(3,5,t.showLanguages$),k.kc(4,7,t.i18nRoot$)))},directives:[X.m,He.a,kt.e,X.r,wt.c,We.b,It.a,wt.d,kt.c,X.k,Z.a,J.a,kt.b,Mt.i,kt.a,X.l],pipes:[X.b,ne.d],styles:[".link-other-lang-container[_ngcontent-%COMP%]{max-height:99vh;overflow-y:scroll}.mat-list-item-focus[_ngcontent-%COMP%]{background:rgba(0,0,0,.04)}.mat-list-item--disabled[_ngcontent-%COMP%]{cursor:default;color:rgba(29,39,61,.24)}"],changeDetection:0}),e}(),Ht=function(){function e(){}return e.calculateSharedInfoMessage=function(t,n){t=e.calculateShortDimensions(t,n);var i=e.calculateEditAndReadDimensions(t),o=i.editableDimensions,a=i.readOnlyDimensions,r="",c=o.length>0,s=a.length>0;return c&&s?r=o.join(", ")+", ("+a.join(", ")+")":c?r=o.join(", "):s&&(r="("+a.join(", ")+")"),r},e.calculateShortDimensions=function(e,t){var n={},i=t.slice(0,t.indexOf("-"));return n[i]=[],n[i].push(i),e.forEach((function(e){var t=e.slice(0,e.indexOf("-")).replace("~","");n[t]?n[t].push(e):(n[t]=[],n[t].push(e))})),e.map((function(e){var t=e.slice(0,e.indexOf("-")),i=t.replace("~","");return n[i].length>1?e:t}))},e.calculateEditAndReadDimensions=function(e){var t=[],n=[];return e.forEach((function(e){e.includes("~")?n.push(e.replace("~","")):t.push(e)})),{editableDimensions:t,readOnlyDimensions:n}},e}(),Kt=n("9LM3"),Xt=n("C8ME"),Zt=function(e){return{"menu-item-selected":e}};function Yt(e,t){if(1&e){var n=k.Xb();k.Wb(0,"div",2),k.Wb(1,"button",3),k.Wb(2,"span",2),k.Qc(3),k.jc(4,"translate"),k.Wb(5,"mat-icon",4),k.Qc(6,"translate"),k.Vb(),k.Vb(),k.Vb(),k.Wb(7,"mat-menu",5,6),k.Wb(9,"button",7),k.ec("click",(function(){return k.Fc(n),k.ic(3).translateAll()})),k.Qc(10),k.jc(11,"translate"),k.Vb(),k.Wb(12,"button",7),k.ec("click",(function(){return k.Fc(n),k.ic(3).dontTranslateAll()})),k.Qc(13),k.jc(14,"translate"),k.Vb(),k.Wb(15,"button",7),k.ec("click",(function(){return k.Fc(n),k.ic(3).openLinkToOtherLanguage()})),k.Qc(16),k.jc(17,"translate"),k.Vb(),k.Vb(),k.Vb()}if(2&e){var i=k.Dc(8),o=k.ic(2).ngIf,a=k.ic();k.Bb(1),k.oc("matMenuTriggerFor",i),k.Bb(2),k.Sc(" ",k.kc(4,9,"LangMenu.Translate").toUpperCase()," \xa0\xa0 "),k.Bb(4),k.oc("overlapTrigger",!0),k.Bb(2),k.oc("ngClass",k.tc(17,Zt,o.translationState.linkType===a.translationLinkConstants.Translate)),k.Bb(1),k.Sc(" ",k.kc(11,11,"LangMenu.TranslateAll")," "),k.Bb(2),k.oc("ngClass",k.tc(19,Zt,o.translationState.linkType===a.translationLinkConstants.DontTranslate)),k.Bb(1),k.Sc(" ",k.kc(14,13,"LangMenu.NoTranslateAll")," "),k.Bb(2),k.oc("ngClass",k.tc(21,Zt,""!==o.translationState.language)),k.Bb(1),k.Sc(" ",k.kc(17,15,"LangMenu.Link")," ")}}var Jt=function(e){return{"shared-languages--disabled":e}},en=function(e){return{languages:e}};function tn(e,t){if(1&e){var n=k.Xb();k.Wb(0,"div",2),k.Wb(1,"div",8),k.Wb(2,"div",9),k.Qc(3),k.jc(4,"translate"),k.Vb(),k.Wb(5,"button",10),k.Wb(6,"mat-icon",4),k.Qc(7,"translate"),k.Vb(),k.Vb(),k.Vb(),k.Wb(8,"mat-menu",5,11),k.Wb(10,"button",7),k.ec("click",(function(){k.Fc(n);var e=k.ic(3);return e.translateUnlink(e.config.field.name)})),k.Qc(11),k.jc(12,"translate"),k.Vb(),k.Wb(13,"button",7),k.ec("click",(function(){k.Fc(n);var e=k.ic(3);return e.linkToDefault(e.config.field.name)})),k.Qc(14),k.jc(15,"translate"),k.Vb(),k.Wb(16,"button",7),k.ec("click",(function(){return k.Fc(n),k.ic(3).openLinkToOtherLanguage()})),k.Qc(17),k.jc(18,"translate"),k.Vb(),k.Vb(),k.Vb()}if(2&e){var i=k.Dc(9),o=k.ic(2).ngIf,a=k.ic();k.Bb(1),k.oc("ngClass",a.getTranslationStateClass(o.translationState.linkType)),k.Bb(1),k.oc("ngClass",k.tc(21,Jt,o.disabled)),k.Bb(1),k.Sc(" ",o.infoMessageLabel?k.lc(4,12,o.infoMessageLabel,k.tc(23,en,o.infoMessage)):"",""),k.Bb(2),k.oc("disabled",a.fieldConfig.disableI18n||o.defaultLanguageMissingValue)("matMenuTriggerFor",i),k.Bb(3),k.oc("overlapTrigger",!0),k.Bb(2),k.oc("ngClass",k.tc(25,Zt,o.translationState.linkType===a.translationLinkConstants.Translate)),k.Bb(1),k.Sc(" ",k.kc(12,15,"LangMenu.Translate")," "),k.Bb(2),k.oc("ngClass",k.tc(27,Zt,o.translationState.linkType===a.translationLinkConstants.DontTranslate)),k.Bb(1),k.Sc(" ",k.kc(15,17,"LangMenu.NoTranslate")," "),k.Bb(2),k.oc("ngClass",k.tc(29,Zt,""!==o.translationState.language)),k.Bb(1),k.Sc(" ",k.kc(18,19,"LangMenu.Link")," ")}}function nn(e,t){if(1&e&&(k.Ub(0),k.Oc(1,Yt,18,23,"div",1),k.Oc(2,tn,19,31,"div",1),k.Tb()),2&e){var n=k.ic(2);k.Bb(1),k.oc("ngIf",n.fieldConfig.isParentGroup),k.Bb(1),k.oc("ngIf",!n.fieldConfig.isParentGroup)}}function on(e,t){if(1&e&&(k.Ub(0),k.Oc(1,nn,3,2,"ng-container",0),k.Tb()),2&e){var n=t.ngIf;k.Bb(1),k.oc("ngIf",n.currentLanguage!==n.defaultLanguage)}}var an=function(e,t,n,i,o,a,r){return{currentLanguage:e,defaultLanguage:t,translationState:n,disabled:i,defaultLanguageMissingValue:o,infoMessage:a,infoMessageLabel:r}},rn=function(){function e(e,t,n,i,a,r){this.dialog=e,this.languageInstanceService=t,this.itemService=n,this.inputTypeService=i,this.contentTypeService=a,this.eavService=r,this.translationLinkConstants=_t,this.currentLanguage="",this.defaultLanguage="",this.defaultLanguageMissingValue$=new o.a(!1),this.headerGroupSlotIsEmpty=!1,this.translationState$=new o.a({formId:null,linkType:"",language:""}),this.infoMessage$=new o.a(""),this.infoMessageLabel$=new o.a(""),this.subscription=new E.a}return e.prototype.ngOnInit=function(){var e=this;this.fieldConfig=this.config.field,this.control=this.group.controls[this.config.field.name],this.disabled$=this.fieldConfig.isParentGroup?Object(m.a)(!1):this.eavService.formDisabledChange$.asObservable().pipe(Object(I.a)((function(t){return t.formId===e.config.form.formId&&t.entityGuid===e.config.entity.entityGuid})),Object(w.a)((function(t){return e.control.disabled})),Object($.a)(this.control.disabled),Object(B.a)()),this.currentLanguage$=this.languageInstanceService.getCurrentLanguage(this.config.form.formId),this.defaultLanguage$=this.languageInstanceService.getDefaultLanguage(this.config.form.formId),this.attributes$=this.itemService.selectAttributesByEntityId(this.config.entity.entityId,this.config.entity.entityGuid),this.subscribeToAttributeValues(),this.subscribeMenuChange(),this.subscribeToItemFromStore(),this.subscribeToContentTypeFromStore(),this.subscribeToCurrentLanguageFromStore(),this.subscribeToDefaultLanguageFromStore(),this.subscribeToEntityHeaderFromStore()},e.prototype.ngOnChanges=function(e){null!=e.toggleTranslateField&&this.currentLanguage!==this.defaultLanguage&&this.control.disabled&&this.translateUnlink(this.config.field.name)},e.prototype.ngOnDestroy=function(){this.defaultLanguageMissingValue$.complete(),this.translationState$.complete(),this.infoMessage$.complete(),this.infoMessageLabel$.complete(),this.subscription.unsubscribe()},e.prototype.openLinkToOtherLanguage=function(){var e=this,t=this.dialog.open(qt,{panelClass:"c-link-to-other-language",autoFocus:!1,width:"350px",data:{formId:this.config.form.formId,linkType:this.translationState$.value.linkType,language:this.translationState$.value.language,defaultLanguage:this.defaultLanguage,attributes:this.attributes,attributeKey:this.config.field.name}});t.keydownEvents().subscribe((function(e){83===e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&e.preventDefault()})),t.afterClosed().subscribe((function(t){t&&e.triggerTranslation(t)}))},e.prototype.translateUnlink=function(e){if(!this.isTranslateDisabled(e)){this.itemService.removeItemAttributeDimension(this.config.entity.entityId,e,this.currentLanguage,this.config.entity.entityGuid);var t=Qe.a.getValueTranslation(this.attributes[e],this.defaultLanguage,this.defaultLanguage);if(t){var n=yt.a.getFieldType(this.config,e);this.itemService.addAttributeValue(this.config.entity.entityId,e,t.value,this.currentLanguage,!1,this.config.entity.entityGuid,n)}else Object(P.a)(this.currentLanguage+": Cant copy value from "+this.defaultLanguage+" because that value does not exist.");this.refreshControlConfig(e)}},e.prototype.linkToDefault=function(e){this.isTranslateDisabled(e)||(this.itemService.removeItemAttributeDimension(this.config.entity.entityId,e,this.currentLanguage,this.config.entity.entityGuid),this.refreshControlConfig(e))},e.prototype.translateAll=function(){var e=this;this.setTranslationState(_t.Translate,""),Object.keys(this.attributes).forEach((function(t){e.translateUnlink(t)})),this.languageInstanceService.triggerLocalizationWrapperMenuChange()},e.prototype.dontTranslateAll=function(){var e=this;this.setTranslationState(_t.DontTranslate,""),Object.keys(this.attributes).forEach((function(t){e.linkToDefault(t)})),this.languageInstanceService.triggerLocalizationWrapperMenuChange()},e.prototype.copyFromAll=function(e){var t=this;this.setTranslationState(_t.LinkCopyFrom,e),Object.keys(this.attributes).forEach((function(n){t.copyFrom(e,n)})),this.languageInstanceService.triggerLocalizationWrapperMenuChange()},e.prototype.copyFrom=function(e,t){if(!this.isTranslateDisabled(t)){var n=Qe.a.getValueTranslation(this.attributes[t],e,this.defaultLanguage);n?this.attributes&&Qe.a.isEditableOrReadonlyTranslationExist(this.attributes[t],this.currentLanguage,this.defaultLanguage)?this.itemService.updateItemAttributeValue(this.config.entity.entityId,t,n.value,this.currentLanguage,this.defaultLanguage,!1,this.config.entity.entityGuid):this.itemService.addAttributeValue(this.config.entity.entityId,t,n.value,this.currentLanguage,!1,this.config.entity.entityGuid,this.config.field.type):Object(P.a)(this.currentLanguage+": Cant copy value from "+e+" because that value does not exist."),this.refreshControlConfig(t)}},e.prototype.linkReadOnlyAll=function(e){var t=this;this.setTranslationState(_t.LinkReadOnly,e),Object.keys(this.attributes).forEach((function(n){t.linkReadOnly(e,n)})),this.languageInstanceService.triggerLocalizationWrapperMenuChange()},e.prototype.linkReadOnly=function(e,t){this.isTranslateDisabled(t)||(this.setTranslationState(_t.LinkReadOnly,e),this.itemService.removeItemAttributeDimension(this.config.entity.entityId,t,this.currentLanguage,this.config.entity.entityGuid),this.itemService.addItemAttributeDimension(this.config.entity.entityId,t,this.currentLanguage,e,this.defaultLanguage,!0,this.config.entity.entityGuid),this.refreshControlConfig(t))},e.prototype.linkReadWriteAll=function(e){var t=this;this.setTranslationState(_t.LinkReadWrite,e),Object.keys(this.attributes).forEach((function(n){t.linkReadWrite(e,n)})),this.languageInstanceService.triggerLocalizationWrapperMenuChange()},e.prototype.linkReadWrite=function(e,t){this.isTranslateDisabled(t)||(this.setTranslationState(_t.LinkReadWrite,e),this.itemService.removeItemAttributeDimension(this.config.entity.entityId,t,this.currentLanguage,this.config.entity.entityGuid),this.itemService.addItemAttributeDimension(this.config.entity.entityId,t,this.currentLanguage,e,this.defaultLanguage,!1,this.config.entity.entityGuid),this.refreshControlConfig(t))},e.prototype.getTranslationStateClass=function(e){switch(e){case _t.MissingDefaultLangValue:return"eav-localization-missing-default-lang-value";case _t.Translate:case _t.LinkCopyFrom:return"eav-localization-translate";case _t.DontTranslate:return"";case _t.LinkReadOnly:return"eav-localization-link-read-only";case _t.LinkReadWrite:return"eav-localization-link-read-write";default:return""}},e.prototype.refreshControlConfig=function(e){this.fieldConfig.isParentGroup||(this.setControlDisable(this.attributes[e],e,this.currentLanguage,this.defaultLanguage),this.readTranslationState(this.attributes[e],e,this.currentLanguage,this.defaultLanguage),this.setInfoMessage(this.attributes[e],e,this.currentLanguage,this.defaultLanguage))},e.prototype.triggerTranslation=function(e){if(!vt(this.translationState$.value,e))switch(e.linkType){case _t.Translate:this.fieldConfig.isParentGroup?this.translateAll():this.translateUnlink(this.config.field.name);break;case _t.DontTranslate:this.fieldConfig.isParentGroup?this.dontTranslateAll():this.linkToDefault(this.config.field.name);break;case _t.LinkReadOnly:this.fieldConfig.isParentGroup?this.linkReadOnlyAll(e.language):this.linkReadOnly(e.language,this.config.field.name);break;case _t.LinkReadWrite:this.fieldConfig.isParentGroup?this.linkReadWriteAll(e.language):this.linkReadWrite(e.language,this.config.field.name);break;case _t.LinkCopyFrom:this.fieldConfig.isParentGroup?this.copyFromAll(e.language):this.copyFrom(e.language,this.config.field.name)}},e.prototype.setTranslationState=function(e,t){var n=Object(i.a)(Object(i.a)({},this.translationState$.value),{linkType:e,language:t});this.translationState$.next(n)},e.prototype.setControlDisable=function(e,t,n,i){this.config.field.disabled||(this.headerGroupSlotIsEmpty?(this.group.controls[t].disable({emitEvent:!1}),this.eavService.formDisabledChange$.next({formId:this.config.form.formId,entityGuid:this.config.entity.entityGuid})):n===i?(this.group.controls[t].enable({emitEvent:!1}),this.eavService.formDisabledChange$.next({formId:this.config.form.formId,entityGuid:this.config.entity.entityGuid})):Qe.a.translationExistsInDefault(e,i)?(this.defaultLanguageMissingValue$.next(!1),this.isTranslateDisabled(t)?(this.group.controls[t].disable({emitEvent:!1}),this.eavService.formDisabledChange$.next({formId:this.config.form.formId,entityGuid:this.config.entity.entityGuid})):Qe.a.isEditableTranslationExist(e,n,i)?(this.group.controls[t].enable({emitEvent:!1}),this.eavService.formDisabledChange$.next({formId:this.config.form.formId,entityGuid:this.config.entity.entityGuid})):(Qe.a.isReadonlyTranslationExist(e,n),this.group.controls[t].disable({emitEvent:!1}),this.eavService.formDisabledChange$.next({formId:this.config.form.formId,entityGuid:this.config.entity.entityGuid}))):(this.group.controls[t].disable({emitEvent:!1}),this.eavService.formDisabledChange$.next({formId:this.config.form.formId,entityGuid:this.config.entity.entityGuid}),this.defaultLanguageMissingValue$.next(!0)))},e.prototype.translateAllConfiguration=function(){var e,t=Qe.a.translateSettings(this.config.field.fullSettings,this.currentLanguage,this.defaultLanguage);this.config.field.settings=t,this.config.field.label=this.config.field.settings.Name||null,this.config.field.validation=L.a.getValidations(this.config.field.settings),this.config.field.required=L.a.isRequired(this.config.field.settings),null===(e=this.config.field.settings$)||void 0===e||e.next(t)},e.prototype.subscribeToCurrentLanguageFromStore=function(){var e=this;this.subscription.add(this.currentLanguage$.subscribe((function(t){e.currentLanguage=t,e.translateAllConfiguration(),e.refreshControlConfig(e.config.field.name)})))},e.prototype.subscribeToDefaultLanguageFromStore=function(){var e=this;this.subscription.add(this.defaultLanguage$.subscribe((function(t){e.defaultLanguage=t,e.translateAllConfiguration(),e.refreshControlConfig(e.config.field.name)})))},e.prototype.subscribeToAttributeValues=function(){var e=this;this.subscription.add(this.attributes$.subscribe((function(t){e.attributes=t})))},e.prototype.subscribeToEntityHeaderFromStore=function(){var e=this;this.config.entity.header.Group&&this.config.entity.header.Group.SlotCanBeEmpty&&this.subscription.add(this.itemService.selectHeaderByEntityId(this.config.entity.entityId,this.config.entity.entityGuid).subscribe((function(t){t.Group&&!e.fieldConfig.isParentGroup&&(e.headerGroupSlotIsEmpty=t.Group.SlotIsEmpty,e.setControlDisable(e.attributes[e.config.field.name],e.config.field.name,e.currentLanguage,e.defaultLanguage))})))},e.prototype.subscribeToItemFromStore=function(){var e=this;this.subscription.add(this.itemService.selectItemById(this.config.entity.entityId).subscribe((function(t){e.item=t})))},e.prototype.subscribeToContentTypeFromStore=function(){var e=this;this.subscription.add(this.contentTypeService.getContentTypeById(null===this.item.entity.type?this.item.header.ContentTypeName:this.item.entity.type.id).subscribe((function(t){e.contentType=t})))},e.prototype.isTranslateDisabled=function(e){if(!Qe.a.translationExistsInDefault(this.attributes[e],this.defaultLanguage))return!0;var t=this.contentType.contentType.attributes.find((function(t){return t.name===e}));if(null==t)return!1;var n=yt.a.calculateInputType(t,this.inputTypeService);return Qe.a.isI18nDisabled(this.inputTypeService,n,t.settings)},e.prototype.readTranslationState=function(e,t,n,i){if(Qe.a.translationExistsInDefault(e,i))if(this.isTranslateDisabled(t))this.setTranslationState(_t.DontTranslate,"");else if(Qe.a.isEditableTranslationExist(e,n,i)){var o=Qe.a.getValueTranslation(e,n,i).dimensions.filter((function(e){return e.value!==n}));o.length>0?this.setTranslationState(_t.LinkReadWrite,o[0].value):this.setTranslationState(_t.Translate,"")}else if(Qe.a.isReadonlyTranslationExist(e,n)){var a=Qe.a.getValueTranslation(e,n,i).dimensions.filter((function(e){return e.value!==n}));this.setTranslationState(_t.LinkReadOnly,a[0].value)}else this.setTranslationState(_t.DontTranslate,"");else this.setTranslationState(_t.MissingDefaultLangValue,"")},e.prototype.subscribeMenuChange=function(){var e=this;this.subscription.add(this.languageInstanceService.localizationWrapperMenuChange$.subscribe((function(t){e.fieldConfig.isParentGroup||e.refreshControlConfig(e.config.field.name)})))},e.prototype.setInfoMessage=function(e,t,n,i){if(this.isTranslateDisabled(t))return this.infoMessage$.next(""),void this.infoMessageLabel$.next("LangMenu.InAllLanguages");if(!Qe.a.translationExistsInDefault(e,i))return this.infoMessage$.next(i),void this.infoMessageLabel$.next("LangMenu.MissingDefaultLangValue");var o=Qe.a.isEditableTranslationExist(e,n,i),a=Qe.a.isReadonlyTranslationExist(e,n);if(o||a){var r=Qe.a.getValueTranslation(e,n,i).dimensions.map((function(e){return e.value}));(r=r.filter((function(e){return!e.includes(n)}))).length>0?(this.infoMessage$.next(Ht.calculateSharedInfoMessage(r,n)),o?this.infoMessageLabel$.next("LangMenu.In"):a&&this.infoMessageLabel$.next("LangMenu.From")):(this.infoMessage$.next(""),this.infoMessageLabel$.next(""))}else this.infoMessage$.next(""),this.infoMessageLabel$.next("LangMenu.UseDefault")},e.\u0275fac=function(t){return new(t||e)(k.Qb(wt.b),k.Qb(Ne.a),k.Qb(Ge.a),k.Qb(Kt.a),k.Qb(qe),k.Qb(j.a))},e.\u0275cmp=k.Kb({type:e,selectors:[["app-translate-group-menu"]],inputs:{config:"config",group:"group",toggleTranslateField:"toggleTranslateField"},features:[k.zb],decls:8,vars:23,consts:[[4,"ngIf"],["fxLayoutAlign","end center",4,"ngIf"],["fxLayoutAlign","end center"],["mat-button","","fxLayoutAlign","end center",3,"matMenuTriggerFor"],[1,"translate-icon"],[3,"overlapTrigger"],["rootMenu","matMenu"],["mat-menu-item","",3,"ngClass","click"],["fxLayoutAlign","end center",1,"shared-languages-container",3,"ngClass"],[1,"shared-languages","mat-caption",3,"ngClass"],["mat-icon-button","",3,"disabled","matMenuTriggerFor"],["rootMenu2","matMenu"]],template:function(e,t){1&e&&(k.Oc(0,on,2,1,"ng-container",0),k.jc(1,"async"),k.jc(2,"async"),k.jc(3,"async"),k.jc(4,"async"),k.jc(5,"async"),k.jc(6,"async"),k.jc(7,"async")),2&e&&k.oc("ngIf",k.zc(15,an,k.kc(1,1,t.currentLanguage$),k.kc(2,3,t.defaultLanguage$),k.kc(3,5,t.translationState$),k.kc(4,7,t.disabled$),k.kc(5,9,t.defaultLanguageMissingValue$),k.kc(6,11,t.infoMessage$),k.kc(7,13,t.infoMessageLabel$)))},directives:[X.m,We.b,It.a,Xt.c,J.a,Xt.d,Xt.a,X.k,Z.a],pipes:[X.b,ne.d],styles:[".menu-item-selected[_ngcontent-%COMP%]{background:rgba(0,0,0,.04)}.eav-localization-lock-open[_ngcontent-%COMP%]{color:green}.eav-localization-missing-default-lang-value[_ngcontent-%COMP%]{color:red}.eav-localization-translate[_ngcontent-%COMP%]{color:green}.eav-localization-link-read-only[_ngcontent-%COMP%], .eav-localization-link-read-write[_ngcontent-%COMP%]{color:#00f}.shared-languages[_ngcontent-%COMP%]{position:relative;left:-6px;top:-1px;padding:0 4px 0 6px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-height:16px;cursor:default;color:rgba(29,39,61,.44)}.shared-languages--disabled[_ngcontent-%COMP%]{color:rgba(29,39,61,.24)}.translate-icon[_ngcontent-%COMP%]{font-size:20px;height:20px;width:20px;line-height:20px}"],changeDetection:0}),e}(),cn=function(){function e(e,t){this.zone=t,this.target="_blank",this.element=e.nativeElement}return e.prototype.ngOnInit=function(){var e=this;this.zone.runOutsideAngular((function(){e.observer=new MutationObserver((function(t){"A"===e.element.tagName&&(o=e.element).target!==e.target&&(o.target=e.target);for(var n=e.element.getElementsByTagName("a"),i=0;i<n.length;i++){var o;(o=n[i]).target!==e.target&&(o.target=e.target)}})),e.observer.observe(e.element,{childList:!0,subtree:!0})}))},e.prototype.ngOnDestroy=function(){var e=this;this.zone.runOutsideAngular((function(){e.observer.disconnect()}))},e.\u0275fac=function(t){return new(t||e)(k.Qb(k.l),k.Qb(k.z))},e.\u0275dir=k.Lb({type:e,selectors:[["","appChangeAnchorTarget",""]]}),e}(),sn=n("KSFr"),ln=["fieldComponent"];function dn(e,t){if(1&e){var n=k.Xb();k.Wb(0,"mat-slide-toggle",14),k.ec("change",(function(){return k.Fc(n),k.ic(2).toggleSlotIsEmpty()})),k.jc(1,"translate"),k.Vb()}if(2&e){var i=k.ic().ngIf;k.oc("checked",!i.slotIsEmpty)("disabled",i.currentLanguage!==i.defaultLanguage)("matTooltip",k.kc(1,4,i.slotIsEmpty?"ItemCard.SlotUsedFalse":"ItemCard.SlotUsedTrue"))("matTooltipDisabled",i.currentLanguage!==i.defaultLanguage)}}function un(e,t){if(1&e&&k.Rb(0,"app-translate-group-menu",15),2&e){var n=k.ic(2);k.oc("config",n.config)("group",n.group)}}function pn(e,t){if(1&e){var n=k.Xb();k.Wb(0,"div",8),k.Wb(1,"div",9),k.ec("click",(function(){return k.Fc(n),k.ic().toggleCollapse()})),k.Wb(2,"div",10),k.Wb(3,"mat-icon"),k.Qc(4),k.Vb(),k.Wb(5,"span",11),k.Qc(6),k.jc(7,"translate"),k.Vb(),k.Vb(),k.Vb(),k.Oc(8,dn,2,6,"mat-slide-toggle",12),k.Oc(9,un,1,2,"app-translate-group-menu",13),k.Vb()}if(2&e){var i=t.ngIf,o=k.ic();k.oc("ngClass",o.fieldConfig.isParentGroup?"mat-card-header-group-parent":"mat-card-header-group-child"),k.Bb(2),k.oc("ngClass",o.fieldConfig.isParentGroup?"mat-display-1":"mat-body-1"),k.Bb(2),k.Sc(" ",i.collapse?"keyboard_arrow_down":"keyboard_arrow_up"," "),k.Bb(2),k.Sc(" ",i.itemTitle||k.kc(7,6,"ItemCard.DefaultTitle")," "),k.Bb(2),k.oc("ngIf",i.slotCanBeEmpty),k.Bb(1),k.oc("ngIf",o.fieldConfig.isParentGroup)}}function fn(e,t){if(1&e&&(k.Wb(0,"div",16),k.Rb(1,"div",17),k.jc(2,"safeHtml"),k.jc(3,"async"),k.Vb()),2&e){var n=k.ic();k.Bb(1),k.oc("innerHtml",k.kc(2,1,k.kc(3,3,n.description$)),k.Gc)}}var gn=function(e,t,n,i,o,a){return{collapse:e,itemTitle:t,currentLanguage:n,defaultLanguage:i,slotCanBeEmpty:o,slotIsEmpty:a}},bn=function(e){return{display:e}},hn=function(){function e(e,t,n){this.itemService=e,this.languageInstanceService=t,this.contentTypeService=n,this.collapse$=new o.a(!1),this.subscription=new E.a}return e.prototype.ngOnInit=function(){var e=this;this.fieldConfig=this.config.field,this.header$=this.itemService.selectHeaderByEntityId(this.config.entity.entityId,this.config.entity.entityGuid),this.collapse$.next(this.fieldConfig.settings$.value.DefaultCollapsed||!1),this.currentLanguage$=this.languageInstanceService.getCurrentLanguage(this.config.form.formId),this.defaultLanguage$=this.languageInstanceService.getDefaultLanguage(this.config.form.formId),this.slotCanBeEmpty$=this.header$.pipe(Object(w.a)((function(e){var t;return(null===(t=null==e?void 0:e.Group)||void 0===t?void 0:t.SlotCanBeEmpty)||!1}))),this.slotIsEmpty$=this.header$.pipe(Object(w.a)((function(e){var t;return(null===(t=null==e?void 0:e.Group)||void 0===t?void 0:t.SlotIsEmpty)||!1}))),this.itemTitle$=this.fieldConfig.isParentGroup?this.currentLanguage$.pipe(Object(w.a)((function(t){var n,i,o,a;e.contentTypeService.getContentTypeById(e.config.entity.contentTypeId).pipe(Object(v.a)(1)).subscribe((function(e){i=e})),e.defaultLanguage$.pipe(Object(v.a)(1)).subscribe((function(e){o=e}));try{var r=i.contentType.metadata.find((function(e){return"ContentType"===e.type.name||"xx ContentType"===e.type.name}));r&&(a=null===(n=Qe.a.getValueOrDefault(r.attributes.Label,t,o))||void 0===n?void 0:n.value),a=a||i.contentType.name}catch(c){a=i.contentType.name}return a}))):this.fieldConfig.settings$.pipe(Object(w.a)((function(e){return e.Name}))),this.description$=this.fieldConfig.settings$.pipe(Object(w.a)((function(t){return e.fieldConfig.isParentGroup?null!=t.EditInstructions?t.EditInstructions:"":null!=t.Notes?t.Notes:""}))),this.subscription.add(this.currentLanguage$.subscribe((function(t){var n;e.defaultLanguage$.pipe(Object(v.a)(1)).subscribe((function(e){n=e})),e.translateAllConfiguration(t,n)})))},e.prototype.ngOnDestroy=function(){this.collapse$.complete(),this.subscription.unsubscribe()},e.prototype.toggleCollapse=function(){this.collapse$.next(!this.collapse$.value)},e.prototype.toggleSlotIsEmpty=function(){var e;this.header$.pipe(Object(v.a)(1)).subscribe((function(t){e=t}));var t=Object(i.a)(Object(i.a)({},e),{Group:Object(i.a)(Object(i.a)({},e.Group),{SlotIsEmpty:!e.Group.SlotIsEmpty})});this.itemService.updateItemHeader(this.config.entity.entityId,this.config.entity.entityGuid,t)},e.prototype.translateAllConfiguration=function(e,t){var n,i=Qe.a.translateSettings(this.fieldConfig.fullSettings,e,t);this.fieldConfig.settings=i,this.fieldConfig.label=this.fieldConfig.settings.Name||null,this.fieldConfig.validation=L.a.getValidations(this.fieldConfig.settings),this.fieldConfig.required=L.a.isRequired(this.fieldConfig.settings),null===(n=this.config.field.settings$)||void 0===n||n.next(i)},e.\u0275fac=function(t){return new(t||e)(k.Qb(Ge.a),k.Qb(Ne.a),k.Qb(qe))},e.\u0275cmp=k.Kb({type:e,selectors:[["app-collapsible-wrapper"]],viewQuery:function(e,t){var n;1&e&&k.Lc(ln,!0,k.O),2&e&&k.Cc(n=k.fc())&&(t.fieldComponent=n.first)},inputs:{config:"config",group:"group"},decls:17,vars:30,consts:[[1,"shadow-bottom-z-1",3,"ngClass"],["fxLayout","row","fxLayoutAlign","start center",3,"ngClass",4,"ngIf"],[3,"ngStyle","ngClass"],[1,"mdc-layout-grid"],[1,"mdc-layout-grid__inner"],["class","mdc-layout-grid__cell--span-12 mat-body-1","align","start",4,"ngIf"],[1,"mdc-layout-grid__cell--span-12"],["fieldComponent",""],["fxLayout","row","fxLayoutAlign","start center",3,"ngClass"],["fxFlex","auto","fxLayoutAlign","start center",3,"click"],["fxLayoutAlign","start center",1,"mat-card-title-group",3,"ngClass"],[1,"title"],["fxLayoutAlign","start center",3,"checked","disabled","matTooltip","matTooltipDisabled","change",4,"ngIf"],["fxLayoutAlign","end center",3,"config","group",4,"ngIf"],["fxLayoutAlign","start center",3,"checked","disabled","matTooltip","matTooltipDisabled","change"],["fxLayoutAlign","end center",3,"config","group"],["align","start",1,"mdc-layout-grid__cell--span-12","mat-body-1"],["appChangeAnchorTarget","",1,"description",3,"innerHtml"]],template:function(e,t){1&e&&(k.Wb(0,"mat-card",0),k.Oc(1,pn,10,8,"div",1),k.jc(2,"async"),k.jc(3,"async"),k.jc(4,"async"),k.jc(5,"async"),k.jc(6,"async"),k.jc(7,"async"),k.Wb(8,"mat-card-content",2),k.jc(9,"async"),k.Wb(10,"div",3),k.Wb(11,"div",4),k.Oc(12,fn,4,5,"div",5),k.jc(13,"async"),k.Wb(14,"div",6),k.Sb(15,null,7),k.Vb(),k.Vb(),k.Vb(),k.Vb(),k.Vb()),2&e&&(k.oc("ngClass",t.fieldConfig.isParentGroup?"mat-card-group-parent":"mat-card-group-child"),k.Bb(1),k.oc("ngIf",k.yc(21,gn,k.kc(2,5,t.collapse$),k.kc(3,7,t.itemTitle$),k.kc(4,9,t.currentLanguage$),k.kc(5,11,t.defaultLanguage$),k.kc(6,13,t.slotCanBeEmpty$),k.kc(7,15,t.slotIsEmpty$))),k.Bb(7),k.oc("ngStyle",k.tc(28,bn,k.kc(9,17,t.collapse$)?"none":"block"))("ngClass",t.fieldConfig.isParentGroup?"mat-card-content-group-parent":"mat-card-content-group-child"),k.Bb(4),k.oc("ngIf",k.kc(13,19,t.description$)))},directives:[He.a,X.k,Z.a,X.m,He.b,X.n,Z.c,We.c,We.b,We.a,J.a,Ke.a,Y.a,rn,cn],pipes:[X.b,ne.d,sn.a],styles:[".mat-card-group-parent[_ngcontent-%COMP%]{padding:0;margin:0;border-radius:8px}@media (max-width:600px){.mat-card-group-parent[_ngcontent-%COMP%]{border-radius:4px}}.mat-card-group-child[_ngcontent-%COMP%]{padding:0;margin:0 0 8px;border-radius:8px}.mat-card-header-group-parent[_ngcontent-%COMP%]{padding:24px 32px;border-radius:8px;height:68px}.mat-card-header-group-parent[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-weight:400}.mat-card-header-group-child[_ngcontent-%COMP%]{padding:20px 32px;border-radius:8px}.mat-card-header-group-child[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-weight:400}.mat-card-content-group-parent[_ngcontent-%COMP%]{border-radius:8px;padding-bottom:0}.mat-card-content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:14px;padding-left:16px;padding-right:16px}.mat-card-title-group[_ngcontent-%COMP%]{margin:0;cursor:pointer;line-height:20px;color:#0088f4}.mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;line-height:20px!important;margin-right:6px}.mdc-layout-grid[_ngcontent-%COMP%]{padding:0 16px 16px}"],changeDetection:0}),e}(),mn=n("4RZX"),vn=function(){return function(e,t,n){this.acceptedFiles=null,this.maxFiles=1e3,this.parallelUploads=1e3,this.autoReset=null,this.errorReset=null,this.cancelReset=null,this.maxFilesize=1e4,this.paramName="uploadfile",this.maxThumbnailFilesize=10,this.dictDefaultMessage="",this.addRemoveLinks=!1,this.previewsContainer=".dropzone-previews",this.clickable=".dropzone-previews",this.disabled=e,this.url=t,this.headers=n}}(),yn=["fieldComponent"],wn=function(e){return{"dropzone-disabled":e}},Cn=function(e){function t(t,n,i,a){var r=e.call(this,t,n)||this;return r.dnnContext=i,r.zone=a,r.dropzoneConfig$=new o.a(null),r.eavConfig=t.getEavConfiguration(),r}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.dropzoneDisabled$=Object(Ct.a)([this.disabled$,this.dropzoneConfig$]).pipe(Object(w.a)((function(e){var t=e[1];return e[0]||null==t||t.disabled}))),this.config.dropzone={setConfig:function(e){t.zone.run((function(){t.setConfig(e)}))},getConfig:function(){return t.dropzoneConfig$.value},getConfig$:function(){return t.dropzoneConfig$.asObservable()},uploadFile:function(e){t.zone.run((function(){t.uploadFile(e)}))}},this.config.dropzone.setConfig({})},t.prototype.ngAfterViewInit=function(){this.config.dropzone.setConfig({previewsContainer:".field-"+this.config.field.index+" .dropzone-previews",clickable:".field-"+this.config.field.index+" .invisible-clickable"})},t.prototype.ngOnDestroy=function(){this.dropzoneConfig$.complete(),e.prototype.ngOnDestroy.call(this)},t.prototype.onUploadError=function(e){Object(P.a)("Dropzone upload error. Args:",e),this.dropzoneRef.reset()},t.prototype.onUploadSuccess=function(e){var t=e[1];t.Success?this.config.adam?(this.config.adam.addFullPath(t),this.config.adam.onItemUpload(t),this.config.adam.refresh()):alert("Upload failed because: ADAM reference doesn't exist"):alert("Upload failed because: "+t.Error),this.dropzoneRef.reset()},t.prototype.setConfig=function(e){var t,n,o=this.config.field.isExternal,a=this.dnnContext.$2sxc.http.apiUrl("app-content/"+this.config.entity.header.ContentTypeName+"/"+this.config.entity.header.Guid+"/"+this.config.field.name+"?subfolder=&usePortalRoot=false&appId="+this.eavConfig.appId),r=this.dnnContext.sxc.webApi.headers(),c=null!=this.dropzoneConfig$.value?this.dropzoneConfig$.value:new vn(o,a,r),s=new vn(o,a,r),l=Object.keys(s);try{for(var d=Object(i.i)(l),u=d.next();!u.done;u=d.next()){var p=u.value;s[p]=null!=e[p]?e[p]:c[p]}}catch(g){t={error:g}}finally{try{u&&!u.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}if(s.maxFiles!==s.parallelUploads){var f=s.maxFiles>=s.parallelUploads?s.maxFiles:s.parallelUploads;s.maxFiles=f,s.parallelUploads=f}(null==s.acceptedFiles||""===s.acceptedFiles)&&delete s.acceptedFiles,this.dropzoneConfig$.next(s)},t.prototype.uploadFile=function(e){var t=this.dropzoneRef.dropzone();e.upload={chunked:t.defaultOptions.chunking},t.processFile(e)},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a),k.Qb(H.a),k.Qb(k.z))},t.\u0275cmp=k.Kb({type:t,selectors:[["app-dropzone-wrapper"]],viewQuery:function(e,t){var n;1&e&&(k.Lc(yn,!0,k.O),k.Wc(mn.a,!0)),2&e&&(k.Cc(n=k.fc())&&(t.fieldComponent=n.first),k.Cc(n=k.fc())&&(t.dropzoneRef=n.first))},features:[k.yb],decls:6,vars:11,consts:[[1,"dropzone","dropzone-container",3,"ngClass","dropzone","disabled","error","success"],["fieldComponent",""]],template:function(e,t){1&e&&(k.Wb(0,"div",0),k.ec("error",(function(e){return t.onUploadError(e)}))("success",(function(e){return t.onUploadSuccess(e)})),k.jc(1,"async"),k.jc(2,"async"),k.jc(3,"async"),k.Sb(4,null,1),k.Vb()),2&e&&k.oc("ngClass",k.tc(9,wn,k.kc(1,3,t.dropzoneDisabled$)))("dropzone",k.kc(2,5,t.dropzoneConfig$))("disabled",k.kc(3,7,t.dropzoneDisabled$))},directives:[X.k,Z.a,mn.a],pipes:[X.b],styles:[".dropzone-container[_ngcontent-%COMP%]{height:100%;position:relative}"],changeDetection:0}),t}(D),_n=["fieldComponent"],On=function(e){return{"language-wrap__field-short":e}},xn=function(e){return{"language-wrap__translate--hidden":e}},kn=function(e){function t(t,n,i,a){var r=e.call(this,t,n)||this;return r.languageInstanceService=i,r.editRoutingService=a,r.toggleTranslateField$=new o.a(!1),r}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.currentLanguage$=this.languageInstanceService.getCurrentLanguage(this.config.form.formId),this.defaultLanguage$=this.languageInstanceService.getDefaultLanguage(this.config.form.formId),this.open$=this.editRoutingService.isExpanded(this.config.field.index,this.config.entity.entityGuid)},t.prototype.ngOnDestroy=function(){this.toggleTranslateField$.complete(),e.prototype.ngOnDestroy.call(this)},t.prototype.toggleTranslate=function(){var e,t,n;this.open$.pipe(Object(v.a)(1)).subscribe((function(t){e=t})),this.currentLanguage$.pipe(Object(v.a)(1)).subscribe((function(e){t=e})),this.defaultLanguage$.pipe(Object(v.a)(1)).subscribe((function(e){n=e})),!e&&t!==n&&this.toggleTranslateField$.next(!this.toggleTranslateField$.value)},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a),k.Qb(Ne.a),k.Qb(K.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["app-eav-localization-wrapper"]],viewQuery:function(e,t){var n;1&e&&k.Lc(_n,!0,k.O),2&e&&k.Cc(n=k.fc())&&(t.fieldComponent=n.first)},features:[k.yb],decls:10,vars:19,consts:[[1,"language-wrap"],[1,"language-wrap__field",3,"ngClass","dblclick"],["fieldComponent",""],[1,"language-wrap__translate",3,"ngClass","config","group","toggleTranslateField"]],template:function(e,t){1&e&&(k.Wb(0,"div",0),k.Wb(1,"div",1),k.ec("dblclick",(function(){return t.toggleTranslate()})),k.jc(2,"async"),k.jc(3,"async"),k.Sb(4,null,2),k.Vb(),k.Rb(6,"app-translate-group-menu",3),k.jc(7,"async"),k.jc(8,"async"),k.jc(9,"async"),k.Vb()),2&e&&(k.Bb(1),k.oc("ngClass",k.tc(15,On,k.kc(2,5,t.currentLanguage$)!==k.kc(3,7,t.defaultLanguage$))),k.Bb(5),k.oc("ngClass",k.tc(17,xn,k.kc(7,9,t.currentLanguage$)===k.kc(8,11,t.defaultLanguage$)))("config",t.config)("group",t.group)("toggleTranslateField",k.kc(9,13,t.toggleTranslateField$)))},directives:[X.k,Z.a,rn],pipes:[X.b],styles:[".language-wrap[_ngcontent-%COMP%]{display:flex;padding-left:16px;padding-right:16px}.language-wrap__field[_ngcontent-%COMP%]{width:100%;height:100%}.language-wrap__field-short[_ngcontent-%COMP%]{width:calc(100% - 48px)}.language-wrap__translate[_ngcontent-%COMP%]{width:48px;position:relative}.language-wrap__translate--hidden[_ngcontent-%COMP%]{width:0}"],changeDetection:0}),t}(D),In=[Object(W.n)("itemShrinkAnimation",[Object(W.k)("open",Object(W.l)({height:"30vh"})),Object(W.k)("closed",Object(W.l)({height:"0vh"})),Object(W.m)("open => closed",[Object(W.e)("300ms cubic-bezier(0.4, 0.0, 0.2, 1)")])]),Object(W.n)("contentExpandAnimation",[Object(W.k)("closed",Object(W.l)({height:"0"})),Object(W.k)("expanded",Object(W.l)({height:"calc(100vh - {{bottomPixels}})",maxHeight:"calc(100vh - {{bottomPixels}})"}),{params:{bottomPixels:window.innerWidth>600?"100px":"50px"}}),Object(W.m)("closed => expanded",[Object(W.e)("300ms cubic-bezier(0.4, 0.0, 0.2, 1)",Object(W.h)([Object(W.l)({height:"0vh",overflow:"hidden"}),Object(W.l)({height:"calc(100vh - {{bottomPixels}})",overflow:"hidden"})]))],{params:{bottomPixels:window.innerWidth>600?"100px":"50px"}})])],Mn=n("bRQ+");function Sn(e,t,n,i){return("string"==typeof e?Mn.a.convertValueToArray(e,t):e).map((function(t){var o,a=n.find((function(e){return e.Value===t}));return o=null==t?"empty slot":"string"==typeof e?null!=a?a.Text:t:null!=a?a.Text:i.instant("Fields.Entity.EntityNotFound"),{value:t,label:o,tooltip:o+" ("+t+")",isFreeTextOrNotFound:null==a}}))}var Tn=n("hOvr"),Pn=function(e){return{"c-fht__container-hint--ellipsis":e}};function jn(e,t){if(1&e){var n=k.Xb();k.Wb(0,"mat-hint",4),k.ec("click",(function(e){return k.Fc(n),k.ic(2).toggleHint(e)})),k.Rb(1,"span",5),k.jc(2,"safeHtml"),k.Vb()}if(2&e){var i=k.ic().ngIf,o=k.ic();k.oc("ngClass",o.control.disabled?"c-fht__container-hint--disabled":"c-fht__container-hint"),k.Bb(1),k.oc("ngClass",k.tc(5,Pn,!o.isFullText))("innerHtml",k.kc(2,3,i.description),k.Gc)}}var Vn=function(e){return{param:e}};function En(e,t){if(1&e&&(k.Wb(0,"mat-error",6),k.Qc(1),k.jc(2,"translate"),k.Vb()),2&e){var n=k.ic(2);k.Bb(1),k.Sc(" ",k.lc(2,1,n.getErrorMessage(),k.tc(4,Vn,n.config.field.settings))," ")}}var $n=function(e,t,n){return{"c-fht__container--no-hint":e,"c-fht__container--last":t,"c-fht__container--last--no-hint":n}};function Bn(e,t){if(1&e&&(k.Ub(0),k.Wb(1,"div",1),k.Oc(2,jn,3,7,"mat-hint",2),k.Oc(3,En,3,6,"mat-error",3),k.Vb(),k.Tb()),2&e){var n=t.ngIf,i=k.ic();k.Bb(1),k.oc("ngClass",k.vc(3,$n,!(n.description||n.invalid&&!i.disableError),i.config.field.isLastInGroup,i.config.field.isLastInGroup&&!n.description&&!(n.invalid&&!i.disableError))),k.Bb(1),k.oc("ngIf",n.description),k.Bb(1),k.oc("ngIf",n.invalid&&!i.disableError)}}var Ln=function(e,t){return{invalid:e,description:t}},Fn=function(){function e(e){this.validationMessagesService=e,this.disableError=!1,this.isFullText=!1}return e.prototype.ngOnInit=function(){this.control=this.group.controls[this.config.field.name],this.invalid$=this.control.statusChanges.pipe(Object(w.a)((function(e){return"INVALID"===e})),Object($.a)(this.control.invalid)),this.description$=this.config.field.settings$.pipe(Object(w.a)((function(e){return e.Notes})))},e.prototype.toggleHint=function(e){var t=e.target;if("A"!==t.tagName){for(;t&&t.classList&&!t.classList.contains("notes-container");){if(!(t=t.parentNode))return;if("A"===t.tagName)return}this.isFullText=!this.isFullText}},e.prototype.getErrorMessage=function(){return this.validationMessagesService.getErrorMessage(this.control,this.config)},e.\u0275fac=function(t){return new(t||e)(k.Qb(F.a))},e.\u0275cmp=k.Kb({type:e,selectors:[["app-field-helper-text"]],inputs:{config:"config",group:"group",disableError:"disableError"},decls:3,vars:8,consts:[[4,"ngIf"],[1,"c-fht__container",3,"ngClass"],["class","mat-caption","align","start","fxLayout","row","fxLayoutAlign","start start",3,"ngClass","click",4,"ngIf"],["class","mat-caption",4,"ngIf"],["align","start","fxLayout","row","fxLayoutAlign","start start",1,"mat-caption",3,"ngClass","click"],["appChangeAnchorTarget","",1,"notes-container",3,"ngClass","innerHtml"],[1,"mat-caption"]],template:function(e,t){1&e&&(k.Oc(0,Bn,4,7,"ng-container",0),k.jc(1,"async"),k.jc(2,"async")),2&e&&k.oc("ngIf",k.uc(5,Ln,k.kc(1,1,t.invalid$),k.kc(2,3,t.description$)))},directives:[X.m,X.k,Z.a,Tn.f,We.c,We.b,cn,Tn.b],pipes:[X.b,sn.a,ne.d],styles:[".c-fht__container[_ngcontent-%COMP%], .c-fht__container--no-hint[_ngcontent-%COMP%]{padding:.54166667em 0 13px}.c-fht__container--last[_ngcontent-%COMP%], .c-fht__container--last--no-hint[_ngcontent-%COMP%]{padding:.54166667em 0 5px}.c-fht__container-hint[_ngcontent-%COMP%]{color:rgba(29,39,61,.44)}.c-fht__container-hint--ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-height:16px}.c-fht__container-hint--disabled[_ngcontent-%COMP%]{color:rgba(29,39,61,.24)}.c-fht__container--input-invalid[_ngcontent-%COMP%]{padding:6px 12px 11px;border:2px;border-bottom-style:solid;border-color:#b00030}.c-fht__container[_ngcontent-%COMP%]   .c-ew__color--accent[_ngcontent-%COMP%]{color:#0087f4}.c-fht__container[_ngcontent-%COMP%]   .c-ew__color--primary[_ngcontent-%COMP%]{color:rgba(29,39,61,.44)}"],changeDetection:0}),e}(),Dn=["fieldComponent"];function Wn(e,t){if(1&e&&(k.Wb(0,"mat-list-item",21),k.Wb(1,"span",22),k.Qc(2),k.Vb(),k.Vb()),2&e){var n=t.$implicit;k.Bb(2),k.Rc(n.label)}}function zn(e,t){if(1&e&&(k.Wb(0,"mat-list",19),k.Oc(1,Wn,3,1,"mat-list-item",20),k.Vb()),2&e){var n=k.ic().ngIf,i=k.ic();k.Bb(1),k.oc("ngForOf",n.selectedEntities)("ngForTrackBy",i.trackByFn)}}function An(e,t){if(1&e&&(k.Wb(0,"span",23),k.Qc(1),k.Vb()),2&e){var n=k.ic().ngIf;k.Bb(1),k.Sc(" ",n.entitiesNumber," ")}}var Rn=function(e,t,n,i,o){return{"mat-caption":e,"mat-empty":t,"mat-error":n,color__primary:i,"color__label-disabled":o}},Qn=function(){return{enterDuration:360}},Gn=function(e,t){return{"c-ew__preview--invalid":e,"c-ew__preview--disabled":t}};function Nn(e,t){if(1&e){var n=k.Xb();k.Wb(0,"div",12),k.Wb(1,"mat-label",13),k.Qc(2),k.Vb(),k.Wb(3,"div",14),k.ec("click",(function(){return k.Fc(n),k.ic().expandDialog()})),k.Wb(4,"div",0),k.Wb(5,"div",15),k.Oc(6,zn,2,2,"mat-list",16),k.Oc(7,An,2,1,"span",17),k.Vb(),k.Vb(),k.Vb(),k.Rb(8,"app-field-helper-text",18),k.Vb()}if(2&e){var i=t.ngIf,o=k.ic();k.Bb(1),k.oc("ngClass",k.xc(10,Rn,i.entitiesNumber,!i.entitiesNumber,i.invalid&&i.touched&&!o.config.field.disabled,!(i.invalid&&i.touched||o.config.field.disabled),o.config.field.disabled)),k.Bb(1),k.Tc(" ",i.label," ",i.required?"*":""," "),k.Bb(1),k.oc("matRippleAnimation",k.sc(16,Qn))("ngClass",k.uc(17,Gn,i.invalid&&i.touched,o.config.field.disabled)),k.Bb(1),k.oc("ngClass",i.entitiesNumber?"c-ew__preview-container":"c-ew__preview-container--empty"),k.Bb(2),k.oc("ngIf",i.entitiesNumber),k.Bb(1),k.oc("ngIf",i.entitiesNumber>5),k.Bb(1),k.oc("config",o.config)("group",o.group)}}var Un=function(e){return{"c-ew__dialog-header mat-elevation-z2":e}},qn=function(e){return{bottomPixels:e}},Hn=function(e,t){return{value:e,params:t}},Kn=function(){return[]},Xn=function(e,t,n,i,o,a,r){return{label:e,required:t,invalid:n,touched:i,selectedEntities:o,entitiesNumber:a,showValidation:r}},Zn=function(e){function t(t,n,i,o){var a=e.call(this,t,n)||this;return a.translate=i,a.editRoutingService=o,a}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.separator=this.config.field.settings$.value.Separator,this.dialogIsOpen$=this.editRoutingService.isExpanded(this.config.field.index,this.config.entity.entityGuid)},t.prototype.ngAfterViewInit=function(){var e=this;this.selectedEntities$=Object(Ct.a)([this.value$,this.config.entityCache$]).pipe(Object(w.a)((function(t){return Sn(t[0],e.separator,t[1],e.translate)})))},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.prototype.calculateBottomPixels=function(){return window.innerWidth>600?"100px":"50px"},t.prototype.trackByFn=function(e,t){return t.value},t.prototype.expandDialog=function(){this.config.field.disabled||this.editRoutingService.expand(!0,this.config.field.index,this.config.entity.entityGuid)},t.prototype.closeDialog=function(){this.editRoutingService.expand(!1,this.config.field.index,this.config.entity.entityGuid)},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a),k.Qb(ne.e),k.Qb(K.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["app-entity-expandable-wrapper"]],viewQuery:function(e,t){var n;1&e&&k.Lc(Dn,!0,k.O),2&e&&k.Cc(n=k.fc())&&(t.fieldComponent=n.first)},features:[k.yb],decls:31,vars:47,consts:[[3,"ngClass"],[1,"c-ew__backdrop",3,"click"],["fxLayout","column",1,"c-ew__dialog","mat-elevation-z24"],["fxLayout","row",1,"mat-elevation-z0"],["mat-icon-button","","fxLayoutAlign","center center",1,"back-arrow",3,"matTooltip","click"],["fxLayoutAlign","center center",1,"title","mat-display-1"],[1,"c-ew__dialog-content","u-add-scrollbar","u-hide-scrollbar"],[1,"mdc-layout-grid"],[1,"mdc-layout-grid__inner"],[1,"mdc-layout-grid__cell--span-12","u-border-radius","shadow-bottom-z-1"],["fieldComponent",""],["class","c-ew__preview-holder",4,"ngIf"],[1,"c-ew__preview-holder"],[1,"c-ew__preview-label",3,"ngClass"],["matRipple","",1,"c-ew__preview","mat-ripple",3,"matRippleAnimation","ngClass","click"],["fxLayout","row","fxLayoutAlign","start center"],["fxLayout","row",4,"ngIf"],["class","more-entities mat-body-1",4,"ngIf"],[3,"config","group"],["fxLayout","row"],["role","listitem",4,"ngFor","ngForOf","ngForTrackBy"],["role","listitem"],["mat-line",""],[1,"more-entities","mat-body-1"]],template:function(e,t){if(1&e&&(k.Wb(0,"div",0),k.jc(1,"async"),k.Wb(2,"div",1),k.ec("click",(function(){return t.closeDialog()})),k.Vb(),k.Wb(3,"div",2),k.Wb(4,"div",0),k.jc(5,"async"),k.Wb(6,"mat-card",3),k.Wb(7,"button",4),k.ec("click",(function(){return t.closeDialog()})),k.jc(8,"translate"),k.Wb(9,"mat-icon"),k.Qc(10,"arrow_back"),k.Vb(),k.Vb(),k.Wb(11,"span",5),k.Qc(12),k.jc(13,"async"),k.Vb(),k.Vb(),k.Vb(),k.Wb(14,"div"),k.Rb(15,"div"),k.jc(16,"async"),k.Wb(17,"div",6),k.jc(18,"async"),k.Wb(19,"div",7),k.Wb(20,"div",8),k.Wb(21,"mat-card",9),k.Sb(22,null,10),k.Vb(),k.Vb(),k.Vb(),k.Vb(),k.Vb(),k.Vb(),k.Vb(),k.Oc(24,Nn,9,20,"div",11),k.jc(25,"async"),k.jc(26,"async"),k.jc(27,"async"),k.jc(28,"async"),k.jc(29,"async"),k.jc(30,"async")),2&e){var n=null,i=k.zc(39,Xn,k.kc(25,19,t.label$),k.kc(26,21,t.required$),k.kc(27,23,t.invalid$),t.control.touched,(null==(n=k.kc(28,25,t.selectedEntities$))?null:n.slice(0,9))||k.sc(38,Kn),(null==(n=k.kc(29,27,t.selectedEntities$))?null:n.length)||0,k.kc(30,29,t.showValidation$));k.oc("ngClass",k.kc(1,7,t.dialogIsOpen$)?"c-ew__container":"u-display-none"),k.Bb(4),k.oc("ngClass",k.tc(31,Un,k.kc(5,9,t.dialogIsOpen$))),k.Bb(3),k.oc("matTooltip",k.kc(8,11,"Form.Buttons.Return.Tip")),k.Bb(5),k.Rc(k.kc(13,13,t.label$)),k.Bb(3),k.oc("@itemShrinkAnimation",k.kc(16,15,t.dialogIsOpen$)?"closed":"open"),k.Bb(2),k.oc("@contentExpandAnimation",k.uc(35,Hn,k.kc(18,17,t.dialogIsOpen$)?"expanded":"closed",k.tc(33,qn,t.calculateBottomPixels()))),k.Bb(7),k.oc("ngIf",i)}},directives:[X.k,Z.a,We.c,He.a,It.a,We.b,Y.a,J.a,X.m,Tn.g,Mt.q,Fn,kt.a,X.l,kt.c,Mt.i],pipes:[X.b,ne.d],styles:[".c-ew__preview[_ngcontent-%COMP%]{padding:0 0 1px;border-bottom:1px solid rgba(0,0,0,.2)}.c-ew__preview[_ngcontent-%COMP%]:hover:not(.c-ew__preview--disabled):not(.c-ew__preview--invalid){padding:0;border-bottom:2px solid rgba(0,0,0,.4);transition:none}.c-ew__preview--invalid[_ngcontent-%COMP%]{padding:0;border-bottom:2px solid #b00030;transition:none}.c-ew__preview--disabled[_ngcontent-%COMP%]{border:none;cursor:default;padding:0 0 2px;background-image:linear-gradient(90deg,rgba(0,0,0,.2) 0,rgba(0,0,0,.2) 33%,transparent 0);background-position:bottom;background-size:4px 1px;background-repeat:repeat-x}.c-ew__preview[_ngcontent-%COMP%]{position:relative;min-height:36px;cursor:pointer}.c-ew__preview-holder[_ngcontent-%COMP%]{position:relative;margin-top:28px}.c-ew__preview-label[_ngcontent-%COMP%]{top:-16px;position:absolute;z-index:1;pointer-events:none;font-size:12px;line-height:14px}.c-ew__preview-label[_ngcontent-%COMP%]:not(.mat-error){color:rgba(29,39,61,.44)}.c-ew__preview-container[_ngcontent-%COMP%]{overflow:hidden;height:100%;align-content:center}.c-ew__preview-container--empty[_ngcontent-%COMP%]{padding:6px 0 0}.c-ew__preview[_ngcontent-%COMP%]   .color__accent[_ngcontent-%COMP%]{color:#0087f4}.c-ew__preview[_ngcontent-%COMP%]   .color__primary[_ngcontent-%COMP%]{color:rgba(29,39,61,.44)}.c-ew__preview[_ngcontent-%COMP%]   .color__label-disabled[_ngcontent-%COMP%]{color:rgba(29,39,61,.24)}.c-ew__preview[_ngcontent-%COMP%]   mat-empty[_ngcontent-%COMP%]{height:48px;padding:24px 0 0}.more-entities[_ngcontent-%COMP%]{padding:0 12px;margin-left:10px;background:transparent;color:#1d273d;border-radius:10px;border:1px solid rgba(29,39,61,.44);height:18px;font-size:12px;line-height:16px;flex:0 0 auto;display:flex;align-items:center}.mat-list[_ngcontent-%COMP%]{overflow:hidden;padding:0;margin-top:9px;flex:1 1 auto}.mat-list-item[_ngcontent-%COMP%]{width:auto!important;max-width:200px;flex:0 1 auto;height:20px!important;background:rgba(29,39,61,.08);border-radius:10px;margin-right:10px;margin-bottom:7px;font-size:12px;line-height:16px;white-space:nowrap;text-overflow:ellipsis}"],data:{animation:[In]},changeDetection:0}),t}(D),Yn=n("1/u/"),Jn=function(){function e(e,t,n,o,a){var r=this;this.field=n,this._experimental=o,this.data=new ei(e,t),this.dialog=new ti(e),this.loadScript=function(e,t,n){var o,c;if(("string"==typeof e||"function"==typeof e)&&"string"==typeof t&&"function"==typeof n)return t=r.resolveTokens(t,a),void Object(Yn.a)([{test:e,src:t}],n);if(!Array.isArray(e)||"function"!=typeof t)throw new Error("Unrecognized parameters. Please double check your input");try{for(var s=Object(i.i)(e),l=s.next();!l.done;l=s.next()){var d=l.value;d.src=r.resolveTokens(d.src,a)}}catch(u){o={error:u}}finally{try{l&&!l.done&&(c=s.return)&&c.call(s)}finally{if(o)throw o.error}}Object(Yn.a)(e,t)}}return e.prototype.resolveTokens=function(e,t){return(e=e.replace(/\[System:Path\]/i,R.a.getUrlPrefix("system",t)).replace(/\[Zone:Path\]/i,R.a.getUrlPrefix("zone",t)).replace(/\[App:Path\]/i,R.a.getUrlPrefix("app",t))).includes("?")||(e=e+"?sxcver="+sxcVersion),e},e}(),ei=function(){function e(e,t){var n=this;this._connectorHost=e,this.clientValueChangeListeners=[],this.value$=t,this.forceConnectorSave$=e.forceConnectorSave$,this.value$.subscribe((function(e){n.value=e,n.clientValueChangeListeners.forEach((function(t){return t(e)}))}))}return e.prototype.update=function(e){this._connectorHost.update(e)},e.prototype.onValueChange=function(e){this.clientValueChangeListeners.push(e)},e}(),ti=function(){return function(e){this.open=function(t){return e.expand(!0,t)},this.close=function(){return e.expand(!1)}}}(),ni=function(){function e(e,t,n,i,a,r,c,s,l,d,u,p,f){var g=this;this.config=e,this.group=t,this.customElContainerRef=n,this.customElName=i,this.eavService=a,this.translateService=r,this.contentTypeService=c,this.inputTypeService=s,this.featureService=l,this.editRoutingService=d,this.dnnBridgeService=u,this.dialog=p,this.zone=f,this.value$=new o.a(null),this.subscription=new E.a,this.eavConfig=a.getEavConfiguration(),this.control=this.group.controls[this.config.field.name],this.subscription.add(this.eavService.formValueChange$.pipe(Object(I.a)((function(e){return e.formId===g.config.form.formId&&e.entityGuid===g.config.entity.entityGuid})),Object(w.a)((function(e){return g.control.value})),Object($.a)(this.control.value),Object(B.a)()).subscribe((function(e){g.value$.next(e)}))),this.customEl=document.createElement(this.customElName),this.customEl.connector=this.buildConnector(),this.customElContainerRef.nativeElement.appendChild(this.customEl)}return e.prototype.buildConnector=function(){var e=this.calculateRegularProps(),t=this.calculateExperimentalProps();return new Jn(e,this.value$.asObservable(),this.config.field,t,this.eavConfig)},e.prototype.calculateRegularProps=function(){var e=this;return{forceConnectorSave$:this.eavService.forceConnectorSave$,update:function(t){e.zone.run((function(){e.updateControl(e.control,t)}))},expand:function(t,n){e.zone.run((function(){e.editRoutingService.expand(t,e.config.field.index,e.config.entity.entityGuid,n)}))}}},e.prototype.calculateExperimentalProps=function(){var e,t=this;return this.contentTypeService.getContentTypeById(this.config.entity.contentTypeId).pipe(Object(v.a)(1)).subscribe((function(n){e=yt.a.calculateInputTypes(n.contentType.attributes,t.inputTypeService)})),{entityGuid:this.config.entity.entityGuid,allInputTypeNames:e,formGroup:this.group,translateService:this.translateService,isExpanded$:this.editRoutingService.isExpanded(this.config.field.index,this.config.entity.entityGuid),dropzone:this.config.dropzone,adam:this.config.adam,updateField:function(e,n){t.zone.run((function(){t.updateControl(t.group.controls[e],n)}))},isFeatureEnabled:function(e){return t.featureService.isFeatureEnabled(e)},setFocused:function(e){t.zone.run((function(){t.config.field.focused$.next(e)}))},openDnnDialog:function(e,n,i){t.zone.run((function(){t.openDnnDialog(e,n,i)}))},getUrlOfIdDnnDialog:function(e,n){t.zone.run((function(){t.getUrlOfIdDnnDialog(e,n)}))}}},e.prototype.openDnnDialog=function(e,t,n){this.dnnBridgeService.open(e,t,n,this.dialog)},e.prototype.getUrlOfIdDnnDialog=function(e,t){if(e){var n=this.dnnBridgeService.getUrlOfId(e,this.config.entity.header.ContentTypeName,this.config.entity.header.Guid,this.config.field.name);n?n.subscribe((function(e){e&&t(e)})):t(e)}},e.prototype.updateControl=function(e,t){null==e||e.disabled||(e.value!==t&&e.patchValue(t),e.dirty||e.markAsDirty(),e.touched||e.markAsTouched())},e.prototype.destroy=function(){var e;this.subscription.unsubscribe(),this.value$.complete(),null===(e=this.customEl)||void 0===e||e.parentNode.removeChild(this.customEl),this.customEl=null},e}(),ii=function(){function e(e){this.zone=e,this.eventListeners=[]}return e.prototype.attach=function(e){var t=this;this.zone.runOutsideAngular((function(){function n(){!function(e){var t,n;try{for(var o=Object(i.i)(e),a=o.next();!a.done;a=o.next())clearTimeout(a.value)}catch(r){t={error:r}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}e.splice(0,e.length)}(windowBodyTimeouts),document.body.classList.add(draggingClass)}function o(){document.body.classList.remove(draggingClass)}e.addEventListener("dragover",n,{passive:!0}),e.addEventListener("drop",o,{passive:!0}),t.eventListeners.push({element:e,type:"dragover",listener:n},{element:e,type:"drop",listener:o})}))},e.prototype.detach=function(){var e=this;this.zone.runOutsideAngular((function(){e.eventListeners.forEach((function(e){e.element.removeEventListener(e.type,e.listener)}))}))},e}(),oi=n("iKpp"),ai=["fieldComponent"],ri=["previewContainer"],ci=["backdrop"],si=["dialog"],li=function(e,t,n,i,o,a){return{"mat-caption":e,"mat-empty":t,"mat-error":n,color__primary:i,"color__label-disabled":o,"c-ew__preview-label--focused":a}},di=function(e,t,n){return{"c-ew__preview--invalid":e,"c-ew__preview--disabled":t,"c-ew__preview--focused":n}},ui=function(e){return{"c-ew__preview-content--disabled":e}};function pi(e,t){if(1&e&&(k.Wb(0,"div",11),k.Wb(1,"mat-label",12),k.Qc(2),k.Vb(),k.Wb(3,"div",13),k.Wb(4,"div",14),k.Rb(5,"div",15,16),k.Vb(),k.Vb(),k.Rb(7,"app-field-helper-text",17),k.Vb()),2&e){var n=t.ngIf,i=k.ic();k.Bb(1),k.oc("ngClass",k.yc(7,li,n.value,!n.value,n.invalid&&n.touched&&!n.disabled,!(n.invalid&&n.touched||n.disabled),n.disabled,n.focused)),k.Bb(1),k.Tc(" ",n.label," ",n.required?"*":""," "),k.Bb(1),k.oc("ngClass",k.vc(14,di,n.invalid&&(n.touched||n.dirty),n.disabled,n.focused)),k.Bb(2),k.oc("ngClass",k.tc(18,ui,n.disabled)),k.Bb(2),k.oc("config",i.config)("group",i.group)}}var fi=function(e){return{"c-ew__dialog-header mat-elevation-z2":e}},gi=function(e){return{bottomPixels:e}},bi=function(e,t){return{value:e,params:t}},hi=function(e,t,n,i,o,a,r,c,s){return{value:e,label:t,required:n,invalid:i,touched:o,dirty:a,focused:r,disabled:c,showValidation:s}},mi=function(e){function t(t,n,i,o,a,r,c,s,l,d){var u=e.call(this,t,n)||this;return u.translateService=i,u.contentTypeService=o,u.inputTypeService=a,u.featureService=r,u.editRoutingService=c,u.dnnBridgeService=s,u.dialog=l,u.zone=d,u}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.open$=this.editRoutingService.isExpanded(this.config.field.index,this.config.entity.entityGuid)},t.prototype.ngAfterViewInit=function(){var e="field-"+this.config.field.inputType;Object(P.a)("ExpandableWrapper created for:",e),this.connectorCreator=new ni(this.config,this.group,this.previewContainerRef,e,this.eavService,this.translateService,this.contentTypeService,this.inputTypeService,this.featureService,this.editRoutingService,this.dnnBridgeService,this.dialog,this.zone),this.dropzoneDraggingHelper=new ii(this.zone),this.dropzoneDraggingHelper.attach(this.backdropRef.nativeElement),this.dropzoneDraggingHelper.attach(this.dialogRef.nativeElement)},t.prototype.ngOnDestroy=function(){Object(P.a)("ExpandableWrapper destroyed"),this.connectorCreator.destroy(),this.dropzoneDraggingHelper.detach(),e.prototype.ngOnDestroy.call(this)},t.prototype.expandDialog=function(){this.editRoutingService.expand(!0,this.config.field.index,this.config.entity.entityGuid)},t.prototype.closeDialog=function(){this.editRoutingService.expand(!1,this.config.field.index,this.config.entity.entityGuid)},t.prototype.calculateBottomPixels=function(){return window.innerWidth>600?"100px":"50px"},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a),k.Qb(ne.e),k.Qb(qe),k.Qb(Kt.a),k.Qb(q),k.Qb(K.a),k.Qb(oi.a),k.Qb(wt.b),k.Qb(k.z))},t.\u0275cmp=k.Kb({type:t,selectors:[["app-expandable-wrapper"]],viewQuery:function(e,t){var n;1&e&&(k.Lc(ai,!0,k.O),k.Wc(ri,!0),k.Wc(ci,!0),k.Wc(si,!0)),2&e&&(k.Cc(n=k.fc())&&(t.fieldComponent=n.first),k.Cc(n=k.fc())&&(t.previewContainerRef=n.first),k.Cc(n=k.fc())&&(t.backdropRef=n.first),k.Cc(n=k.fc())&&(t.dialogRef=n.first))},features:[k.yb],decls:31,vars:50,consts:[[3,"ngClass"],[1,"c-ew__backdrop",3,"click"],["backdrop",""],["fxLayout","column",1,"c-ew__dialog","mat-elevation-z24","u-border-radius"],["dialog",""],["fxLayout","row",1,"mat-elevation-z0"],["mat-icon-button","","fxLayoutAlign","center center",1,"back-arrow",3,"matTooltip","click"],["fxLayoutAlign","center center",1,"title","mat-display-1"],[1,"c-ew__dialog-content","u-border-radius-bottom","u-add-scrollbar","u-hide-scrollbar"],["fieldComponent",""],["class","c-ew__preview-holder",4,"ngIf"],[1,"c-ew__preview-holder"],[1,"c-ew__preview-label",3,"ngClass"],[1,"c-ew__preview",3,"ngClass"],[1,"c-ew__preview-container"],[1,"c-ew__preview-content","u-hide-scrollbar",3,"ngClass"],["previewContainer",""],[3,"config","group"]],template:function(e,t){1&e&&(k.Wb(0,"div",0),k.jc(1,"async"),k.Wb(2,"div",1,2),k.ec("click",(function(){return t.closeDialog()})),k.Vb(),k.Wb(4,"div",3,4),k.Wb(6,"div",0),k.jc(7,"async"),k.Wb(8,"mat-card",5),k.Wb(9,"button",6),k.ec("click",(function(){return t.closeDialog()})),k.jc(10,"translate"),k.Wb(11,"mat-icon"),k.Qc(12,"arrow_back"),k.Vb(),k.Vb(),k.Wb(13,"span",7),k.Qc(14),k.jc(15,"async"),k.Vb(),k.Vb(),k.Vb(),k.Wb(16,"div"),k.Rb(17,"div"),k.jc(18,"async"),k.Wb(19,"div",8),k.jc(20,"async"),k.Sb(21,null,9),k.Vb(),k.Vb(),k.Vb(),k.Vb(),k.Oc(23,pi,8,20,"div",10),k.jc(24,"async"),k.jc(25,"async"),k.jc(26,"async"),k.jc(27,"async"),k.jc(28,"async"),k.jc(29,"async"),k.jc(30,"async")),2&e&&(k.oc("ngClass",k.kc(1,7,t.open$)?"c-ew__container":"u-display-none"),k.Bb(6),k.oc("ngClass",k.tc(33,fi,k.kc(7,9,t.open$))),k.Bb(3),k.oc("matTooltip",k.kc(10,11,"Form.Buttons.Return.Tip")),k.Bb(5),k.Rc(k.kc(15,13,t.label$)),k.Bb(3),k.oc("@itemShrinkAnimation",k.kc(18,15,t.open$)?"closed":"open"),k.Bb(2),k.oc("@contentExpandAnimation",k.uc(37,bi,k.kc(20,17,t.open$)?"expanded":"closed",k.tc(35,gi,t.calculateBottomPixels()))),k.Bb(4),k.oc("ngIf",k.Bc(40,hi,[k.kc(24,19,t.value$),k.kc(25,21,t.label$),k.kc(26,23,t.required$),k.kc(27,25,t.invalid$),t.control.touched,t.control.dirty,k.kc(28,27,t.config.field.focused$),k.kc(29,29,t.disabled$),k.kc(30,31,t.showValidation$)])))},directives:[X.k,Z.a,We.c,He.a,It.a,We.b,Y.a,J.a,X.m,Tn.g,Fn],pipes:[X.b,ne.d],styles:[".c-ew__preview[_ngcontent-%COMP%]{margin-bottom:1px;border-bottom:1px solid rgba(0,0,0,.2)}.c-ew__preview[_ngcontent-%COMP%]:hover:not(.c-ew__preview--disabled):not(.c-ew__preview--invalid){margin-bottom:0;border-bottom:2px solid rgba(0,0,0,.4);transition:none}.c-ew__preview--focused[_ngcontent-%COMP%]:not(.c-ew__preview--invalid){margin-bottom:0;border-bottom:2px solid #0085f4!important;transition:none}.c-ew__preview--invalid[_ngcontent-%COMP%]{margin-bottom:0;border-bottom:2px solid #b00030;transition:none}.c-ew__preview--disabled[_ngcontent-%COMP%]{border:none;cursor:default;padding:0 0 2px;margin-bottom:0;background-image:linear-gradient(90deg,rgba(0,0,0,.2) 0,rgba(0,0,0,.2) 33%,transparent 0);background-position:bottom;background-size:4px 1px;background-repeat:repeat-x}.c-ew__preview[_ngcontent-%COMP%]{position:relative;min-height:36px;max-height:50vh;font-size:14px}.c-ew__preview-holder[_ngcontent-%COMP%]{position:relative;margin-top:26px}.c-ew__preview-label[_ngcontent-%COMP%]{top:-14px;position:absolute;z-index:1;pointer-events:none;font-size:12px;line-height:14px}.c-ew__preview-label[_ngcontent-%COMP%]:not(.mat-error){color:rgba(29,39,61,.44)}.c-ew__preview-label--focused[_ngcontent-%COMP%]:not(.mat-error){color:#0087f4!important}.c-ew__preview-container[_ngcontent-%COMP%]{overflow:hidden;min-height:inherit;max-height:inherit}.c-ew__preview-content[_ngcontent-%COMP%]{position:relative;overflow-x:hidden;overflow-y:scroll;min-height:36px;max-height:50vh}.c-ew__preview-content--disabled[_ngcontent-%COMP%]{pointer-events:none;color:rgba(29,39,61,.44)}.c-ew__preview[_ngcontent-%COMP%]   .color__accent[_ngcontent-%COMP%]{color:#0087f4}.c-ew__preview[_ngcontent-%COMP%]   .color__primary[_ngcontent-%COMP%]{color:rgba(29,39,61,.44)}.c-ew__preview[_ngcontent-%COMP%]   .color__label-disabled[_ngcontent-%COMP%]{color:rgba(29,39,61,.24)}.c-ew__preview[_ngcontent-%COMP%]   mat-empty[_ngcontent-%COMP%]{height:48px;padding:24px 0 0}.c-ew__container[_ngcontent-%COMP%]{border-radius:8px;position:fixed;z-index:2;top:0;left:0;right:0;bottom:0;width:100%;height:100%;align-items:self-start;justify-content:center;display:flex}.c-ew__dialog[_ngcontent-%COMP%]{flex-direction:column;display:flex;max-width:800px;width:100vw;margin-top:24px;min-height:calc(100vh - 48px);max-height:calc(100vh - 48px);padding:0}@media (max-width:600px){.c-ew__dialog[_ngcontent-%COMP%]{margin-top:0;min-height:100vh;max-height:100vh}}.c-ew__dialog[_ngcontent-%COMP%]   .mat-dialog-actions[_ngcontent-%COMP%]{padding:16px}.c-ew__dialog-content[_ngcontent-%COMP%]{position:relative;background:#e9eaec}"],data:{animation:[In]},changeDetection:0}),t}(D),vi=["fieldComponent"],yi=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.visibleInEditUI$=this.settings$.pipe(Object(w.a)((function(e){return!1!==e.VisibleInEditUI})))},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["app-hidden-wrapper"]],viewQuery:function(e,t){var n;1&e&&k.Lc(vi,!0,k.O),2&e&&k.Cc(n=k.fc())&&(t.fieldComponent=n.first)},features:[k.yb],decls:4,vars:3,consts:[[3,"hidden"],["fieldComponent",""]],template:function(e,t){1&e&&(k.Wb(0,"div",0),k.jc(1,"async"),k.Sb(2,null,1),k.Vb()),2&e&&k.oc("hidden",!k.kc(1,1,t.visibleInEditUI$))},pipes:[X.b],styles:[""],changeDetection:0}),t}(D),wi=n("TDrE"),Ci=["fieldComponent"],_i=["backdrop"],Oi=["dialog"];function xi(e,t){if(1&e&&(k.Wb(0,"mat-icon",25),k.Qc(1),k.Vb()),2&e){var n=k.ic().ngIf;k.oc("matTooltip",n.preview.url),k.Bb(1),k.Sc(" ",n.preview.icon," ")}}function ki(e,t){if(1&e&&k.Rb(0,"mat-icon",26),2&e){var n=k.ic().ngIf;k.oc("matTooltip",n.preview.url)("svgIcon",n.preview.icon)}}function Ii(e,t){if(1&e){var n=k.Xb();k.Wb(0,"button",30),k.ec("click",(function(){return k.Fc(n),k.ic(3).expandDialog()})),k.jc(1,"translate"),k.Rb(2,"mat-icon",31),k.Vb()}if(2&e){var i=k.ic(2).ngIf;k.oc("matTooltip",k.kc(1,2,"Fields.Hyperlink.Default.Fullscreen"))("disabled",i.disabled)}}function Mi(e,t){if(1&e){var n=k.Xb();k.Wb(0,"button",30),k.ec("click",(function(){return k.Fc(n),k.ic(3).openPageDialog()})),k.jc(1,"translate"),k.Rb(2,"mat-icon",32),k.Vb()}if(2&e){var i=k.ic(2).ngIf;k.oc("matTooltip",k.kc(1,2,"Fields.Hyperlink.Default.PageTip"))("disabled",i.disabled)}}var Si=function(e){return{"c-ew__preview-suffix-text--disabled":e}};function Ti(e,t){if(1&e&&(k.Wb(0,"div",27),k.Wb(1,"div",28),k.Qc(2),k.jc(3,"translate"),k.Vb(),k.Oc(4,Ii,3,4,"button",29),k.Oc(5,Mi,3,4,"button",29),k.Vb()),2&e){var n=k.ic().ngIf;k.Bb(1),k.oc("ngClass",k.tc(6,Si,n.disabled)),k.Bb(1),k.Sc(" ",n.adamButton?k.kc(3,4,"Fields.Hyperlink.AdamFileManager.Hint"):""," "),k.Bb(2),k.oc("ngIf",n.adamButton),k.Bb(1),k.oc("ngIf",n.pageButton)}}function Pi(e,t){if(1&e&&(k.Wb(0,"div",33),k.Wb(1,"div",34),k.Qc(2),k.Vb(),k.Wb(3,"div",35),k.Wb(4,"a",36),k.Wb(5,"span"),k.Qc(6),k.Vb(),k.Vb(),k.Vb(),k.Vb()),2&e){var n=k.ic().ngIf;k.Bb(2),k.Rc(n.value),k.Bb(2),k.oc("href",n.preview.url,k.Ic)("matTooltip",n.preview.url),k.Bb(2),k.Rc(n.preview.floatingText)}}function ji(e,t){1&e&&(k.Wb(0,"div",37),k.Wb(1,"span"),k.Qc(2),k.jc(3,"translate"),k.Vb(),k.Vb()),2&e&&(k.Bb(2),k.Rc(k.kc(3,1,"Fields.Hyperlink.Default.Sponsor")))}var Vi=function(e,t){return{"c-ew__preview--disabled":e,"c-ew__preview--last-in-group":t}},Ei=function(e,t){return{"icon-before-input":e,"thumbnail-before-input--disabled":t}},$i=function(e){return{"background-image":e}},Bi=function(e){return{"mat-form-field-invalid":e}},Li=function(e){return{"mat-error":e}};function Fi(e,t){if(1&e){var n=k.Xb();k.Wb(0,"div",11),k.Wb(1,"div",12),k.Wb(2,"div",13),k.ec("click",(function(){return k.Fc(n),k.ic().expandDialog()})),k.jc(3,"translate"),k.Oc(4,xi,2,2,"mat-icon",14),k.Oc(5,ki,1,2,"mat-icon",15),k.Vb(),k.Wb(6,"div",16),k.Wb(7,"div",17),k.Wb(8,"mat-form-field",18),k.Wb(9,"input",19),k.ec("change",(function(e){return k.Fc(n),k.ic().setValue(e)}))("blur",(function(){return k.Fc(n),k.ic().control.markAsTouched()}))("keyup",(function(e){return k.Fc(n),k.ic().setValue(e)})),k.jc(10,"translate"),k.Vb(),k.Oc(11,Ti,6,8,"div",20),k.Wb(12,"mat-label",0),k.Qc(13),k.Vb(),k.Vb(),k.Oc(14,Pi,7,4,"div",21),k.Vb(),k.Wb(15,"div",22),k.Rb(16,"app-field-helper-text",23),k.Oc(17,ji,4,3,"div",24),k.Vb(),k.Vb(),k.Vb(),k.Vb()}if(2&e){var i=t.ngIf,o=k.ic();k.Bb(1),k.oc("ngClass",k.uc(26,Vi,i.disabled,o.config.field.isLastInGroup)),k.Bb(1),k.oc("matTooltip",k.kc(3,22,"Fields.Hyperlink.Default.Fullscreen"))("matTooltipDisabled",i.disabled)("ngClass",k.uc(29,Ei,i.value&&!i.preview.isImage,i.disabled))("ngStyle",k.tc(32,$i,i.value&&i.preview.isImage?i.preview.thumbnailUrl:"")),k.Bb(2),k.oc("ngIf",i.value&&!i.preview.isImage&&i.preview.isKnownType),k.Bb(1),k.oc("ngIf",i.value&&!i.preview.isImage&&!i.preview.isKnownType),k.Bb(3),k.oc("ngClass",k.tc(34,Bi,i.invalid&&i.touched)),k.Bb(1),k.oc("matTooltip",k.kc(10,24,"Fields.Hyperlink.Default.Tooltip"))("placeholder",i.placeholder)("disabled",i.disabled)("value",i.value)("config",o.config)("elementType","input"),k.Bb(2),k.oc("ngIf",i.adamButton||i.pageButton),k.Bb(1),k.oc("ngClass",k.tc(36,Li,i.invalid&&i.touched)),k.Bb(1),k.Tc(" ",i.label," ",i.required?"*":""," "),k.Bb(1),k.oc("ngIf",i.preview.floatingText),k.Bb(2),k.oc("config",o.config)("group",o.group),k.Bb(1),k.oc("ngIf",i.adamButton)}}var Di=function(e){return{"c-ew__dialog-header mat-elevation-z2":e}},Wi=function(e){return{bottomPixels:e}},zi=function(e,t){return{value:e,params:t}},Ai=function(e,t,n,i,o,a,r,c,s,l,d){return{value:e,preview:t,label:n,placeholder:i,invalid:o,touched:a,required:r,disabled:c,adamButton:s,pageButton:l,showValidation:d}},Ri=function(e){function t(t,n,i,a,r,c,s){var l=e.call(this,t,n)||this;return l.fileTypeService=i,l.dnnBridgeService=a,l.zone=r,l.dialog=c,l.editRoutingService=s,l.preview$=new o.a({url:"",thumbnailUrl:"",thumbnailPreviewUrl:"",floatingText:"",isImage:!1,isKnownType:!1,icon:""}),l}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.subscription.add(this.value$.subscribe((function(e){t.setLink(e)}))),this.open$=this.editRoutingService.isExpanded(this.config.field.index,this.config.entity.entityGuid),this.adamButton$=this.settings$.pipe(Object(w.a)((function(e){var t;return null===(t=e.Buttons)||void 0===t?void 0:t.includes("adam")}))),this.pageButton$=this.settings$.pipe(Object(w.a)((function(e){var t;return null===(t=e.Buttons)||void 0===t?void 0:t.includes("page")})))},t.prototype.ngAfterViewInit=function(){this.dropzoneDraggingHelper=new ii(this.zone),this.dropzoneDraggingHelper.attach(this.backdropRef.nativeElement),this.dropzoneDraggingHelper.attach(this.dialogRef.nativeElement)},t.prototype.ngOnDestroy=function(){this.dropzoneDraggingHelper.detach(),this.preview$.complete(),e.prototype.ngOnDestroy.call(this)},t.prototype.calculateBottomPixels=function(){return window.innerWidth>600?"100px":"50px"},t.prototype.setValue=function(e){var t=e.target.value;this.control.value!==t&&(this.control.patchValue(t),this.control.markAsDirty())},t.prototype.expandDialog=function(){this.control.disabled||this.editRoutingService.expand(!0,this.config.field.index,this.config.entity.entityGuid)},t.prototype.closeDialog=function(){this.editRoutingService.expand(!1,this.config.field.index,this.config.entity.entityGuid)},t.prototype.openPageDialog=function(){this.dnnBridgeService.open(this.control.value,{Paths:this.config.field.settings.Paths?this.config.field.settings.Paths:"",FileFilter:this.config.field.settings.FileFilter?this.config.field.settings.FileFilter:""},this.processResultOfPagePicker.bind(this),this.dialog)},t.prototype.processResultOfPagePicker=function(e){e&&this.control.patchValue("page:"+e.id)},t.prototype.setLink=function(e){var t=this;if(e){var n=this.dnnBridgeService.getUrlOfId(e,this.config.entity.header.ContentTypeName,this.config.entity.header.Guid,this.config.field.name);if(n)n.subscribe((function(e){if(e){var n={url:e,floatingText:".../"+e.substring(e.lastIndexOf("/")+1,e.length),thumbnailUrl:t.thumbnailUrl(e,1,!0),thumbnailPreviewUrl:t.thumbnailUrl(e,2,!1),isImage:t.fileTypeService.isImage(e),isKnownType:t.fileTypeService.isKnownType(e),icon:t.fileTypeService.getIconClass(e)};t.preview$.next(n)}}));else{var i={url:e,floatingText:"",thumbnailUrl:this.thumbnailUrl(e,1,!0),thumbnailPreviewUrl:this.thumbnailUrl(e,2,!1),isImage:!1,isKnownType:!1,icon:this.fileTypeService.getIconClass(e)};this.preview$.next(i)}}},t.prototype.thumbnailUrl=function(e,t,n){1===t&&(e+="?w=80&h=80&mode=crop"),2===t&&(e+="?w=500&h=400&mode=max");var i=n?'"':"";return"url("+i+e+i+")"},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a),k.Qb(G.a),k.Qb(oi.a),k.Qb(k.z),k.Qb(wt.b),k.Qb(K.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["app-hyperlink-default-expandable-wrapper"]],viewQuery:function(e,t){var n;1&e&&(k.Lc(Ci,!0,k.O),k.Wc(_i,!0),k.Wc(Oi,!0)),2&e&&(k.Cc(n=k.fc())&&(t.fieldComponent=n.first),k.Cc(n=k.fc())&&(t.backdropRef=n.first),k.Cc(n=k.fc())&&(t.dialogRef=n.first))},features:[k.yb],decls:34,vars:58,consts:[[3,"ngClass"],[1,"c-ew__backdrop",3,"click"],["backdrop",""],["fxLayout","column",1,"c-ew__dialog","mat-elevation-z24","u-border-radius"],["dialog",""],["fxLayout","row",1,"mat-elevation-z0"],["mat-icon-button","","fxLayoutAlign","center center",1,"back-arrow",3,"matTooltip","click"],["fxLayoutAlign","center center",1,"title","mat-display-1"],[1,"c-ew__dialog-content","u-border-radius-bottom","u-add-scrollbar","u-hide-scrollbar"],["fieldComponent",""],["class","c-hyperlink-default-field-preview",4,"ngIf"],[1,"c-hyperlink-default-field-preview"],["fxLayout","row","fxLayoutAlign","start start",1,"c-ew__preview",3,"ngClass"],[1,"thumbnail-before-input",3,"matTooltip","matTooltipDisabled","ngClass","ngStyle","click"],["matTooltipPosition","right",3,"matTooltip",4,"ngIf"],["matTooltipPosition","right",3,"matTooltip","svgIcon",4,"ngIf"],["fxFlex","auto",1,"c-ew__preview-field--short"],[1,"hyperlink-input-link-wrapper"],["appearance","standard","color","accent",3,"ngClass"],["matInput","","matTooltipPosition","above","appPasteClipboardImage","",3,"matTooltip","placeholder","disabled","value","config","elementType","change","blur","keyup"],["matSuffix","","fxLayoutAlign","center center",4,"ngIf"],["class","hyperlink-floating","fxHide","","fxShow.gt-xs","",4,"ngIf"],[1,"c__helper-wrapper"],[1,"c__helper-wrapper--left",3,"config","group"],["align","end","class","c-ew__preview-field-hint c__helper-wrapper--right","fxHide","","fxShow.gt-xs","",4,"ngIf"],["matTooltipPosition","right",3,"matTooltip"],["matTooltipPosition","right",3,"matTooltip","svgIcon"],["matSuffix","","fxLayoutAlign","center center"],["fxHide","","fxShow.gt-xs","",1,"c-ew__preview-suffix-text",3,"ngClass"],["mat-icon-button","","class","c-ew__preview-suffix-icon","appClickStopPropagation","",3,"matTooltip","disabled","click",4,"ngIf"],["mat-icon-button","","appClickStopPropagation","",1,"c-ew__preview-suffix-icon",3,"matTooltip","disabled","click"],["svgIcon","apple"],["svgIcon","sitemap"],["fxHide","","fxShow.gt-xs","",1,"hyperlink-floating"],[1,"hyperlink-floating__value"],[1,"hyperlink-floating__url-box"],["target","_blank","tabindex","-1",1,"hyperlink-floating__url",3,"href","matTooltip"],["align","end","fxHide","","fxShow.gt-xs","",1,"c-ew__preview-field-hint","c__helper-wrapper--right"]],template:function(e,t){1&e&&(k.Wb(0,"div",0),k.jc(1,"async"),k.Wb(2,"div",1,2),k.ec("click",(function(){return t.closeDialog()})),k.Vb(),k.Wb(4,"div",3,4),k.Wb(6,"div",0),k.jc(7,"async"),k.Wb(8,"mat-card",5),k.Wb(9,"button",6),k.ec("click",(function(){return t.closeDialog()})),k.jc(10,"translate"),k.Wb(11,"mat-icon"),k.Qc(12,"arrow_back"),k.Vb(),k.Vb(),k.Wb(13,"span",7),k.Qc(14),k.jc(15,"async"),k.Vb(),k.Vb(),k.Vb(),k.Wb(16,"div"),k.Rb(17,"div"),k.jc(18,"async"),k.Wb(19,"div",8),k.jc(20,"async"),k.Sb(21,null,9),k.Vb(),k.Vb(),k.Vb(),k.Vb(),k.Oc(23,Fi,18,38,"div",10),k.jc(24,"async"),k.jc(25,"async"),k.jc(26,"async"),k.jc(27,"async"),k.jc(28,"async"),k.jc(29,"async"),k.jc(30,"async"),k.jc(31,"async"),k.jc(32,"async"),k.jc(33,"async")),2&e&&(k.oc("ngClass",k.kc(1,7,t.open$)?"c-ew__container":"u-display-none"),k.Bb(6),k.oc("ngClass",k.tc(39,Di,k.kc(7,9,t.open$))),k.Bb(3),k.oc("matTooltip",k.kc(10,11,"Form.Buttons.Return.Tip")),k.Bb(5),k.Rc(k.kc(15,13,t.label$)),k.Bb(3),k.oc("@itemShrinkAnimation",k.kc(18,15,t.open$)?"closed":"open"),k.Bb(2),k.oc("@contentExpandAnimation",k.uc(43,zi,k.kc(20,17,t.open$)?"expanded":"closed",k.tc(41,Wi,t.calculateBottomPixels()))),k.Bb(4),k.oc("ngIf",k.Bc(46,Ai,[k.kc(24,19,t.value$),k.kc(25,21,t.preview$),k.kc(26,23,t.label$),k.kc(27,25,t.placeholder$),k.kc(28,27,t.invalid$),t.control.touched,k.kc(29,29,t.required$),k.kc(30,31,t.disabled$),k.kc(31,33,t.adamButton$),k.kc(32,35,t.pageButton$),k.kc(33,37,t.showValidation$)])))},directives:[X.k,Z.a,We.c,He.a,It.a,We.b,Y.a,J.a,X.m,X.n,Z.c,We.a,Tn.c,wi.b,ee,Tn.g,Fn,Tn.h,Z.b,te.a],pipes:[X.b,ne.d],styles:[".c-ew__preview[_ngcontent-%COMP%]{padding-top:12px}.c-ew__preview-field--short[_ngcontent-%COMP%]{width:1%;padding:0 0 0 8px;margin-top:-4px}.c-ew__preview-field-hint[_ngcontent-%COMP%]{color:rgba(29,39,61,.44);font-size:12px}.c-ew__preview--disabled[_ngcontent-%COMP%]   .c-ew__preview-field-hint[_ngcontent-%COMP%]{color:rgba(29,39,61,.24)}.c-ew__preview[_ngcontent-%COMP%]   .thumbnail-before-input[_ngcontent-%COMP%]{background-color:rgba(29,39,61,.08);width:78px;height:78px;border-radius:4px;border:1px solid rgba(0,0,0,.2);cursor:pointer;background-repeat:no-repeat;background-position:50%}.c-ew__preview[_ngcontent-%COMP%]   .thumbnail-before-input.icon-before-input[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.c-ew__preview[_ngcontent-%COMP%]   .thumbnail-before-input.icon-before-input[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:56px;height:56px;font-size:56px;line-height:56px;color:rgba(29,39,61,.44)}.c-ew__preview[_ngcontent-%COMP%]   .thumbnail-before-input--disabled[_ngcontent-%COMP%]{cursor:default}.c-ew__preview[_ngcontent-%COMP%]   .thumbnail-before-input--disabled[_ngcontent-%COMP%]   .c-ew__preview-field-hint[_ngcontent-%COMP%]{color:rgba(29,39,61,.24)}.c-ew__preview-suffix-text[_ngcontent-%COMP%]{font-size:12px;line-height:14px;color:#4dabf7;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:text}.c-ew__preview-suffix-text--disabled[_ngcontent-%COMP%]{color:rgba(29,39,61,.24)}@media (min-width:601px){.c-ew__preview-suffix-icon[_ngcontent-%COMP%]{top:0!important}}@media (max-width:600px){.c-ew__preview-suffix-icon[_ngcontent-%COMP%]{top:10px!important}}.c__helper-wrapper[_ngcontent-%COMP%]{display:flex;width:100%}.c__helper-wrapper--left[_ngcontent-%COMP%]{flex:auto;width:1%}.c__helper-wrapper--right[_ngcontent-%COMP%]{flex:0 0 auto;padding-top:.54166667em;padding-left:12px;line-height:16px}"],data:{animation:[In]},changeDetection:0}),t}(D),Qi=["fieldComponent"],Gi=["backdrop"],Ni=["dialog"];function Ui(e,t){if(1&e&&(k.Wb(0,"div",22),k.Wb(1,"div",23),k.Rb(2,"mat-icon",24),k.Wb(3,"div",25),k.Qc(4),k.Vb(),k.Vb(),k.Vb()),2&e){var n=k.ic().$implicit;k.Bb(4),k.Rc(n.Name)}}function qi(e,t){if(1&e&&(k.Wb(0,"mat-icon"),k.Qc(1),k.Vb()),2&e){var n=k.ic(3).$implicit;k.Bb(1),k.Rc(n._icon)}}function Hi(e,t){if(1&e&&k.Rb(0,"mat-icon",29),2&e){var n=k.ic(3).$implicit;k.oc("svgIcon",n._icon)}}function Ki(e,t){if(1&e&&(k.Wb(0,"div",23),k.Oc(1,qi,2,1,"mat-icon",21),k.Oc(2,Hi,1,1,"mat-icon",28),k.Wb(3,"div",25),k.Qc(4),k.Vb(),k.Vb()),2&e){var n=k.ic(2).$implicit;k.Bb(1),k.oc("ngIf",n._isMaterialIcon),k.Bb(1),k.oc("ngIf",!n._isMaterialIcon),k.Bb(2),k.Rc(n.Name)}}function Xi(e,t){if(1&e&&(k.Wb(0,"div",30),k.Rb(1,"img",31),k.Vb()),2&e){var n=k.ic(2).$implicit;k.Bb(1),k.rc("alt","",n.Id,":",n.Name,""),k.qc("src","",n.FullPath,"?w=78&h=78&mode=crop",k.Ic)}}function Zi(e,t){if(1&e&&(k.Wb(0,"div"),k.Oc(1,Ki,5,3,"div",26),k.Oc(2,Xi,2,3,"div",27),k.Vb()),2&e){var n=k.ic().$implicit;k.Bb(1),k.oc("ngIf","image"!==n.Type),k.Bb(1),k.oc("ngIf","image"===n.Type)}}function Yi(e,t){if(1&e&&(k.Ub(0),k.Oc(1,Ui,5,1,"div",20),k.Oc(2,Zi,3,2,"div",21),k.Tb()),2&e){var n=t.$implicit;k.Bb(1),k.oc("ngIf",n.IsFolder),k.Bb(1),k.oc("ngIf",!n.IsFolder)}}var Ji=function(e,t,n,i,o){return{"mat-caption":e,"mat-empty":t,"mat-error":n,color__primary:i,"color__label-disabled":o}},eo=function(){return{enterDuration:360}},to=function(e,t){return{"c-ew__preview--invalid":e,"c-ew__preview--disabled":t}};function no(e,t){if(1&e){var n=k.Xb();k.Wb(0,"div",11),k.Wb(1,"mat-label",12),k.Qc(2),k.Vb(),k.Wb(3,"div",13),k.ec("click",(function(){return k.Fc(n),k.ic().expandDialog()})),k.Wb(4,"div",0),k.Wb(5,"div",14),k.Oc(6,Yi,3,2,"ng-container",15),k.Vb(),k.Vb(),k.Vb(),k.Wb(7,"div",16),k.Wb(8,"div",17),k.Rb(9,"app-field-helper-text",18),k.Vb(),k.Wb(10,"div",19),k.Wb(11,"span"),k.Qc(12),k.jc(13,"translate"),k.Vb(),k.Vb(),k.Vb(),k.Vb()}if(2&e){var i=t.ngIf,o=k.ic();k.Bb(1),k.oc("ngClass",k.xc(13,Ji,i.itemsNumber>0,0===i.itemsNumber,i.invalid&&!o.config.field.disabled,!i.invalid&&!o.config.field.disabled,o.config.field.disabled)),k.Bb(1),k.Tc(" ",i.label," ",i.required?"*":""," "),k.Bb(1),k.oc("matRippleAnimation",k.sc(19,eo))("ngClass",k.uc(20,to,i.invalid,o.config.field.disabled)),k.Bb(1),k.oc("ngClass",i.value?"c-ew__preview-container":"c-ew__preview-container--empty"),k.Bb(2),k.oc("ngForOf",i.items)("ngForTrackBy",o.trackByFn),k.Bb(3),k.oc("config",o.config)("group",o.group),k.Bb(3),k.Rc(k.kc(13,11,"Fields.Hyperlink.Default.Sponsor"))}}var io=function(e){return{"c-ew__dialog-header mat-elevation-z2":e}},oo=function(e){return{bottomPixels:e}},ao=function(e,t){return{value:e,params:t}},ro=function(e,t,n,i,o,a,r){return{value:e,label:t,required:n,invalid:i,items:o,itemsNumber:a,showValidation:r}},co=function(e){function t(t,n,i,a){var r=e.call(this,t,n)||this;return r.zone=i,r.editRoutingService=a,r.adamItems$=new o.a([]),r}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.open$=this.editRoutingService.isExpanded(this.config.field.index,this.config.entity.entityGuid)},t.prototype.ngAfterViewInit=function(){var e=this;this.dropzoneDraggingHelper=new ii(this.zone),this.dropzoneDraggingHelper.attach(this.backdropRef.nativeElement),this.dropzoneDraggingHelper.attach(this.dialogRef.nativeElement),this.subscription.add(this.config.adam.items$.subscribe((function(t){e.adamItems$.next(t)})))},t.prototype.ngOnDestroy=function(){this.dropzoneDraggingHelper.detach(),this.adamItems$.complete(),e.prototype.ngOnDestroy.call(this)},t.prototype.calculateBottomPixels=function(){return window.innerWidth>600?"100px":"50px"},t.prototype.trackByFn=function(e,t){return t.Id},t.prototype.expandDialog=function(){this.config.field.disabled||this.editRoutingService.expand(!0,this.config.field.index,this.config.entity.entityGuid)},t.prototype.closeDialog=function(){this.editRoutingService.expand(!1,this.config.field.index,this.config.entity.entityGuid)},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a),k.Qb(k.z),k.Qb(K.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["app-hyperlink-library-expandable-wrapper"]],viewQuery:function(e,t){var n;1&e&&(k.Lc(Qi,!0,k.O),k.Wc(Gi,!0),k.Wc(Ni,!0)),2&e&&(k.Cc(n=k.fc())&&(t.fieldComponent=n.first),k.Cc(n=k.fc())&&(t.backdropRef=n.first),k.Cc(n=k.fc())&&(t.dialogRef=n.first))},features:[k.yb],decls:31,vars:48,consts:[[3,"ngClass"],[1,"c-ew__backdrop",3,"click"],["backdrop",""],["fxLayout","column",1,"c-ew__dialog","mat-elevation-z24","u-border-radius"],["dialog",""],["fxLayout","row",1,"mat-elevation-z0"],["mat-icon-button","","fxLayoutAlign","center center",1,"back-arrow",3,"matTooltip","click"],["fxLayoutAlign","center center",1,"title","mat-display-1"],[1,"c-ew__dialog-content","c-ew__dialog-content--empty","u-border-radius-bottom","u-add-scrollbar","u-hide-scrollbar"],["fieldComponent",""],["class","c-ew__preview-holder",4,"ngIf"],[1,"c-ew__preview-holder"],[1,"c-ew__preview-label","c-ew__color--primary",3,"ngClass"],["matRipple","",1,"c-ew__preview","mat-ripple",3,"matRippleAnimation","ngClass","click"],["fxLayout","row","fxLayoutAlign","start start","fxLayoutGap","2px",1,"c-ew__preview-content"],[4,"ngFor","ngForOf","ngForTrackBy"],["fxLayout","row","fxLayoutAlign","start start",1,"mat-caption","c-ew__preview-hint"],[1,"c__helper-wrapper--left"],[3,"config","group"],["fxHide","","fxShow.gt-xs","",1,"c__helper-wrapper--right","c-ew__preview-hint-text"],["fxLayout","row","fxLayoutAlign","start start",4,"ngIf"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","start start"],[1,"adam-browse-background-icon"],["svgIcon","folder"],[1,"adam-short-label","mat-caption"],["class","adam-browse-background-icon",4,"ngIf"],["class","adam-browse-background-image",4,"ngIf"],[3,"svgIcon",4,"ngIf"],[3,"svgIcon"],[1,"adam-browse-background-image"],["data-dz-thumbnail","",3,"alt","src"]],template:function(e,t){1&e&&(k.Wb(0,"div",0),k.jc(1,"async"),k.Wb(2,"div",1,2),k.ec("click",(function(){return t.closeDialog()})),k.Vb(),k.Wb(4,"div",3,4),k.Wb(6,"div",0),k.jc(7,"async"),k.Wb(8,"mat-card",5),k.Wb(9,"button",6),k.ec("click",(function(){return t.closeDialog()})),k.jc(10,"translate"),k.Wb(11,"mat-icon"),k.Qc(12,"arrow_back"),k.Vb(),k.Vb(),k.Wb(13,"span",7),k.Qc(14),k.jc(15,"async"),k.Vb(),k.Vb(),k.Vb(),k.Wb(16,"div"),k.Rb(17,"div"),k.jc(18,"async"),k.Wb(19,"div",8),k.jc(20,"async"),k.Sb(21,null,9),k.Vb(),k.Vb(),k.Vb(),k.Vb(),k.Oc(23,no,14,23,"div",10),k.jc(24,"async"),k.jc(25,"async"),k.jc(26,"async"),k.jc(27,"async"),k.jc(28,"async"),k.jc(29,"async"),k.jc(30,"async")),2&e&&(k.oc("ngClass",k.kc(1,7,t.open$)?"c-ew__container":"u-display-none"),k.Bb(6),k.oc("ngClass",k.tc(33,io,k.kc(7,9,t.open$))),k.Bb(3),k.oc("matTooltip",k.kc(10,11,"Form.Buttons.Return.Tip")),k.Bb(5),k.Rc(k.kc(15,13,t.label$)),k.Bb(3),k.oc("@itemShrinkAnimation",k.kc(18,15,t.open$)?"closed":"open"),k.Bb(2),k.oc("@contentExpandAnimation",k.uc(37,ao,k.kc(20,17,t.open$)?"expanded":"closed",k.tc(35,oo,t.calculateBottomPixels()))),k.Bb(4),k.oc("ngIf",k.zc(40,ro,k.kc(24,19,t.value$),k.kc(25,21,t.label$),k.kc(26,23,t.required$),k.kc(27,25,t.invalid$),k.kc(28,27,t.adamItems$).slice(0,9),k.kc(29,29,t.adamItems$).length,k.kc(30,31,t.showValidation$))))},directives:[X.k,Z.a,We.c,He.a,It.a,We.b,Y.a,J.a,X.m,Tn.g,Mt.q,We.d,X.l,Fn,Z.b],pipes:[X.b,ne.d],styles:[".c-ew__preview[_ngcontent-%COMP%]{padding:0 0 12px;border-bottom:1px solid rgba(0,0,0,.2)}.c-ew__preview[_ngcontent-%COMP%]:hover:not(.c-ew__preview--disabled):not(.c-ew__preview--invalid){padding:0 0 11px;border-bottom:2px solid rgba(0,0,0,.4);transition:none}.c-ew__preview--invalid[_ngcontent-%COMP%]{padding:0 0 11px;border-bottom:2px solid #b00030;transition:none}.c-ew__preview--disabled[_ngcontent-%COMP%]{border:none;cursor:default;padding:0 0 13px;background-image:linear-gradient(90deg,rgba(0,0,0,.2) 0,rgba(0,0,0,.2) 33%,transparent 0);background-position:bottom;background-size:4px 1px;background-repeat:repeat-x}.c-ew__preview[_ngcontent-%COMP%]{position:relative;min-height:37px;max-height:119px;cursor:pointer}.c-ew__preview-holder[_ngcontent-%COMP%]{position:relative;margin-top:38px}.c-ew__preview-label[_ngcontent-%COMP%]{top:-26px;position:absolute;z-index:1;pointer-events:none;font-size:12px;line-height:14px}.c-ew__preview-label[_ngcontent-%COMP%]:not(.mat-error){color:rgba(29,39,61,.44)}.c-ew__preview-container[_ngcontent-%COMP%]{overflow:hidden;height:100%;align-content:center}.c-ew__preview-content[_ngcontent-%COMP%]{overflow:hidden}.c-ew__preview-hint[_ngcontent-%COMP%]{width:100%}.c-ew__preview-hint-text[_ngcontent-%COMP%]{color:rgba(29,39,61,.44)}.c-ew__preview--disabled[_ngcontent-%COMP%]   .adam-browse-background-icon[_ngcontent-%COMP%], .c-ew__preview--disabled[_ngcontent-%COMP%]   .c-ew__preview-hint-text[_ngcontent-%COMP%]{color:rgba(29,39,61,.24)}.c-ew__preview--disabled[_ngcontent-%COMP%]   .adam-browse-background-image[_ngcontent-%COMP%]{opacity:.5}.c-ew__preview[_ngcontent-%COMP%]   .c-ew__color--accent[_ngcontent-%COMP%]{color:#0087f4}.c-ew__preview[_ngcontent-%COMP%]   .c-ew__color--primary[_ngcontent-%COMP%]{color:rgba(29,39,61,.44)}.c-ew__preview[_ngcontent-%COMP%]   .color__label-disabled[_ngcontent-%COMP%]{color:rgba(29,39,61,.24)}.c-ew__preview[_ngcontent-%COMP%]   mat-empty[_ngcontent-%COMP%]{height:48px;padding:24px 0 0}.c-ew__preview[_ngcontent-%COMP%]   .adam-browse-background-icon[_ngcontent-%COMP%]{height:78px;width:78px;text-align:center;border-radius:4px;border:1px solid rgba(0,0,0,.2);display:flex;flex-direction:column;align-items:center;justify-content:center}.c-ew__preview[_ngcontent-%COMP%]   .adam-browse-background-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.c-ew__preview[_ngcontent-%COMP%]   .adam-browse-background-image[_ngcontent-%COMP%]{height:78px;width:78px;border-radius:4px;border:1px solid rgba(0,0,0,.2)}.c-ew__preview[_ngcontent-%COMP%]   .adam-browse-background-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:4px}.c__helper-wrapper[_ngcontent-%COMP%]{display:flex;width:100%}.c__helper-wrapper--left[_ngcontent-%COMP%]{flex:auto;width:1%}.c__helper-wrapper--right[_ngcontent-%COMP%]{flex:0 0 auto;padding-top:.54166667em;padding-left:12px;line-height:16px}.adam-short-label[_ngcontent-%COMP%]{max-width:80%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"],data:{animation:[In]},changeDetection:0}),t}(D);function so(e){return function(t){Reflect.defineMetadata("inputTypeAnnotations",e,t)}}var lo=n("WcVu");function uo(e,t){if(1&e&&k.Rb(0,"input",5),2&e){var n=k.ic().ngIf,i=k.ic();k.oc("formControlName",i.config.field.name)("placeholder",n.placeholder)("required",n.required)}}function po(e,t){if(1&e&&(k.Wb(0,"textarea",6),k.Qc(1,"    "),k.Vb()),2&e){var n=k.ic().ngIf,i=k.ic();k.oc("formControlName",i.config.field.name)("rows",n.rowCount)("placeholder",n.placeholder)("required",n.required)}}var fo=function(e){return{"textarea-field":e}};function go(e,t){if(1&e&&(k.Ub(0),k.Wb(1,"mat-form-field",1),k.Oc(2,uo,1,3,"input",2),k.Oc(3,po,2,4,"textarea",3),k.Wb(4,"mat-label"),k.Qc(5),k.Vb(),k.Vb(),k.Rb(6,"app-field-helper-text",4),k.Tb()),2&e){var n=t.ngIf,i=k.ic();k.Bb(1),k.oc("formGroup",i.group)("ngClass",k.tc(7,fo,n.rowCount>1)),k.Bb(1),k.oc("ngIf",n.rowCount<=1),k.Bb(1),k.oc("ngIf",n.rowCount>1),k.Bb(2),k.Rc(n.label),k.Bb(1),k.oc("config",i.config)("group",i.group)}}var bo=function(e,t,n,i,o,a){return{rowCount:e,label:t,placeholder:n,required:i,disabled:o,showValidation:a}},ho=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.rowCount$=this.settings$.pipe(Object(w.a)((function(e){return e.RowCount||1})))},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["string-default"]],features:[k.yb],decls:7,vars:20,consts:[[4,"ngIf"],["appearance","standard","color","accent",3,"formGroup","ngClass"],["matInput","",3,"formControlName","placeholder","required",4,"ngIf"],["matInput","",3,"formControlName","rows","placeholder","required",4,"ngIf"],[3,"config","group"],["matInput","",3,"formControlName","placeholder","required"],["matInput","",3,"formControlName","rows","placeholder","required"]],template:function(e,t){1&e&&(k.Oc(0,go,7,9,"ng-container",0),k.jc(1,"async"),k.jc(2,"async"),k.jc(3,"async"),k.jc(4,"async"),k.jc(5,"async"),k.jc(6,"async")),2&e&&k.oc("ngIf",k.yc(13,bo,k.kc(1,1,t.rowCount$),k.kc(2,3,t.label$),k.kc(3,5,t.placeholder$),k.kc(4,7,t.required$),k.kc(5,9,t.disabled$),k.kc(6,11,t.showValidation$)))},directives:[X.m,Tn.c,S.m,S.f,X.k,Z.a,Tn.g,Fn,wi.b,S.b,S.l,S.d,S.s],pipes:[X.b],styles:[".textarea-field[_ngcontent-%COMP%]{height:auto}"],changeDetection:0}),t=Object(i.c)([so({wrapper:[lo.a.EavLocalizationWrapper]})],t)}(D),mo=function(){function e(e,t,n,i,o){this.changeEvent=n,this.eavConfig=o,this.fields=[],this.findFields=/\[.*?\]/gi,this.unwrapField=/[\[\]]/gi,this.subscriptions=[],this.mask=e,this.model=t,this.fields=this.fieldList(),i&&(this.preClean=i),t&&n&&this.watchAllFields()}return e.prototype.resolve=function(){var e=this,t=this.mask;return null!=this.eavConfig&&null!=t&&(t=(t=t.replace("[App:AppId]",this.eavConfig.appId)).replace("[App:ZoneId]",this.eavConfig.zoneId)),this.fields.forEach((function(n,i){var o=e.model.hasOwnProperty(n)&&e.model[n]&&e.model[n].value?e.model[n].value:"",a=e.preClean(n,o);t=t.replace("["+n+"]",a)})),t},e.prototype.fieldList=function(){var e=this,t=[];if(!this.mask)return t;var n=this.mask.match(this.findFields);return n?n.forEach((function(n,i){var o=n.replace(e.unwrapField,"");t.push(o)})):t.push(this.mask),t},e.prototype.preClean=function(e,t){return t},e.prototype.onChange=function(){var e=this.resolve();this.value!==e&&this.changeEvent(e),this.value=e},e.prototype.watchAllFields=function(){var e=this;this.fields.forEach((function(t){if(e.model[t]){var n=e.model[t].valueChanges.subscribe((function(t){return e.onChange()}));e.subscriptions.push(n)}}))},e.prototype.destroy=function(){this.subscriptions.forEach((function(e){e.unsubscribe()}))},e}();function vo(e,t){if(1&e){var n=k.Xb();k.Ub(0),k.Wb(1,"mat-form-field",1),k.Wb(2,"input",2),k.ec("blur",(function(){return k.Fc(n),k.ic().clean(!0)})),k.jc(3,"async"),k.jc(4,"async"),k.Vb(),k.Wb(5,"mat-label"),k.Qc(6),k.jc(7,"async"),k.Vb(),k.Vb(),k.Rb(8,"app-field-helper-text",3),k.Tb()}if(2&e){var i=k.ic();k.Bb(1),k.oc("formGroup",i.group),k.Bb(1),k.oc("formControlName",i.config.field.name)("placeholder",k.kc(3,7,i.placeholder$))("required",k.kc(4,9,i.required$)),k.Bb(4),k.Rc(k.kc(7,11,i.label$)),k.Bb(2),k.oc("config",i.config)("group",i.group)}}var yo=function(e,t){return{disabled:e,showValidation:t}},wo=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.lastAutoCopy="",i}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.subscription.add(this.settings$.subscribe((function(e){t.autoGenerateMask=e.AutoGenerateMask||null,t.allowSlashes=e.AllowSlashes||!1,null!=t.fieldMaskService&&(t.fieldMaskService.destroy(),t.fieldMaskService=null),t.fieldMaskService=new mo(t.autoGenerateMask,t.group.controls,t.onSourcesChanged.bind(t),t.preClean)}))),this.onSourcesChanged(this.fieldMaskService.resolve()),this.subscription.add(this.control.valueChanges.subscribe((function(e){t.clean(!1)})))},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.prototype.onSourcesChanged=function(e){var t=this.control.value;if(!t||t===this.lastAutoCopy){var n=Mn.a.stripNonUrlCharacters(e,this.allowSlashes,!0);n&&(this.lastAutoCopy=n,t!==n&&this.control.patchValue(n))}},t.prototype.preClean=function(e,t){return t.replace("/","-").replace("\\","-")},t.prototype.clean=function(e){var t=this.control.value,n=Mn.a.stripNonUrlCharacters(t,this.allowSlashes,e);t!==n&&this.control.patchValue(n)},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["string-url-path"]],features:[k.yb],decls:3,vars:8,consts:[[4,"ngIf"],["appearance","standard","color","accent",3,"formGroup"],["matInput","",3,"formControlName","placeholder","required","blur"],[3,"config","group"]],template:function(e,t){1&e&&(k.Oc(0,vo,9,13,"ng-container",0),k.jc(1,"async"),k.jc(2,"async")),2&e&&k.oc("ngIf",k.uc(5,yo,k.kc(1,1,t.disabled$),k.kc(2,3,t.showValidation$)))},directives:[X.m,Tn.c,S.m,S.f,wi.b,S.b,S.l,S.d,S.s,Tn.g,Fn],pipes:[X.b],styles:[""],changeDetection:0}),t=Object(i.c)([so({wrapper:[lo.a.EavLocalizationWrapper]})],t)}(D),Co=n("LuBX");function _o(e,t){if(1&e&&(k.Wb(0,"mat-option",8),k.Qc(1),k.Vb()),2&e){var n=t.$implicit;k.oc("value",n.value),k.Bb(1),k.Sc(" ",n.label," ")}}function Oo(e,t){if(1&e&&(k.Wb(0,"mat-select",6),k.Oc(1,_o,2,2,"mat-option",7),k.Vb()),2&e){var n=k.ic().ngIf,i=k.ic();k.oc("formControlName",i.config.field.name)("required",n.required)("placeholder",n.placeholder),k.Bb(1),k.oc("ngForOf",n.dropdownOptions)}}function xo(e,t){if(1&e&&k.Rb(0,"input",9),2&e){var n=k.ic().ngIf,i=k.ic();k.oc("formControlName",i.config.field.name)("required",n.required)("placeholder",n.placeholder)}}function ko(e,t){if(1&e){var n=k.Xb();k.Wb(0,"button",10),k.ec("click",(function(){return k.Fc(n),k.ic(2).toggleFreeTextMode()})),k.Wb(1,"mat-icon",11),k.jc(2,"translate"),k.Qc(3),k.Vb(),k.Vb()}if(2&e){var i=k.ic().ngIf;k.oc("disabled",i.disabled),k.Bb(1),k.oc("matTooltip",k.kc(2,3,i.freeTextMode?"Fields.String.Dropdown":"Fields.String.Freetext")),k.Bb(2),k.Sc(" ",i.freeTextMode?"arrow_drop_down_circle":"text_fields"," ")}}function Io(e,t){if(1&e&&(k.Ub(0),k.Wb(1,"mat-form-field",1),k.Oc(2,Oo,2,4,"mat-select",2),k.Oc(3,xo,1,3,"input",3),k.Oc(4,ko,4,5,"button",4),k.Wb(5,"mat-label"),k.Qc(6),k.Vb(),k.Vb(),k.Rb(7,"app-field-helper-text",5),k.Tb()),2&e){var n=t.ngIf,i=k.ic();k.Bb(1),k.oc("formGroup",i.group),k.Bb(1),k.oc("ngIf",!n.freeTextMode),k.Bb(1),k.oc("ngIf",n.freeTextMode),k.Bb(1),k.oc("ngIf",n.enableTextEntry),k.Bb(2),k.Rc(n.label),k.Bb(1),k.oc("config",i.config)("group",i.group)}}var Mo=function(e,t,n,i,o,a,r,c){return{required:e,placeholder:t,label:n,disabled:i,enableTextEntry:o,dropdownOptions:a,freeTextMode:r,showValidation:c}},So=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.toggleFreeText$=new o.a(!1),i}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.enableTextEntry$=this.settings$.pipe(Object(w.a)((function(e){return e.EnableTextEntry||!1}))),this.dropdownOptions$=Object(Ct.a)([this.value$,this.settings$]).pipe(Object(w.a)((function(e){var t,n,i,o;return t=e[0],i=!1,o=[],(n=e[1].DropdownValues)&&(o=n.replace(/\r/g,"").split("\n").map((function(e){var n=e.split(":"),o=n[1],a=n.shift(),r=n.join(":"),c={label:a,value:r||""===o?r:a};return c.value===t&&(i=!0),c}))),i||o.push({label:t,value:t}),o}))),this.freeTextMode$=Object(Ct.a)([this.enableTextEntry$,this.toggleFreeText$]).pipe(Object(w.a)((function(e){return!!e[0]&&e[1]})))},t.prototype.ngOnDestroy=function(){this.toggleFreeText$.complete(),e.prototype.ngOnDestroy.call(this)},t.prototype.toggleFreeTextMode=function(){this.toggleFreeText$.next(!this.toggleFreeText$.value)},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["string-dropdown"]],features:[k.yb],decls:9,vars:26,consts:[[4,"ngIf"],["appearance","standard","color","accent",3,"formGroup"],[3,"formControlName","required","placeholder",4,"ngIf"],["matInput","",3,"formControlName","required","placeholder",4,"ngIf"],["matSuffix","","mat-icon-button","","appClickStopPropagation","",3,"disabled","click",4,"ngIf"],[3,"config","group"],[3,"formControlName","required","placeholder"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","",3,"formControlName","required","placeholder"],["matSuffix","","mat-icon-button","","appClickStopPropagation","",3,"disabled","click"],[3,"matTooltip"]],template:function(e,t){1&e&&(k.Oc(0,Io,8,7,"ng-container",0),k.jc(1,"async"),k.jc(2,"async"),k.jc(3,"async"),k.jc(4,"async"),k.jc(5,"async"),k.jc(6,"async"),k.jc(7,"async"),k.jc(8,"async")),2&e&&k.oc("ngIf",k.Ac(17,Mo,k.kc(1,1,t.required$),k.kc(2,3,t.placeholder$),k.kc(3,5,t.label$),k.kc(4,7,t.disabled$),k.kc(5,9,t.enableTextEntry$),k.kc(6,11,t.dropdownOptions$),k.kc(7,13,t.freeTextMode$),k.kc(8,15,t.showValidation$)))},directives:[X.m,Tn.c,S.m,S.f,Tn.g,Fn,Co.a,S.l,S.d,S.s,X.l,Mt.l,wi.b,S.b,It.a,Tn.h,te.a,J.a,Y.a],pipes:[X.b,ne.d],styles:[""],changeDetection:0}),t=Object(i.c)([so({wrapper:[lo.a.EavLocalizationWrapper]})],t)}(D),To=n("gatd"),Po=n("9Saw"),jo=n("b67o"),Vo=n("2FQU"),Eo=n("tR80"),$o=["autocomplete"];function Bo(e,t){if(1&e&&(k.Wb(0,"button",16),k.Wb(1,"mat-icon"),k.Qc(2,"arrow_drop_down"),k.Vb(),k.Vb()),2&e){var n=k.ic();k.oc("disabled",n.disabled||!n.settings.EnableAddExisting)}}function Lo(e,t){if(1&e&&(k.Wb(0,"button",18),k.Wb(1,"mat-icon"),k.Qc(2,"arrow_drop_down"),k.Vb(),k.Vb()),2&e){var n=k.ic(2);k.oc("disabled",n.disabled)}}function Fo(e,t){if(1&e){var n=k.Xb();k.Wb(0,"a",17),k.ec("click",(function(){return k.Fc(n),k.ic().toggleFreeText()})),k.Wb(1,"button",18),k.Wb(2,"mat-icon",19),k.jc(3,"translate"),k.Qc(4,"text_fields"),k.Vb(),k.Vb(),k.Oc(5,Lo,3,1,"button",20),k.Vb()}if(2&e){var i=k.ic();k.Bb(1),k.oc("disabled",i.disabled),k.Bb(1),k.oc("matTooltip",k.kc(3,3,"Fields.String.Freetext")),k.Bb(3),k.oc("ngIf",i.freeTextMode)}}function Do(e,t){if(1&e&&(k.Wb(0,"mat-option",21),k.Wb(1,"span"),k.Qc(2),k.Vb(),k.Vb()),2&e){var n=t.$implicit,i=k.ic();k.oc("value",n.Value)("disabled",i.isOptionDisabled(n.Value)),k.Bb(2),k.Rc(n.Text?n.Text:n.Value)}}function Wo(e,t){if(1&e){var n=k.Xb();k.Wb(0,"button",22),k.ec("click",(function(){return k.Fc(n),k.ic().openNewEntityDialog()})),k.jc(1,"translate"),k.Wb(2,"mat-icon"),k.Qc(3,"add_circle_outline"),k.Vb(),k.Vb()}if(2&e){var i=k.ic();k.oc("matTooltip",k.kc(1,2,"Fields.Entity.New"))("disabled",i.disabled||i.disableAddNew)}}function zo(e,t){if(1&e){var n=k.Xb();k.Wb(0,"mat-form-field",23),k.Rb(1,"input",24),k.Wb(2,"a",25),k.ec("click",(function(){return k.Fc(n),k.ic().toggleFreeText()})),k.Wb(3,"button",18),k.Wb(4,"mat-icon"),k.Qc(5,"arrow_drop_down"),k.Vb(),k.Vb(),k.Vb(),k.Wb(6,"mat-label"),k.Qc(7),k.Vb(),k.Vb()}if(2&e){var i=k.ic();k.oc("formGroup",i.group),k.Bb(1),k.oc("required",i.required)("formControlName",i.config.field.name)("placeholder",i.placeholder),k.Bb(2),k.oc("disabled",i.disabled),k.Bb(4),k.Rc(i.label)}}function Ao(e,t){if(1&e){var n=k.Xb();k.Wb(0,"div"),k.Qc(1,"debug: "),k.Wb(2,"span",26),k.ec("click",(function(){return k.Fc(n),k.ic().insertNull()})),k.Qc(3,"add null-item"),k.Vb(),k.Vb()}}function Ro(e,t){if(1&e){var n=k.Xb();k.Wb(0,"div"),k.Wb(1,"button",27),k.ec("click",(function(){return k.Fc(n),k.ic().openNewEntityDialog()})),k.jc(2,"translate"),k.Wb(3,"mat-icon"),k.Qc(4,"add"),k.Vb(),k.Vb(),k.Vb()}if(2&e){var i=k.ic();k.Bb(1),k.oc("matTooltip",k.kc(2,2,"Fields.Entity.New"))("disabled",i.disabled||i.disableAddNew)}}var Qo=function(e){return{"mat-form-field-invalid":e}},Go=function(e){return{"mat-error":e}},No=function(){function e(e,t){this.translate=e,this.globalConfigurationService=t,this.toggleFreeTextMode=new k.n,this.addSelected=new k.n,this.editEntity=new k.n,this.filteredEntities=[]}return e.prototype.ngOnInit=function(){this.debugEnabled$=this.globalConfigurationService.getDebugEnabled()},e.prototype.ngOnChanges=function(e){var t,n;if(null!=(null===(t=e.availableEntities)||void 0===t?void 0:t.currentValue)){var i=(null===(n=this.autocompleteRef)||void 0===n?void 0:n.nativeElement.value)||"";this.filterSelectionList(i)}},e.prototype.getPlaceholder=function(){return this.availableEntities.length?"search":this.error?this.error:this.translate.instant("Fields.EntityQuery.QueryNoItems")},e.prototype.toggleFreeText=function(){this.disabled||this.toggleFreeTextMode.emit()},e.prototype.filterSelectionList=function(e){this.filteredEntities=""!==e?this.availableEntities.filter((function(t){return t.Text?t.Text.toLowerCase().includes(e.toLowerCase()):t.Value.toLowerCase().includes(e.toLowerCase())})):this.availableEntities},e.prototype.optionSelected=function(e){this.addSelected.emit(e.option.value),this.autocompleteRef.nativeElement.value="",this.autocompleteRef.nativeElement.blur()},e.prototype.insertNull=function(){this.addSelected.emit(null)},e.prototype.isOptionDisabled=function(e){return!!this.selectedEntities.find((function(t){return t.value===e}))},e.prototype.openNewEntityDialog=function(){this.editEntity.emit(null)},e.\u0275fac=function(t){return new(t||e)(k.Qb(ne.e),k.Qb(Vo.a))},e.\u0275cmp=k.Kb({type:e,selectors:[["app-entity-default-search"]],viewQuery:function(e,t){var n;1&e&&k.Wc($o,!0),2&e&&k.Cc(n=k.fc())&&(t.autocompleteRef=n.first)},inputs:{config:"config",group:"group",control:"control",label:"label",placeholder:"placeholder",required:"required",invalid:"invalid",touched:"touched",disabled:"disabled",freeTextMode:"freeTextMode",settings:"settings",error:"error",disableAddNew:"disableAddNew",selectedEntities:"selectedEntities",availableEntities:"availableEntities"},outputs:{toggleFreeTextMode:"toggleFreeTextMode",addSelected:"addSelected",editEntity:"editEntity"},features:[k.zb],decls:22,vars:29,consts:[[3,"hidden"],["fxLayout","row","fxLayoutAlign","start end",1,"ed-field"],[3,"ngClass"],["appearance","standard","color","accent",3,"formGroup","ngClass"],["matInput","",3,"placeholder","matAutocomplete","disabled","blur","input"],["autocomplete",""],["mat-icon-button","","matSuffix","",3,"disabled",4,"ngIf"],["matSuffix","","fxLayoutAlign","center center","appClickStopPropagation","",3,"click",4,"ngIf"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["fxLayoutAlign","end center",3,"ngClass"],["mat-icon-button","",3,"matTooltip","disabled","click",4,"ngIf"],["appearance","standard","color","accent",3,"formGroup",4,"ngIf"],[4,"ngIf"],[3,"config","group"],["mat-icon-button","","matSuffix","",3,"disabled"],["matSuffix","","fxLayoutAlign","center center","appClickStopPropagation","",3,"click"],["mat-icon-button","",3,"disabled"],[3,"matTooltip"],["mat-icon-button","",3,"disabled",4,"ngIf"],[3,"value","disabled"],["mat-icon-button","",3,"matTooltip","disabled","click"],["appearance","standard","color","accent",3,"formGroup"],["matInput","",3,"required","formControlName","placeholder"],["matSuffix","","appClickStopPropagation","",3,"click"],[3,"click"],["mat-mini-fab","","color","accent",3,"matTooltip","disabled","click"]],template:function(e,t){if(1&e&&(k.Wb(0,"div",0),k.Wb(1,"div",1),k.Wb(2,"div",2),k.Wb(3,"div",0),k.Wb(4,"mat-form-field",3),k.Wb(5,"input",4,5),k.ec("blur",(function(){return t.control.markAsTouched()}))("input",(function(e){return t.filterSelectionList(e.target.value)})),k.Vb(),k.Oc(7,Bo,3,1,"button",6),k.Oc(8,Fo,6,5,"a",7),k.Wb(9,"mat-label",2),k.Qc(10),k.jc(11,"translate"),k.Vb(),k.Vb(),k.Wb(12,"mat-autocomplete",8,9),k.ec("optionSelected",(function(e){return t.optionSelected(e)})),k.Oc(14,Do,3,3,"mat-option",10),k.Vb(),k.Vb(),k.Vb(),k.Wb(15,"div",11),k.Oc(16,Wo,4,4,"button",12),k.Vb(),k.Vb(),k.Vb(),k.Oc(17,zo,8,6,"mat-form-field",13),k.Oc(18,Ao,4,0,"div",14),k.jc(19,"async"),k.Rb(20,"app-field-helper-text",15),k.Oc(21,Ro,5,4,"div",14)),2&e){var n=k.Dc(13);k.oc("hidden",t.freeTextMode),k.Bb(2),k.oc("ngClass",t.settings.EnableCreate&&t.settings.EntityType&&!t.selectedEntities.length&&!t.settings.AllowMultiValue?"ed-field__field-short":"ed-field__field"),k.Bb(1),k.oc("hidden",!t.settings.AllowMultiValue&&t.selectedEntities.length),k.Bb(1),k.oc("formGroup",t.group)("ngClass",k.tc(25,Qo,t.invalid&&t.touched)),k.Bb(1),k.oc("placeholder",t.getPlaceholder())("matAutocomplete",n)("disabled",t.disabled||!t.settings.EnableAddExisting),k.Bb(2),k.oc("ngIf",!t.settings.EnableTextEntry),k.Bb(1),k.oc("ngIf",t.settings.EnableTextEntry),k.Bb(1),k.oc("ngClass",k.tc(27,Go,t.invalid&&t.touched)),k.Bb(1),k.Tc(" ",t.settings.AllowMultiValue?k.kc(11,21,"Fields.Entity.Choose"):t.label," ",t.required?"*":""," "),k.Bb(4),k.oc("ngForOf",t.filteredEntities),k.Bb(1),k.oc("ngClass",t.settings.EnableCreate&&t.settings.EntityType&&!t.selectedEntities.length&&!t.settings.AllowMultiValue?"ed-field__create-icon":"ed-field__create-icon-hide"),k.Bb(1),k.oc("ngIf",t.settings.EnableCreate&&t.settings.EntityType&&!t.selectedEntities.length&&!t.settings.AllowMultiValue),k.Bb(1),k.oc("ngIf",t.freeTextMode),k.Bb(1),k.oc("ngIf",k.kc(19,23,t.debugEnabled$)),k.Bb(2),k.oc("config",t.config)("group",t.group),k.Bb(1),k.oc("ngIf",!t.freeTextMode&&t.settings.EnableCreate&&t.settings.EntityType&&t.settings.AllowMultiValue)}},directives:[We.c,We.b,X.k,Z.a,Tn.c,S.m,S.f,wi.b,Eo.c,X.m,Tn.g,Eo.a,X.l,Fn,It.a,Tn.h,J.a,te.a,Y.a,Mt.l,S.b,S.s,S.l,S.d],pipes:[ne.d,X.b],styles:[".ed-field[_ngcontent-%COMP%]{width:100%;height:100%}.ed-field__create-icon[_ngcontent-%COMP%]{width:38px;padding-bottom:4px}.ed-field__create-icon[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{width:30px;height:30px;line-height:30px}.ed-field__create-icon-hide[_ngcontent-%COMP%]{width:0}.ed-field__field-short[_ngcontent-%COMP%]{width:calc(100% - 38px);max-width:calc(100% - 38px)}.ed-field__field[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),e}(),Uo=n("2pW/"),qo=n("kVtj"),Ho=function(e){return{disabled:e}};function Ko(e,t){if(1&e&&(k.Wb(0,"mat-label",3),k.Qc(1),k.Vb()),2&e){var n=k.ic();k.oc("ngClass",k.tc(3,Ho,n.disabled)),k.Bb(1),k.Tc(" ",n.label," ",n.required?"*":"","\n")}}function Xo(e,t){if(1&e&&(k.Wb(0,"mat-icon",10),k.jc(1,"translate"),k.Qc(2," drag_handle "),k.Vb()),2&e){var n=k.ic(2);k.oc("matTooltipDisabled",n.disabled)("matTooltip",k.kc(1,2,"Fields.Entity.DragMove"))}}function Zo(e,t){if(1&e){var n=k.Xb();k.Wb(0,"button",11),k.ec("click",(function(){k.Fc(n);var e=k.ic().$implicit;return k.ic().edit(e.value)})),k.jc(1,"translate"),k.Wb(2,"mat-icon"),k.Qc(3,"edit"),k.Vb(),k.Vb()}if(2&e){var i=k.ic(2);k.oc("matTooltip",k.kc(1,2,"Fields.Entity.Edit"))("disabled",i.config.field.disabled)}}function Yo(e,t){if(1&e){var n=k.Xb();k.Wb(0,"button",11),k.ec("click",(function(){k.Fc(n);var e=k.ic().$implicit;return k.ic().deleteItem(e.value)})),k.jc(1,"translate"),k.Wb(2,"mat-icon"),k.Qc(3,"delete"),k.Vb(),k.Vb()}if(2&e){var i=k.ic(2);k.oc("matTooltip",k.kc(1,2,"Fields.Entity.Delete"))("disabled",i.disabled)}}function Jo(e,t){if(1&e){var n=k.Xb();k.Wb(0,"button",11),k.ec("click",(function(){k.Fc(n);var e=k.ic().index;return k.ic().removeItem(e)})),k.jc(1,"translate"),k.Wb(2,"mat-icon"),k.Qc(3),k.Vb(),k.Vb()}if(2&e){var i=k.ic(2);k.oc("matTooltip",k.kc(1,3,"Fields.Entity.Remove"))("disabled",i.disabled),k.Bb(3),k.Rc(i.settings.AllowMultiValue?"clear":"arrow_drop_down")}}var ea=function(e,t,n){return{"normal-item":e,"dnd-item":t,disabled:n}};function ta(e,t){if(1&e&&(k.Wb(0,"div",4),k.Wb(1,"div",5),k.Oc(2,Xo,3,4,"mat-icon",6),k.Wb(3,"span",7),k.Qc(4),k.Vb(),k.Vb(),k.Wb(5,"div",8),k.Oc(6,Zo,4,4,"button",9),k.Oc(7,Yo,4,4,"button",9),k.Oc(8,Jo,4,5,"button",9),k.Vb(),k.Vb()),2&e){var n=t.$implicit,i=k.ic();k.oc("ngClass",k.vc(8,ea,!i.settings.AllowMultiValue,i.settings.AllowMultiValue,i.disabled)),k.Bb(1),k.oc("ngClass",k.tc(12,Ho,i.disabled)),k.Bb(1),k.oc("ngIf",i.settings.AllowMultiValue),k.Bb(1),k.oc("matTooltip",n.tooltip),k.Bb(1),k.Sc(" ",n.label," "),k.Bb(2),k.oc("ngIf",i.settings.EnableEdit&&!n.isFreeTextOrNotFound),k.Bb(1),k.oc("ngIf",i.settings.EnableDelete&&!n.isFreeTextOrNotFound),k.Bb(1),k.oc("ngIf",i.settings.EnableRemove)}}var na=function(e,t){return{"normal-list":e,"dnd-list":t}},ia=function(){function e(){this.reorder=new k.n,this.removeSelected=new k.n,this.editEntity=new k.n,this.deleteEntity=new k.n}return e.prototype.trackByFn=function(e,t){return t.value},e.prototype.drop=function(e){Object(Po.d)(this.selectedEntities,e.previousIndex,e.currentIndex),this.reorder.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex})},e.prototype.edit=function(e){this.editEntity.emit(e)},e.prototype.removeItem=function(e){this.removeSelected.emit(e)},e.prototype.deleteItem=function(e){this.deleteEntity.emit(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.Kb({type:e,selectors:[["app-entity-default-list"]],inputs:{config:"config",label:"label",required:"required",disabled:"disabled",freeTextMode:"freeTextMode",settings:"settings",selectedEntities:"selectedEntities"},outputs:{reorder:"reorder",removeSelected:"removeSelected",editEntity:"editEntity",deleteEntity:"deleteEntity"},decls:3,vars:8,consts:[["class","field-label",3,"ngClass",4,"ngIf"],["cdkDropList","",3,"cdkDropListDisabled","ngClass","cdkDropListDropped"],["cdkDrag","",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"field-label",3,"ngClass"],["cdkDrag","",3,"ngClass"],[1,"item-title",3,"ngClass"],["class","item-title__icon",3,"matTooltipDisabled","matTooltip",4,"ngIf"],[1,"item-title__text",3,"matTooltip"],[1,"item-actions"],["mat-icon-button","","appMousedownStopPropagation","",3,"matTooltip","disabled","click",4,"ngIf"],[1,"item-title__icon",3,"matTooltipDisabled","matTooltip"],["mat-icon-button","","appMousedownStopPropagation","",3,"matTooltip","disabled","click"]],template:function(e,t){1&e&&(k.Oc(0,Ko,2,5,"mat-label",0),k.Wb(1,"div",1),k.ec("cdkDropListDropped",(function(e){return t.drop(e)})),k.Oc(2,ta,9,14,"div",2),k.Vb()),2&e&&(k.oc("ngIf",!t.settings.AllowMultiValue),k.Bb(1),k.oc("cdkDropListDisabled",!t.settings.AllowMultiValue||t.disabled)("ngClass",k.uc(5,na,!t.settings.AllowMultiValue,t.settings.AllowMultiValue)),k.Bb(1),k.oc("ngForOf",t.selectedEntities)("ngForTrackBy",t.trackByFn))},directives:[X.m,Po.b,X.k,Z.a,X.l,Tn.g,Po.a,Y.a,J.a,It.a,qo.a],pipes:[ne.d],styles:[".normal-list[_ngcontent-%COMP%]   .normal-item[_ngcontent-%COMP%]{padding:0 0 1px;border-bottom:1px solid rgba(0,0,0,.2)}.normal-list[_ngcontent-%COMP%]   .normal-item[_ngcontent-%COMP%]:hover:not(.disabled){padding:0;border-bottom:2px solid rgba(0,0,0,.4);transition:none}.normal-list[_ngcontent-%COMP%]   .normal-item.disabled[_ngcontent-%COMP%]{border:none;cursor:default;padding:0 0 2px;background-image:linear-gradient(90deg,rgba(0,0,0,.2) 0,rgba(0,0,0,.2) 33%,transparent 0);background-position:bottom;background-size:4px 1px;background-repeat:repeat-x}.field-label[_ngcontent-%COMP%]{display:block;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:12px;line-height:14px;padding-top:12px;padding-bottom:4px;color:rgba(29,39,61,.44)}.field-label.disabled[_ngcontent-%COMP%]{color:rgba(29,39,61,.24)}.normal-list[_ngcontent-%COMP%]   .normal-item[_ngcontent-%COMP%]{height:30px;display:flex;align-items:center;justify-content:space-between}.normal-list[_ngcontent-%COMP%]   .normal-item[_ngcontent-%COMP%]:first-of-type{height:31px}.normal-list[_ngcontent-%COMP%]   .normal-item[_ngcontent-%COMP%]:first-of-type   .item-actions[_ngcontent-%COMP%], .normal-list[_ngcontent-%COMP%]   .normal-item[_ngcontent-%COMP%]:first-of-type   .item-title[_ngcontent-%COMP%]{margin-top:-2px}.dnd-list[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:4px;overflow:hidden;margin-bottom:32px}.dnd-item[_ngcontent-%COMP%]{height:40px;border-bottom:1px solid #ccc;padding:0 8px;display:flex;align-items:center;justify-content:space-between;background:#fff;box-sizing:border-box;font-size:14px}.dnd-item[_ngcontent-%COMP%]:not(.disabled){cursor:move}.dnd-item[_ngcontent-%COMP%]:last-child{border:none}.item-title[_ngcontent-%COMP%]{display:flex;align-items:center;overflow:hidden}.item-title__icon[_ngcontent-%COMP%]{margin-right:8px;opacity:.4;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.item-title__text[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.item-title.disabled[_ngcontent-%COMP%]   .item-title__icon[_ngcontent-%COMP%]{color:rgba(29,39,61,.24)}.item-title.disabled[_ngcontent-%COMP%]   .item-title__text[_ngcontent-%COMP%]{color:rgba(29,39,61,.24);cursor:default}.item-actions[_ngcontent-%COMP%]{flex-shrink:0}.item-actions[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{width:30px;height:30px;line-height:30px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%], .dnd-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .dnd-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0}),e}();function oa(e,t){if(1&e){var n=k.Xb();k.Wb(0,"app-entity-default-list",3),k.ec("reorder",(function(e){return k.Fc(n),k.ic(2).reorder(e)}))("removeSelected",(function(e){return k.Fc(n),k.ic(2).removeSelected(e)}))("editEntity",(function(e){return k.Fc(n),k.ic(2).editEntity(e)}))("deleteEntity",(function(e){return k.Fc(n),k.ic(2).deleteEntity(e)})),k.Vb()}if(2&e){var i=k.ic().ngIf,o=k.ic();k.oc("config",o.config)("label",i.label)("required",i.required)("disabled",i.disabled)("freeTextMode",i.freeTextMode)("settings",i.settings)("selectedEntities",i.selectedEntities)}}function aa(e,t){if(1&e){var n=k.Xb();k.Ub(0),k.Oc(1,oa,1,7,"app-entity-default-list",1),k.Wb(2,"app-entity-default-search",2),k.ec("toggleFreeTextMode",(function(){return k.Fc(n),k.ic().toggleFreeTextMode()}))("addSelected",(function(e){return k.Fc(n),k.ic().addSelected(e)}))("editEntity",(function(e){return k.Fc(n),k.ic().editEntity(e)})),k.Vb(),k.Tb()}if(2&e){var i=t.ngIf,o=k.ic();k.Bb(1),k.oc("ngIf",!i.freeTextMode&&i.selectedEntities.length&&(!i.settings.AllowMultiValue||i.settings.AllowMultiValue&&i.isExpanded)),k.Bb(1),k.oc("config",o.config)("group",o.group)("control",o.control)("label",i.label)("placeholder",i.placeholder)("required",i.required)("invalid",i.invalid)("touched",i.touched)("disabled",i.disabled)("freeTextMode",i.freeTextMode)("settings",i.settings)("selectedEntities",i.selectedEntities)("availableEntities",i.availableEntities)("disableAddNew",i.disableAddNew)("error",i.error)}}var ra=function(e,t,n,i,o,a,r,c,s,l,d,u,p,f){return{label:e,placeholder:t,required:n,invalid:i,touched:o,disabled:a,freeTextMode:r,settings:c,selectedEntities:s,availableEntities:l,disableAddNew:d,isExpanded:u,error:p,showValidation:f}},ca=function(e){function t(t,n,i,a,r,c){var s=e.call(this,t,n)||this;return s.entityService=i,s.translate=a,s.editRoutingService=r,s.snackBar=c,s.useQuery=!1,s.error$=new o.a(""),s.freeTextMode$=new o.a(!1),s.disableAddNew$=new o.a(!0),s.eavConfig=t.getEavConfiguration(),s}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.config.entityCache$=new o.a([]),this.settings$=this.settings$.pipe(Object(w.a)((function(e){return t.calculateSettings(e)}))),this.separator=this.config.field.settings$.value.Separator,this.selectedEntities$=Object(Ct.a)([this.value$,this.config.entityCache$]).pipe(Object(w.a)((function(e){return Sn(e[0],t.separator,e[1],t.translate)}))),this.isExpanded$=this.editRoutingService.isExpanded(this.config.field.index,this.config.entity.entityGuid),this.subscription.add(this.settings$.subscribe((function(e){var n;null===(n=t.contentTypeMask)||void 0===n||n.destroy(),t.contentTypeMask=new mo(e.EntityType,t.group.controls,t.useQuery?t.updateAddNew.bind(t):t.fetchAvailableEntities.bind(t),null,t.eavConfig)}))),this.useQuery?this.updateAddNew():this.fetchAvailableEntities(),this.refreshOnChildClosed()},t.prototype.ngOnDestroy=function(){this.error$.complete(),this.freeTextMode$.complete(),this.disableAddNew$.complete(),this.config.entityCache$.complete(),this.contentTypeMask.destroy(),e.prototype.ngOnDestroy.call(this)},t.prototype.toggleFreeTextMode=function(){this.freeTextMode$.next(!this.freeTextMode$.value)},t.prototype.calculateSettings=function(e){var t=Object(i.a)({},e);return null==t.EntityType&&(t.EntityType=""),null==t.AllowMultiValue&&(t.AllowMultiValue=!1),null==t.EnableEdit&&(t.EnableEdit=!0),null==t.EnableCreate&&(t.EnableCreate=!0),null==t.EnableAddExisting&&(t.EnableAddExisting=!0),null==t.EnableRemove&&(t.EnableRemove=!0),null==t.EnableDelete&&(t.EnableDelete=!1),t},t.prototype.fetchAvailableEntities=function(){var e=this;this.updateAddNew();var t,n=this.contentTypeMask.resolve();this.settings$.pipe(Object(v.a)(1)).subscribe((function(e){t=e.EnableAddExisting})),this.entityService.getAvailableEntities(t?null:this.control.value,n).subscribe((function(t){e.config.entityCache$.next(t)}))},t.prototype.updateAddNew=function(){var e=this.contentTypeMask.resolve();this.disableAddNew$.next(!e)},t.prototype.reorder=function(e){this.updateValue("reorder",e)},t.prototype.addSelected=function(e){this.updateValue("add",e)},t.prototype.removeSelected=function(e){this.updateValue("delete",e)},t.prototype.editEntity=function(e){var t,n;null==e?t={items:[{ContentTypeName:this.contentTypeMask.resolve()}]}:(this.config.entityCache$.pipe(Object(v.a)(1)).subscribe((function(e){n=e})),t={items:[{EntityId:n.find((function(t){return t.Value===e})).Id}]}),this.editRoutingService.open(this.config.field.index,this.config.entity.entityGuid,t)},t.prototype.deleteEntity=function(e){var t,n=this,i=this.config.entityCache$.value.find((function(t){return t.Value===e})),o=i.Id.toString(),a=i.Text,r=this.contentTypeMask.resolve();this.selectedEntities$.pipe(Object(v.a)(1)).subscribe((function(e){t=e}));var c=t.findIndex((function(t){return t.value===e}));confirm(this.translate.instant("Data.Delete.Question",{title:a,id:o}))&&(this.snackBar.open("Deleting..."),this.entityService.delete(r,o,!1).subscribe({next:function(){n.snackBar.open("Deleted",null,{duration:2e3}),n.removeSelected(c),n.fetchAvailableEntities()},error:function(e){n.snackBar.dismiss(),confirm(n.translate.instant("Data.Delete.Question",{title:a,id:o}))&&(n.snackBar.open("Deleting..."),n.entityService.delete(r,o,!0).subscribe((function(e){n.snackBar.open("Deleted",null,{duration:2e3}),n.removeSelected(c),n.fetchAvailableEntities()})))}}))},t.prototype.refreshOnChildClosed=function(){var e=this;this.subscription.add(this.editRoutingService.childFormClosed().subscribe((function(){e.fetchAvailableEntities()}))),this.subscription.add(this.editRoutingService.childFormResult(this.config.field.index,this.config.entity.entityGuid).subscribe((function(t){var n=Object.keys(t)[0];e.addSelected(n)})))},t.prototype.updateValue=function(e,t){var n=this,o="string"==typeof this.control.value?Mn.a.convertValueToArray(this.control.value,this.separator):Object(i.g)(this.control.value);switch(e){case"add":o.push(t);break;case"delete":o.splice(t,1);break;case"reorder":var a=t;Object(Po.d)(o,a.previousIndex,a.currentIndex)}if("string"==typeof this.control.value){var r=Mn.a.convertArrayToString(o,this.separator);this.control.patchValue(r)}else this.control.patchValue(o);this.control.dirty||this.control.markAsDirty(),"delete"!==e||o.length||setTimeout((function(){var e;null===(e=n.entitySearchComponent.autocompleteRef)||void 0===e||e.nativeElement.focus()}),0)},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a),k.Qb(jo.a),k.Qb(ne.e),k.Qb(K.a),k.Qb(Uo.b))},t.\u0275cmp=k.Kb({type:t,selectors:[["entity-default"]],viewQuery:function(e,t){var n;1&e&&k.Wc(No,!0),2&e&&k.Cc(n=k.fc())&&(t.entitySearchComponent=n.first)},features:[k.yb],decls:14,vars:42,consts:[[4,"ngIf"],[3,"config","label","required","disabled","freeTextMode","settings","selectedEntities","reorder","removeSelected","editEntity","deleteEntity",4,"ngIf"],[3,"config","group","control","label","placeholder","required","invalid","touched","disabled","freeTextMode","settings","selectedEntities","availableEntities","disableAddNew","error","toggleFreeTextMode","addSelected","editEntity"],[3,"config","label","required","disabled","freeTextMode","settings","selectedEntities","reorder","removeSelected","editEntity","deleteEntity"]],template:function(e,t){1&e&&(k.Oc(0,aa,3,16,"ng-container",0),k.jc(1,"async"),k.jc(2,"async"),k.jc(3,"async"),k.jc(4,"async"),k.jc(5,"async"),k.jc(6,"async"),k.jc(7,"async"),k.jc(8,"async"),k.jc(9,"async"),k.jc(10,"async"),k.jc(11,"async"),k.jc(12,"async"),k.jc(13,"async")),2&e&&k.oc("ngIf",k.Bc(27,ra,[k.kc(1,1,t.label$),k.kc(2,3,t.placeholder$),k.kc(3,5,t.required$),k.kc(4,7,t.invalid$),t.control.touched,k.kc(5,9,t.disabled$),k.kc(6,11,t.freeTextMode$),k.kc(7,13,t.settings$),k.kc(8,15,t.selectedEntities$),k.kc(9,17,t.config.entityCache$),k.kc(10,19,t.disableAddNew$),k.kc(11,21,t.isExpanded$),k.kc(12,23,t.error$),k.kc(13,25,t.showValidation$)]))},directives:[X.m,No,ia],pipes:[X.b],styles:[""],changeDetection:0}),t=Object(i.c)([so({})],t)}(D);function sa(e,t){if(1&e){var n=k.Xb();k.Wb(0,"app-entity-default-list",3),k.ec("reorder",(function(e){return k.Fc(n),k.ic(2).reorder(e)}))("removeSelected",(function(e){return k.Fc(n),k.ic(2).removeSelected(e)}))("editEntity",(function(e){return k.Fc(n),k.ic(2).editEntity(e)}))("deleteEntity",(function(e){return k.Fc(n),k.ic(2).deleteEntity(e)})),k.Vb()}if(2&e){var i=k.ic().ngIf,o=k.ic();k.oc("config",o.config)("label",i.label)("required",i.required)("disabled",i.disabled)("freeTextMode",i.freeTextMode)("settings",i.settings)("selectedEntities",i.selectedEntities)}}function la(e,t){if(1&e){var n=k.Xb();k.Ub(0),k.Oc(1,sa,1,7,"app-entity-default-list",1),k.Wb(2,"app-entity-default-search",2),k.ec("toggleFreeTextMode",(function(){return k.Fc(n),k.ic().toggleFreeTextMode()}))("addSelected",(function(e){return k.Fc(n),k.ic().addSelected(e)}))("editEntity",(function(e){return k.Fc(n),k.ic().editEntity(e)})),k.Vb(),k.Tb()}if(2&e){var i=t.ngIf,o=k.ic();k.Bb(1),k.oc("ngIf",!i.freeTextMode&&i.selectedEntities.length&&(!i.settings.AllowMultiValue||i.settings.AllowMultiValue&&i.isExpanded)),k.Bb(1),k.oc("config",o.config)("group",o.group)("control",o.control)("label",i.label)("placeholder",i.placeholder)("required",i.required)("invalid",i.invalid)("touched",i.touched)("disabled",i.disabled)("freeTextMode",i.freeTextMode)("settings",i.settings)("selectedEntities",i.selectedEntities)("availableEntities",i.availableEntities)("disableAddNew",i.disableAddNew)("error",i.error)}}var da=function(e,t,n,i,o,a,r,c,s,l,d,u,p,f){return{label:e,placeholder:t,required:n,invalid:i,touched:o,disabled:a,freeTextMode:r,settings:c,selectedEntities:s,availableEntities:l,disableAddNew:d,isExpanded:u,error:p,showValidation:f}},ua=function(e){function t(t,n,i,o,a,r,c){var s=e.call(this,t,n,i,o,a,r)||this;return s.queryService=c,s.useQuery=!0,s}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.subscription.add(this.settings$.subscribe((function(e){var n;null===(n=t.paramsMask)||void 0===n||n.destroy(),t.paramsMask=new mo(e.UrlParameters,t.group.controls,t.fetchAvailableEntities.bind(t),null,t.eavConfig)}))),this.fetchAvailableEntities()},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.prototype.calculateSettings=function(t){var n=e.prototype.calculateSettings.call(this,t);return null==n.Query&&(n.Query=""),null!=n.StreamName&&""!==n.StreamName||(n.StreamName="Default"),null==n.UrlParameters&&(n.UrlParameters=""),n},t.prototype.fetchAvailableEntities=function(){var e,t=this;if(this.settings$.pipe(Object(v.a)(1)).subscribe((function(t){e=t})),e.Query){var n=e.StreamName,i=e.Query.includes("/")?e.Query:e.Query+"/"+n,o=this.paramsMask.resolve();this.queryService.getAvailableEntities(i,!0,o).subscribe({next:function(e){if(e)if(e[n]){var i=e[n].map(t.queryEntityMapping.bind(t));t.config.entityCache$.next(i)}else t.error$.next(t.translate.instant("Fields.EntityQuery.QueryStreamNotFound")+n);else t.error$.next(t.translate.instant("Fields.EntityQuery.QueryError"))},error:function(e){console.error(e),console.error(t.translate.instant("Fields.EntityQuery.QueryError")+" - "+e.data)}})}else alert("No query defined for "+this.config.field.name+" - can't load entities")},t.prototype.queryEntityMapping=function(e){return{Id:e.Id,Value:e.Guid,Text:e.Title}},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a),k.Qb(jo.a),k.Qb(ne.e),k.Qb(K.a),k.Qb(Uo.b),k.Qb(To.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["entity-query"]],features:[k.yb],decls:14,vars:42,consts:[[4,"ngIf"],[3,"config","label","required","disabled","freeTextMode","settings","selectedEntities","reorder","removeSelected","editEntity","deleteEntity",4,"ngIf"],[3,"config","group","control","label","placeholder","required","invalid","touched","disabled","freeTextMode","settings","selectedEntities","availableEntities","disableAddNew","error","toggleFreeTextMode","addSelected","editEntity"],[3,"config","label","required","disabled","freeTextMode","settings","selectedEntities","reorder","removeSelected","editEntity","deleteEntity"]],template:function(e,t){1&e&&(k.Oc(0,la,3,16,"ng-container",0),k.jc(1,"async"),k.jc(2,"async"),k.jc(3,"async"),k.jc(4,"async"),k.jc(5,"async"),k.jc(6,"async"),k.jc(7,"async"),k.jc(8,"async"),k.jc(9,"async"),k.jc(10,"async"),k.jc(11,"async"),k.jc(12,"async"),k.jc(13,"async")),2&e&&k.oc("ngIf",k.Bc(27,da,[k.kc(1,1,t.label$),k.kc(2,3,t.placeholder$),k.kc(3,5,t.required$),k.kc(4,7,t.invalid$),t.control.touched,k.kc(5,9,t.disabled$),k.kc(6,11,t.freeTextMode$),k.kc(7,13,t.settings$),k.kc(8,15,t.selectedEntities$),k.kc(9,17,t.config.entityCache$),k.kc(10,19,t.disableAddNew$),k.kc(11,21,t.isExpanded$),k.kc(12,23,t.error$),k.kc(13,25,t.showValidation$)]))},directives:[X.m,No,ia],pipes:[X.b],styles:[""],changeDetection:0}),t=Object(i.c)([so({})],t)}(ca);function pa(e,t){if(1&e){var n=k.Xb();k.Wb(0,"app-entity-default-list",3),k.ec("reorder",(function(e){return k.Fc(n),k.ic(2).reorder(e)}))("removeSelected",(function(e){return k.Fc(n),k.ic(2).removeSelected(e)}))("editEntity",(function(e){return k.Fc(n),k.ic(2).editEntity(e)}))("deleteEntity",(function(e){return k.Fc(n),k.ic(2).deleteEntity(e)})),k.Vb()}if(2&e){var i=k.ic().ngIf,o=k.ic();k.oc("config",o.config)("label",i.label)("required",i.required)("disabled",i.disabled)("freeTextMode",i.freeTextMode)("settings",i.settings)("selectedEntities",i.selectedEntities)}}function fa(e,t){if(1&e){var n=k.Xb();k.Ub(0),k.Oc(1,pa,1,7,"app-entity-default-list",1),k.Wb(2,"app-entity-default-search",2),k.ec("toggleFreeTextMode",(function(){return k.Fc(n),k.ic().toggleFreeTextMode()}))("addSelected",(function(e){return k.Fc(n),k.ic().addSelected(e)}))("editEntity",(function(e){return k.Fc(n),k.ic().editEntity(e)})),k.Vb(),k.Tb()}if(2&e){var i=t.ngIf,o=k.ic();k.Bb(1),k.oc("ngIf",!i.freeTextMode&&i.selectedEntities.length&&(!i.settings.AllowMultiValue||i.settings.AllowMultiValue&&i.isExpanded)),k.Bb(1),k.oc("config",o.config)("group",o.group)("control",o.control)("label",i.label)("placeholder",i.placeholder)("required",i.required)("invalid",i.invalid)("touched",i.touched)("disabled",i.disabled)("freeTextMode",i.freeTextMode)("settings",i.settings)("selectedEntities",i.selectedEntities)("availableEntities",i.availableEntities)("disableAddNew",i.disableAddNew)("error",i.error)}}var ga=function(e,t,n,i,o,a,r,c,s,l,d,u,p,f){return{label:e,placeholder:t,required:n,invalid:i,touched:o,disabled:a,freeTextMode:r,settings:c,selectedEntities:s,availableEntities:l,disableAddNew:d,isExpanded:u,error:p,showValidation:f}},ba=function(e){function t(t,n,i,o,a,r,c){return e.call(this,t,n,i,o,a,r,c)||this}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.prototype.calculateSettings=function(t){var n=e.prototype.calculateSettings.call(this,t);return null==n.Value&&(n.Value=""),null==n.Label&&(n.Label=""),null==n.EnableTextEntry&&(n.EnableTextEntry=!1),null!=n.Separator&&""!==n.Separator||(n.Separator=","),n},t.prototype.queryEntityMapping=function(e){var t;return this.settings$.pipe(Object(v.a)(1)).subscribe((function(e){t=e})),{Id:e.Id,Value:e[t.Value],Text:e[t.Label]}},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a),k.Qb(jo.a),k.Qb(ne.e),k.Qb(K.a),k.Qb(Uo.b),k.Qb(To.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["string-dropdown-query"]],features:[k.yb],decls:14,vars:42,consts:[[4,"ngIf"],[3,"config","label","required","disabled","freeTextMode","settings","selectedEntities","reorder","removeSelected","editEntity","deleteEntity",4,"ngIf"],[3,"config","group","control","label","placeholder","required","invalid","touched","disabled","freeTextMode","settings","selectedEntities","availableEntities","disableAddNew","error","toggleFreeTextMode","addSelected","editEntity"],[3,"config","label","required","disabled","freeTextMode","settings","selectedEntities","reorder","removeSelected","editEntity","deleteEntity"]],template:function(e,t){1&e&&(k.Oc(0,fa,3,16,"ng-container",0),k.jc(1,"async"),k.jc(2,"async"),k.jc(3,"async"),k.jc(4,"async"),k.jc(5,"async"),k.jc(6,"async"),k.jc(7,"async"),k.jc(8,"async"),k.jc(9,"async"),k.jc(10,"async"),k.jc(11,"async"),k.jc(12,"async"),k.jc(13,"async")),2&e&&k.oc("ngIf",k.Bc(27,ga,[k.kc(1,1,t.label$),k.kc(2,3,t.placeholder$),k.kc(3,5,t.required$),k.kc(4,7,t.invalid$),t.control.touched,k.kc(5,9,t.disabled$),k.kc(6,11,t.freeTextMode$),k.kc(7,13,t.settings$),k.kc(8,15,t.selectedEntities$),k.kc(9,17,t.config.entityCache$),k.kc(10,19,t.disableAddNew$),k.kc(11,21,t.isExpanded$),k.kc(12,23,t.error$),k.kc(13,25,t.showValidation$)]))},directives:[X.m,No,ia],pipes:[X.b],styles:[""],changeDetection:0}),t=Object(i.c)([so({})],t)}(ua),ha=n("Scw0"),ma=n("wrf9");function va(e,t){if(1&e&&k.Rb(0,"i"),2&e){var n=k.ic().ngIf;k.Fb("icon-preview ",n.previewCss," ",n.value,"")}}function ya(e,t){if(1&e&&(k.Wb(0,"mat-option",9),k.Wb(1,"div",2),k.Rb(2,"i"),k.Wb(3,"span"),k.Qc(4),k.Vb(),k.Vb(),k.Vb()),2&e){var n=t.$implicit,i=k.ic().ngIf;k.oc("value",n.class),k.Bb(2),k.Fb("icon-preview ",i.previewCss," ",n.class,""),k.Bb(2),k.Rc(n.label)}}function wa(e,t){if(1&e&&(k.Ub(0),k.Wb(1,"mat-form-field",1),k.Wb(2,"div",2),k.Oc(3,va,1,4,"i",3),k.Rb(4,"input",4),k.jc(5,"async"),k.jc(6,"async"),k.Vb(),k.Wb(7,"mat-autocomplete",null,5),k.Wb(9,"cdk-virtual-scroll-viewport",6),k.Oc(10,ya,5,6,"mat-option",7),k.jc(11,"async"),k.Vb(),k.Vb(),k.Wb(12,"mat-label"),k.Qc(13),k.jc(14,"async"),k.Vb(),k.Vb(),k.Rb(15,"app-field-helper-text",8),k.Tb()),2&e){var n=t.ngIf,i=k.Dc(8),o=k.ic();k.Bb(1),k.oc("formGroup",o.group),k.Bb(2),k.oc("ngIf",n.value),k.Bb(1),k.oc("formControlName",o.config.field.name)("placeholder",k.kc(5,10,o.placeholder$))("required",k.kc(6,12,o.required$))("matAutocomplete",i),k.Bb(6),k.oc("cdkVirtualForOf",k.kc(11,14,o.filteredIcons$)),k.Bb(3),k.Rc(k.kc(14,16,o.label$)),k.Bb(2),k.oc("config",o.config)("group",o.group)}}var Ca=function(e,t,n,i){return{value:e,disabled:t,previewCss:n,showValidation:i}},_a=function(e){function t(t,n,i){var a=e.call(this,t,n)||this;return a.scriptsLoaderService=i,a.iconOptions$=new o.a([]),a}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.subscription.add(this.settings$.subscribe((function(e){var n=e.CssPrefix||"",i=e.ShowPrefix||!1;t.scriptsLoaderService.load((e.Files||"").split("\n"),(function(){var e=function(e,t){var n=[],i={};if(!e)return n;for(var o=t?0:e.length-1,a=0;a<document.styleSheets.length;a++){var r=document.styleSheets[a];if(r){var c=void 0;try{c=r.rules}catch(p){}if(!c)try{c=r.cssRules}catch(p){}if(c)for(var s=0;s<c.length;s++){var l=c[s];if(l.selectorText&&l.selectorText.startsWith(e)){var d=l.selectorText,u=d.substring(0,d.indexOf(":")).replace(".","");i[u]||(n.push({rule:l,class:u,search:null==u?void 0:u.toLowerCase(),label:u.substring(o)}),i[u]=!0)}}}}return n}(n,i);t.iconOptions$.next(e)}))}))),this.previewCss$=this.settings$.pipe(Object(w.a)((function(e){return e.PreviewCss}))),this.filteredIcons$=Object(Ct.a)([this.value$,this.iconOptions$]).pipe(Object(w.a)((function(e){var t=e[0],n=e[1];return t?n.filter((function(e){var n,i;return null!==(i=null===(n=e.search)||void 0===n?void 0:n.includes(t.toLowerCase()))&&void 0!==i&&i})):n})))},t.prototype.ngOnDestroy=function(){this.iconOptions$.complete(),e.prototype.ngOnDestroy.call(this)},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a),k.Qb(ha.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["string-font-icon-picker"]],features:[k.yb],decls:5,vars:14,consts:[[4,"ngIf"],["appearance","standard","color","accent",3,"formGroup"],[1,"icon-option"],[3,"class",4,"ngIf"],["matInput","",3,"formControlName","placeholder","required","matAutocomplete"],["auto","matAutocomplete"],["itemSize","48","minBufferPx","500","maxBufferPx","1000",2,"height","256px"],[3,"value",4,"cdkVirtualFor","cdkVirtualForOf"],[3,"config","group"],[3,"value"]],template:function(e,t){1&e&&(k.Oc(0,wa,16,18,"ng-container",0),k.jc(1,"async"),k.jc(2,"async"),k.jc(3,"async"),k.jc(4,"async")),2&e&&k.oc("ngIf",k.wc(9,Ca,k.kc(1,1,t.value$),k.kc(2,3,t.disabled$),k.kc(3,5,t.previewCss$),k.kc(4,7,t.showValidation$)))},directives:[X.m,Tn.c,S.m,S.f,wi.b,S.b,Eo.c,S.l,S.d,S.s,Eo.a,ma.c,ma.a,ma.b,Tn.g,Fn,Mt.l],pipes:[X.b],styles:[".icon-option[_ngcontent-%COMP%]{display:flex;align-items:center}.icon-preview[_ngcontent-%COMP%]{display:block;height:18px;margin-right:8px}"],changeDetection:0}),t=Object(i.c)([so({wrapper:[lo.a.EavLocalizationWrapper]})],t)}(D),Oa=n("6fnQ"),xa=n("Q+Kz"),ka={Token:{ext:".html",prefix:"",suggestion:xa.c},"C# Razor":{ext:".cshtml",prefix:"_",suggestion:xa.b}};function Ia(e,t){if(1&e&&(k.Wb(0,"mat-option",8),k.Qc(1),k.Vb()),2&e){var n=t.$implicit;k.oc("value",n),k.Bb(1),k.Sc(" ",n," ")}}function Ma(e,t){if(1&e){var n=k.Xb();k.Ub(0),k.Wb(1,"div",1),k.Wb(2,"mat-form-field",2),k.Wb(3,"mat-select",3),k.jc(4,"async"),k.Wb(5,"mat-option",4),k.Qc(6,"(no file selected)"),k.Vb(),k.Oc(7,Ia,2,2,"mat-option",5),k.jc(8,"async"),k.Vb(),k.Wb(9,"mat-label"),k.Qc(10),k.jc(11,"async"),k.Vb(),k.Vb(),k.Wb(12,"button",6),k.ec("click",(function(){return k.Fc(n),k.ic().createTemplate()})),k.jc(13,"async"),k.Wb(14,"mat-icon"),k.Qc(15,"add"),k.Vb(),k.Vb(),k.Vb(),k.Rb(16,"app-field-helper-text",7),k.Tb()}if(2&e){var i=k.ic();k.Bb(2),k.oc("formGroup",i.group),k.Bb(1),k.oc("formControlName",i.config.field.name)("required",k.kc(4,8,i.required$)),k.Bb(4),k.oc("ngForOf",k.kc(8,10,i.templateOptions$)),k.Bb(3),k.Rc(k.kc(11,12,i.label$)),k.Bb(2),k.oc("disabled",k.kc(13,14,i.disabled$)),k.Bb(4),k.oc("config",i.config)("group",i.group)}}var Sa=function(e){return{showValidation:e}},Ta=function(e){function t(t,n,i){var a=e.call(this,t,n)||this;return a.assetsService=i,a.templateOptions$=new o.a([]),a.activeSpec=ka.Token,a.templates=[],a.global=!1,a.resetIfNotFound=!1,a}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.typeWatcher=new mo("[Type]",this.group.controls,this.setFileConfig.bind(this),null),this.locationWatcher=new mo("[Location]",this.group.controls,this.onLocationChange.bind(this),null),this.setFileConfig(this.typeWatcher.resolve()||"Token"),this.onLocationChange(this.locationWatcher.resolve()||null)},t.prototype.ngOnDestroy=function(){this.templateOptions$.complete(),this.typeWatcher.destroy(),this.locationWatcher.destroy(),e.prototype.ngOnDestroy.call(this)},t.prototype.setFileConfig=function(e){this.activeSpec=ka[e],this.setTemplateOptions()},t.prototype.onLocationChange=function(e){var t=this;this.global="Host File System"===e,this.assetsService.getAll(this.global).subscribe((function(e){t.templates=e,t.resetIfNotFound=!0,t.setTemplateOptions()}))},t.prototype.setTemplateOptions=function(){var e=this,t=this.templates,n=this.activeSpec.ext;t=(t=t.filter((function(e){return!e.includes(".code.")}))).filter((function(e){return e.slice(e.length-n.length)===n})),this.templateOptions$.next(t),this.resetIfNotFound&&!t.find((function(t){return t===e.control.value}))&&this.control.patchValue("")},t.prototype.createTemplate=function(){var e=this,t=prompt("Enter new file name",this.activeSpec.suggestion);if(t){var n="",i=(t=t.replace("\\","/")).lastIndexOf("/");i>-1&&(n=t.substring(0,i+1),t=t.substring(i+1)),t.endsWith(this.activeSpec.ext)||(t+=this.activeSpec.ext),""!==this.activeSpec.prefix&&t[0]!==this.activeSpec.prefix&&(t=this.activeSpec.prefix+t);var o=n+t;this.assetsService.create(o,this.global).subscribe((function(t){!1===t?alert("Server reported that create failed - the file probably already exists"):(e.templates.push(o),e.setTemplateOptions(),e.control.patchValue(o))}))}},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a),k.Qb(Oa.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["string-template-picker"]],features:[k.yb],decls:2,vars:5,consts:[[4,"ngIf"],[1,"picker-wrapper"],["appearance","standard","color","accent",3,"formGroup"],[3,"formControlName","required"],["value",""],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","matTooltip","Create a new file",3,"disabled","click"],[3,"config","group"],[3,"value"]],template:function(e,t){1&e&&(k.Oc(0,Ma,17,16,"ng-container",0),k.jc(1,"async")),2&e&&k.oc("ngIf",k.tc(3,Sa,k.kc(1,1,t.showValidation$)))},directives:[X.m,Tn.c,S.m,S.f,Co.a,S.l,S.d,S.s,Mt.l,X.l,Tn.g,It.a,Y.a,J.a,Fn],pipes:[X.b],styles:[".picker-wrapper[_ngcontent-%COMP%]{display:flex;align-items:flex-end}"],changeDetection:0}),t=Object(i.c)([so({wrapper:[lo.a.EavLocalizationWrapper]})],t)}(D);function Pa(e,t){if(1&e&&(k.Ub(0),k.Wb(1,"div",1),k.Wb(2,"mat-slide-toggle",2),k.Qc(3),k.jc(4,"async"),k.Vb(),k.Rb(5,"app-field-helper-text",3),k.Vb(),k.Tb()),2&e){var n=k.ic();k.Bb(1),k.oc("formGroup",n.group),k.Bb(1),k.oc("formControlName",n.config.field.name),k.Bb(1),k.Rc(k.kc(4,5,n.label$)),k.Bb(2),k.oc("config",n.config)("group",n.group)}}var ja=function(e,t){return{disabled:e,showValidation:t}},Va=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.label$=Object(Ct.a)([this.value$,this.settings$,this.label$]).pipe(Object(w.a)((function(e){var t=e[0],n=e[1];return!0===t&&null!=n.TitleTrue&&""!==n.TitleTrue?n.TitleTrue:!1===t&&null!=n.TitleFalse&&""!==n.TitleFalse?n.TitleFalse:e[2]})))},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["boolean-default"]],features:[k.yb],decls:3,vars:8,consts:[[4,"ngIf"],[3,"formGroup"],[3,"formControlName"],["disableError","true",3,"config","group"]],template:function(e,t){1&e&&(k.Oc(0,Pa,6,7,"ng-container",0),k.jc(1,"async"),k.jc(2,"async")),2&e&&k.oc("ngIf",k.uc(5,ja,k.kc(1,1,t.disabled$),k.kc(2,3,t.showValidation$)))},directives:[X.m,S.m,S.f,Ke.a,S.l,S.d,Fn],pipes:[X.b],styles:[""],changeDetection:0}),t=Object(i.c)([so({wrapper:[lo.a.EavLocalizationWrapper]})],t)}(D),Ea=function(e,t){return{"toggle-false":e,"toggle-null":t}};function $a(e,t){if(1&e){var n=k.Xb();k.Ub(0),k.Wb(1,"div",1),k.Wb(2,"mat-slide-toggle",2),k.ec("toggleChange",(function(){return k.Fc(n),k.ic().toggle()})),k.jc(3,"async"),k.Qc(4),k.jc(5,"async"),k.Vb(),k.Rb(6,"app-field-helper-text",3),k.Vb(),k.Tb()}if(2&e){var i=t.ngIf,o=k.ic();k.Bb(1),k.oc("formGroup",o.group),k.Bb(1),k.oc("disabled",k.kc(3,7,o.disabled$))("checked",i.value)("ngClass",k.uc(11,Ea,!1===i.value,null===i.value)),k.Bb(2),k.Sc(" ",k.kc(5,9,o.label$)," "),k.Bb(2),k.oc("config",o.config)("group",o.group)}}var Ba=function(e,t){return{value:e,showValidation:t}},La=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.value$=this.value$.pipe(Object(w.a)((function(e){return""===e?null:e}))),this.label$=Object(Ct.a)([this.value$,this.settings$,this.label$]).pipe(Object(w.a)((function(e){var t=e[0],n=e[1];return!0===t&&null!=n.TitleTrue&&""!==n.TitleTrue?n.TitleTrue:!1===t&&null!=n.TitleFalse&&""!==n.TitleFalse?n.TitleFalse:null===t&&null!=n.TitleIndeterminate&&""!==n.TitleIndeterminate?n.TitleIndeterminate:e[2]})))},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.prototype.toggle=function(){var e;switch(this.control.value){case!1:e=null;break;case"":case null:e=!0;break;case!0:e=!1}this.control.patchValue(e)},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["boolean-tristate"]],features:[k.yb],decls:3,vars:8,consts:[[4,"ngIf"],[3,"formGroup"],[3,"disabled","checked","ngClass","toggleChange"],["disableError","true",3,"config","group"]],template:function(e,t){1&e&&(k.Oc(0,$a,7,14,"ng-container",0),k.jc(1,"async"),k.jc(2,"async")),2&e&&k.oc("ngIf",k.uc(5,Ba,k.kc(1,1,t.value$),k.kc(2,3,t.showValidation$)))},directives:[X.m,S.m,S.f,Ke.a,X.k,Z.a,Fn],pipes:[X.b],styles:[".toggle-false .mat-slide-toggle-bar{background-color:orange}  .toggle-null .mat-slide-toggle-thumb-container{margin-left:8px}"],changeDetection:0}),t=Object(i.c)([so({wrapper:[lo.a.EavLocalizationWrapper]})],t)}(D),Fa=n("z2MI"),Da=n("M/RD");function Wa(e,t){if(1&e&&(k.Wb(0,"mat-form-field",3),k.Rb(1,"input",4),k.Rb(2,"mat-datepicker-toggle",5),k.jc(3,"translate"),k.Rb(4,"mat-datepicker",null,6),k.Wb(6,"mat-label"),k.Qc(7),k.Vb(),k.Vb()),2&e){var n=k.Dc(5),i=k.ic().ngIf,o=k.ic();k.oc("formGroup",o.group),k.Bb(1),k.oc("formControlName",o.config.field.name)("matDatepicker",n)("placeholder",i.placeholder)("required",i.required),k.Bb(1),k.oc("for",n)("matTooltip",k.kc(3,8,"Fields.DateTime.Open")),k.Bb(5),k.Rc(i.label)}}function za(e,t){if(1&e&&(k.Wb(0,"mat-form-field",3),k.Rb(1,"input",7),k.Rb(2,"mat-datepicker-toggle",5),k.jc(3,"translate"),k.Rb(4,"ngx-mat-datetime-picker",null,6),k.Wb(6,"mat-label"),k.Qc(7),k.Vb(),k.Vb()),2&e){var n=k.Dc(5),i=k.ic().ngIf,o=k.ic();k.oc("formGroup",o.group),k.Bb(1),k.oc("formControlName",o.config.field.name)("ngxMatDatetimePicker",n)("placeholder",i.placeholder)("required",i.required),k.Bb(1),k.oc("for",n)("matTooltip",k.kc(3,8,"Fields.DateTime.Open")),k.Bb(5),k.Rc(i.label)}}function Aa(e,t){if(1&e&&(k.Ub(0),k.Oc(1,Wa,8,10,"mat-form-field",1),k.Oc(2,za,8,10,"mat-form-field",1),k.Rb(3,"app-field-helper-text",2),k.Tb()),2&e){var n=t.ngIf,i=k.ic();k.Bb(1),k.oc("ngIf",!n.useTimePicker),k.Bb(1),k.oc("ngIf",n.useTimePicker),k.Bb(1),k.oc("config",i.config)("group",i.group)}}var Ra=function(e,t,n,i,o,a){return{useTimePicker:e,placeholder:t,required:n,disabled:i,label:o,showValidation:a}},Qa=function(e){function t(t,n,i,o,a){var r=e.call(this,t,n)||this;r.translate=i,r.dateAdapter=o,r.ngxDateTimeAdapter=a;var c=r.translate.currentLang;return r.dateAdapter.setLocale(c),r.ngxDateTimeAdapter.setLocale(c),r}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.useTimePicker$=this.settings$.pipe(Object(w.a)((function(e){return e.UseTimePicker})))},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a),k.Qb(ne.e),k.Qb(Mt.a),k.Qb(Fa.b))},t.\u0275cmp=k.Kb({type:t,selectors:[["datetime-default"]],features:[k.yb],decls:7,vars:20,consts:[[4,"ngIf"],["appearance","standard","color","accent",3,"formGroup",4,"ngIf"],[3,"config","group"],["appearance","standard","color","accent",3,"formGroup"],["matInput","",3,"formControlName","matDatepicker","placeholder","required"],["matSuffix","",3,"for","matTooltip"],["picker",""],["matInput","",3,"formControlName","ngxMatDatetimePicker","placeholder","required"]],template:function(e,t){1&e&&(k.Oc(0,Aa,4,4,"ng-container",0),k.jc(1,"async"),k.jc(2,"async"),k.jc(3,"async"),k.jc(4,"async"),k.jc(5,"async"),k.jc(6,"async")),2&e&&k.oc("ngIf",k.yc(13,Ra,k.kc(1,1,t.useTimePicker$),k.kc(2,3,t.placeholder$),k.kc(3,5,t.required$),k.kc(4,7,t.disabled$),k.kc(5,9,t.label$),k.kc(6,11,t.showValidation$)))},directives:[X.m,Fn,Tn.c,S.m,S.f,wi.b,S.b,Da.f,S.l,S.d,S.s,Da.i,Tn.h,Y.a,Da.e,Tn.g,Fa.c,Fa.d],pipes:[X.b,ne.d],styles:[""],changeDetection:0}),t=Object(i.c)([so({wrapper:[lo.a.EavLocalizationWrapper]})],t)}(D),Ga=function(){function e(){}return e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.Kb({type:e,selectors:[["empty-default"]],decls:0,vars:0,template:function(e,t){},styles:[""],changeDetection:0}),e}();function Na(e,t){if(1&e&&(k.Ub(0),k.Wb(1,"mat-form-field",1),k.Rb(2,"input",2),k.jc(3,"async"),k.jc(4,"async"),k.jc(5,"async"),k.jc(6,"async"),k.Wb(7,"mat-label"),k.Qc(8),k.jc(9,"async"),k.Vb(),k.Vb(),k.Rb(10,"app-field-helper-text",3),k.Tb()),2&e){var n=k.ic();k.Bb(1),k.oc("formGroup",n.group),k.Bb(1),k.oc("formControlName",n.config.field.name)("required",k.kc(3,9,n.required$))("placeholder",k.kc(4,11,n.placeholder$))("min",k.kc(5,13,n.min$))("max",k.kc(6,15,n.max$)),k.Bb(6),k.Rc(k.kc(9,17,n.label$)),k.Bb(2),k.oc("config",n.config)("group",n.group)}}var Ua=function(e,t){return{disabled:e,showValidation:t}},qa=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.min$=this.settings$.pipe(Object(w.a)((function(e){return e.Min}))),this.max$=this.settings$.pipe(Object(w.a)((function(e){return e.Max})))},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["number-default"]],features:[k.yb],decls:3,vars:8,consts:[[4,"ngIf"],["appearance","standard","color","accent",3,"formGroup"],["matInput","","type","number",3,"formControlName","required","placeholder","min","max"],[3,"config","group"]],template:function(e,t){1&e&&(k.Oc(0,Na,11,19,"ng-container",0),k.jc(1,"async"),k.jc(2,"async")),2&e&&k.oc("ngIf",k.uc(5,Ua,k.kc(1,1,t.disabled$),k.kc(2,3,t.showValidation$)))},directives:[X.m,Tn.c,S.m,S.f,wi.b,S.p,S.b,S.l,S.d,S.s,Tn.g,Fn],pipes:[X.b],styles:[""],changeDetection:0}),t=Object(i.c)([so({wrapper:[lo.a.EavLocalizationWrapper]})],t)}(D);function Ha(e,t){if(1&e){var n=k.Xb();k.Wb(0,"button",16),k.ec("click",(function(){return k.Fc(n),k.ic(3).toggleAdam(!1,!1)})),k.jc(1,"translate"),k.Rb(2,"mat-icon",17),k.Vb()}if(2&e){var i=k.ic(2).ngIf;k.oc("matTooltip",k.kc(1,2,"Fields.Hyperlink.Default.AdamTip"))("disabled",i.disabled)}}function Ka(e,t){if(1&e){var n=k.Xb();k.Wb(0,"button",18),k.ec("click",(function(){return k.Fc(n),k.ic(3).openPageDialog()})),k.jc(1,"translate"),k.Rb(2,"mat-icon",19),k.Vb()}if(2&e){var i=k.ic(2).ngIf;k.oc("matTooltip",k.kc(1,2,"Fields.Hyperlink.Default.PageTip"))("disabled",i.disabled)}}function Xa(e,t){if(1&e&&(k.Wb(0,"button",20),k.jc(1,"translate"),k.Wb(2,"mat-icon"),k.Qc(3,"more_vert"),k.Vb(),k.Vb()),2&e){k.ic();var n=k.Dc(6),i=k.ic().ngIf;k.oc("matTooltip",k.kc(1,3,"Fields.Hyperlink.Default.MoreOptions"))("disabled",i.disabled)("matMenuTriggerFor",n)}}function Za(e,t){if(1&e){var n=k.Xb();k.Wb(0,"button",21),k.ec("click",(function(){return k.Fc(n),k.ic(3).toggleAdam(!1,!1)})),k.Rb(1,"mat-icon",17),k.Wb(2,"span"),k.Qc(3),k.jc(4,"translate"),k.Vb(),k.Vb()}2&e&&(k.Bb(3),k.Rc(k.kc(4,1,"Fields.Hyperlink.Default.MenuAdam")))}function Ya(e,t){if(1&e){var n=k.Xb();k.Wb(0,"button",21),k.ec("click",(function(){return k.Fc(n),k.ic(3).openPageDialog()})),k.Rb(1,"mat-icon",19),k.Wb(2,"span"),k.Qc(3),k.jc(4,"translate"),k.Vb(),k.Vb()}2&e&&(k.Bb(3),k.Rc(k.kc(4,1,"Fields.Hyperlink.Default.MenuPage")))}function Ja(e,t){if(1&e){var n=k.Xb();k.Wb(0,"button",21),k.ec("click",(function(){return k.Fc(n),k.ic(3).toggleAdam(!0,!0)})),k.Rb(1,"mat-icon",22),k.Wb(2,"span"),k.Qc(3),k.jc(4,"translate"),k.Vb(),k.Vb()}2&e&&(k.Bb(3),k.Rc(k.kc(4,1,"Fields.Hyperlink.Default.MenuImage")))}function er(e,t){if(1&e){var n=k.Xb();k.Wb(0,"button",21),k.ec("click",(function(){return k.Fc(n),k.ic(3).toggleAdam(!0,!1)})),k.Rb(1,"mat-icon",23),k.Wb(2,"span"),k.Qc(3),k.jc(4,"translate"),k.Vb(),k.Vb()}2&e&&(k.Bb(3),k.Rc(k.kc(4,1,"Fields.Hyperlink.Default.MenuDocs")))}function tr(e,t){if(1&e&&(k.Wb(0,"div",24),k.Wb(1,"div",25),k.Qc(2),k.Vb(),k.Wb(3,"div",26),k.Wb(4,"a",27),k.Wb(5,"span"),k.Qc(6),k.Vb(),k.Vb(),k.Vb(),k.Vb()),2&e){var n=k.ic(2).ngIf;k.Bb(2),k.Rc(n.value),k.Bb(2),k.oc("href",n.preview.url,k.Ic)("matTooltip",n.preview.url),k.Bb(2),k.Rc(n.preview.floatingText)}}function nr(e,t){if(1&e&&(k.Wb(0,"a",31),k.Wb(1,"div",32),k.Rb(2,"img",33),k.Vb(),k.Vb()),2&e){var n=k.ic(3).ngIf;k.oc("href",n.preview.thumbnailUrl,k.Ic),k.Bb(2),k.oc("src",n.preview.thumbnailPreviewUrl,k.Ic)}}function ir(e,t){if(1&e&&(k.Wb(0,"mat-icon"),k.Qc(1),k.Vb()),2&e){var n=k.ic(4).ngIf;k.Bb(1),k.Rc(n.preview.icon)}}function or(e,t){if(1&e&&k.Rb(0,"mat-icon",37),2&e){var n=k.ic(4).ngIf;k.oc("svgIcon",n.preview.icon)}}function ar(e,t){if(1&e&&(k.Wb(0,"a",34),k.Wb(1,"div",35),k.Oc(2,ir,2,1,"mat-icon",0),k.Oc(3,or,1,1,"mat-icon",36),k.Vb(),k.Vb()),2&e){var n=k.ic(3).ngIf;k.oc("href",n.preview.url,k.Ic)("matTooltip",n.preview.url),k.Bb(2),k.oc("ngIf",n.preview.isKnownType),k.Bb(1),k.oc("ngIf",!n.preview.isKnownType)}}function rr(e,t){if(1&e&&(k.Wb(0,"div",28),k.Oc(1,nr,3,2,"a",29),k.Oc(2,ar,4,4,"a",30),k.Vb()),2&e){var n=k.ic(2).ngIf;k.Bb(1),k.oc("ngIf",n.preview.isImage),k.Bb(1),k.oc("ngIf",!n.preview.isImage)}}function cr(e,t){if(1&e&&(k.Ub(0),k.Wb(1,"div",1),k.Oc(2,Ha,3,4,"button",2),k.Oc(3,Ka,3,4,"button",3),k.Oc(4,Xa,4,5,"button",4),k.Vb(),k.Wb(5,"mat-menu",5,6),k.Oc(7,Za,5,3,"button",7),k.Oc(8,Ya,5,3,"button",7),k.Oc(9,Ja,5,3,"button",7),k.Oc(10,er,5,3,"button",7),k.Vb(),k.Wb(11,"div",8),k.Wb(12,"div",9),k.Wb(13,"mat-card",10),k.Wb(14,"div",11),k.Wb(15,"mat-form-field",12),k.Rb(16,"input",13),k.jc(17,"translate"),k.jc(18,"async"),k.jc(19,"async"),k.Wb(20,"mat-label"),k.Qc(21),k.jc(22,"async"),k.Vb(),k.Vb(),k.Oc(23,tr,7,4,"div",14),k.Vb(),k.Oc(24,rr,3,2,"div",15),k.Vb(),k.Vb(),k.Vb(),k.Tb()),2&e){var n=k.ic().ngIf,i=k.ic();k.Bb(2),k.oc("ngIf",n.buttons.includes("adam")),k.Bb(1),k.oc("ngIf",n.buttons.includes("page")),k.Bb(1),k.oc("ngIf",n.buttons.includes("more")),k.Bb(3),k.oc("ngIf",n.settings.ShowAdam),k.Bb(1),k.oc("ngIf",n.settings.ShowPagePicker),k.Bb(1),k.oc("ngIf",n.settings.ShowImageManager),k.Bb(1),k.oc("ngIf",n.settings.ShowFileManager),k.Bb(5),k.oc("formGroup",i.group),k.Bb(1),k.oc("formControlName",i.config.field.name)("matTooltip",k.kc(17,17,"Fields.Hyperlink.Default.Tooltip"))("placeholder",k.kc(18,19,i.placeholder$))("required",k.kc(19,21,i.required$))("config",i.config)("elementType","input"),k.Bb(5),k.Rc(k.kc(22,23,i.label$)),k.Bb(2),k.oc("ngIf",null==n.preview?null:n.preview.floatingText),k.Bb(1),k.oc("ngIf",n.preview)}}function sr(e,t){if(1&e&&(k.Ub(0),k.Oc(1,cr,25,25,"ng-container",0),k.jc(2,"async"),k.Tb()),2&e){var n=k.ic();k.Bb(1),k.oc("ngIf",k.kc(2,1,n.open$))}}var lr=function(e,t,n,i,o,a){return{disabled:e,buttons:t,settings:n,value:i,preview:o,showValidation:a}},dr=function(e){function t(t,n,i,a,r,c){var s=e.call(this,t,n)||this;return s.fileTypeService=i,s.dnnBridgeService=a,s.dialog=r,s.editRoutingService=c,s.preview$=new o.a({url:"",thumbnailUrl:"",thumbnailPreviewUrl:"",floatingText:"",isImage:!1,isKnownType:!1,icon:""}),s}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.buttons$=this.settings$.pipe(Object(w.a)((function(e){return e.Buttons||"adam,more"}))),this.open$=this.editRoutingService.isExpanded(this.config.field.index,this.config.entity.entityGuid),this.subscription.add(this.settings$.subscribe((function(e){t.attachAdam(e)}))),this.subscription.add(this.value$.subscribe((function(e){t.setLink(e)})))},t.prototype.ngOnDestroy=function(){this.preview$.complete(),e.prototype.ngOnDestroy.call(this)},t.prototype.openPageDialog=function(){this.dnnBridgeService.open(this.control.value,{Paths:this.config.field.settings.Paths?this.config.field.settings.Paths:"",FileFilter:this.config.field.settings.FileFilter?this.config.field.settings.FileFilter:""},this.processResultOfPagePicker.bind(this),this.dialog)},t.prototype.processResultOfPagePicker=function(e){e&&this.control.patchValue("page:"+e.id)},t.prototype.setLink=function(e){var t=this;if(e){var n=this.dnnBridgeService.getUrlOfId(e,this.config.entity.header.ContentTypeName,this.config.entity.header.Guid,this.config.field.name);if(n)n.subscribe((function(e){if(e){var n={url:e,floatingText:".../"+e.substring(e.lastIndexOf("/")+1,e.length),thumbnailUrl:t.thumbnailUrl(e),thumbnailPreviewUrl:t.thumbnailUrl(e,2),isImage:t.fileTypeService.isImage(e),isKnownType:t.fileTypeService.isKnownType(e),icon:t.fileTypeService.getIconClass(e)};t.preview$.next(n)}}));else{var i={url:e,floatingText:"",thumbnailUrl:this.thumbnailUrl(e),thumbnailPreviewUrl:this.thumbnailUrl(e,2),isImage:!1,isKnownType:!1,icon:this.fileTypeService.getIconClass(e)};this.preview$.next(i)}}},t.prototype.thumbnailUrl=function(e,t,n){var i=e;1===t&&(i+="?w=72&h=72&mode=crop"),2===t&&(i+="?w=800&h=800&mode=max");var o=n?'"':"";return o+i+o},t.prototype.toggleAdam=function(e,t){this.config.adam.toggle(e,t)},t.prototype.attachAdam=function(e){var t=this;this.config.adam.onItemClick=function(e){t.setValue(e)},this.config.adam.onItemUpload=function(e){t.setValue(e)},this.config.adam.setConfig({rootSubfolder:e.Paths,fileFilter:e.FileFilter,autoLoad:!0})},t.prototype.setValue=function(e){this.control.patchValue("file:"+e.Id)},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a),k.Qb(G.a),k.Qb(oi.a),k.Qb(wt.b),k.Qb(K.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["hyperlink-default"]],features:[k.yb],decls:7,vars:20,consts:[[4,"ngIf"],[1,"fabs-box"],["mat-mini-fab","","color","accent",3,"matTooltip","disabled","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"matTooltip","disabled","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"matTooltip","disabled","matMenuTriggerFor",4,"ngIf"],[1,"menu-box"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],[1,"mdc-layout-grid"],[1,"mdc-layout-grid__inner"],[1,"mdc-layout-grid__cell--span-12","hyperlink-card","shadow-bottom-z-1"],[1,"hyperlink-input-link-wrapper"],["appearance","standard","color","accent",3,"formGroup"],["matInput","","matTooltipPosition","above","appPasteClipboardImage","",3,"formControlName","matTooltip","placeholder","required","config","elementType"],["class","hyperlink-floating",4,"ngIf"],["class","preview-wrapper",4,"ngIf"],["mat-mini-fab","","color","accent",3,"matTooltip","disabled","click"],["svgIcon","appleFilled"],["mat-mini-fab","","color","primary",3,"matTooltip","disabled","click"],["svgIcon","sitemap"],["mat-mini-fab","","color","primary",3,"matTooltip","disabled","matMenuTriggerFor"],["mat-menu-item","",3,"click"],["svgIcon","file-image"],["svgIcon","file"],[1,"hyperlink-floating"],[1,"hyperlink-floating__value"],[1,"hyperlink-floating__url-box"],["target","_blank",1,"hyperlink-floating__url",3,"href","matTooltip"],[1,"preview-wrapper"],["target","_blank",3,"href",4,"ngIf"],["target","_blank","matTooltipPosition","right",3,"href","matTooltip",4,"ngIf"],["target","_blank",3,"href"],[1,"preview-image-box"],[1,"preview-image",3,"src"],["target","_blank","matTooltipPosition","right",3,"href","matTooltip"],[1,"preview-icon-box"],[3,"svgIcon",4,"ngIf"],[3,"svgIcon"]],template:function(e,t){1&e&&(k.Oc(0,sr,3,3,"ng-container",0),k.jc(1,"async"),k.jc(2,"async"),k.jc(3,"async"),k.jc(4,"async"),k.jc(5,"async"),k.jc(6,"async")),2&e&&k.oc("ngIf",k.yc(13,lr,k.kc(1,1,t.disabled$),k.kc(2,3,t.buttons$),k.kc(3,5,t.settings$),k.kc(4,7,t.value$),k.kc(5,9,t.preview$),k.kc(6,11,t.showValidation$)))},directives:[X.m,Xt.d,He.a,Tn.c,S.m,S.f,wi.b,S.b,ee,S.l,S.d,Y.a,S.s,Tn.g,It.a,J.a,Xt.c,Xt.a],pipes:[X.b,ne.d],styles:[".fabs-box[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:8px;z-index:11;position:fixed;width:800px;pointer-events:none}.fabs-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:16px;pointer-events:auto}.fabs-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{margin-right:32px!important}.menu-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center}.hyperlink-card[_ngcontent-%COMP%]{border-radius:8px}.preview-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-top:8px}.preview-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.preview-image-box[_ngcontent-%COMP%]{z-index:100;width:100%;height:auto}.preview-image[_ngcontent-%COMP%]{width:100%;max-height:calc(100vh - 295px);height:auto}.preview-icon-box[_ngcontent-%COMP%]{z-index:100;display:flex;align-items:center;justify-content:center;width:80px;height:80px;background-color:rgba(29,39,61,.08)}.preview-icon-box[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:56px;width:56px;height:56px;line-height:56px;color:rgba(29,39,61,.44)}"],changeDetection:0}),t=Object(i.c)([so({wrapper:[lo.a.DropzoneWrapper,lo.a.EavLocalizationWrapper,lo.a.HyperlinkDefaultExpandableWrapper,lo.a.AdamAttachWrapper]})],t)}(D),ur=(n("5Zgd"),function(e){function t(t,n){return e.call(this,t,n)||this}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["custom-default"]],features:[k.yb],decls:2,vars:1,consts:[[1,"message"]],template:function(e,t){1&e&&(k.Wb(0,"div",0),k.Qc(1),k.Vb()),2&e&&(k.Bb(1),k.Sc("",t.config.field.name,": Field configuration is incomplete and should be fixed."))},styles:[".message[_ngcontent-%COMP%]{padding:16px}"],changeDetection:0}),t=Object(i.c)([so({})],t)}(D));function pr(e,t){if(1&e){var n=k.Xb();k.Wb(0,"app-entity-default-list",3),k.ec("reorder",(function(e){return k.Fc(n),k.ic(2).reorder(e)}))("removeSelected",(function(e){return k.Fc(n),k.ic(2).removeSelected(e)}))("editEntity",(function(e){return k.Fc(n),k.ic(2).editEntity(e)}))("deleteEntity",(function(e){return k.Fc(n),k.ic(2).deleteEntity(e)})),k.Vb()}if(2&e){var i=k.ic().ngIf,o=k.ic();k.oc("config",o.config)("label",i.label)("required",i.required)("disabled",i.disabled)("freeTextMode",i.freeTextMode)("settings",i.settings)("selectedEntities",i.selectedEntities)}}function fr(e,t){if(1&e){var n=k.Xb();k.Ub(0),k.Oc(1,pr,1,7,"app-entity-default-list",1),k.Wb(2,"app-entity-default-search",2),k.ec("toggleFreeTextMode",(function(){return k.Fc(n),k.ic().toggleFreeTextMode()}))("addSelected",(function(e){return k.Fc(n),k.ic().addSelected(e)}))("editEntity",(function(e){return k.Fc(n),k.ic().editEntity(e)})),k.Vb(),k.Tb()}if(2&e){var i=t.ngIf,o=k.ic();k.Bb(1),k.oc("ngIf",!i.freeTextMode&&i.selectedEntities.length&&(!i.settings.AllowMultiValue||i.settings.AllowMultiValue&&i.isExpanded)),k.Bb(1),k.oc("config",o.config)("group",o.group)("control",o.control)("label",i.label)("placeholder",i.placeholder)("required",i.required)("invalid",i.invalid)("touched",i.touched)("disabled",i.disabled)("freeTextMode",i.freeTextMode)("settings",i.settings)("selectedEntities",i.selectedEntities)("availableEntities",i.availableEntities)("disableAddNew",i.disableAddNew)("error",i.error)}}var gr=function(e,t,n,i,o,a,r,c,s,l,d,u,p,f){return{label:e,placeholder:t,required:n,invalid:i,touched:o,disabled:a,freeTextMode:r,settings:c,selectedEntities:s,availableEntities:l,disableAddNew:d,isExpanded:u,error:p,showValidation:f}},br=function(e){function t(t,n,i,o,a,r){return e.call(this,t,n,i,o,a,r)||this}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.prototype.calculateSettings=function(t){var n=e.prototype.calculateSettings.call(this,t);return n.AllowMultiValue=!1,n.EnableRemove=!0,n.AllowMultiValue=!0,n.EnableAddExisting=!1,n.EnableCreate=!1,n.EnableEdit=!1,n.EntityType="ContentGroupReference",n},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a),k.Qb(jo.a),k.Qb(ne.e),k.Qb(K.a),k.Qb(Uo.b))},t.\u0275cmp=k.Kb({type:t,selectors:[["entity-content-blocks"]],features:[k.yb],decls:14,vars:42,consts:[[4,"ngIf"],[3,"config","label","required","disabled","freeTextMode","settings","selectedEntities","reorder","removeSelected","editEntity","deleteEntity",4,"ngIf"],[3,"config","group","control","label","placeholder","required","invalid","touched","disabled","freeTextMode","settings","selectedEntities","availableEntities","disableAddNew","error","toggleFreeTextMode","addSelected","editEntity"],[3,"config","label","required","disabled","freeTextMode","settings","selectedEntities","reorder","removeSelected","editEntity","deleteEntity"]],template:function(e,t){1&e&&(k.Oc(0,fr,3,16,"ng-container",0),k.jc(1,"async"),k.jc(2,"async"),k.jc(3,"async"),k.jc(4,"async"),k.jc(5,"async"),k.jc(6,"async"),k.jc(7,"async"),k.jc(8,"async"),k.jc(9,"async"),k.jc(10,"async"),k.jc(11,"async"),k.jc(12,"async"),k.jc(13,"async")),2&e&&k.oc("ngIf",k.Bc(27,gr,[k.kc(1,1,t.label$),k.kc(2,3,t.placeholder$),k.kc(3,5,t.required$),k.kc(4,7,t.invalid$),t.control.touched,k.kc(5,9,t.disabled$),k.kc(6,11,t.freeTextMode$),k.kc(7,13,t.settings$),k.kc(8,15,t.selectedEntities$),k.kc(9,17,t.config.entityCache$),k.kc(10,19,t.disableAddNew$),k.kc(11,21,t.isExpanded$),k.kc(12,23,t.error$),k.kc(13,25,t.showValidation$)]))},directives:[X.m,No,ia],pipes:[X.b],styles:[""],changeDetection:0}),t=Object(i.c)([so({})],t)}(ca),hr=n("nYrE"),mr=["customElContainer"],vr=function(){function e(e,t,n,i,o,a,r,c,s){this.eavService=e,this.translateService=t,this.contentTypeService=n,this.inputTypeService=i,this.featureService=o,this.editRoutingService=a,this.dnnBridgeService=r,this.dialog=c,this.zone=s}return e.prototype.ngAfterViewInit=function(){var e,t=(null===(e=null===history||void 0===history?void 0:history.state)||void 0===e?void 0:e.componentTag)||"field-"+this.config.field.inputType+"-dialog";Object(P.a)("Connector created for:",t),this.connectorCreator=new ni(this.config,this.group,this.customElContainerRef,t,this.eavService,this.translateService,this.contentTypeService,this.inputTypeService,this.featureService,this.editRoutingService,this.dnnBridgeService,this.dialog,this.zone)},e.prototype.ngOnDestroy=function(){Object(P.a)("Connector destroyed"),this.connectorCreator.destroy()},e.\u0275fac=function(t){return new(t||e)(k.Qb(j.a),k.Qb(ne.e),k.Qb(qe),k.Qb(Kt.a),k.Qb(q),k.Qb(K.a),k.Qb(oi.a),k.Qb(wt.b),k.Qb(k.z))},e.\u0275cmp=k.Kb({type:e,selectors:[["app-connector"]],viewQuery:function(e,t){var n;1&e&&k.Wc(mr,!0),2&e&&k.Cc(n=k.fc())&&(t.customElContainerRef=n.first)},inputs:{config:"config",group:"group"},decls:2,vars:0,consts:[[2,"height","100%","position","relative"],["customElContainer",""]],template:function(e,t){1&e&&k.Rb(0,"div",0,1)},styles:[""],changeDetection:0}),e}();function yr(e,t){1&e&&k.Rb(0,"mat-spinner",3)}function wr(e,t){if(1&e&&k.Rb(0,"app-connector",4),2&e){var n=k.ic(2);k.oc("config",n.config)("group",n.group)}}function Cr(e,t){if(1&e&&(k.Ub(0),k.Oc(1,yr,1,0,"mat-spinner",1),k.Oc(2,wr,1,2,"app-connector",2),k.Tb()),2&e){var n=t.ngIf;k.Bb(1),k.oc("ngIf",n.loading),k.Bb(1),k.oc("ngIf",!n.loading&&n.isExpanded)}}var _r=function(e,t,n){return{loading:e,isExpanded:t,showValidation:n}},Or=function(e){function t(t,n,i,a,r){var c=e.call(this,t,n)||this;return c.inputTypeService=i,c.scriptsLoaderService=a,c.editRoutingService=r,c.loading$=new o.a(!0),c}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.isExpanded$=this.editRoutingService.isExpanded(this.config.field.index,this.config.entity.entityGuid),this.loadAssets()},t.prototype.ngOnDestroy=function(){this.loading$.complete(),e.prototype.ngOnDestroy.call(this)},t.prototype.loadAssets=function(){var e;this.inputTypeService.getInputTypeById(this.config.field.inputType).pipe(Object(v.a)(1)).subscribe((function(t){e=t}));var t=e.AngularAssets.split("\n");0!==t.length&&this.scriptsLoaderService.load(t,this.assetsLoaded.bind(this))},t.prototype.assetsLoaded=function(){Object(P.a)("ExternalWebcomponentComponent",this.config.field.name,"loaded"),this.loading$.next(!1)},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a),k.Qb(Kt.a),k.Qb(ha.a),k.Qb(K.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["external-web-component"]],features:[k.yb],decls:4,vars:11,consts:[[4,"ngIf"],["color","accent",4,"ngIf"],[3,"config","group",4,"ngIf"],["color","accent"],[3,"config","group"]],template:function(e,t){1&e&&(k.Oc(0,Cr,3,2,"ng-container",0),k.jc(1,"async"),k.jc(2,"async"),k.jc(3,"async")),2&e&&k.oc("ngIf",k.vc(7,_r,k.kc(1,1,t.loading$),k.kc(2,3,t.isExpanded$),k.kc(3,5,t.showValidation$)))},directives:[X.m,hr.b,vr],pipes:[X.b],styles:[""],changeDetection:0}),t=Object(i.c)([so({})],t)}(D),xr=n("mpfY"),kr=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.subscription.add(this.settings$.subscribe((function(e){t.attachAdam(e),t.attachAdamValidator(e.Required)})))},t.prototype.ngOnDestroy=function(){var t;null===(t=this.adamValidation)||void 0===t||t.unsubscribe(),e.prototype.ngOnDestroy.call(this)},t.prototype.attachAdam=function(e){this.config.adam.setConfig({allowAssetsInRoot:e.AllowAssetsInRoot,autoLoad:!0,enableSelect:!1,rootSubfolder:e.Paths,fileFilter:e.FileFilter,folderDepth:e.FolderDepth||0,metadataContentTypes:e.MetadataContentTypes})},t.prototype.attachAdamValidator=function(e){var t,n=this;if(!e)return null===(t=this.adamValidation)||void 0===t||t.unsubscribe(),void this.control.setValidators(this.config.field.validation);var o=Object(i.g)(this.config.field.validation,[xr.a.validateAdam()]);this.control.setValidators(o),this.adamValidation=this.config.adam.items$.subscribe((function(e){n.control.adamItems=e.length,n.control.updateValueAndValidity()}))},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["hyperlink-library"]],features:[k.yb],decls:0,vars:0,template:function(e,t){},styles:[""],changeDetection:0}),t=Object(i.c)([so({wrapper:[lo.a.DropzoneWrapper,lo.a.EavLocalizationWrapper,lo.a.HyperlinkLibraryExpandableWrapper,lo.a.AdamAttachWrapper]})],t)}(D);function Ir(e,t){if(1&e&&(k.Ub(0),k.Wb(1,"mat-form-field",1),k.Rb(2,"textarea",2),k.jc(3,"async"),k.jc(4,"async"),k.jc(5,"async"),k.Wb(6,"mat-label"),k.Qc(7),k.jc(8,"async"),k.Vb(),k.Vb(),k.Rb(9,"app-field-helper-text",3),k.Tb()),2&e){var n=k.ic();k.Bb(1),k.oc("formGroup",n.group),k.Bb(1),k.oc("formControlName",n.config.field.name)("rows",k.kc(3,8,n.rowCount$))("placeholder",k.kc(4,10,n.placeholder$))("required",k.kc(5,12,n.required$)),k.Bb(5),k.Rc(k.kc(8,14,n.label$)),k.Bb(2),k.oc("config",n.config)("group",n.group)}}var Mr=function(e,t){return{disabled:e,showValidation:t}},Sr=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.rowCount$=this.settings$.pipe(Object(w.a)((function(e){return e.Rows||5})))},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.\u0275fac=function(e){return new(e||t)(k.Qb(j.a),k.Qb(F.a))},t.\u0275cmp=k.Kb({type:t,selectors:[["custom-json-editor"]],features:[k.yb],decls:3,vars:8,consts:[[4,"ngIf"],["appearance","standard","color","accent",1,"textarea-field",3,"formGroup"],["matInput","",3,"formControlName","rows","placeholder","required"],[3,"config","group"]],template:function(e,t){1&e&&(k.Oc(0,Ir,10,16,"ng-container",0),k.jc(1,"async"),k.jc(2,"async")),2&e&&k.oc("ngIf",k.uc(5,Mr,k.kc(1,1,t.disabled$),k.kc(2,3,t.showValidation$)))},directives:[X.m,Tn.c,S.m,S.f,wi.b,S.b,S.l,S.d,S.s,Tn.g,Fn],pipes:[X.b],styles:[".textarea-field[_ngcontent-%COMP%]{height:auto}"],changeDetection:0}),t=Object(i.c)([so({wrapper:[lo.a.EavLocalizationWrapper]})],t)}(D),Tr=function(){function e(e,t){this.resolver=e,this.container=t,this.components={"app-adam-attach-wrapper":De,"app-collapsible-field-wrapper":Re,"app-collapsible-wrapper":hn,"app-dropzone-wrapper":Cn,"app-eav-localization-wrapper":kn,"app-entity-expandable-wrapper":Zn,"app-expandable-wrapper":mi,"app-hidden-wrapper":yi,"app-hyperlink-default-expandable-wrapper":Ri,"app-hyperlink-library-expandable-wrapper":co,"boolean-default":Va,"boolean-tristate":La,"custom-default":ur,"custom-json-editor":Sr,"datetime-default":Qa,"empty-default":Ga,"entity-content-blocks":br,"entity-default":ca,"entity-query":ua,"external-web-component":Or,"hyperlink-default":dr,"hyperlink-library":kr,"number-default":qa,"string-default":ho,"string-dropdown":So,"string-dropdown-query":ba,"string-font-icon-picker":_a,"string-template-picker":Ta,"string-url-path":wo}}return e.prototype.ngOnInit=function(){var e=this;this.container.clear(),this.config.forEach((function(t){Object(P.a)("create controlConfiguration",t),e.createFieldOrGroup(e.container,t)}))},e.prototype.createFieldOrGroup=function(e,t){t.field.fieldGroup?this.createGroupComponents(e,t):(Object(P.a)("create createFieldOrGroup:",t.field.inputType),this.createComponent(e,t))},e.prototype.createGroupComponents=function(e,t){var n=this;t.field.wrappers&&(e=this.createComponentWrappers(e,t,t.field.wrappers)),t.field.fieldGroup.forEach((function(t){n.createFieldOrGroup(e,t)}))},e.prototype.createComponent=function(e,t){var n;t.field.wrappers&&(e=this.createComponentWrappers(e,t,t.field.wrappers)),Object(P.a)("EavFieldDirective createComponent inputType:",t.field.inputType),n=this.readComponentType(t.field.isExternal?V.a.ExternalWebComponent:t.field.inputType);var i=Reflect.getMetadata("inputTypeAnnotations",n);if(i){i.wrapper&&(e=this.createComponentWrappers(e,t,i.wrapper));var o=this.resolver.resolveComponentFactory(n),a=e.createComponent(o);return Object.assign(a.instance,{group:this.group,config:t}),a}return null},e.prototype.readComponentType=function(e){var t=this.components[e];return void 0===t?(console.error("Missing component class for: "+e),ur):t},e.prototype.createComponentWrappers=function(e,t,n){var i=this;return n.forEach((function(n){e=i.createWrapper(e,t,n)})),e},e.prototype.createWrapper=function(e,t,n){var i=this.readComponentType(n),o=this.resolver.resolveComponentFactory(i),a=e.createComponent(o);return Object.assign(a.instance,{group:this.group,config:t}),a.instance.fieldComponent},e.\u0275fac=function(t){return new(t||e)(k.Qb(k.j),k.Qb(k.O))},e.\u0275dir=k.Lb({type:e,selectors:[["","appEavField",""]],inputs:{config:"config",group:"group"}}),e}(),Pr=function(){function e(e,t){var n=this;this.formBuilder=e,this.eavService=t,this.config=[],this.formSubmit=new k.n,this.formValueChange=new k.n,this.form=new S.e({}),this.showDebugItems=!1,this.subscriptions=[],this.valueIsChanged=function(e){var t=!1;return Object(P.a)("[Test Disabled] VALUECHANGED values",e),Object(P.a)("[Test Disabled] VALUECHANGED form values",n.form.value),Object.keys(e).forEach((function(i){e[i]!==n.form.value[i]&&(t=!0)})),Object(P.a)("[Test Disabled] VALUECHANGED",t),t}}return Object.defineProperty(e.prototype,"changes",{get:function(){return this.form.valueChanges},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return!this.form.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.form.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return this.form.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"debugEnviroment",{get:function(){return!T.a.production},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.createControlsInFormGroup(this.config),this.subscriptions.push(this.form.valueChanges.subscribe((function(t){e.formValueChange.emit(t)})))},e.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(e){e.unsubscribe()}))},e.prototype.createControlsInFormGroup=function(e){var t=this;try{return e.forEach((function(e){var n=e.field;n.fieldGroup?t.createControlsInFormGroup(n.fieldGroup):t.form.addControl(e.field.name,t.createControl(e))})),this.form}catch(n){throw console.error("Error creating form controls: "+n+"\nFieldConfig: "+e),n}},e.prototype.createControl=function(e){try{var t=e.field;return this.formBuilder.control({disabled:t.disabled,value:t.initialValue},t.validation)}catch(n){throw console.error("Error creating form control: "+n+"\nConfig: "+e),n}},e.prototype.save=function(){Object(P.a)("form save"),this.formSubmit.emit(this.value)},e.prototype.submitOutside=function(){this.save()},e.prototype.setDisabled=function(e,t,n){if(this.form.controls[e]){t?this.form.controls[e].disable({emitEvent:n}):this.form.controls[e].enable({emitEvent:n});var i=this.config.find((function(t){return t.field.name===e}));this.eavService.formDisabledChange$.next({formId:i.form.formId,entityGuid:i.entity.entityGuid})}},e.prototype.setValue=function(e,t,n){t!==this.form.controls[e].value&&(Object(P.a)("CHANGE"+e+" from value: "+this.form.controls[e].value+" to "+t),this.form.controls[e].setValue(t,{emitEvent:n}))},e.prototype.patchValue=function(e,t){this.form.patchValue(e,{emitEvent:t})},e.\u0275fac=function(t){return new(t||e)(k.Qb(S.c),k.Qb(j.a))},e.\u0275cmp=k.Kb({type:e,selectors:[["app-eav-form"]],inputs:{config:"config"},outputs:{formSubmit:"formSubmit",formValueChange:"formValueChange"},decls:2,vars:3,consts:[[1,"dynamic-form",3,"formGroup"],["appEavField","",3,"config","group"]],template:function(e,t){1&e&&(k.Wb(0,"form",0),k.Sb(1,1),k.Vb()),2&e&&(k.oc("formGroup",t.form),k.Bb(1),k.oc("config",t.config)("group",t.form))},directives:[S.u,S.m,S.f,Tr],styles:[".dynamic-form[_ngcontent-%COMP%]{margin-bottom:8px}"]}),e}(),jr=n("GWkq");function Vr(e,t){if(1&e){var n=k.Xb();k.Wb(0,"div"),k.Wb(1,"app-eav-form",1),k.ec("formSubmit",(function(e){return k.Fc(n),k.ic().submit(e)}))("formValueChange",(function(e){return k.Fc(n),k.ic().formValueChange(e)})),k.jc(2,"async"),k.Vb(),k.Vb()}if(2&e){var i=k.ic();k.Bb(1),k.oc("config",k.kc(2,1,i.itemFields$))}}var Er=function(){function e(e,t,n,i,a,r){var c=this;this.languageInstanceService=e,this.itemService=t,this.contentTypeService=n,this.eavService=i,this.actions$=a,this.buildFieldsService=r,this.itemFormValueChange=new k.n,this.subscriptions=[],this.itemBehaviorSubject$=new o.a(null),this.formIsValid=!1,this.setFormValues=function(e,t){if(c.form){var n={};Object.keys(e.entity.attributes).forEach((function(t){n[t]=Qe.a.translate(c.currentLanguage,c.defaultLanguage,e.entity.attributes[t],null)})),c.form.valueIsChanged(n)&&c.form.patchValue(n,t),c.eavService.formValueChange$.next({formId:c.formId,entityGuid:c.item.entity.guid,entityValues:n})}},this.eavConfig=this.eavService.getEavConfiguration()}return Object.defineProperty(e.prototype,"item",{get:function(){return this.itemBehaviorSubject$.getValue()},set:function(e){this.itemBehaviorSubject$.next(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allControlsAreDisabled",{get:function(){return this.checkAreAllControlsDisabled()},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.defaultLanguage$=this.languageInstanceService.getDefaultLanguage(this.formId),this.currentLanguage$=this.languageInstanceService.getCurrentLanguage(this.formId),this.setInitialValues(),this.subscribeToChanges()},e.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(e){e.unsubscribe()}))},e.prototype.formSaveObservable=function(){var e=this;return this.actions$.pipe(Object(O.e)(x.a),Object(I.a)((function(t){return 0===e.item.entity.id?e.item.entity.guid===t.item.entity.guid:e.item.entity.id===t.item.entity.id})))},e.prototype.formValueChange=function(e){this.itemService.updateItemAttributesValues(this.item.entity.id,e,this.currentLanguage,this.defaultLanguage,this.item.entity.guid),this.itemFormValueChange.emit()},e.prototype.submit=function(e){(this.form.form.valid||this.allControlsAreDisabled||this.item.header.Group&&this.item.header.Group.SlotCanBeEmpty)&&this.eavService.saveItem(this.item)},e.prototype.checkAreAllControlsDisabled=function(){var e=this,t=!0;return Object.keys(this.form.form.controls).forEach((function(n){e.form.form.controls[n].disabled||(t=!1)})),t},e.prototype.setInitialValues=function(){var e=this;this.defaultLanguage$.pipe(Object(v.a)(1)).subscribe((function(t){e.defaultLanguage=t})),this.currentLanguage$.pipe(Object(v.a)(1)).subscribe((function(t){e.currentLanguage=t}));var t=yt.a.getContentTypeId(this.item);this.contentType$=this.contentTypeService.getContentTypeById(t),this.itemFields$=this.buildFieldsService.buildFields(this.contentType$,this.item,this.formId,this.currentLanguage,this.defaultLanguage)},e.prototype.subscribeToChanges=function(){var e=this;this.subscriptions.push(this.itemBehaviorSubject$.subscribe((function(t){e.setFormValues(t,!1)})),this.defaultLanguage$.pipe(Object(M.a)(1)).subscribe((function(t){e.defaultLanguage=t})),this.currentLanguage$.pipe(Object(M.a)(1)).subscribe((function(t){e.currentLanguage=t,e.setFormValues(e.item,!1)})))},e.\u0275fac=function(t){return new(t||e)(k.Qb(Ne.a),k.Qb(Ge.a),k.Qb(qe),k.Qb(j.a),k.Qb(O.a),k.Qb(jr.a))},e.\u0275cmp=k.Kb({type:e,selectors:[["app-item-edit-form"]],viewQuery:function(e,t){var n;1&e&&k.Wc(Pr,!0),2&e&&k.Cc(n=k.fc())&&(t.form=n.first)},inputs:{formId:"formId",item:"item"},outputs:{itemFormValueChange:"itemFormValueChange"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"config","formSubmit","formValueChange"]],template:function(e,t){1&e&&(k.Oc(0,Vr,3,3,"div",0),k.jc(1,"async")),2&e&&k.oc("ngIf",k.kc(1,1,t.contentType$))},directives:[X.m,Pr],pipes:[X.b],styles:[".button-top-right[_ngcontent-%COMP%]{position:absolute;right:0;top:0}"]}),e}(),$r=function(){function e(){}return e.create=function(e){var t={};return Object(P.a)("eavValues.values.forEach: ",e.values),e.values.forEach((function(e){var n=e.dimensions.map((function(e){return e.value})).join();t[n]=e.value})),t},e}(),Br=function(){function e(){}return e.create=function(t){var n=new e;return Object.keys(t).forEach((function(e){if(t.hasOwnProperty(e)){var i=t[e].type;n[i]||(n[i]={}),n[i][e]=$r.create(t[e])}})),n},e}(),Lr=function(){return function(e,t){this.Id=e,this.Name=t}}(),Fr=function(){return function(e){this.Target=e.Target,e.Number&&(this.Number=e.Number),e.String&&(this.String=e.String),e.Guid&&(this.Guid=e.Guid)}}(),Dr=function(){function e(e,t,n,i,o,a,r,c){this.Id=e,this.Version=t,this.Guid=n,this.Type=i,this.Attributes=o,this.Owner=a,this.Metadata=r,c&&(this.For=c)}return e.create=function(t){var n=Br.create(t.attributes),i=this.createArray(t.metadata),o=t.For?new Fr(t.For):null;return new e(t.id,t.version,t.guid,new Lr(t.type.id,t.type.name),n,t.owner,i,o)},e.createArray=function(t){if(!t)return null;var n=new Array;return t.forEach((function(t){n.push(e.create(t))})),n},e}(),Wr=function(){function e(e,t){this.Header=e,this.Entity=t}return e.create=function(t){return new e(t.header,Dr.create(t.entity))},e}(),zr=function(){function e(e,t){this.snackRef=e,this.snackBarData=t}return e.prototype.ngOnInit=function(){},e.prototype.saveChanges=function(e){this.snackBarData.save=e,this.snackRef.dismissWithAction()},e.\u0275fac=function(t){return new(t||e)(k.Qb(Uo.d),k.Qb(Uo.a))},e.\u0275cmp=k.Kb({type:e,selectors:[["app-snack-bar-unsaved-changes"]],decls:10,vars:9,consts:[[1,"error-message"],["fxLayoutAlign","end end"],["mat-button","","color","accent",3,"click"]],template:function(e,t){1&e&&(k.Wb(0,"span",0),k.Qc(1),k.jc(2,"translate"),k.Vb(),k.Wb(3,"div",1),k.Wb(4,"button",2),k.ec("click",(function(){return t.saveChanges(!1)})),k.Qc(5),k.jc(6,"translate"),k.Vb(),k.Wb(7,"button",2),k.ec("click",(function(){return t.saveChanges(!0)})),k.Qc(8),k.jc(9,"translate"),k.Vb(),k.Vb()),2&e&&(k.Bb(1),k.Rc(k.kc(2,3,"Errors.UnsavedChanges")),k.Bb(4),k.Sc(" ",k.kc(6,5,"General.Buttons.NotSave").toUpperCase()," "),k.Bb(3),k.Sc(" ",k.kc(9,7,"General.Buttons.Save").toUpperCase()," "))},directives:[We.b,It.a],pipes:[ne.d],styles:[".error-message[_ngcontent-%COMP%]{font-size:14px}"],changeDetection:0}),e}();function Ar(e,t){if(1&e&&(k.Wb(0,"div"),k.Wb(1,"span"),k.Qc(2),k.Wb(3,"span"),k.Qc(4),k.jc(5,"translate"),k.Vb(),k.Vb(),k.Vb()),2&e){var n=t.$implicit;k.Bb(2),k.Rc(n.field),k.Bb(2),k.Sc(": ",k.kc(5,2,n.message),"")}}var Rr=function(){function e(e){this.snackBarData=e,this.fieldErrors=[]}return e.prototype.ngOnInit=function(){this.fieldErrors=this.snackBarData.fieldErrors},e.\u0275fac=function(t){return new(t||e)(k.Qb(Uo.a))},e.\u0275cmp=k.Kb({type:e,selectors:[["app-snack-bar-save-errors"]],decls:6,vars:4,consts:[[1,"save-errors-container"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(k.Wb(0,"div",0),k.Wb(1,"div"),k.Qc(2),k.jc(3,"translate"),k.Vb(),k.Rb(4,"br"),k.Oc(5,Ar,6,4,"div",1),k.Vb()),2&e&&(k.Bb(2),k.Rc(k.kc(3,2,"Errors.SaveErrors")),k.Bb(3),k.oc("ngForOf",t.fieldErrors))},directives:[X.l],pipes:[ne.d],styles:[".save-errors-container[_ngcontent-%COMP%]{font-size:14px}"],changeDetection:0}),e}();function Qr(e,t){return e.key<t.key?-1:e.key>t.key?1:0}var Gr=function(){function e(){}return e.Show="show",e.Hide="hide",e.Branch="branch",e}(),Nr=n("39Ct"),Ur=n("5/c3"),qr=n("Iv+g"),Hr=function(e){return{"mat-list-item-focus":e}},Kr=function(){function e(e,t){this.dialogRef=e,this.data=t,this.Modes=Gr}return e.prototype.ngOnInit=function(){this.publishMode=this.data},e.prototype.setMode=function(e){this.dialogRef.close(e)},e.\u0275fac=function(t){return new(t||e)(k.Qb(wt.g),k.Qb(wt.a))},e.\u0275cmp=k.Kb({type:e,selectors:[["app-save-status-dialog"]],decls:35,vars:33,consts:[[1,"mat-card__header"],[1,"mat-card__title"],[1,"mat-card__description"],["toggle",""],[3,"ngClass","click"],["matListIcon","","color","accent"],["matLine","",1,"mat-list-item__title"],["matLine","",1,"mat-list-item__body"],["matListIcon","","color","accent","svgIcon","draft-branch"]],template:function(e,t){1&e&&(k.Wb(0,"mat-card"),k.Wb(1,"div",0),k.Wb(2,"div",1),k.Qc(3),k.jc(4,"translate"),k.Vb(),k.Wb(5,"div",2),k.Qc(6),k.jc(7,"translate"),k.Vb(),k.Vb(),k.Wb(8,"mat-nav-list",3),k.Wb(9,"mat-list-item",4),k.ec("click",(function(){return t.setMode(t.Modes.Show)})),k.Wb(10,"mat-icon",5),k.Qc(11,"visibility"),k.Vb(),k.Wb(12,"div",6),k.Qc(13),k.jc(14,"translate"),k.Vb(),k.Wb(15,"div",7),k.Qc(16),k.jc(17,"translate"),k.Vb(),k.Vb(),k.Wb(18,"mat-list-item",4),k.ec("click",(function(){return t.setMode(t.Modes.Hide)})),k.Wb(19,"mat-icon",5),k.Qc(20,"visibility_off"),k.Vb(),k.Wb(21,"div",6),k.Qc(22),k.jc(23,"translate"),k.Vb(),k.Wb(24,"div",7),k.Qc(25),k.jc(26,"translate"),k.Vb(),k.Vb(),k.Wb(27,"mat-list-item",4),k.ec("click",(function(){return t.setMode(t.Modes.Branch)})),k.Rb(28,"mat-icon",8),k.Wb(29,"div",6),k.Qc(30),k.jc(31,"translate"),k.Vb(),k.Wb(32,"div",7),k.Qc(33),k.jc(34,"translate"),k.Vb(),k.Vb(),k.Vb(),k.Vb()),2&e&&(k.Bb(3),k.Rc(k.kc(4,11,"SaveMode.Dialog.Title")),k.Bb(3),k.Rc(k.kc(7,13,"SaveMode.Dialog.Intro")),k.Bb(3),k.oc("ngClass",k.tc(27,Hr,t.publishMode===t.Modes.Show)),k.Bb(4),k.Rc(k.kc(14,15,"SaveMode.Dialog.Show.Title")),k.Bb(3),k.Rc(k.kc(17,17,"SaveMode.Dialog.Show.Body")),k.Bb(2),k.oc("ngClass",k.tc(29,Hr,t.publishMode===t.Modes.Hide)),k.Bb(4),k.Rc(k.kc(23,19,"SaveMode.Dialog.Hide.Title")),k.Bb(3),k.Rc(k.kc(26,21,"SaveMode.Dialog.Hide.Body")),k.Bb(2),k.oc("ngClass",k.tc(31,Hr,t.publishMode===t.Modes.Branch)),k.Bb(3),k.Rc(k.kc(31,23,"SaveMode.Dialog.Branch.Title")),k.Bb(3),k.Rc(k.kc(34,25,"SaveMode.Dialog.Branch.Body")))},directives:[He.a,kt.e,kt.c,X.k,Z.a,J.a,kt.b,Mt.i],pipes:[ne.d],styles:[".mat-list-item-focus[_ngcontent-%COMP%]{background:rgba(0,0,0,.04)}"],changeDetection:0}),e}(),Xr=function(){function e(e,t,n){var i=this;this.ngZone=e,this.header=t,this.areButtonsDisabled=n,this.eventListeners=[],this.ngZone.runOutsideAngular((function(){var e=i.registerScroll.bind(i);i.header.addEventListener("pointerdown",e,{passive:!0}),i.headerDownListener={element:i.header,type:"pointerdown",listener:e}}))}return e.prototype.destroy=function(){var e=this;this.ngZone.runOutsideAngular((function(){e.headerDownListener.element.removeEventListener(e.headerDownListener.type,e.headerDownListener.listener),e.headerDownListener=null,e.eventListeners.forEach((function(e){e.element.removeEventListener(e.type,e.listener),e=null})),e.eventListeners=null})),this.ngZone=null,this.header=null,this.areButtonsDisabled=null},e.prototype.registerScroll=function(e){if(!this.areButtonsDisabled()&&0===e.button){window.getSelection().removeAllRanges(),this.oldScrollBehavior=getComputedStyle(this.header).getPropertyValue("scroll-behavior"),this.header.style.scrollBehavior="auto",this.positionX=e.pageX;var t=this.doScroll.bind(this),n=this.removeScroll.bind(this);document.addEventListener("pointermove",t,{passive:!0}),document.addEventListener("pointerup",n,{passive:!0}),document.addEventListener("pointerleave",n,{passive:!0}),this.eventListeners.push({element:document,type:"pointermove",listener:t},{element:document,type:"pointerup",listener:n},{element:document,type:"pointerleave",listener:n})}},e.prototype.removeScroll=function(){this.header.style.scrollBehavior=this.oldScrollBehavior,this.eventListeners.forEach((function(e){e.element.removeEventListener(e.type,e.listener),e=null})),this.eventListeners.splice(0,this.eventListeners.length)},e.prototype.doScroll=function(e){var t=e.pageX;t<this.positionX?this.header.scrollLeft+=this.positionX-t:t>this.positionX&&(this.header.scrollLeft+=-(t-this.positionX)),this.positionX=t},e}(),Zr=function(){function e(e,t){var n=this;this.ngZone=e,this.header=t,this.moveThreshold=2,this.stopClick=!1,this.eventListeners=[],this.ngZone.runOutsideAngular((function(){var e=n.checkIfMouseMoved.bind(n);document.addEventListener("mouseup",e,{passive:!0}),n.eventListeners.push({element:document,type:"mouseup",listener:e})}))}return e.prototype.lngButtonDown=function(e){var t=this;this.ngZone.runOutsideAngular((function(){t.saveInitialPosition(e)}))},e.prototype.lngButtonClick=function(e){var t=this;this.ngZone.runOutsideAngular((function(){t.doMove(e)}))},e.prototype.stopClickIfMouseMoved=function(){return this.stopClick},e.prototype.destroy=function(){var e=this;this.ngZone.runOutsideAngular((function(){e.eventListeners.forEach((function(e){e.element.removeEventListener(e.type,e.listener),e=null})),e.eventListeners=null}))},e.prototype.saveInitialPosition=function(e){this.stopClick=!1,this.positionX=e.pageX,this.positionY=e.pageY},e.prototype.checkIfMouseMoved=function(e){this.positionX&&this.positionY?(this.stopClick=Math.abs(this.positionX+this.positionY-(e.pageX+e.pageY))>this.moveThreshold,this.positionX=null,this.positionY=null):this.stopClick=!1},e.prototype.doMove=function(e){if(!this.stopClick){var t=e.target,n=t.getBoundingClientRect().left,i=t.getBoundingClientRect().width,o=this.header.getBoundingClientRect().left,a=this.header.getBoundingClientRect().width;this.header.scrollLeft+=n+i/2-(o+a/2)}},e}(),Yr=function(){function e(e,t,n,i){var o=this;this.ngZone=e,this.header=t,this.leftShadow=n,this.rightShadow=i,this.hidden="hidden",this.eventListeners=[],this.ngZone.runOutsideAngular((function(){o.calculateShadows();var e=o.calculateShadows.bind(o);o.header.addEventListener("scroll",e,{passive:!0}),window.addEventListener("resize",e,{passive:!0}),o.eventListeners.push({element:o.header,type:"scroll",listener:e},{element:window,type:"resize",listener:e})}))}return e.prototype.destroy=function(){var e=this;this.ngZone.runOutsideAngular((function(){e.eventListeners.forEach((function(e){e.element.removeEventListener(e.type,e.listener),e=null})),e.eventListeners=null})),this.ngZone=null,this.header=null,this.leftShadow=null,this.rightShadow=null},e.prototype.calculateShadows=function(){this.maxScrollLeft=this.header.scrollWidth-this.header.clientWidth,0===this.maxScrollLeft?this.hideBoth():0===this.header.scrollLeft?this.hideLeft():this.header.scrollLeft===this.maxScrollLeft?this.hideRight():this.showBoth()},e.prototype.hideBoth=function(){this.leftShadow.classList.add(this.hidden),this.rightShadow.classList.add(this.hidden)},e.prototype.hideLeft=function(){this.leftShadow.classList.add(this.hidden),this.rightShadow.classList.remove(this.hidden)},e.prototype.hideRight=function(){this.leftShadow.classList.remove(this.hidden),this.rightShadow.classList.add(this.hidden)},e.prototype.showBoth=function(){this.leftShadow.classList.remove(this.hidden),this.rightShadow.classList.remove(this.hidden)},e}();function Jr(e){return e.substring(0,e.indexOf("(")>0?e.indexOf("(")-1:100).toLocaleUpperCase()}var ec=["scrollable"],tc=["leftShadow"],nc=["rightShadow"];function ic(e,t){if(1&e){var n=k.Xb();k.Wb(0,"button",9),k.ec("mousedown",(function(e){return k.Fc(n),k.ic(2).lngButtonMouseDown(e)}))("click",(function(e){k.Fc(n);var i=t.$implicit;return k.ic(2).lngButtonClick(e,i)})),k.Qc(1),k.Vb()}if(2&e){var i=t.$implicit,o=k.ic().ngIf,a=k.ic();k.oc("disabled",!a.formsAreValid&&o.currentLanguage!==i.key&&!a.allControlsAreDisabled)("color",o.currentLanguage===i.key?"accent":"white")("matTooltip",i.name),k.Bb(1),k.Sc(" ",i.buttonText," ")}}function oc(e,t){if(1&e){var n=k.Xb();k.Wb(0,"div",1),k.Rb(1,"div",2,3),k.Rb(3,"div",4,5),k.Wb(5,"div",6,7),k.ec("click",(function(){return k.Fc(n),k.ic().showError()})),k.Oc(7,ic,2,4,"button",8),k.jc(8,"async"),k.Vb(),k.Vb()}if(2&e){var i=k.ic();k.Bb(7),k.oc("ngForOf",k.kc(8,1,i.languageButtons$))}}var ac=function(e){return{currentLanguage:e}},rc=function(){function e(e,t,n,i,o){this.languageService=e,this.languageInstanceService=t,this.ngZone=n,this.snackBar=i,this.translate=o}return e.prototype.ngOnInit=function(){this.languageButtons$=this.languageService.entities$.pipe(Object(w.a)((function(e){return n=[],i={},(t=e).forEach((function(e){var t=Jr(e.name);i[t]?i[t]++:i[t]=1})),t.forEach((function(e){var t=Jr(e.name);n.push({name:e.name,key:e.key,buttonText:i[t]>1?t+" ("+e.key+")":t})})),n;var t,n,i}))),this.currentLanguage$=this.languageInstanceService.getCurrentLanguage(this.formId)},e.prototype.ngAfterViewInit=function(){this.showShadowsService=new Yr(this.ngZone,this.headerRef.nativeElement,this.leftShadowRef.nativeElement,this.rightShadowRef.nativeElement),this.mouseScrollHelper=new Xr(this.ngZone,this.headerRef.nativeElement,this.areButtonsDisabled.bind(this)),this.centerSelectedService=new Zr(this.ngZone,this.headerRef.nativeElement)},e.prototype.areButtonsDisabled=function(){return!this.formsAreValid&&!this.allControlsAreDisabled},e.prototype.ngOnDestroy=function(){this.centerSelectedService.destroy(),this.mouseScrollHelper.destroy(),this.showShadowsService.destroy()},e.prototype.lngButtonMouseDown=function(e){this.centerSelectedService.lngButtonDown(e)},e.prototype.lngButtonClick=function(e,t){this.centerSelectedService.lngButtonClick(e),this.centerSelectedService.stopClickIfMouseMoved()||this.languageInstanceService.updateCurrentLanguage(this.formId,t.key)},e.prototype.showError=function(){this.areButtonsDisabled()&&this.snackBar.open(this.translate.instant("Message.CantSwitchLanguage"),null,{duration:2e3})},e.\u0275fac=function(t){return new(t||e)(k.Qb(xt.a),k.Qb(Ne.a),k.Qb(k.z),k.Qb(Uo.b),k.Qb(ne.e))},e.\u0275cmp=k.Kb({type:e,selectors:[["app-eav-language-switcher"]],viewQuery:function(e,t){var n;1&e&&(k.Wc(ec,!0),k.Wc(tc,!0),k.Wc(nc,!0)),2&e&&(k.Cc(n=k.fc())&&(t.headerRef=n.first),k.Cc(n=k.fc())&&(t.leftShadowRef=n.first),k.Cc(n=k.fc())&&(t.rightShadowRef=n.first))},inputs:{formId:"formId",formsAreValid:"formsAreValid",allControlsAreDisabled:"allControlsAreDisabled"},decls:2,vars:5,consts:[["class","scrollable__overlay",4,"ngIf"],[1,"scrollable__overlay"],[1,"scrollable__overlay--left-shadow"],["leftShadow",""],[1,"scrollable__overlay--right-shadow"],["rightShadow",""],[1,"scrollable","lang-switch",3,"click"],["scrollable",""],["mat-flat-button","","class","lang-switch__button",3,"disabled","color","matTooltip","mousedown","click",4,"ngFor","ngForOf"],["mat-flat-button","",1,"lang-switch__button",3,"disabled","color","matTooltip","mousedown","click"]],template:function(e,t){1&e&&(k.Oc(0,oc,9,3,"div",0),k.jc(1,"async")),2&e&&k.oc("ngIf",k.tc(3,ac,k.kc(1,1,t.currentLanguage$)))},directives:[X.m,X.l,It.a,Y.a],pipes:[X.b],styles:['.scrollable__overlay[_ngcontent-%COMP%]{position:relative;height:100%}.scrollable__overlay--left-shadow[_ngcontent-%COMP%], .scrollable__overlay--right-shadow[_ngcontent-%COMP%]{content:"";position:absolute;top:0;display:block;z-index:1;pointer-events:none;height:100%;width:80px;background-image:linear-gradient(90deg,#fff 8px,hsla(0,0%,100%,0))}@media (max-width:600px){.scrollable__overlay--left-shadow[_ngcontent-%COMP%], .scrollable__overlay--right-shadow[_ngcontent-%COMP%]{width:24px}}.scrollable__overlay--right-shadow[_ngcontent-%COMP%]{right:0;background-image:linear-gradient(270deg,#fff 8px,hsla(0,0%,100%,0))}.scrollable[_ngcontent-%COMP%]{overflow:hidden;scroll-behavior:smooth;height:100%}.lang-switch[_ngcontent-%COMP%]{display:flex}.lang-switch__button[_ngcontent-%COMP%]{height:100%;flex-shrink:0;border-radius:0;margin-left:0!important;color:rgba(0,0,0,.4);border-bottom:none;font-size:12px;line-height:54px;padding:0 6px;background-color:#fff!important}.lang-switch__button.mat-accent[_ngcontent-%COMP%]{color:#2680eb;border-bottom:2px solid #2680eb;background-color:inherit}.hidden[_ngcontent-%COMP%]{visibility:hidden}'],changeDetection:0}),e}();function cc(e,t){if(1&e&&k.Rb(0,"app-eav-language-switcher",6),2&e){var n=k.ic();k.oc("formId",n.formId)("formsAreValid",n.formsAreValid)("allControlsAreDisabled",n.allControlsAreDisabled)}}var sc=function(){function e(e,t){this.dialog=e,this.languageService=t,this.closeDialog=new k.n,this.setPublishMode=new k.n}return e.prototype.ngOnInit=function(){this.hasLanguages$=this.languageService.entities$.pipe(Object(w.a)((function(e){return e.length>0})))},e.prototype.close=function(){this.closeDialog.emit()},e.prototype.openSaveStatusDialog=function(){var e=this,t=this.dialog.open(Kr,{panelClass:"c-save-status-dialog",autoFocus:!1,width:"350px",data:this.publishMode});t.keydownEvents().subscribe((function(e){83===e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&e.preventDefault()})),t.afterClosed().subscribe((function(t){null!=t&&e.setPublishMode.emit(t)}))},e.\u0275fac=function(t){return new(t||e)(k.Qb(wt.b),k.Qb(xt.a))},e.\u0275cmp=k.Kb({type:e,selectors:[["app-multi-item-edit-form-header"]],inputs:{formId:"formId",formsAreValid:"formsAreValid",allControlsAreDisabled:"allControlsAreDisabled",isParentDialog:"isParentDialog",publishMode:"publishMode"},outputs:{closeDialog:"closeDialog",setPublishMode:"setPublishMode"},decls:16,vars:17,consts:[[1,"header"],["mat-icon-button","",1,"header__exit-button",3,"matTooltip","click"],[1,"header__langs"],[3,"formId","formsAreValid","allControlsAreDisabled",4,"ngIf"],["mat-button","",1,"header__publish-button",3,"matTooltip","click"],[1,"header__publish-mode"],[3,"formId","formsAreValid","allControlsAreDisabled"]],template:function(e,t){1&e&&(k.Wb(0,"mat-card",0),k.Wb(1,"button",1),k.ec("click",(function(){return t.close()})),k.jc(2,"translate"),k.Wb(3,"mat-icon"),k.Qc(4),k.Vb(),k.Vb(),k.Wb(5,"div",2),k.Oc(6,cc,1,3,"app-eav-language-switcher",3),k.jc(7,"async"),k.Vb(),k.Wb(8,"button",4),k.ec("click",(function(){return t.openSaveStatusDialog()})),k.jc(9,"translate"),k.Wb(10,"span",5),k.Qc(11),k.jc(12,"translate"),k.Wb(13,"b"),k.Qc(14),k.jc(15,"translate"),k.Vb(),k.Vb(),k.Vb(),k.Vb()),2&e&&(k.Bb(1),k.oc("matTooltip",k.kc(2,6,t.isParentDialog?"Form.Buttons.Exit.Tip":"Form.Buttons.Return.Tip")),k.Bb(3),k.Rc(t.isParentDialog?"clear":"arrow_back"),k.Bb(2),k.oc("ngIf",k.kc(7,8,t.hasLanguages$)),k.Bb(2),k.pc("matTooltip",k.kc(9,10,"SaveMode."+t.publishMode+".Tip")),k.Bb(3),k.Sc(" ",k.kc(12,12,"SaveMode.Label")," "),k.Bb(3),k.Rc(k.lc(15,14,"SaveMode."+t.publishMode,"").toUpperCase()))},directives:[He.a,It.a,Y.a,J.a,X.m,rc],pipes:[ne.d,X.b],styles:[".header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 16px;border-bottom-left-radius:0;border-bottom-right-radius:0;height:52px;z-index:1;box-shadow:0 2px 5px rgba(0,0,0,.26)}@media (max-width:600px){.header[_ngcontent-%COMP%]{border-radius:0}}.header__exit-button[_ngcontent-%COMP%]{margin-right:12px;width:30px;height:30px;flex-shrink:0;line-height:30px}.header__exit-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;line-height:16px!important}.header__langs[_ngcontent-%COMP%]{flex-grow:1;overflow:hidden;height:100%}.header__publish-button[_ngcontent-%COMP%]{margin-right:-6px;padding:0 10px;height:30px;line-height:32px;flex-shrink:0}.header__publish-mode[_ngcontent-%COMP%]{font-weight:400}"],changeDetection:0}),e}();function lc(e,t){if(1&e&&(k.Wb(0,"div",6),k.Wb(1,"textarea",7),k.Qc(2),k.jc(3,"json"),k.Vb(),k.Vb()),2&e){var n=k.ic().ngIf;k.Bb(2),k.Rc(k.kc(3,1,n.items))}}var dc=function(e){return{"debug-enabled":e}};function uc(e,t){if(1&e){var n=k.Xb();k.Ub(0),k.Wb(1,"mat-card",1),k.Wb(2,"div",2),k.Wb(3,"button",3),k.ec("click",(function(){return k.Fc(n),k.ic().toggleDebugInfo()})),k.jc(4,"translate"),k.Wb(5,"mat-icon"),k.Qc(6,"offline_bolt"),k.Vb(),k.Vb(),k.Wb(7,"div"),k.Qc(8),k.Vb(),k.Wb(9,"button",4),k.Wb(10,"mat-icon"),k.Qc(11,"offline_bolt"),k.Vb(),k.Vb(),k.Vb(),k.Oc(12,lc,4,3,"div",5),k.Vb(),k.Tb()}if(2&e){var i=t.ngIf,o=k.ic();k.Bb(1),k.oc("ngClass",k.tc(6,dc,i.showDebugInfo)),k.Bb(2),k.oc("matTooltip",k.kc(4,4,"General.Buttons.Debug")),k.Bb(5),k.Sc("2sxc ",o.sxcVer,""),k.Bb(4),k.oc("ngIf",i.showDebugInfo)}}var pc=function(e,t){return{showDebugInfo:e,items:t}},fc=function(){function e(e){this.itemService=e,this.debugInfoOpened=new k.n,this.sxcVer=sxcVersion.substring(0,sxcVersion.lastIndexOf(".")),this.showDebugInfo$=new o.a(!1)}return e.prototype.ngOnInit=function(){this.items$=this.itemService.selectAllItems()},e.prototype.ngOnDestroy=function(){this.showDebugInfo$.complete()},e.prototype.toggleDebugInfo=function(){this.showDebugInfo$.next(!this.showDebugInfo$.value),this.debugInfoOpened.emit(this.showDebugInfo$.value)},e.\u0275fac=function(t){return new(t||e)(k.Qb(Ge.a))},e.\u0275cmp=k.Kb({type:e,selectors:[["app-multi-item-edit-form-debug"]],outputs:{debugInfoOpened:"debugInfoOpened"},decls:3,vars:8,consts:[[4,"ngIf"],["fxLayout","column","fxLayoutAlign","center start",3,"ngClass"],["fxLayout","row","fxLayoutAlign","space-between center",1,"debug-buttons-container"],["mat-icon-button","",3,"matTooltip","click"],["mat-icon-button","",1,"hidden"],["class","debug-info-container",4,"ngIf"],[1,"debug-info-container"],["readonly","",1,"debug-dump"]],template:function(e,t){1&e&&(k.Oc(0,uc,13,8,"ng-container",0),k.jc(1,"async"),k.jc(2,"async")),2&e&&k.oc("ngIf",k.uc(5,pc,k.kc(1,1,t.showDebugInfo$),k.kc(2,3,t.items$)))},directives:[X.m,He.a,We.c,We.b,X.k,Z.a,It.a,Y.a,J.a],pipes:[X.b,ne.d,X.f],styles:[".mat-card[_ngcontent-%COMP%]{padding:0;margin:0;border-top-left-radius:0;border-top-right-radius:0;height:52px;z-index:1;width:100%}@media (max-width:600px){.mat-card[_ngcontent-%COMP%]{border-radius:0}}.mat-card.debug-enabled[_ngcontent-%COMP%]{height:auto}.debug-buttons-container[_ngcontent-%COMP%]{padding:17px 16px 15px;height:52px;width:100%}.debug-info-container[_ngcontent-%COMP%]{margin:0 16px 16px!important;width:calc(100% - 32px);height:300px;position:relative}.debug-dump[_ngcontent-%COMP%]{width:calc(100% - 10px);margin:0;padding:10px 0 10px 10px;border:0;height:calc(100% - 20px);resize:none;background-color:rgba(29,39,61,.04)}.mat-icon-button[_ngcontent-%COMP%]{margin-right:12px;width:30px;height:30px;line-height:30px}.mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;line-height:20px!important}.hidden[_ngcontent-%COMP%]{visibility:hidden}"],changeDetection:0}),e}();n.d(t,"MultiItemEditFormComponent",(function(){return Cc}));var gc=["slideable"];function bc(e,t){if(1&e){var n=k.Xb();k.Wb(0,"div"),k.Wb(1,"app-item-edit-form",15),k.ec("itemFormValueChange",(function(e){return k.Fc(n),k.ic(2).formValueChange(e)})),k.Vb(),k.Vb()}if(2&e){var i=t.$implicit,o=k.ic(2);k.Bb(1),k.oc("item",i)("formId",o.formId)}}function hc(e,t){if(1&e){var n=k.Xb();k.Wb(0,"app-multi-item-edit-form-debug",16),k.ec("debugInfoOpened",(function(e){return k.Fc(n),k.ic(2).debugInfoOpened(e)})),k.Vb()}}var mc=function(e){return{"u-display-none":e}},vc=function(e,t,n){return{"debug-enabled":e,"debug-info-is-open":t,"hide-header-height-fix":n}},yc=function(e,t,n){return{"mat-fab--compact":e,"mat-fab--extended":t,"mat-fab--disabled":n}};function wc(e,t){if(1&e){var n=k.Xb();k.Wb(0,"div",1),k.ec("click",(function(e){return k.Fc(n),k.ic().toggleDebugEnabled(e)})),k.Wb(1,"div",2),k.Wb(2,"app-multi-item-edit-form-header",3),k.ec("closeDialog",(function(){return k.Fc(n),k.ic().closeDialog()}))("setPublishMode",(function(e){return k.Fc(n),k.ic().setPublishMode1(e)})),k.jc(3,"async"),k.jc(4,"async"),k.jc(5,"async"),k.Vb(),k.Vb(),k.Wb(6,"div",4),k.Wb(7,"div",5),k.Wb(8,"div",6),k.Wb(9,"div",7),k.Wb(10,"div",8,9),k.Oc(12,bc,2,2,"div",10),k.jc(13,"async"),k.Vb(),k.Vb(),k.Vb(),k.Wb(14,"div",11),k.Wb(15,"div",12),k.Wb(16,"button",13),k.ec("click",(function(){return k.Fc(n),k.ic().saveAll(!0)})),k.jc(17,"translate"),k.jc(18,"async"),k.jc(19,"async"),k.Wb(20,"mat-icon"),k.Qc(21,"done"),k.Vb(),k.Qc(22),k.jc(23,"translate"),k.Vb(),k.Vb(),k.Vb(),k.Vb(),k.Vb(),k.Oc(24,hc,1,0,"app-multi-item-edit-form-debug",14),k.Vb()}if(2&e){var i=k.ic();k.Bb(1),k.oc("ngClass",k.tc(29,mc,i.hideHeader)),k.Bb(1),k.oc("formId",i.formId)("formsAreValid",k.kc(3,13,i.formsAreValid$))("allControlsAreDisabled",k.kc(4,15,i.allControlsAreDisabled$))("isParentDialog",i.isParentDialog)("publishMode",k.kc(5,17,i.publishMode$)),k.Bb(5),k.oc("ngClass",k.vc(31,vc,i.debugEnabled,i.debugInfoIsOpen,i.hideHeader)),k.Bb(5),k.oc("ngForOf",k.kc(13,19,i.items$))("ngForTrackBy",i.trackByFn),k.Bb(4),k.oc("matTooltip",k.kc(17,21,"Form.Buttons.Save.Tip"))("ngClass",k.vc(35,yc,i.extendedSaveButtonIsReduced,!i.extendedSaveButtonIsReduced,!k.kc(18,23,i.formsAreValid$)&&!k.kc(19,25,i.allControlsAreDisabled$))),k.Bb(6),k.Sc(" ",i.extendedSaveButtonIsReduced?"":k.kc(23,27,"Form.Buttons.Save").toUpperCase()," "),k.Bb(2),k.oc("ngIf",i.debugEnabled)}}var Cc=function(){function e(e,t,n,a,r,c,s,l,d,u,p,f,g,b,h,m,v,y,w){if(this.dialogRef=e,this.actions$=t,this.changeDetectorRef=n,this.contentTypeService=a,this.globalConfigurationService=r,this.eavService=c,this.featureService=s,this.inputTypeService=l,this.itemService=d,this.languageService=u,this.languageInstanceService=p,this.snackBar=f,this.translate=g,this.validationMessagesService=b,this.loadIconsService=h,this.ngZone=m,this.route=v,this.context=y,this.editRoutingService=w,this.subscriptions=[],this.createMode=!1,this.slide="initial",this.slideListenersAdded=!1,this.formIsSaved=!1,this.formId=Math.floor(99999*Math.random()),this.enableDraft=!1,this.formErrors=[],this.formsAreValid$=new o.a(!1),this.formsAreDirty={},this.allControlsAreDisabled$=new o.a(!0),this.formSaveAllObservables$=[],this.publishMode$=new o.a("hide"),this.willPublish=!1,this.extendedSaveButtonIsReduced=!1,this.debugEnabled=!1,this.debugInfoIsOpen=!1,this.eventListeners=[],this.eavService.setEavConfiguration(this.route,this.context),this.eavConfig=this.eavService.getEavConfiguration(),this.translate.setDefaultLang("en"),this.translate.use("en"),this.editRoutingService.init(this.route,this.formId),this.isParentDialog=function(e){var t,n,o,a,r=0;try{for(var c=Object(i.i)(e.snapshot.pathFromRoot),s=c.next();!s.done;s=c.next()){var l=s.value;if(!(l.url.length<=0))try{for(var d=(o=void 0,Object(i.i)(l.url)),u=d.next();!u.done;u=d.next())"edit"===u.value.path&&r++}catch(p){o={error:p}}finally{try{u&&!u.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}}}catch(f){t={error:f}}finally{try{s&&!s.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return 1===r}(this.route),this.isParentDialog){var C=function(e,t){var n,o,a;if(0===t.length)return t;var r=[],c=[];try{for(var s=Object(i.i)(t),l=s.next();!l.done;l=s.next()){var d=l.value;d.key===e?a=d:d.key.startsWith(e.split("-")[0])?r.push(d):c.push(d)}}catch(u){n={error:u}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return r.sort(Qr),c.sort(Qr),a?Object(i.g)([a],r,c):Object(i.g)(r,c)}(this.eavConfig.langpri,JSON.parse(this.eavConfig.langs));this.languageService.loadLanguages(C)}this.languageInstanceService.addLanguageInstance(this.formId,this.eavConfig.lang,this.eavConfig.langpri,this.eavConfig.lang,!1),this.currentLanguage=this.eavConfig.lang,this.loadIconsService.load()}return e.prototype.ngOnInit=function(){this.languages$=this.languageService.entities$,this.currentLanguage$=this.languageInstanceService.getCurrentLanguage(this.formId),this.loadItemsData(),this.setLanguageConfig(),this.reduceExtendedSaveButton(),this.dialogBackdropClickSubscribe(),this.saveFormMessagesSubscribe(),this.formSetValueChangeSubscribe(),this.checkFormsState(),this.loadDebugEnabled(),this.hideHeaderSubscribe()},e.prototype.ngAfterViewChecked=function(){this.attachAllSaveFormObservables(),this.changeDetectorRef.detectChanges()},e.prototype.ngOnDestroy=function(){this.formsAreValid$.complete(),this.allControlsAreDisabled$.complete(),this.publishMode$.complete(),this.subscriptions.forEach((function(e){e.unsubscribe()})),this.languageInstanceService.removeLanguageInstance(this.formId),this.isParentDialog&&(this.languageInstanceService.clearCache(),this.languageService.clearCache(),this.itemService.clearCache(),this.inputTypeService.clearCache(),this.featureService.clearCache(),this.contentTypeService.clearCache()),this.eventListeners.forEach((function(e){e.element.removeEventListener(e.type,e.listener)}))},e.prototype.toggleDebugEnabled=function(e){(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&e.shiftKey&&e.altKey&&this.globalConfigurationService.toggleDebugEnabled()},e.prototype.debugInfoOpened=function(e){this.debugInfoIsOpen=e},e.prototype.formValueChange=function(e){this.checkFormsState(),this.formErrors=[]},e.prototype.closeDialog=function(e){this.dialogRef.disableClose?this.snackBarYouHaveUnsavedChanges():this.dialogRef.close(this.createMode?e:void 0)},e.prototype.saveAll=function(e){var t=this;this.eavService.forceConnectorSave$.next(),setTimeout((function(){if(t.formsAreValid$.value||t.allControlsAreDisabled$.value)t.itemEditFormComponentQueryList.forEach((function(e){e.form.submitOutside()})),Object(P.a)("saveAll",e),t.snackBarOpen(t.translate.instant("Message.Saving")),e&&(t.formIsSaved=!0);else{t.calculateAllValidationMessages();var n=[];t.formErrors.forEach((function(e){Object.keys(e).forEach((function(t){n.push({field:t,message:e[t]})}))})),t.snackBar.openFromComponent(Rr,{data:{fieldErrors:n},duration:5e3})}}),100)},e.prototype.trackByFn=function(e,t){return 0===t.entity.id?t.entity.guid:t.entity.id},e.prototype.afterLoadItemsData=function(e){var t=this;this.itemService.loadItems(e.Items),this.inputTypeService.addInputTypes(e.InputTypes),this.contentTypeService.addContentTypes(e.ContentTypes),this.featureService.loadFeatures(e.Features),this.setPublishMode(e.Items,e.IsPublished,e.DraftShouldBranch),this.eavConfig.lang!==this.eavConfig.langpri&&(this.itemService.valuesExistInDefaultLanguage(e.Items.map((function(e){return 0===e.Entity.Id?e.Entity.Guid:e.Entity.Id})),this.eavConfig.langpri,this.inputTypeService,this.contentTypeService)||(this.languageInstanceService.updateCurrentLanguage(this.formId,this.eavConfig.langpri),this.snackBarOpen(this.translate.instant("Message.SwitchedLanguageToDefault",{language:this.eavConfig.langpri}),5e3))),this.items$=this.itemService.selectItemsByIdList(e.Items.map((function(e){return 0===e.Entity.Id?e.Entity.Guid:e.Entity.Id}))),this.items$.pipe(Object(v.a)(1)).subscribe((function(e){e&&e.length&&0===e[0].entity.id&&(t.createMode=!0)}))},e.prototype.areFormsDirtyAnyLanguage=function(){var e=this,t=!1;return Object.keys(this.formsAreDirty).forEach((function(n){!0===e.formsAreDirty[n]&&(t=!0)})),t},e.prototype.dialogBackdropClickSubscribe=function(){var e=this,t=this.windowBeforeUnload.bind(this);window.addEventListener("beforeunload",t),this.eventListeners.push({element:window,type:"beforeunload",listener:t}),this.dialogRef.backdropClick().subscribe((function(t){e.closeDialog()})),this.dialogRef.keydownEvents().subscribe((function(t){27===t.keyCode&&e.closeDialog(),83===t.keyCode&&(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)&&(t.preventDefault(),e.saveAll(!1))}))},e.prototype.windowBeforeUnload=function(e){this.dialogRef.disableClose&&(e.preventDefault(),e.returnValue="",this.snackBarYouHaveUnsavedChanges())},e.prototype.calculateAllValidationMessages=function(){var e=this;this.formErrors=[],this.itemEditFormComponentQueryList&&this.itemEditFormComponentQueryList.length>0&&this.itemEditFormComponentQueryList.forEach((function(t){t.form.form.invalid&&e.formErrors.push(e.validationMessagesService.validateForm(t.form.form,!1))}))},e.prototype.getVersioningOptions=function(){if(!this.eavConfig.partOfPage)return{show:!0,hide:!0,branch:!0};var e=this.eavConfig.publishing||"";switch(e){case"":case"DraftOptional":return{show:!0,hide:!0,branch:!0};case"DraftRequired":return{branch:!0,hide:!0};default:throw Error("invalid versioning requiremenets: "+e.toString())}},e.prototype.formSetValueChangeSubscribe=function(){var e=this;this.subscriptions.push(this.eavService.formValueChange$.subscribe((function(t){t.formId===e.formId&&e.checkFormsState()})))},e.prototype.loadItemsData=function(){var e=this;this.eavService.loadAllDataForForm(this.eavConfig.appId,this.eavConfig.items).subscribe((function(t){e.afterLoadItemsData(t)}))},e.prototype.setLanguageConfig=function(){var e=this;this.setTranslateLanguage(this.eavConfig.lang),this.subscriptions.push(this.languages$.subscribe((function(t){e.languages=t})),this.currentLanguage$.subscribe((function(t){e.changeAnimationState(t),e.currentLanguage=t,e.formErrors=[]})))},e.prototype.changeAnimationState=function(e){var t=this,n=this.languages.findIndex((function(e){return e.key===t.currentLanguage})),i=this.languages.findIndex((function(t){return t.key===e}));n>i?this.slide="previous":n<i&&(this.slide="next"),this.slideableRef&&this.slideableRef.nativeElement&&this.ngZone.runOutsideAngular((function(){if(t.slideableRef.nativeElement.classList.contains(t.slide)?(t.slideableRef.nativeElement.classList.remove("next"),t.slideableRef.nativeElement.classList.remove("previous"),setTimeout((function(){t.slideableRef.nativeElement.classList.add(t.slide)}),100)):(t.slideableRef.nativeElement.classList.remove("next"),t.slideableRef.nativeElement.classList.remove("previous"),t.slideableRef.nativeElement.classList.add(t.slide)),!t.slideListenersAdded){t.slideListenersAdded=!0;var e=t.slideAnimationEnd.bind(t);t.slideableRef.nativeElement.addEventListener("webkitAnimationEnd",e),t.slideableRef.nativeElement.addEventListener("animationend",e),t.eventListeners.push({element:window,type:"beforeunload",listener:e},{element:window,type:"beforeunload",listener:e})}}))},e.prototype.slideAnimationEnd=function(){var e=this;setTimeout((function(){e.slideableRef.nativeElement.classList.remove("previous"),e.slideableRef.nativeElement.classList.remove("next")}),100)},e.prototype.setTranslateLanguage=function(e){if(e){var t=e.substring(0,e.indexOf("-")>0?e.indexOf("-"):2);this.translate.use(t)}},e.prototype.attachAllSaveFormObservables=function(){var e,t=this;0===this.formSaveAllObservables$.length&&((null===(e=this.itemEditFormComponentQueryList)||void 0===e?void 0:e.length)>0&&this.itemEditFormComponentQueryList.forEach((function(e){t.formSaveAllObservables$.push(e.formSaveObservable())})),this.formSaveAllObservables$.length>0&&(this.saveFormSubscribe(),this.checkFormsState()))},e.prototype.saveFormSubscribe=function(){var e=this;this.subscriptions.push(u.apply(void 0,Object(i.g)(this.formSaveAllObservables$)).pipe(Object(y.a)((function(t){Object(P.a)("ZIP ACTIONS ITEM: ",Wr.create(t[0].item));var n=[];return t.forEach((function(e){var t=Wr.create(e.item);Object.keys(t.Entity.Attributes).length>0&&n.push(t)})),e.eavService.savemany(e.eavConfig.appId,e.eavConfig.partOfPage,JSON.stringify({Items:n,IsPublished:e.publishMode$.value===Gr.Show,DraftShouldBranch:e.publishMode$.value===Gr.Branch})).pipe(Object(w.a)((function(t){e.enableDraft=!0,e.eavService.saveItemSuccess(t)})),Object(C.a)((function(e){return Object(P.a)("working")})))})),Object(_.a)((function(t){return Object(m.a)(e.eavService.saveItemError(t))}))).subscribe())},e.prototype.saveFormMessagesSubscribe=function(){var e=this;this.subscriptions.push(this.actions$.pipe(Object(O.e)(x.c)).subscribe((function(t){e.itemService.updateItemId(t.data),Object(P.a)("success END: ",t.data),e.snackBarOpen(e.translate.instant("Message.Saved")),e.dialogRef.disableClose=!1,e.formIsSaved&&e.closeDialog(t.data)}))),this.subscriptions.push(this.actions$.pipe(Object(O.e)(x.b)).subscribe((function(t){Object(P.a)("error END",t.error),e.snackBarOpen("error")})))},e.prototype.checkFormsState=function(){this.setFormState(),this.getFormState()},e.prototype.setFormState=function(){var e=this;this.itemEditFormComponentQueryList&&this.itemEditFormComponentQueryList.length>0&&this.itemEditFormComponentQueryList.first.currentLanguage&&(this.allControlsAreDisabled$.next(!0),this.formsAreValid$.next(!0),this.formsAreDirty[this.itemEditFormComponentQueryList.first.currentLanguage]=!1,this.itemEditFormComponentQueryList.forEach((function(t){!1!==t.form.valid||t.item.header.Group&&!1!==t.item.header.Group.SlotCanBeEmpty||e.formsAreValid$.next(!1),t.form.dirty&&(e.formsAreDirty[t.currentLanguage]=!0),t.allControlsAreDisabled||e.allControlsAreDisabled$.next(!1)})))},e.prototype.getFormState=function(){this.dialogRef.disableClose=this.areFormsDirtyAnyLanguage()},e.prototype.setPublishMode=function(e,t,n){this.versioningOptions=this.getVersioningOptions(),this.enableDraft=0!==e[0].Header.EntityId;var i=n?Gr.Branch:t?Gr.Show:Gr.Hide;this.eavConfig.versioningOptions[i]||(i=Object.keys(this.eavConfig.versioningOptions)[0]),this.publishMode$.next(i)},e.prototype.setPublishMode1=function(e){this.publishMode$.next(e)},e.prototype.snackBarOpen=function(e,t){void 0===t&&(t=3e3),this.snackBar.open(e,"",{duration:t})},e.prototype.snackBarYouHaveUnsavedChanges=function(){var e=this,t=this.snackBar.openFromComponent(zr,{data:{save:!1},duration:5e3});t.onAction().subscribe((function(n){t.containerInstance.snackBarConfig.data.save?e.saveAll(!0):(e.dialogRef.disableClose=!1,e.closeDialog())}))},e.prototype.reduceExtendedSaveButton=function(){var e=this;setTimeout((function(){e.extendedSaveButtonIsReduced=!0}),5e3)},e.prototype.loadDebugEnabled=function(){var e=this,t=this.globalConfigurationService.getDebugEnabled();t.pipe(Object(v.a)(1)).subscribe((function(t){e.debugEnabled=t})),this.subscriptions.push(t.subscribe((function(t){e.debugEnabled!==t&&(e.debugEnabled=t,e.debugEnabled||(e.debugInfoIsOpen=!1))})))},e.prototype.hideHeaderSubscribe=function(){var e=this;this.subscriptions.push(this.languageInstanceService.getHideHeader(this.formId).subscribe((function(t){e.hideHeader=t})))},e.\u0275fac=function(t){return new(t||e)(k.Qb(wt.g),k.Qb(O.a),k.Qb(k.h),k.Qb(qe),k.Qb(Vo.a),k.Qb(j.a),k.Qb(q),k.Qb(Kt.a),k.Qb(Ge.a),k.Qb(xt.a),k.Qb(Ne.a),k.Qb(Uo.b),k.Qb(ne.e),k.Qb(F.a),k.Qb(Nr.a),k.Qb(k.z),k.Qb(Ur.a),k.Qb(qr.a),k.Qb(K.a))},e.\u0275cmp=k.Kb({type:e,selectors:[["app-multi-item-edit-form"]],viewQuery:function(e,t){var n;1&e&&(k.Wc(gc,!0),k.Wc(Er,!0)),2&e&&(k.Cc(n=k.fc())&&(t.slideableRef=n.first),k.Cc(n=k.fc())&&(t.itemEditFormComponentQueryList=n))},decls:3,vars:3,consts:[["mat-dialog-container","","style","position: relative",3,"click",4,"ngIf"],["mat-dialog-container","",2,"position","relative",3,"click"],["mat-dialog-actions","",1,"form-header-container",3,"ngClass"],[1,"multi-item-edit-form-header",3,"formId","formsAreValid","allControlsAreDisabled","isParentDialog","publishMode","closeDialog","setPublishMode"],[2,"position","relative"],["mat-dialog-content","",1,"u-hide-scrollbar",3,"ngClass"],[1,"mdc-layout-grid"],[1,"mdc-layout-grid__inner"],[1,"mdc-layout-grid__cell--span-12"],["slideable",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"c-multi-item-dialog__save-container"],[1,"c-multi-item-dialog__save-button"],["mat-fab","",1,"mat-elevation-z24",3,"matTooltip","ngClass","click"],["mat-dialog-actions","",3,"debugInfoOpened",4,"ngIf"],[3,"item","formId","itemFormValueChange"],["mat-dialog-actions","",3,"debugInfoOpened"]],template:function(e,t){if(1&e&&(k.Rb(0,"router-outlet"),k.Oc(1,wc,25,39,"div",0),k.jc(2,"async")),2&e){var n,i=(null==(n=k.kc(2,1,t.items$))?null:n.length)>0;k.Bb(1),k.oc("ngIf",i)}},directives:[Ur.e,X.m,wt.c,X.k,Z.a,sc,wt.e,X.l,It.a,Y.a,J.a,Er,fc],pipes:[X.b,ne.d],styles:["@-webkit-keyframes move-next{0%{transform:translateX(0)}49%{transform:translateX(-800px);-webkit-animation-timing-function:step-end;animation-timing-function:step-end}50%{transform:translate(800px);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}to{transform:translateX(0)}}@keyframes move-next{0%{transform:translateX(0)}49%{transform:translateX(-800px);-webkit-animation-timing-function:step-end;animation-timing-function:step-end}50%{transform:translate(800px);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}to{transform:translateX(0)}}@-webkit-keyframes move-previous{0%{transform:translateX(0)}49%{transform:translateX(800px);-webkit-animation-timing-function:step-end;animation-timing-function:step-end}50%{transform:translate(-800px);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}to{transform:translateX(0)}}@keyframes move-previous{0%{transform:translateX(0)}49%{transform:translateX(800px);-webkit-animation-timing-function:step-end;animation-timing-function:step-end}50%{transform:translate(-800px);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}to{transform:translateX(0)}}.next[_ngcontent-%COMP%]{-webkit-animation:move-next .2s ease-in;animation:move-next .2s ease-in}.previous[_ngcontent-%COMP%]{-webkit-animation:move-previous .2s ease-in;animation:move-previous .2s ease-in}.multi-item-edit-form-header[_ngcontent-%COMP%]{width:100%}.mat-dialog-content[_ngcontent-%COMP%]{margin:0;padding:0;max-height:calc(100vh - 100px)}@media (max-width:600px){.mat-dialog-content[_ngcontent-%COMP%]{max-height:calc(100vh - 52px)}}.mat-dialog-content.hide-header-height-fix[_ngcontent-%COMP%]{max-height:calc(100vh - 48px)!important}@media (max-width:600px){.mat-dialog-content.hide-header-height-fix[_ngcontent-%COMP%]{max-height:100vh!important}}.mat-dialog-content.debug-enabled[_ngcontent-%COMP%]{max-height:calc(100vh - 152px)}@media (max-width:600px){.mat-dialog-content.debug-enabled[_ngcontent-%COMP%]{max-height:calc(100vh - 104px)}}.mat-dialog-content.debug-enabled.hide-header-height-fix[_ngcontent-%COMP%]{max-height:calc(100vh - 100px)!important}@media (max-width:600px){.mat-dialog-content.debug-enabled.hide-header-height-fix[_ngcontent-%COMP%]{max-height:calc(100vh - 52px)!important}}.mat-dialog-content.debug-enabled.debug-info-is-open[_ngcontent-%COMP%]{max-height:calc(100vh - 468px)}@media (max-width:600px){.mat-dialog-content.debug-enabled.debug-info-is-open[_ngcontent-%COMP%]{max-height:calc(100vh - 420px)}}.mat-dialog-content.debug-enabled.debug-info-is-open.hide-header-height-fix[_ngcontent-%COMP%]{max-height:calc(100vh - 416px)!important}@media (max-width:600px){.mat-dialog-content.debug-enabled.debug-info-is-open.hide-header-height-fix[_ngcontent-%COMP%]{max-height:calc(100vh - 368px)!important}}.mat-dialog-actions[_ngcontent-%COMP%]{padding:0;margin-bottom:0;z-index:1}.c-multi-item-dialog__save-container[_ngcontent-%COMP%]{z-index:1;position:absolute;bottom:14px;right:24px}@media (max-width:600px){.c-multi-item-dialog__save-container[_ngcontent-%COMP%]{bottom:4px}}.c-multi-item-dialog__save-button[_ngcontent-%COMP%]   .mat-fab[_ngcontent-%COMP%]{border-radius:16px 0;overflow:hidden}.c-multi-item-dialog__save-button[_ngcontent-%COMP%]   .mat-fab[_ngcontent-%COMP%]    .mat-button-wrapper{padding:0;font-size:14px;height:20px;line-height:20px}.c-multi-item-dialog__save-button[_ngcontent-%COMP%]   .mat-fab[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;line-height:20px}.c-multi-item-dialog__save-button[_ngcontent-%COMP%]   .mat-fab--compact[_ngcontent-%COMP%]{height:48px;width:48px;transition:width 1s}@media (max-width:600px){.c-multi-item-dialog__save-button[_ngcontent-%COMP%]   .mat-fab--compact[_ngcontent-%COMP%]{height:42px;width:42px}}.c-multi-item-dialog__save-button[_ngcontent-%COMP%]   .mat-fab--extended[_ngcontent-%COMP%]{height:48px;width:200px;transition:width 1s}@media (max-width:600px){.c-multi-item-dialog__save-button[_ngcontent-%COMP%]   .mat-fab--extended[_ngcontent-%COMP%]{height:42px;width:170px}}.c-multi-item-dialog__save-button[_ngcontent-%COMP%]   .mat-fab--disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.26);background-color:rgba(29,39,61,.12)}.mdc-layout-grid[_ngcontent-%COMP%]{padding:16px}@media (max-width:600px){.mdc-layout-grid[_ngcontent-%COMP%]{padding:8px 0 0}}"]}),e}()},lnqP:function(e,t,n){"use strict";var i=n("gFym"),o=n("SEb4");t.a=function(e,t,n){var a=t(e);return Object(o.a)(e)?a:Object(i.a)(a,n(e))}},mY74:function(e,t,n){"use strict";var i=n("fw2E");t.a=i.a.Uint8Array},qd5q:function(e,t,n){"use strict";var i=n("NUo7"),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols;t.a=a?function(e){return null==e?[]:(e=Object(e),function(t,n){for(var i=-1,a=null==t?0:t.length,r=0,c=[];++i<a;){var s=t[i];o.call(e,s)&&(c[r++]=s)}return c}(a(e)))}:i.a},qzOT:function(e,t){var n;!function(e){!function(t){var n="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),i=o(e);function o(e,t){return function(n,i){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:i}),t&&t(n,i)}}void 0===n.Reflect?n.Reflect=e:i=o(n.Reflect,i),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,i=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",a="function"==typeof Object.create,r={__proto__:[]}instanceof Array,c=!a&&!r,s={create:a?function(){return j(Object.create(null))}:r?function(){return j({__proto__:null})}:function(){return j({})},has:c?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:c?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},l=Object.getPrototypeOf(Function),d="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,u=d||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var i=this._keys.length,o=n+1;o<i;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,i)},t.prototype.values=function(){return new n(this._keys,this._values,a)},t.prototype.entries=function(){return new n(this._keys,this._values,r)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function i(e,t){return e}function a(e,t){return t}function r(e,t){return[e,t]}}():Map,p=d||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new u}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}():Set,f=new(d||"function"!=typeof WeakMap?function(){var e=s.create(),n=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&s.has(t,this._key)},e.prototype.get=function(e){var t=o(e,!1);return void 0!==t?s.get(t,this._key):void 0},e.prototype.set=function(e,t){return o(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var t;do{t="@@WeakMap@@"+r()}while(s.has(e,t));return e[t]=!0,t}function o(e,i){if(!t.call(e,n)){if(!i)return;Object.defineProperty(e,n,{value:s.create()})}return e[n]}function a(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function r(){var e="function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(16)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(16)):a(new Uint8Array(16),16):a(new Array(16),16);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var t="",n=0;n<16;++n){var i=e[n];4!==n&&6!==n&&8!==n||(t+="-"),i<16&&(t+="0"),t+=i.toString(16).toLowerCase()}return t}}():WeakMap);function g(e,t,n){var i=f.get(e);if(w(i)){if(!n)return;i=new u,f.set(e,i)}var o=i.get(t);if(w(o)){if(!n)return;o=new u,i.set(t,o)}return o}function b(e,t,n){var i=g(t,n,!1);return!w(i)&&!!i.has(e)}function h(e,t,n){var i=g(t,n,!1);if(!w(i))return i.get(e)}function m(e,t,n,i){g(n,i,!0).set(e,t)}function v(e,t){var n=[],i=g(e,t,!1);if(w(i))return n;for(var a=function(e){var t=M(e,o);if(!k(t))throw new TypeError;var n=t.call(e);if(!_(n))throw new TypeError;return n}(i.keys()),r=0;;){var c=S(a);if(!c)return n.length=r,n;var s=c.value;try{n[r]=s}catch(l){try{T(a)}finally{throw l}}r++}}function y(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function w(e){return void 0===e}function C(e){return null===e}function _(e){return"object"==typeof e?null!==e:"function"==typeof e}function O(e){var t=function(e,t){switch(y(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=M(e,i);if(void 0!==n){var o=n.call(e,"string");if(_(o))throw new TypeError;return o}return function(e,t){var n,i,o=e.toString;if(k(o)&&!_(i=o.call(e)))return i;if(k(n=e.valueOf)&&!_(i=n.call(e)))return i;throw new TypeError}(e)}(e);return"symbol"==typeof t?t:function(e){return""+e}(t)}function x(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function k(e){return"function"==typeof e}function I(e){return"function"==typeof e}function M(e,t){var n=e[t];if(null!=n){if(!k(n))throw new TypeError;return n}}function S(e){var t=e.next();return!t.done&&t}function T(e){var t=e.return;t&&t.call(e)}function P(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===l)return t;if(t!==l)return t;var n=e.prototype,i=n&&Object.getPrototypeOf(n);if(null==i||i===Object.prototype)return t;var o=i.constructor;return"function"!=typeof o?t:o===e?t:o}function j(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,n,i){if(w(n)){if(!x(e))throw new TypeError;if(!I(t))throw new TypeError;return function(e,t){for(var n=e.length-1;n>=0;--n){var i=(0,e[n])(t);if(!w(i)&&!C(i)){if(!I(i))throw new TypeError;t=i}}return t}(e,t)}if(!x(e))throw new TypeError;if(!_(t))throw new TypeError;if(!_(i)&&!w(i)&&!C(i))throw new TypeError;return C(i)&&(i=void 0),function(e,t,n,i){for(var o=e.length-1;o>=0;--o){var a=(0,e[o])(t,n,i);if(!w(a)&&!C(a)){if(!_(a))throw new TypeError;i=a}}return i}(e,t,n=O(n),i)})),e("metadata",(function(e,t){return function(n,i){if(!_(n))throw new TypeError;if(!w(i)&&!function(e){switch(y(e)){case 3:case 4:return!0;default:return!1}}(i))throw new TypeError;m(e,t,n,i)}})),e("defineMetadata",(function(e,t,n,i){if(!_(n))throw new TypeError;return w(i)||(i=O(i)),m(e,t,n,i)})),e("hasMetadata",(function(e,t,n){if(!_(t))throw new TypeError;return w(n)||(n=O(n)),function e(t,n,i){if(b(t,n,i))return!0;var o=P(n);return!C(o)&&e(t,o,i)}(e,t,n)})),e("hasOwnMetadata",(function(e,t,n){if(!_(t))throw new TypeError;return w(n)||(n=O(n)),b(e,t,n)})),e("getMetadata",(function(e,t,n){if(!_(t))throw new TypeError;return w(n)||(n=O(n)),function e(t,n,i){if(b(t,n,i))return h(t,n,i);var o=P(n);return C(o)?void 0:e(t,o,i)}(e,t,n)})),e("getOwnMetadata",(function(e,t,n){if(!_(t))throw new TypeError;return w(n)||(n=O(n)),h(e,t,n)})),e("getMetadataKeys",(function(e,t){if(!_(e))throw new TypeError;return w(t)||(t=O(t)),function e(t,n){var i=v(t,n),o=P(t);if(null===o)return i;var a=e(o,n);if(a.length<=0)return i;if(i.length<=0)return a;for(var r=new p,c=[],s=0,l=i;s<l.length;s++)r.has(f=l[s])||(r.add(f),c.push(f));for(var d=0,u=a;d<u.length;d++){var f;r.has(f=u[d])||(r.add(f),c.push(f))}return c}(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!_(e))throw new TypeError;return w(t)||(t=O(t)),v(e,t)})),e("deleteMetadata",(function(e,t,n){if(!_(t))throw new TypeError;w(n)||(n=O(n));var i=g(t,n,!1);if(w(i))return!1;if(!i.delete(e))return!1;if(i.size>0)return!0;var o=f.get(t);return o.delete(n),o.size>0||(f.delete(t),!0)}))}(i)}()}(n||(n={}))}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.04.01/ng-edit/multi-item-edit-form-component.c576bc37be6434d61522.js.map