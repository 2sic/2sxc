"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts"],{1205:(m,a,s)=>{s.r(a),s.d(a,{AddAppFromFolderComponent:()=>I});var r=s(253),g=s(4874),h=s(2673),u=s(3158),f=s(745),A=s(1203),C=s(4153),x=s(5446),e=s(3184),v=s(5590),F=s(6190);let b=(()=>{class t{agInit(n){this.name=n.value,this.tooltip=n.tooltipGetter(n.data)}refresh(n){return!0}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-app-name-show"]],decls:5,vars:2,consts:[[1,"name-box"],[1,"info-icon",3,"tippy"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"mat-icon",1),e._uU(4,"info"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(o.name),e.xp6(1),e.Q6J("tippy",o.tooltip))},directives:[v.Hw,F.$],styles:[".name-box[_ngcontent-%COMP%]{display:flex;align-items:center}.info-icon[_ngcontent-%COMP%]{margin-left:5px;margin-bottom:10px}"]}),t})(),y=(()=>{class t{agInit(n){this.params=n}refresh(n){return!0}onChange(n){this.params.onChange(this.params.data,n.currentTarget.checked)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-checkbox-cell"]],decls:2,vars:1,consts:[[1,"checkbox-box"],["type","checkbox",1,"checkbox-input",3,"checked","change"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"input",1),e.NdJ("change",function(l){return o.onChange(l)}),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("checked",o.params.value))},styles:[".checkbox-box[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.checkbox-input[_ngcontent-%COMP%]{height:15px;width:15px}"]}),t})();var c=s(5758),O=s(2528),d=s(6362),T=s(1350),Z=s(7317);function w(t,i){1&t&&(e.TgZ(0,"p",3),e._uU(1," No apps found which are not already installed. "),e.qZA())}function k(t,i){if(1&t&&(e.TgZ(0,"div",9),e._UZ(1,"ag-grid-angular",10),e.qZA()),2&t){const n=e.oxw().ngIf,o=e.oxw();e.xp6(1),e.Q6J("rowData",n.pendingApps)("gridOptions",o.gridOptions)}}function N(t,i){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2),e._uU(3,"Add App from Folder BETA"),e.qZA()(),e.TgZ(4,"p",3),e._uU(5," Select an app from the apps-folder which has been copied there (or git-cloned) but not installed yet. "),e.qZA(),e.YNc(6,w,2,0,"p",4),e.YNc(7,k,2,2,"div",5),e.TgZ(8,"div",6)(9,"button",7),e.NdJ("click",function(){return e.CHM(n),e.oxw().closeDialog()}),e._uU(10," Cancel "),e.qZA(),e.TgZ(11,"button",8),e.NdJ("click",function(){return e.CHM(n),e.oxw().install()}),e._uU(12," Install "),e.qZA()(),e.BQk()}if(2&t){const n=i.ngIf,o=e.oxw();e.xp6(6),e.Q6J("ngIf",0==(null==n.pendingApps?null:n.pendingApps.length)),e.xp6(1),e.Q6J("ngIf",(null==n.pendingApps?null:n.pendingApps.length)>0),e.xp6(4),e.Q6J("disabled",0===o.pendingApps.length)}}const S=function(t){return{pendingApps:t}};let I=(()=>{class t{constructor(n,o,p){this.dialogRef=n,this.appsListService=o,this.snackBar=p,this.hostClass="dialog-component",this.gridOptions=this.buildGridOptions(),this.refreshApps$=new r.x,this.pendingApps=[]}ngOnInit(){this.pendingApps$=this.refreshApps$.pipe((0,g.O)(void 0),(0,h.w)(()=>this.appsListService.getPendingApps().pipe((0,u.K)(()=>(0,f.of)(void 0)))),(0,A.B)())}ngOnDestroy(){this.refreshApps$.complete()}closeDialog(){this.dialogRef.close()}onChange(n,o){o?this.pendingApps.push(n):this.pendingApps.splice(this.pendingApps.indexOf(n),1)}install(){this.appsListService.installPendingApps(this.pendingApps).subscribe({error:()=>{this.snackBar.open("Failed to install app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.snackBar.open("Installed app",void 0,{duration:2e3}),this.closeDialog()}})}buildGridOptions(){return Object.assign(Object.assign({},C.f),{columnDefs:[{field:"",width:40,cellClass:"no-outline",sortable:!0,cellRenderer:y,cellRendererParams:()=>({onChange:(p,l)=>this.onChange(p,l)})},{field:"Name",flex:1,cellClass:"no-outline",sortable:!0,sort:"asc",filter:"agTextColumnFilter",cellRenderer:b,cellRendererParams:{tooltipGetter:p=>`Server folder: ${p.ServerFolder}\nFolder: ${p.Folder}\nVersion: ${p.Version}\nDescription: ${p.Description}`}}]})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(c.so),e.Y36(x.A),e.Y36(O.ux))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-add-app-from-folder"]],hostVars:1,hostBindings:function(n,o){2&n&&e.Ikx("className",o.hostClass)},decls:2,vars:5,consts:[[4,"ngIf"],["mat-dialog-title",""],[1,"dialog-title-box"],[1,"dialog-description"],["class","dialog-description",4,"ngIf"],["class","grid-wrapper",4,"ngIf"],[1,"dialog-component-actions"],["type","button","mat-raised-button","",3,"click"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"],[1,"grid-wrapper"],[1,"ag-theme-material",2,"height","200px","width","auto",3,"rowData","gridOptions"]],template:function(n,o){1&n&&(e.YNc(0,N,13,3,"ng-container",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.VKq(3,S,e.lcZ(1,1,o.pendingApps$)))},directives:[d.O5,c.uh,T.N8,Z.lW],pipes:[d.Ov],styles:[""]}),t})()},4153:(m,a,s)=>{s.d(a,{f:()=>r});const r={accentedSort:!0,animateRows:!0,enableCellTextSelection:!0,headerHeight:32,suppressScrollOnNewData:!0,valueCache:!0,defaultColDef:{filterParams:{newRowsAction:"keep"}},tooltipShowDelay:0,tooltipHideDelay:1e5,suppressMovableColumns:!0}}}]);
//# sourceMappingURL=https://sources.2sxc.org/14.12.00/ng-edit/projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts.72ae51dd6a453dff.js.map