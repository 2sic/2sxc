/*! ToSic_ToSxc 2015-10-27 */

$2sxc.ng={appAttribute:"sxc-app",ngAttrPrefixes:["ng-","data-ng-","ng:","x-ng-"],iidAttrNames:["app-instanceid","data-instanceid","id"],ngAttrDependencies:"dependencies",bootstrap:function(a,b,c,d,e){c=c||$2sxc.ng.findInstanceId(a)||$2sxc.urlParams.get("mid");var f=$.ServicesFramework(c);angular.module("confSxcApp"+c,[]).constant("AppInstanceId",c).constant("AppServiceFramework",f).constant("HttpHeaders",{ModuleId:c,TabId:f.getTabId(),RequestVerificationToken:f.getAntiForgeryValue()});var g=["confSxcApp"+c,"2sxc4ng"].concat(d||[b]);angular.element(document).ready(function(){try{angular.bootstrap(a,g,e)}catch(b){console&&console.error&&console.error(b)}})},findInstanceId:function(a){for(var b,c=angular.element(a),d=0;d<$2sxc.ng.iidAttrNames.length;d++)b=c.attr($2sxc.ng.iidAttrNames[d]);if(b){var e=parseInt(b.toString().replace(/\D/g,""));if(!e)throw"iid or instanceId (the DNN moduleid) not supplied and automatic lookup failed. Please set app-tag attribute iid or give id in bootstrap call";return e}},bootstrapAll:function(a){a=a||document;var b=a.querySelectorAll("["+$2sxc.ng.appAttribute+"]");angular.forEach(b,function(a){var b=a.getAttribute($2sxc.ng.appAttribute),c={strictDi:null!==$2sxc.ng.getNgAttribute(a,"strict-di")},d=$2sxc.ng.getNgAttribute(a,$2sxc.ng.ngAttrDependencies);d&&(d=d.split(",")),$2sxc.ng.bootstrap(a,b,null,d,c)})},autoRunBootstrap:function(){angular&&angular.element(document).ready(function(){$2sxc.ng.bootstrapAll()})},getNgAttribute:function(a,b){var c,d,e=$2sxc.ng.ngAttrPrefixes.length;for(a=angular.element(a),d=0;e>d;++d)if(c=$2sxc.ng.ngAttrPrefixes[d]+b,"string"==typeof(c=a.attr(c)))return c;return null}},$2sxc.ng.autoRunBootstrap(),angular.module("2sxc4ng",["ng"]).config(["$httpProvider","HttpHeaders",function(a,b){angular.extend(a.defaults.headers.common,b),a.interceptors.push(["$q","sxc",function(a,b){return{request:function(a){return a.url=b.resolveServiceUrl(a.url),a},responseError:function(c){return b.showDetailedHttpError(c),a.reject(c)}}}])}]).factory("$2sxc",function(){if(!$2sxc)throw"the Angular service 'sxc' can't find the global $2sxc controller";return $2sxc}).factory("sxc",["AppInstanceId","$2sxc",function(a,b){window.console&&console.log("creating sxc service for id: "+a);var c=b(a);return c}]).factory("content",["$http",function(a){return function(b){var c={};return c.contentType=b,c.root="app-content/"+b,c.get=c.read=function(b){return a.get(c.root+(b?"/"+b:""))},c.create=function(b){return a.post(c.root,b)},c.update=c.patch=function(b,d){var e=d||b.Id||b.id;return a.post(c.root+"/"+e,b)},c["delete"]=function(b){return a["delete"](c.root+"/"+b)},c}}]).factory("query",["$http",function(a){return function(b){var c={};return c.root="app-query/"+b,c.get=function(b){return a.get(c.root,b)},c}}]);
//# sourceMappingURL=2sxc4ng.min.js.map