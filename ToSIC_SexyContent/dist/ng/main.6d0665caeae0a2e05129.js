(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,n,e){t.exports=e("zUnb")},"0YQa":function(t,n,e){"use strict";e.d(n,"historyApiRoot",(function(){return c})),e("aSQ9"),e("CsLe");var c="eav/entities"},CsLe:function(t,n){},aSQ9:function(t,n){},crnd:function(t,n){function e(t){return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}))}e.keys=function(){return[]},e.resolve=e,t.exports=e,e.id="crnd"},zUnb:function(t,n,e){"use strict";e.r(n);var c=e("JX91"),i=e("8Y7J"),o=e("wAiw"),a=e("XNiG"),r=function(){function t(t,n){this.name="",this.autoDump=!1,this.logs=new Array,this.loggers=new Object,this.name=t,this.parent=n}return t.prototype.add=function(n){for(var e=[],c=1;c<arguments.length;c++)e[c-1]=arguments[c];this.logs.push(n),this.name&&(n=this.name+":"+n),this.parent&&this.parent.logs.push(n),(this.autoDump||t.forceLogToConsole)&&(arguments[0]="quick-edit: "+n,console.log.apply(null,arguments))},t.prototype.subLog=function(n,e){var c=new t(n,this);return this.loggers[n]=c,c.autoDump="boolean"==typeof e?e:this.autoDump,c},t.prototype.dump=function(){this.add("dumping to console"),console.log("Log dump for '"+this.name+"'",this)},t.configureRuntimeLogging=function(n){t.forceLogToConsole=n},t.forceLogToConsole=!1,t}(),s=new r;window.logger=s;var p=s.subLog("boot-controller"),l=function(){function t(){this._reboot=new a.a,this.rebootRequest$=this._reboot.asObservable()}return t.getRebootController=function(){return p.add("getRebootController()"),t.instance||(t.instance=new t),t.instance},t.prototype.reboot=function(){p.add("restarting..."),this._reboot.next(!0)},t}(),u=e("k5Gf"),d=e("TSSN"),g=e("cUpR"),f=e("s7LF"),b=e("Y0Uo"),h=e("lJxs"),m=e("jtHE"),O=function(){function t(){}return t.appId=function(){return P("appId")},t.apps=function(){return P("apps")},t.item=function(){return JSON.parse(C("items"))[0]},t.moduleId=function(){return Number(C("mid"))},t.cbId=function(){return Number(C("cbid"))},t.dialog=function(){return C("dialog")},t.getSxcInstance=function(){return $2sxc(t.moduleId(),t.cbId())},t}();function C(t){return $2sxc.urlParams.require(t)}function P(t){return $2sxc.urlParams.get(t)}var v=e("0YQa"),_=e("IheW"),M=function(){function t(t){this.http=t,this.versionsSubject=new m.a(1),this.versions=this.versionsSubject.asObservable(),this.errorSubject=new m.a(1),this.error=this.errorSubject.asObservable(),this.loadVersions()}return t.prototype.restore=function(t){var n=O.appId(),e=O.item();return this.http.post(v.historyApiRoot+"/restore?appId="+n+"&changeId="+t,e)},t.prototype.loadVersions=function(){var t=this,n=O.appId(),e=O.item();this.http.post(v.historyApiRoot+"/history?appId="+n,e).pipe(Object(h.a)((function(t){return t.map((function(n){return{ChangeSetId:n.ChangeSetId,HistoryId:n.HistoryId,Data:(p=n,l=y(t,n),u=JSON.parse(p.Json).Entity.Attributes,Object.entries(u).reduce((function(t,n){return Array.prototype.concat(t,Object.entries(n[1]).map((function(t){var e=t[0],c=t[1];return{key:e,value:Object.entries(c),type:n[0],hasChanged:l&&JSON.stringify(l[n[0]][e])!==JSON.stringify(c)}})))}),[])),TimeStamp:(e=n.TimeStamp,c=new Date(e),i=c.getFullYear(),o=c.getUTCMonth()+1,a=c.getDate(),r=c.getHours(),s=c.getMinutes(),i+"-"+(o<10?"0":"")+o+"-"+(a<10?"0":"")+a+" "+(r<10?"0":"")+r+":"+(s<10?"0":"")+s),User:n.User,VersionNumber:n.VersionNumber};var e,c,i,o,a,r,s,p,l,u}))}))).subscribe((function(n){return t.versionsSubject.next(n)}),(function(){t.errorSubject.next("Could not load versions.")}))},t.\u0275fac=function(n){return new(n||t)(i.wc(_.b))},t.\u0275prov=i.lc({token:t,factory:t.\u0275fac}),t}();function y(t,n){var e=t.find((function(t){return t.VersionNumber===n.VersionNumber-1}));return e&&JSON.parse(e.Json).Entity.Attributes}var w=e("l0rg"),x=e("Dxy4"),T=e("iELJ"),I=e("Tj54"),$=e("SVse"),j=e("o4Yh"),k=e("VDRc");function A(t,n){1&t&&(i.sc(0,"div",8),i.bd(1),i.Fc(2,"translate"),i.rc()),2&t&&(i.fc(1),i.cd(i.Gc(2,1,"ItemHistory.NoHistory")))}function S(t,n){1&t&&(i.sc(0,"div",8),i.bd(1),i.Fc(2,"translate"),i.rc()),2&t&&(i.fc(1),i.cd(i.Gc(2,1,"ItemHistory.NoHistory")))}function L(t,n){if(1&t&&(i.sc(0,"div",24),i.bd(1),i.rc()),2&t){var e=i.Ec().$implicit;i.fc(1),i.cd(e[0])}}function F(t,n){if(1&t&&(i.sc(0,"div",21),i.Zc(1,L,2,1,"div",22),i.qc(2,"div",23),i.rc()),2&t){var e=n.$implicit,c=i.Ec().$implicit;i.fc(1),i.Kc("ngIf",c.value.length>0),i.fc(1),i.Kc("innerHTML",e[1],i.Qc)}}function E(t,n){if(1&t&&(i.sc(0,"i"),i.bd(1),i.rc()),2&t){var e=n.$implicit;i.fc(1),i.dd("[",e[0],"]\xa0")}}function N(t,n){if(1&t&&(i.sc(0,"div",20),i.Zc(1,E,2,1,"i",25),i.rc()),2&t){var e=i.Ec().$implicit;i.fc(1),i.Kc("ngForOf",e.value)}}function K(t,n){if(1&t&&(i.sc(0,"div",15),i.sc(1,"div",16),i.bd(2),i.rc(),i.sc(3,"div",17),i.Ac("click",(function(){var t=n.$implicit;return t.expand=!t.expand})),i.Zc(4,F,3,2,"div",18),i.rc(),i.Zc(5,N,2,1,"div",19),i.sc(6,"i",20),i.bd(7),i.rc(),i.rc()),2&t){var e=n.$implicit;i.hc("changed",e.hasChanged),i.fc(2),i.dd("",e.key,":"),i.fc(1),i.hc("expand",e.expand),i.fc(1),i.Kc("ngForOf",e.value),i.fc(1),i.Kc("ngIf",e.value.length>1),i.fc(2),i.dd("[",e.type,"]")}}function Z(t,n){if(1&t){var e=i.tc();i.sc(0,"div",12),i.Zc(1,K,8,8,"div",13),i.rc(),i.sc(2,"mat-action-row"),i.sc(3,"button",14),i.Ac("click",(function(){i.Pc(e);var t=i.Ec().$implicit;return i.Ec().restoreLive(t)})),i.bd(4),i.Fc(5,"translate"),i.rc(),i.rc()}if(2&t){var c=i.Ec().$implicit;i.fc(1),i.Kc("ngForOf",c.Data),i.fc(3),i.cd(i.Gc(5,2,"ItemHistory.Buttons.RestoreLive"))}}var G=function(t){return{version:t}};function D(t,n){if(1&t&&(i.sc(0,"div",9),i.sc(1,"mat-expansion-panel"),i.sc(2,"mat-expansion-panel-header"),i.sc(3,"mat-panel-title",10),i.bd(4),i.Fc(5,"translate"),i.rc(),i.sc(6,"mat-panel-description"),i.bd(7),i.rc(),i.rc(),i.Zc(8,Z,6,4,"ng-template",11),i.rc(),i.rc()),2&t){var e=n.$implicit;i.fc(4),i.cd(i.Hc(5,2,"ItemHistory.Version",i.Lc(5,G,e.VersionNumber))),i.fc(3),i.cd(e.TimeStamp)}}var R,V=function(){function t(t){this.sxcVersion=t}return t.prototype.restoreLive=function(t){this.sxcVersion.restore(t.ChangeSetId).subscribe((function(t){return window.parent.location.reload()}))},t.\u0275fac=function(n){return new(n||t)(i.pc(M))},t.\u0275cmp=i.jc({type:t,selectors:[["app-history"]],decls:15,vars:12,consts:[["color","primary"],[1,"title"],[1,"spacer"],["mat-dialog-close","","mat-icon-button",""],[1,"example-icon"],[1,"table"],["class","no-items",4,"ngIf"],["class","record",4,"ngFor","ngForOf"],[1,"no-items"],[1,"record"],["fxFlex","108px"],["matExpansionPanelContent",""],[1,"detail"],["fxLayout","row",3,"changed",4,"ngFor","ngForOf"],["mat-button","",3,"click"],["fxLayout","row"],["fxFlex","160px",1,"label"],["fxFlex","","title","expand content",1,"value",3,"click"],["class","lang-wrapper",4,"ngFor","ngForOf"],["flex","nogrow",4,"ngIf"],["flex","nogrow"],[1,"lang-wrapper"],["class","lang",4,"ngIf"],[3,"innerHTML"],[1,"lang"],[4,"ngFor","ngForOf"]],template:function(t,n){if(1&t&&(i.sc(0,"mat-toolbar",0),i.sc(1,"span",1),i.bd(2),i.Fc(3,"translate"),i.rc(),i.qc(4,"span",2),i.sc(5,"button",3),i.sc(6,"mat-icon",4),i.bd(7,"close"),i.rc(),i.rc(),i.rc(),i.sc(8,"div",5),i.Zc(9,A,3,3,"div",6),i.Fc(10,"async"),i.Zc(11,S,3,3,"div",6),i.Fc(12,"async"),i.Zc(13,D,9,7,"div",7),i.Fc(14,"async"),i.rc()),2&t){var e,c=0===(null==(e=i.Gc(12,8,n.sxcVersion.versions))?null:e.length);i.fc(2),i.cd(i.Gc(3,4,"ItemHistory.Title")),i.fc(7),i.Kc("ngIf",i.Gc(10,6,n.sxcVersion.error)),i.fc(2),i.Kc("ngIf",c),i.fc(2),i.Kc("ngForOf",i.Gc(14,10,n.sxcVersion.versions))}},directives:[w.a,x.a,T.b,I.a,$.g,$.f,j.b,j.f,j.g,k.a,j.e,j.d,j.c,k.c],pipes:[d.c,$.a],styles:["[_nghost-%COMP%]{width:1000px;max-width:100%;display:block}[_nghost-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{background:transparent;color:#000}[_nghost-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1 1 auto}[_nghost-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:300}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]{padding:8px}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .no-items[_ngcontent-%COMP%]{color:rgba(0,0,0,.6);text-align:center;margin:16px}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{line-height:48px;font-weight:400;padding:0 22px;color:rgba(0,0,0,.6)}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .record[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1),margin .28s ease}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .record[_ngcontent-%COMP%]   mat-expansion-panel.mat-expanded[_ngcontent-%COMP%]{margin:16px 0!important}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .record[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{line-height:28px;box-sizing:border-box}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .record[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.1);margin-bottom:4px;padding:4px 0}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .record[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%] > div.changed[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], [_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .record[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%] > div.changed[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#2196f3}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .record[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-of-type{border-bottom:none}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .record[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{vertical-align:top;color:rgba(0,0,0,.6);height:28px}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .record[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{cursor:pointer;vertical-align:top;height:28px;overflow:hidden;display:inline-block;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .record[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]   .lang[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .record[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .value.expand[_ngcontent-%COMP%]{height:auto}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .record[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .value.expand[_ngcontent-%COMP%]   .lang-wrapper[_ngcontent-%COMP%]{position:relative;padding:8px 0}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .record[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .value.expand[_ngcontent-%COMP%]   .lang-wrapper[_ngcontent-%COMP%]   .lang[_ngcontent-%COMP%]{display:block;position:absolute;font-size:10pt;left:0;top:0;color:rgba(0,0,0,.6);line-height:12px;font-style:italic}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .record[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]     *{margin:0}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .record[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{vertical-align:top;height:28px;color:rgba(0,0,0,.6);text-align:right;font-size:8pt}[_nghost-%COMP%]   .table[_ngcontent-%COMP%]   .record[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-action-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px;text-transform:uppercase}[_nghost-%COMP%]   footer[_ngcontent-%COMP%]{padding:16px 22px}[_nghost-%COMP%]   footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}"]}),t}(),q=["en","de","es","fr","it","uk"],z=e("itXk"),H=e("VRyK"),U=e("PqYM"),B=e("pLZG"),J=e("vqkR"),Y=e("2Vo4"),Q=e("HDdC"),X=(R=function(t,n){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}R(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),W=function(t){function n(){return t.call(this)||this}return X(n,t),n.create=function(t){var n=new Y.a(t),e=n.asObservable();return e.initialValue=t,e.subject=n,e.reset=function(){e.subject.next(e.initialValue)},e.isInitial=function(){return e.subject.value===e.initialValue},e.next=function(t){return e.subject.next(t)},e},n}(Q.a),tt=e("w1tV"),nt=function(){return function(t){Object.assign(this,t);try{this.VersionMain=parseInt(this.Version.substr(0,2))}catch(n){}}}(),et=s.subLog("api",!1),ct=[],it=function(){function t(t){this.http=t,this.apps$=W.create(ct),this.contentTypes$=W.create(ct),this.templates$=W.create(ct),this.ready$=new Q.a,this.mustLoadApps=!1,et.add("constructor()"),this.buildObservables(),this.enableLogging()}return t.prototype.buildObservables=function(){var t=this;et.add("buildObservables()"),this.ready$=Object(z.a)(this.apps$,this.contentTypes$,this.templates$,(function(t,n,e){return{apps:t,types:n,templates:e}})).pipe(Object(h.a)((function(n){return!(n.templates===ct||n.types===ct||t.mustLoadApps&&(!n.apps||n.apps===ct))})),Object(c.a)(!1),Object(tt.a)())},t.prototype.saveAppId=function(t,n){if(et.add("saveAppId("+t+", "+n+")"),!this.loadApps)throw new Error("can't save app, as we're not in app-mode");return this.http.get("view/Module/SetAppId?appId="+t).toPromise()},t.prototype.initLoading=function(t){return et.add("initLoading(requireApps: "+t+")"),this.mustLoadApps=t,t&&this.loadApps(),this.reloadAppParts()},t.prototype.reloadAppParts=function(){return Object(z.a)(this.loadTemplates(),this.loadContentTypes())},t.prototype.loadTemplates=function(){var t=this;et.add("loadTemplates()"),this.templates$.reset();var n=this.http.get("view/Module/GetSelectableTemplates").pipe(Object(tt.a)());return n.subscribe((function(n){return t.templates$.next(n||[])})),n},t.prototype.loadContentTypes=function(){var t=this;et.add("loadContentTypes()"),this.contentTypes$.reset();var n=this.http.get("view/Module/GetSelectableContentTypes").pipe(Object(tt.a)());return n.pipe(Object(h.a)((function(t){return(t||[]).map((function(t){return t.Label=t.Metadata&&t.Metadata.Label?t.Metadata.Label:t.Name,t}))}))).subscribe((function(n){return t.contentTypes$.next(n)})),n},t.prototype.loadApps=function(){var t=this,n=!this.apps$.isInitial();if(et.add("loadApps() - skip:"+n),!n){var e=O.apps(),c=this.http.get("view/Module/GetSelectableApps?apps="+e).pipe(Object(tt.a)());return c.subscribe((function(n){return t.apps$.subject.next(n.map((function(t){return new nt(t)})))})),c}},t.prototype.enableLogging=function(){var t=s.subLog("api-streams",!1);this.apps$.subscribe((function(n){return t.add("app$:"+(n&&n.length))})),this.contentTypes$.subscribe((function(n){return t.add("contentTypes$:"+(n&&n.length))})),this.templates$.subscribe((function(n){return t.add("templates$:"+(n&&n.length))})),this.ready$.subscribe((function(n){return t.add("ready$:"+n)}))},t.\u0275fac=function(n){return new(n||t)(i.wc(_.b))},t.\u0275prov=i.lc({token:t,factory:t.\u0275fac}),t}(),ot=e("Kqap"),at=e("Kj3r"),rt=s.subLog("ct-processor",!1),st=function(){function t(t){this.translate=t}return t.prototype.buildList=function(t,n,e,c){rt.add("buildList(...) of content-types to show");var i=this.unhideSelectedType(t,n,c);i=this.addEmptyTypeIfNeeded(i,e);var o=this.hideNecessaryTypes(i);return this.sortTypes(o)},t.prototype.hideNecessaryTypes=function(t){return t.filter((function(t){return!t.IsHidden}))},t.prototype.unhideSelectedType=function(t,n,e){return t.filter((function(t){return(null==e?void 0:e.TemplateId)===t.TemplateId||t.StaticName===(null==n?void 0:n.StaticName)})).forEach((function(t){return t.IsHidden=!1})),t},t.prototype.addEmptyTypeIfNeeded=function(t,n){var e=this.translate&&this.translate.instant("TemplatePicker.LayoutElement")||"_LayoutElement";return n&&n.find((function(t){return""===t.ContentTypeStaticName}))&&(t=t.slice()).push({StaticName:"_LayoutElement",Name:"TemplatePicker.LayoutElement",Thumbnail:null,Label:e,IsHidden:!1}),t},t.prototype.sortTypes=function(t){return t.sort((function(t,n){return(""+t.Label).localeCompare(n.Label)}))},t.findContentTypesById=function(t,n){return rt.add("findContentTypesById(..., "+n),n?t.find((function(t){return t.StaticName===n})):null},t.\u0275fac=function(n){return new(n||t)(i.wc(d.d))},t.\u0275prov=i.lc({token:t,factory:t.\u0275fac}),t}(),pt=s.subLog("TemplateProcessor",!1),lt=function(){function t(){}return t.pickSelected=function(t,n,e,c){return pt.add("pickSelected(selected: "+(t&&t.TemplateId)+", templates: "+n.length+")"),t&&n.find((function(n){return n.TemplateId===t.TemplateId}))?t:(e||c)&&n&&n.length?n[0]:null},t}(),ut=function(){function t(){}return t.prototype.transform=function(t,n){var e=n.contentType?n.contentType.StaticName:void 0,c="_LayoutElement"===e?"":e||"";return t.filter((function(t){return!t.IsHidden})).filter((function(t){return!n.isContent||t.ContentTypeStaticName===c}))},t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=i.oc({name:"templateFilter",type:t,pure:!0}),t}(),dt=s.subLog("state",!1),gt=function(){function t(t,n,e){this.api=t,this.templateFilter=n,this.ctProcessor=e,this.appId$=W.create(null),this.initialTypeId$=W.create(null),this.initialTemplateId$=W.create(null),this.selectedType$=W.create(null),this.selectedTemplate$=W.create(null),this.buildBasicObservables()}return t.prototype.buildBasicObservables=function(){var t=this;this.app$=Object(z.a)(this.api.apps$,this.appId$,(function(t,n){return t.find((function(t){return t.AppId===n}))}));var n=Object(z.a)(this.initialTypeId$,this.api.contentTypes$,(function(t,n){return st.findContentTypesById(n,t)}));this.type$=Object(H.a)(n,this.selectedType$).pipe(Object(c.a)(null),Object(tt.a)()),this.templates$=Object(z.a)(this.api.templates$,this.type$,(function(n,e){return t.findTemplatesForTypeOrAll(n,e)})).pipe(Object(c.a)(new Array));var e=Object(z.a)(this.initialTemplateId$,this.api.templates$,(function(t,n){return n.find((function(n){return n.TemplateId===t}))})).pipe(Object(B.a)((function(t){return null!=t})),Object(c.a)(null),Object(tt.a)()),i=Object(H.a)(e,this.selectedTemplate$.pipe(Object(B.a)((function(t){return null!==t}))));this.template$=Object(z.a)(i,this.templates$,this.type$,this.app$,(function(t,n,e,c){return lt.pickSelected(t,n,e,c)})).pipe(Object(c.a)(null),Object(tt.a)()),this.types$=Object(z.a)(this.api.contentTypes$,this.type$,this.api.templates$,this.template$,(function(n,e,c,i){return t.ctProcessor.buildList(n,e,c,i)}))},t.prototype.init=function(t){this.config=t,dt.add("initializing with config:"+JSON.stringify(t),t);var n=this.app$.pipe(Object(h.a)((function(n){return t.isContent||!!n})),Object(c.a)(t.isContent||!t.appId)),e=this.type$.pipe(Object(h.a)((function(t){return!!t})),Object(ot.a)((function(t,n){return t||n}),!t.contentTypeId)),i=this.template$.pipe(Object(h.a)((function(t){return!!t})),Object(at.a)(100),Object(c.a)(!t.templateId)),o=Object(z.a)(n,i,e).pipe(Object(h.a)((function(t){return t[0]&&t[1]&&t[2]})));return this.initLogging(n,e,i,o),this.activateCurrentApp(t.appId),this.initialTypeId$.next(t.contentTypeId),this.initialTemplateId$.next(t.templateId),o},t.prototype.initLogging=function(t,n,e,c){var i=dt.subLog("stream",!1);this.type$.subscribe((function(t){return i.add("type$ update:'"+(t&&t.Label)+"'",t)})),this.app$.subscribe((function(t){return i.add("app$ update:'"+(t&&t.AppId)+"'",t)})),this.template$.subscribe((function(t){return i.add("template$ update:'"+(t&&t.TemplateId)+"'",t)})),this.templates$.subscribe((function(t){return i.add("templates$ count:'"+(t&&t.length)+"'",t)})),this.types$.subscribe((function(t){return i.add("types$ count:'"+(t&&t.length)+"'",t)})),this.selectedTemplate$.subscribe((function(t){return i.add("selectedTemplate$: "+(t&&t.TemplateId))}));var o=dt.subLog("stream-init",!1);this.initialTypeId$.subscribe((function(t){return o.add("initial TypeId:'"+t+"'",t)})),this.initialTemplateId$.subscribe((function(t){return o.add("initial TemplateId:'"+t+"'",t)})),t.subscribe((function(t){return o.add("init app$",t)})),n.subscribe((function(t){return o.add("init type$",t)})),e.subscribe((function(t){return o.add("init temp$",t)})),c.subscribe((function(t){return o.add("init all$",t)}))},t.prototype.activateCurrentApp=function(t){dt.add("activateApp("+t+")"),this.appId$.next(t)},t.prototype.activateType=function(t){dt.add("activateType("+t.Name+")"),this.selectedType$.next(t)},t.prototype.activateTemplate=function(t){dt.add("activateTemplate("+t.TemplateId+")"),this.selectedTemplate$.next(t)},t.prototype.findTemplatesForTypeOrAll=function(t,n){return this.templateFilter.transform(t,{contentType:n,isContent:this.config.isContent})},t.\u0275fac=function(n){return new(n||t)(i.wc(it),i.wc(ut),i.wc(st))},t.\u0275prov=i.lc({token:t,factory:t.\u0275fac}),t}(),ft=e("BTe0"),bt=e("ura0"),ht=e("M9ds"),mt=e("pu8Q"),Ot=e("eIep"),Ct=e("vkgz"),Pt=e("xgIS"),vt=e("LRne"),_t=function(){function t(t){this.http=t}return t.prototype.installPackages=function(t,n){var e=this;return t.reduce((function(t,c){return t.pipe(Object(Ot.a)((function(){return c.url?(n(c),e.http.get("app-sys/installer/installpackage?packageUrl="+c.url)):Object(vt.a)(!0)})))}),Object(vt.a)(!0))},t.\u0275fac=function(n){return new(n||t)(i.wc(_.b))},t.\u0275prov=i.lc({token:t,factory:t.\u0275fac}),t}(),Mt=function(){function t(t){this.http=t,this.ready$=new Q.a,this.gettingStartedSubject=new a.a,this.gettingStarted$=this.gettingStartedSubject.asObservable(),this.ready$=this.gettingStarted$.pipe(Object(h.a)((function(){return!0})),Object(c.a)(!1)),this.ready$.pipe(Object(Ct.a)((function(t){return s.add("ready getting started:"+t)}))).subscribe()}return t.prototype.loadGettingStarted=function(t){var n=this;this.http.get("view/Module/RemoteInstallDialogUrl?dialog=gettingstarted&isContentApp="+t).subscribe((function(t){return n.gettingStartedSubject.next(t)}))},t.\u0275fac=function(n){return new(n||t)(i.wc(_.b))},t.\u0275prov=i.lc({token:t,factory:t.\u0275fac}),t}();function yt(t,n){if(1&t&&(i.sc(0,"div",2),i.qc(1,"mat-progress-spinner",3),i.sc(2,"span"),i.bd(3),i.rc(),i.rc()),2&t){var e=i.Ec();i.fc(1),i.Kc("mode","indeterminate"),i.fc(2),i.dd("Installing ",null==e.currentPackage?null:e.currentPackage.displayName,"..")}}function wt(t,n){if(1&t&&(i.sc(0,"div"),i.qc(1,"iframe",4),i.rc()),2&t){var e=i.Ec();i.fc(1),i.Kc("src",e.remoteInstallerUrl,i.Rc)}}var xt=function(){function t(t,n,e){var c=this;this.installer=t,this.api=n,this.sanitizer=e,this.remoteInstallerUrl="",this.ready=!1,this.subscriptions=[],this.subscriptions.push(this.api.gettingStarted$.subscribe((function(t){c.remoteInstallerUrl=c.sanitizer.bypassSecurityTrustResourceUrl(t),c.ready=!0}))),window.bootController.rebootRequest$.pipe(Object(at.a)(1e3)).subscribe((function(){return c.destroy()}))}return t.prototype.destroy=function(){this.subscriptions.forEach((function(t){return t.unsubscribe()})),console.log("destroy subs",this.subscriptions)},t.prototype.ngOnInit=function(){var t=this,n=!1;this.api.loadGettingStarted(this.isContentApp),this.subscriptions.push(Object(Pt.a)(window,"message").pipe(Object(B.a)((function(){return!n})),Object(h.a)((function(t){try{return JSON.parse(t.data)}catch(n){return}})),Object(B.a)((function(t){return t&&Number(t.moduleId)===O.moduleId()&&"install"===t.action})),Object(h.a)((function(t){return Object.values(t.packages)})),Object(B.a)((function(t){var n=t.reduce((function(t,n){return t+" - "+n.displayName+"\n"}),"");return confirm("Do you want to install these packages?\n\n"+n+"\nThis takes 5 - 30 seconds per package. Don't reload the page while it's installing.")})),Object(Ot.a)((function(e){return n=!0,t.showProgress=!0,t.installer.installPackages(e,(function(n){return t.currentPackage=n}))})),Object(Ct.a)((function(){t.showProgress=!1,alert("Installation complete \ud83d\udc4d"),window.top.location.reload()}))).subscribe(null,(function(){t.showProgress=!1,alert("An error occurred."),n=!1})))},t.\u0275fac=function(n){return new(n||t)(i.pc(_t),i.pc(Mt),i.pc(g.b))},t.\u0275cmp=i.jc({type:t,selectors:[["app-installer"]],inputs:{isContentApp:"isContentApp"},decls:2,vars:2,consts:[["class","progress",4,"ngIf"],[4,"ngIf"],[1,"progress"],[3,"mode"],["id","frGettingStarted","width","100%","height","300px",1,"fr-getting-started",3,"src"]],template:function(t,n){1&t&&(i.Zc(0,yt,4,2,"div",0),i.Zc(1,wt,2,1,"div",1)),2&t&&(i.Kc("ngIf",n.showProgress),i.fc(1),i.Kc("ngIf",n.ready))},directives:[$.g,mt.a],styles:["[_nghost-%COMP%]   iframe[_ngcontent-%COMP%]{border:none;height:500px}[_nghost-%COMP%]   .progress[_ngcontent-%COMP%]{position:absolute;left:0;top:0;height:100%;width:100%;background:hsla(0,0%,100%,.8);display:flex;justify-content:center;flex-direction:column;text-align:center}[_nghost-%COMP%]   .progress[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{margin:0 auto}[_nghost-%COMP%]   .progress[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:48px}"]}),t}();function Tt(t,n){if(1&t&&(i.sc(0,"div"),i.sc(1,"h4"),i.bd(2,"Debug"),i.rc(),i.sc(3,"ul"),i.sc(4,"li"),i.bd(5),i.rc(),i.sc(6,"li"),i.bd(7),i.Fc(8,"async"),i.rc(),i.sc(9,"li"),i.bd(10),i.rc(),i.sc(11,"li"),i.bd(12),i.rc(),i.sc(13,"li"),i.bd(14),i.rc(),i.rc(),i.rc()),2&t){var e,c=i.Ec();i.fc(5),i.ed("Types: ",null==c.types?null:c.types.length,", current: ",null==c.contentType?null:c.contentType.StaticName,""),i.fc(2),i.ed("Apps: ",null==(e=i.Gc(8,11,c.apps$))?null:e.length,", current: ",null==c.app?null:c.app.AppId," "),i.fc(3),i.ed("Templates: ",null==c.templates?null:c.templates.length,", current: ",null==c.template?null:c.template.TemplateId,""),i.fc(2),i.ed("Config: isContent='",c.isContent,"' Ready: ",c.ready," "),i.fc(2),i.fd("Tab to show: '",c.tabIndex,"' / preventTypeSwitch '",c.preventTypeSwitch,"' / preventAppSwitch '",c.preventAppSwich,"'")}}function It(t,n){if(1&t){var e=i.tc();i.sc(0,"button",14),i.Ac("click",(function(){i.Pc(e);var t=i.Ec();return t.persistTemplate(t.template)})),i.Fc(1,"translate"),i.sc(2,"mat-icon"),i.bd(3,"check"),i.rc(),i.rc()}2&t&&i.gc("title",i.Gc(1,1,"TemplatePicker.Save"))}function $t(t,n){if(1&t){var e=i.tc();i.sc(0,"button",15),i.Ac("click",(function(){return i.Pc(e),i.Ec().cancel()})),i.Fc(1,"translate"),i.sc(2,"mat-icon"),i.bd(3,"close"),i.rc(),i.rc()}if(2&t){var c=i.Ec();i.gc("title",i.Gc(1,1,"TemplatePicker."+(c.isContent?"Cancel":"Close")))}}function jt(t,n){if(1&t&&(i.bd(0),i.Fc(1,"translate"),i.Fc(2,"translate")),2&t){var e=i.Ec();i.dd(" ",e.isContent?(null==e.contentType?null:e.contentType.Name)||i.Gc(1,1,"TemplatePicker.ContentTypePickerDefault"):(null==e.app?null:e.app.Name)||i.Gc(2,3,"TemplatePicker.AppPickerDefault")," ")}}function kt(t,n){if(1&t&&i.qc(0,"img",25),2&t){var e=i.Ec().$implicit;i.gc("src",e.Thumbnail+"?w=176&h=176",i.Sc)}}function At(t,n){1&t&&(i.sc(0,"div",26),i.sc(1,"mat-icon"),i.bd(2,"star"),i.rc(),i.rc())}var St=function(t,n){return{active:t,blocked:n}},Lt=function(t){return{show:t}};function Ft(t,n){if(1&t){var e=i.tc();i.sc(0,"div",19),i.Ac("click",(function(){i.Pc(e);var t=n.$implicit,c=i.Ec(2);return c.selectApp(c.app,t)}))("dblclick",(function(){return i.Pc(e),i.Ec(2).switchTab()})),i.sc(1,"div",20),i.Zc(2,kt,1,1,"img",21),i.Zc(3,At,3,0,"div",22),i.rc(),i.sc(4,"div",23),i.sc(5,"span"),i.bd(6),i.rc(),i.rc(),i.sc(7,"div",24),i.sc(8,"span"),i.bd(9),i.rc(),i.rc(),i.rc()}if(2&t){var c=n.$implicit,o=i.Ec(2);i.Kc("ngClass",i.Mc(7,St,(null==o.app?null:o.app.AppId)===c.AppId,o.preventTypeSwitch)),i.gc("title",c.Name),i.fc(2),i.Kc("ngIf",null!==c.Thumbnail&&""!==c.Thumbnail),i.fc(1),i.Kc("ngIf",null===c.Thumbnail||""===c.Thumbnail),i.fc(3),i.dd("v",c.VersionMain,""),i.fc(1),i.Kc("ngClass",i.Lc(10,Lt,null===c.Thumbnail||""===c.Thumbnail)),i.fc(2),i.cd(c.Name)}}function Et(t,n){if(1&t){var e=i.tc();i.sc(0,"div",27),i.Ac("click",(function(){return i.Pc(e),i.Ec(2).run("app-import")})),i.Fc(1,"translate"),i.sc(2,"div",20),i.sc(3,"div",26),i.sc(4,"mat-icon"),i.bd(5,"get_app"),i.rc(),i.rc(),i.rc(),i.sc(6,"div",28),i.sc(7,"span"),i.bd(8),i.Fc(9,"translate"),i.rc(),i.rc(),i.rc()}2&t&&(i.gc("title",i.Gc(1,2,"TemplatePicker.Install")),i.fc(8),i.cd(i.Gc(9,4,"TemplatePicker.Install")))}function Nt(t,n){if(1&t){var e=i.tc();i.sc(0,"div",27),i.Ac("click",(function(){return i.Pc(e),i.Ec(2).run("zone")})),i.Fc(1,"translate"),i.sc(2,"div",20),i.sc(3,"div",26),i.sc(4,"mat-icon"),i.bd(5,"apps"),i.rc(),i.rc(),i.rc(),i.sc(6,"div",28),i.sc(7,"span"),i.bd(8),i.Fc(9,"translate"),i.rc(),i.rc(),i.rc()}2&t&&(i.gc("title",i.Gc(1,2,"TemplatePicker.Zone")),i.fc(8),i.cd(i.Gc(9,4,"TemplatePicker.Zone")))}function Kt(t,n){if(1&t&&(i.sc(0,"div",16),i.Zc(1,Ft,10,12,"div",17),i.Fc(2,"async"),i.Zc(3,Et,10,6,"div",18),i.Zc(4,Nt,10,6,"div",18),i.rc()),2&t){var e=i.Ec();i.fc(1),i.Kc("ngForOf",i.Gc(2,3,e.apps$)),i.fc(2),i.Kc("ngIf",e.showAdvanced),i.fc(1),i.Kc("ngIf",e.showAdvanced)}}function Zt(t,n){if(1&t&&i.qc(0,"img",25),2&t){var e=i.Ec().$implicit;i.gc("src",e.Thumbnail+"?w=176&h=176",i.Sc)}}function Gt(t,n){1&t&&(i.sc(0,"div",26),i.sc(1,"mat-icon"),i.bd(2,"bubble_chart"),i.rc(),i.rc())}function Dt(t,n){if(1&t){var e=i.tc();i.sc(0,"div",30),i.Ac("click",(function(){i.Pc(e);var t=n.$implicit,c=i.Ec(2);return c.selectContentType(c.contentType,t)}))("dblclick",(function(){return i.Pc(e),i.Ec(2).switchTab()})),i.Fc(1,"translate"),i.sc(2,"div",20),i.Zc(3,Zt,1,1,"img",21),i.Zc(4,Gt,3,0,"div",22),i.rc(),i.sc(5,"div",24),i.sc(6,"span"),i.bd(7),i.rc(),i.rc(),i.rc()}if(2&t){var c=n.$implicit,o=i.Ec(2);i.Kc("ngClass",i.Mc(8,St,(null==o.contentType?null:o.contentType.StaticName)===c.StaticName,o.preventTypeSwitch)),i.gc("title",i.Gc(1,6,c.Label)+(o.showDebug?" ("+c.StaticName+")":"")),i.fc(3),i.Kc("ngIf",null!==c.Thumbnail&&""!==c.Thumbnail),i.fc(1),i.Kc("ngIf",null===c.Thumbnail||""===c.Thumbnail),i.fc(1),i.Kc("ngClass",i.Lc(11,Lt,null===c.Thumbnail||""===c.Thumbnail)),i.fc(2),i.cd(c.Label)}}function Rt(t,n){if(1&t&&(i.sc(0,"div",16),i.Zc(1,Dt,8,13,"div",29),i.rc()),2&t){var e=i.Ec();i.fc(1),i.Kc("ngForOf",e.types)}}function Vt(t,n){1&t&&i.qc(0,"mat-spinner",34)}function qt(t,n){if(1&t&&i.qc(0,"img",25),2&t){var e=i.Ec().$implicit;i.gc("src",e.Thumbnail+"?w=176&h=176",i.Sc)}}function zt(t,n){1&t&&(i.sc(0,"mat-icon"),i.bd(1,"view_carousel"),i.rc())}function Ht(t,n){1&t&&(i.sc(0,"mat-icon"),i.bd(1,"view_quilt"),i.rc())}function Ut(t,n){if(1&t&&(i.sc(0,"div",26),i.Zc(1,zt,2,0,"mat-icon",1),i.Zc(2,Ht,2,0,"mat-icon",1),i.rc()),2&t){var e=i.Ec(3);i.fc(1),i.Kc("ngIf",e.isContent),i.fc(1),i.Kc("ngIf",!e.isContent)}}var Bt=function(t){return{active:t}};function Jt(t,n){if(1&t){var e=i.tc();i.sc(0,"div",35),i.Ac("click",(function(){i.Pc(e);var t=n.$implicit;return i.Ec(2).selectTemplate(t)})),i.sc(1,"div",20),i.Zc(2,qt,1,1,"img",21),i.Zc(3,Ut,3,2,"div",22),i.rc(),i.sc(4,"div",24),i.sc(5,"span"),i.bd(6),i.rc(),i.rc(),i.rc()}if(2&t){var c=n.$implicit,o=i.Ec(2);i.Kc("ngClass",i.Lc(6,Bt,(null==o.template?null:o.template.TemplateId)===c.TemplateId)),i.gc("title",c.Name+(o.showDebug?" ("+c.TemplateId+")":"")),i.fc(2),i.Kc("ngIf",null!==c.Thumbnail&&""!==c.Thumbnail),i.fc(1),i.Kc("ngIf",null===c.Thumbnail||""===c.Thumbnail),i.fc(1),i.Kc("ngClass",i.Lc(8,Lt,null===c.Thumbnail||""===c.Thumbnail)),i.fc(2),i.cd(c.Name)}}function Yt(t,n){if(1&t){var e=i.tc();i.sc(0,"div",27),i.Ac("click",(function(){return i.Pc(e),i.Ec(2).run("app")})),i.Fc(1,"translate"),i.sc(2,"div",20),i.sc(3,"div",26),i.sc(4,"mat-icon"),i.bd(5,"settings"),i.rc(),i.rc(),i.rc(),i.sc(6,"div",28),i.sc(7,"span"),i.bd(8),i.Fc(9,"translate"),i.rc(),i.rc(),i.rc()}2&t&&(i.gc("title",i.Gc(1,2,"TemplatePicker.App")),i.fc(8),i.cd(i.Gc(9,4,"TemplatePicker.App")))}function Qt(t,n){if(1&t&&(i.sc(0,"mat-tab",31),i.Fc(1,"translate"),i.sc(2,"div",16),i.Zc(3,Vt,1,0,"mat-spinner",32),i.Fc(4,"async"),i.Zc(5,Jt,7,10,"div",33),i.Zc(6,Yt,10,6,"div",18),i.rc(),i.rc()),2&t){var e=i.Ec();i.Kc("label",i.Gc(1,4,"TemplatePicker.ChangeView")+"("+e.templates.length+")"),i.fc(3),i.Kc("ngIf",i.Gc(4,6,e.templatesLoading$)),i.fc(2),i.Kc("ngForOf",e.templates),i.fc(1),i.Kc("ngIf",e.showAdvanced&&!e.isContent&&null!==(null==e.app?null:e.app.AppId))}}function Xt(t,n){if(1&t&&(i.sc(0,"span",36),i.bd(1),i.rc()),2&t){var e=i.Ec();i.fc(1),i.ed("No ",e.isContent?"Content Apps":"Apps"," installed yet. Please persue the installation by creating a new ",e.isContent?"Content":"App"," in the root of your website.")}}function Wt(t,n){if(1&t&&i.qc(0,"app-installer",37),2&t){var e=i.Ec();i.Kc("isContentApp",e.isContent)}}var tn=function(t){return{opacity:t}},nn=function(t){return{blocked:t}},en=s.subLog("picker",!1),cn=function(){function t(t,n,e){this.api=t,this.state=n,this.cdRef=e,this.showCancel=!0,this.showAdvanced=!1,this.showInstaller=!1,this.tabIndex=0,this.isBadContextForInstaller=!1,this.loading$=W.create(!1),this.preventAppSwich=!1,this.showDebug=!1,this.ready=!1,this.bridge=window.frameElement.bridge;var c=this.bridge.getAdditionalDashboardConfig();this.boot(c),this.debugObservables()}return t.prototype.ngOnInit=function(){this.autosyncObservablesToEnsureUiUpdates()},t.prototype.boot=function(t){this.showDebug=t.debug,r.configureRuntimeLogging(t.debug),this.api.initLoading(!t.isContent);var n=this.state.init(t);this.initObservables(n),this.initValuesFromBridge(t),this.loading$.next(!1)},t.prototype.debugObservables=function(){},t.prototype.initObservables=function(t){var n=this,e=t.pipe(Object(B.a)((function(t){return!!t})));this.ready$=Object(z.a)(this.api.ready$,this.loading$,(function(t,n){return t&&!n})),this.apps$=this.api.apps$;var i=Object(H.a)(this.state.type$,this.state.app$).pipe(Object(B.a)((function(t){return!!t})));Object(z.a)(i,e).subscribe((function(t){return n.switchTab()})),Object(z.a)(this.api.templates$,this.api.contentTypes$,this.api.apps$,this.api.ready$.pipe(Object(B.a)((function(t){return!!t}))),(function(t,e,c){en.add("apps/templates loaded, will check if we should show installer"),n.showInstaller=n.isContent?0===t.length:0===c.filter((function(t){return-1!==t.AppId})).length})).subscribe(),this.templatesLoading$=Object(z.a)(this.state.templates$,this.state.template$,(function(t,n){return!(t&&n)})).pipe(Object(c.a)(!1)),this.state.template$.pipe(Object(B.a)((function(t){return!!t})),Object(J.a)(e)).subscribe((function(t){return n.previewTemplate(t)}))},t.prototype.autosyncObservablesToEnsureUiUpdates=function(){var t=this;this.state.app$.subscribe((function(n){return t.app=n})),this.state.templates$.subscribe((function(n){return t.templates=n})),this.state.template$.subscribe((function(n){return t.template=n})),this.state.types$.subscribe((function(n){return t.types=n})),this.state.type$.subscribe((function(n){return t.contentType=n})),this.ready$.subscribe((function(n){return t.ready=n})),Object(H.a)(this.ready$,this.state.app$,this.state.type$,this.state.types$,this.state.template$,this.state.templates$).subscribe((function(){return t.cdRef.detectChanges()}))},t.prototype.initValuesFromBridge=function(t){this.preventTypeSwitch=t.hasContent,this.isBadContextForInstaller=t.isInnerContent,this.isContent=t.isContent,this.supportsAjax=this.isContent||t.supportsAjax,this.showAdvanced=t.user.canDesign,this.preventAppSwich=t.hasContent,this.showCancel=null!=t.templateId},t.prototype.cancel=function(){this.bridge.cancel()},t.prototype.run=function(t){this.bridge.run(t)},t.prototype.persistTemplate=function(t){this.bridge.setTemplate(t.TemplateId,t.Name,!0)},t.prototype.selectApp=function(t,n){console.log("selectApp()"),t&&t.AppId===n.AppId?this.switchTab():this.updateApp(n)},t.prototype.selectContentType=function(t,n){t&&t.StaticName===n.StaticName?this.switchTab():this.setContentType(n)},t.prototype.selectTemplate=function(t){this.state.activateTemplate(t)},t.prototype.setContentType=function(t){en.add("select content-type '"+t.Name+"'; prevent: "+this.preventTypeSwitch),this.preventTypeSwitch||this.state.activateType(t)},t.prototype.switchTab=function(){var t=this;en.add("switchTab()"),Object(U.a)(100).toPromise().then((function(n){return t.tabIndex=1}))},t.prototype.updateApp=function(t){var n=this,e=t.SupportsAjaxReload;en.add("changing app to "+t.AppId+"; prevent-switch: "+this.preventAppSwich+" use-ajax:"+e),this.preventAppSwich||(this.loading$.next(!0),this.bridge.showMessage("loading App..."),this.api.saveAppId(t.AppId.toString(),e).then(e?function(){en.add("saved app, will reset some stuff"),en.add("calling reloadAndReInit()"),n.bridge.reloadAndReInit().then((function(t){return n.boot(t)}))}:function(){return window.parent.location.reload()}))},t.prototype.previewTemplate=function(t){var n=this;en.add("previewTemplate("+t.TemplateId+"), ajax is "+this.supportsAjax),this.loading$.next(!0),this.bridge.setTemplate(t.TemplateId,t.Name,!1).then((function(t){return n.loading$.next(!1)}))},t.\u0275fac=function(n){return new(n||t)(i.pc(it),i.pc(gt),i.pc(i.j))},t.\u0275cmp=i.jc({type:t,selectors:[["app-template-picker"]],decls:16,vars:16,consts:[[1,"content"],[4,"ngIf"],[3,"ngStyle","mode"],[1,"card",3,"ngClass"],["fxLayout","row","fxLayoutAlign","center center",1,"top-controls"],["mat-fab","",3,"click",4,"ngIf"],["mat-mini-fab","","class","secondary",3,"click",4,"ngIf"],[3,"selectedIndex","selectedIndexChange"],["mat-tab-label",""],["class","tiles",4,"ngIf","ngIfElse"],["contentApp",""],[3,"label",4,"ngIf"],["class","no-install-allowed",4,"ngIf"],[3,"isContentApp",4,"ngIf"],["mat-fab","",3,"click"],["mat-mini-fab","",1,"secondary",3,"click"],[1,"tiles"],["class","tile",3,"ngClass","click","dblclick",4,"ngFor","ngForOf"],["class","tile config",3,"click",4,"ngIf"],[1,"tile",3,"ngClass","click","dblclick"],[1,"bg"],["class","bg-img",4,"ngIf"],["class","bg-icon",4,"ngIf"],[1,"version"],[1,"title",3,"ngClass"],[1,"bg-img"],[1,"bg-icon"],[1,"tile","config",3,"click"],[1,"title","show"],["mat-button","","class","tile",3,"ngClass","click","dblclick",4,"ngFor","ngForOf"],["mat-button","",1,"tile",3,"ngClass","click","dblclick"],[3,"label"],["class","templates-spinner",4,"ngIf"],["class","tile",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"templates-spinner"],[1,"tile",3,"ngClass","click"],[1,"no-install-allowed"],[3,"isContentApp"]],template:function(t,n){if(1&t&&(i.sc(0,"div",0),i.Zc(1,Tt,15,13,"div",1),i.qc(2,"mat-progress-bar",2),i.sc(3,"div",3),i.sc(4,"div",4),i.Zc(5,It,4,3,"button",5),i.Zc(6,$t,4,3,"button",6),i.rc(),i.sc(7,"mat-tab-group",7),i.Ac("selectedIndexChange",(function(t){return n.tabIndex=t})),i.sc(8,"mat-tab"),i.Zc(9,jt,3,5,"ng-template",8),i.Zc(10,Kt,5,5,"div",9),i.Zc(11,Rt,2,1,"ng-template",null,10,i.ad),i.rc(),i.Zc(13,Qt,7,8,"mat-tab",11),i.rc(),i.Zc(14,Xt,2,2,"span",12),i.Zc(15,Wt,1,1,"app-installer",13),i.rc(),i.rc()),2&t){var e=i.Oc(12);i.fc(1),i.Kc("ngIf",n.showDebug),i.fc(1),i.Kc("ngStyle",i.Lc(12,tn,n.ready?0:1))("mode","indeterminate"),i.fc(1),i.Kc("ngClass",i.Lc(14,nn,!n.ready)),i.fc(2),i.Kc("ngIf",n.template),i.fc(1),i.Kc("ngIf",n.showCancel),i.fc(1),i.Kc("selectedIndex",n.tabIndex),i.fc(3),i.Kc("ngIf",!n.isContent)("ngIfElse",e),i.fc(3),i.Kc("ngIf",n.isContent?n.contentType:n.app),i.fc(1),i.Kc("ngIf",n.isBadContextForInstaller&&n.showInstaller),i.fc(1),i.Kc("ngIf",!n.isBadContextForInstaller&&n.showInstaller)}},directives:[$.g,ft.a,$.h,bt.b,$.e,bt.a,k.c,k.b,ht.b,ht.a,ht.c,x.a,I.a,$.f,mt.c,xt],pipes:[$.a,d.c],styles:["[_nghost-%COMP%]{display:block;padding-top:56px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{background:#fafafa;box-shadow:0 -1px 2px rgba(0,0,0,.3);position:relative}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;min-height:164px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .top-controls[_ngcontent-%COMP%]{position:absolute;height:56px;right:4px;top:-56px;width:100%;text-align:center;z-index:2;display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .top-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-block;float:none;position:relative;top:28px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .top-controls[_ngcontent-%COMP%]   button.secondary[_ngcontent-%COMP%]{background:#fafafa!important;color:rgba(0,0,0,.8)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .tiles[_ngcontent-%COMP%]{white-space:nowrap;overflow-x:auto}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .tiles[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]{box-sizing:border-box;background:#fff;display:inline-block;margin:12px 0 12px 12px;position:relative;font-size:12px;border-radius:22px 0 22px 0;height:88px;width:88px;line-height:88px;text-align:center;overflow:hidden;cursor:pointer;color:rgba(0,0,0,.8);transition:all .3s cubic-bezier(.25,.8,.25,1);box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .tiles[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]:hover{box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .tiles[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]:hover   .title[_ngcontent-%COMP%]{opacity:1;text-overflow:clip;height:auto;min-height:24px;padding:4px;white-space:pre-wrap;line-height:normal}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .tiles[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]:hover   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transform:translate(0)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .tiles[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]:hover   .version[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .tiles[_ngcontent-%COMP%]   .tile.blocked[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.5}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .tiles[_ngcontent-%COMP%]   .tile.active[_ngcontent-%COMP%], [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .tiles[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]:active{cursor:pointer;box-shadow:0 14px 28px rgba(0,120,220,.25),0 10px 10px rgba(0,120,220,.22);opacity:1}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .tiles[_ngcontent-%COMP%]   .tile.active[_ngcontent-%COMP%], [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .tiles[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]:focus{color:#0078dc}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .tiles[_ngcontent-%COMP%]   .tile.config[_ngcontent-%COMP%]{box-shadow:none;border:1px dashed rgba(0,0,0,.2);background:transparent}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .tiles[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   .bg[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .tiles[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   .bg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .tiles[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:inline-block;position:absolute;box-sizing:border-box;padding:0 4px;left:0;bottom:0;width:100%;height:24px;line-height:24px;background:#fff;color:rgba(0,0,0,.8);letter-spacing:.1pt;font-size:11px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;opacity:0;font-weight:700;transition:opacity .4s ease}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .tiles[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   .title.show[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .tiles[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   .title.show[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transform:translate(0)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .tiles[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;transform:translateY(24px);transition:transform .4s cubic-bezier(.68,-.55,.265,1.55)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .tiles[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   .version[_ngcontent-%COMP%]{display:inline-block;position:absolute;box-sizing:border-box;padding:0 4px;right:0;top:0;width:24px;height:24px;line-height:24px;color:#fff;letter-spacing:.1pt;font-size:11px;font-weight:700;white-space:nowrap;opacity:0;transition:opacity .4s ease}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .tiles[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   .version[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transform:translateY(24px);transition:transform .4s cubic-bezier(.68,-.55,.265,1.55);text-shadow:0 0 5px #000}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .templates-spinner[_ngcontent-%COMP%]{width:48px;margin:12px 0 12px 12px;height:88px;display:inline-block}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]{width:320px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:8px 0}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 0 0 8px;float:left;background:#0088f4}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .fr-getting-started[_ngcontent-%COMP%]{border:none}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .no-install-allowed[_ngcontent-%COMP%]{background:#f44336;display:block;padding:16px;border-radius:2px;color:#fff;line-height:24px;box-shadow:0 10px 20px rgba(0,0,0,.19),0 6px 6px rgba(0,0,0,.23);text-align:center}  mat-tab-group mat-tab-header{border-bottom:none!important}  mat-tab-group mat-tab-header mat-ink-bar{display:none!important}  mat-tab-group mat-tab-header .mat-tab-labels{display:block}  mat-tab-group mat-tab-header .mat-tab-labels .mat-tab-label{min-width:0!important}  mat-tab-group mat-tab-header .mat-tab-labels .mat-tab-label.mat-tab-label-active{opacity:1}"]}),t}(),on=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function c(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)}}();function an(t,n){1&t&&i.qc(0,"app-template-picker")}var rn=function(t){function n(n,e,c,i,o){var a=t.call(this,c,i.preConfigure({sxc:O.getSxcInstance()}),!1)||this;return a.translate=n,a.dialog=e,n.addLangs(q),o.get("app-sys/system/dialogsettings?appId="+O.appId()).subscribe((function(t){var e=t.Context.Language;n.setDefaultLang("en"),n.use(e.Current.split("-")[0]),a.showDialog()})),a}return on(n,t),n.prototype.showDialog=function(){this.name=O.dialog(),s.add("loading '"+this.name+"'");var t=window.frameElement;"item-history"===this.name&&this.dialog.open(V).afterClosed().subscribe((function(){return t.bridge.hide()}))},n.\u0275fac=function(t){return new(t||n)(i.pc(d.d),i.pc(T.a),i.pc(i.q),i.pc(b.a),i.pc(_.b))},n.\u0275cmp=i.jc({type:n,selectors:[["app-root"]],features:[i.cc],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(t,n){1&t&&i.Zc(0,an,1,0,"app-template-picker",0),2&t&&i.Kc("ngIf","dash-view"===n.name||"layout"===n.name)},directives:[$.g,cn],styles:["[_nghost-%COMP%]{display:block}"]}),n}(b.b),sn=e("rJgo"),pn=e("omvX"),ln=function(){function t(){}return t.\u0275mod=i.nc({type:t}),t.\u0275inj=i.mc({factory:function(n){return new(n||t)},providers:[Mt,it,gt],imports:[[$.b,_.c]]}),t}(),un=e("u9T3"),dn=function(){function t(){}return t.\u0275mod=i.nc({type:t}),t.\u0275inj=i.mc({factory:function(n){return new(n||t)},providers:[_t],imports:[[$.b,mt.b]]}),t}(),gn=[x.b,T.c,j.a,I.b,ft.b,mt.b,ht.d,w.b],fn=function(){function t(){}return t.\u0275mod=i.nc({type:t}),t.\u0275inj=i.mc({factory:function(n){return new(n||t)},imports:[gn,x.b,T.c,j.a,I.b,ft.b,mt.b,ht.d,w.b]}),t}(),bn=function(){function t(){}return t.\u0275mod=i.nc({type:t}),t.\u0275inj=i.mc({factory:function(n){return new(n||t)},providers:[ut,st],imports:[[$.b,pn.b,sn.a,ht.d,fn,ft.b,ln,f.a,un.a,dn,d.b]]}),t}(),hn=function(){function t(){}return t.\u0275mod=i.nc({type:t}),t.\u0275inj=i.mc({factory:function(n){return new(n||t)},providers:[M],imports:[[$.b,_.c,un.a,d.b,pn.b,fn]]}),t}();function mn(t){var n=new u.a(t,"./i18n/",".js");return s.add("created translate-loader",n),n}var On=function(){function t(){}return t.\u0275mod=i.nc({type:t,bootstrap:[rn]}),t.\u0275inj=i.mc({factory:function(n){return new(n||t)},providers:[b.c],imports:[[g.a,_.c,f.a,bn,d.b.forRoot({loader:{provide:d.a,useFactory:mn,deps:[_.b]}}),fn,hn]]}),t}();Object(i.Y)(),s.add("loading main.ts");var Cn=Object(o.a)();(window.bootController=l.getRebootController()).rebootRequest$.pipe(Object(c.a)(!0)).subscribe((function(){return function(){s.add("init()");try{Cn.destroyed||Cn.destroy()}catch(t){console.log("platform destroy error",t)}g.c().bootstrapModule(On).then((function(){return window.appBootstrap&&window.appBootstrap()})).catch((function(t){return console.error("NG Bootstrap Error =>",t)}))}()}))}},[[0,0,5]]]);
//# sourceMappingURL=https://sources.2sxc.org/11.04.00/ng/main.6d0665caeae0a2e05129.js.map