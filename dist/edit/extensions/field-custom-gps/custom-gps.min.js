!function(t,e,n,i){"use strict";(function(){e.module("uiGmapgoogle-maps.providers",["nemLogging"]),e.module("uiGmapgoogle-maps.wrapped",[]),e.module("uiGmapgoogle-maps.extensions",["uiGmapgoogle-maps.wrapped","uiGmapgoogle-maps.providers"]),e.module("uiGmapgoogle-maps.directives.api.utils",["uiGmapgoogle-maps.extensions"]),e.module("uiGmapgoogle-maps.directives.api.managers",[]),e.module("uiGmapgoogle-maps.directives.api.options",["uiGmapgoogle-maps.directives.api.utils"]),e.module("uiGmapgoogle-maps.directives.api.options.builders",[]),e.module("uiGmapgoogle-maps.directives.api.models.child",["uiGmapgoogle-maps.directives.api.utils","uiGmapgoogle-maps.directives.api.options","uiGmapgoogle-maps.directives.api.options.builders"]),e.module("uiGmapgoogle-maps.directives.api.models.parent",["uiGmapgoogle-maps.directives.api.managers","uiGmapgoogle-maps.directives.api.models.child","uiGmapgoogle-maps.providers"]),e.module("uiGmapgoogle-maps.directives.api",["uiGmapgoogle-maps.directives.api.models.parent"]),e.module("uiGmapgoogle-maps",["uiGmapgoogle-maps.directives.api","uiGmapgoogle-maps.providers"])}).call(this),function(){e.module("uiGmapgoogle-maps.providers").factory("uiGmapMapScriptLoader",["$q","uiGmapuuid",function(i,o){var r,s,a,u,l;return u=void 0,l=void 0,r=function(t){return t.china?"http://maps.google.cn/maps/api/js?":"auto"===t.transport?"//maps.googleapis.com/maps/api/js?":t.transport+"://maps.googleapis.com/maps/api/js?"},s=function(t){var e,i,s,a;return e=["transport","isGoogleMapsForWork","china","preventLoad"],t.isGoogleMapsForWork&&e.push("key"),i=n.map(n.omit(t,e),function(t,e){return e+"="+t}),u&&(a=document.getElementById(u),a.parentNode.removeChild(a)),i=i.join("&"),s=document.createElement("script"),s.id=u="ui_gmap_map_load_"+o.generate(),s.type="text/javascript",s.src=r(t)+i,document.head.appendChild(s)},a=function(){return e.isDefined(t.google)&&e.isDefined(t.google.maps)},{load:function(e){var n,o;return n=i.defer(),a()?(n.resolve(t.google.maps),n.promise):(o=e.callback="onGoogleMapsReady"+Math.round(1e3*Math.random()),t[o]=function(){t[o]=null,n.resolve(t.google.maps)},t.navigator.connection&&t.Connection&&t.navigator.connection.type===t.Connection.NONE&&!e.preventLoad?document.addEventListener("online",function(){return a()?void 0:s(e)}):e.preventLoad||s(e),l=e,l.randomizedFunctionName=o,n.promise)},manualLoad:function(){var e;return e=l,a()?t[e.randomizedFunctionName]?t[e.randomizedFunctionName]():void 0:s(e)}}}]).provider("uiGmapGoogleMapApi",function(){return this.options={transport:"https",isGoogleMapsForWork:!1,china:!1,v:"3",libraries:"",language:"en",preventLoad:!1},this.configure=function(t){e.extend(this.options,t)},this.$get=["uiGmapMapScriptLoader",function(t){return function(e){return e.load(t.options)}}(this)],this}).service("uiGmapGoogleMapApiManualLoader",["uiGmapMapScriptLoader",function(t){return{load:function(){t.manualLoad()}}}])}.call(this),function(){var i=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;e.module("uiGmapgoogle-maps.extensions").service("uiGmapExtendGWin",function(){return{init:n.once(function(){var e;return google||("undefined"!=typeof google&&null!==google?google.maps:void 0)||null!=google.maps.InfoWindow?(google.maps.InfoWindow.prototype._open=google.maps.InfoWindow.prototype.open,google.maps.InfoWindow.prototype._close=google.maps.InfoWindow.prototype.close,google.maps.InfoWindow.prototype._isOpen=!1,google.maps.InfoWindow.prototype.open=function(t,e,n){null==n&&(this._isOpen=!0,this._open(t,e,!0))},google.maps.InfoWindow.prototype.close=function(t){null==t&&(this._isOpen=!1,this._close(!0))},google.maps.InfoWindow.prototype.isOpen=function(t){return null==t&&(t=void 0),null==t?this._isOpen:this._isOpen=t},t.InfoBox&&(t.InfoBox.prototype._open=t.InfoBox.prototype.open,t.InfoBox.prototype._close=t.InfoBox.prototype.close,t.InfoBox.prototype._isOpen=!1,t.InfoBox.prototype.open=function(t,e){this._isOpen=!0,this._open(t,e)},t.InfoBox.prototype.close=function(){this._isOpen=!1,this._close()},t.InfoBox.prototype.isOpen=function(t){return null==t&&(t=void 0),null==t?this._isOpen:this._isOpen=t},e=function(e){function r(e){this.getOrigCloseBoxImg_=i(this.getOrigCloseBoxImg_,this),this.getCloseBoxDiv_=i(this.getCloseBoxDiv_,this);var o;o=new t.InfoBox(e),n.extend(this,o),null!=e.closeBoxDiv&&(this.closeBoxDiv_=e.closeBoxDiv)}return o(r,e),r.prototype.getCloseBoxDiv_=function(){return this.closeBoxDiv_},r.prototype.getCloseBoxImg_=function(){var t,e;return t=this.getCloseBoxDiv_(),e=this.getOrigCloseBoxImg_(),t||e},r.prototype.getOrigCloseBoxImg_=function(){var t;return t="",""!==this.closeBoxURL_&&(t="<img",t+=" src='"+this.closeBoxURL_+"'",t+=" align=right",t+=" style='",t+=" position: relative;",t+=" cursor: pointer;",t+=" margin: "+this.closeBoxMargin_+";",t+="'>"),t},r}(t.InfoBox),t.uiGmapInfoBox=e),t.MarkerLabel_?t.MarkerLabel_.prototype.setContent=function(){var t;t=this.marker_.get("labelContent"),t&&!n.isEqual(this.oldContent,t)&&("undefined"==typeof(null!=t?t.nodeType:void 0)?(this.labelDiv_.innerHTML=t,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML,this.oldContent=t):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(t),t=t.cloneNode(!0),this.labelDiv_.innerHTML="",this.eventDiv_.appendChild(t),this.oldContent=t))}:void 0):void 0})}})}.call(this),function(){e.module("uiGmapgoogle-maps.extensions").service("uiGmapLodash",function(){var t,e,i,o,r,s,a,u;return s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,r=/\\(\\)?/g,i=function(t){var e,i,o;return i=t.missingName,o=t.swapName,e=t.isProto,null==n[i]&&(n[i]=n[o],e)?n.prototype[i]=n[o]:void 0},[{missingName:"contains",swapName:"includes",isProto:!0},{missingName:"includes",swapName:"contains",isProto:!0},{missingName:"object",swapName:"zipObject"},{missingName:"zipObject",swapName:"object"},{missingName:"all",swapName:"every"},{missingName:"every",swapName:"all"},{missingName:"any",swapName:"some"},{missingName:"some",swapName:"any"},{missingName:"first",swapName:"head"},{missingName:"head",swapName:"first"}].forEach(function(t){return i(t)}),null==n.get&&(a=function(t){return n.isObject(t)?t:Object(t)},e=function(t){return null===t?"":t+""},u=function(t){var i;return n.isArray(t)?t:(i=[],e(t).replace(s,function(t,e,n,o){i.push(n?o.replace(r,"$1"):e||t)}),i)},t=function(t,e,i){var o,r;if(null!==t){void 0!==i&&i in a(t)&&(e=[i]),o=0,r=e.length;for(;!n.isUndefined(t)&&r>o;)t=t[e[o++]];return o&&o===r?t:void 0}},o=function(e,n,i){var o;return o=null===e?void 0:t(e,u(n),n+""),void 0===o?i:o},n.get=o),this.intersectionObjects=function(t,e,i){var o;return null==i&&(i=void 0),o=n.map(t,function(t){return n.find(e,function(e){return null!=i?i(t,e):n.isEqual(t,e)})}),n.filter(o,function(t){return null!=t})},this.containsObject=n.includeObject=function(t,e,i){return null==i&&(i=void 0),null!==t&&n.some(t,function(t){return null!=i?i(t,e):n.isEqual(t,e)})},this.differenceObjects=function(t,e,i){return null==i&&(i=void 0),n.filter(t,function(t){return function(n){return!t.containsObject(e,n,i)}}(this))},this.withoutObjects=this.differenceObjects,this.indexOfObject=function(t,e,i,o){var r,s;if(null==t)return-1;if(r=0,s=t.length,o){if("number"!=typeof o)return r=n.sortedIndex(t,e),t[r]===e?r:-1;r=0>o?Math.max(0,s+o):o}for(;s>r;){if(null!=i){if(i(t[r],e))return r}else if(n.isEqual(t[r],e))return r;r++}return-1},this.isNullOrUndefined=function(t){return n.isNull(t||n.isUndefined(t))},this})}.call(this),function(){e.module("uiGmapgoogle-maps.extensions").factory("uiGmapString",function(){return function(t){return this.contains=function(e,n){return-1!==t.indexOf(e,n)},this}})}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmap_sync",[function(){return{fakePromise:function(){var t;return t=void 0,{then:function(e){return t=e},resolve:function(){return t.apply(void 0,arguments)}}}}}]).service("uiGmap_async",["$timeout","uiGmapPromise","uiGmapLogger","$q","uiGmapDataStructures","uiGmapGmapUtil",function(t,i,o,r,s,a){var u,l,p,c,h,d,f,g,m,v,y,_,b,w,M,k,x,C,G,O;return G=i.promiseTypes,_=i.isInProgress,C=i.promiseStatus,u=i.ExposedPromise,p=i.SniffedPromise,b=function(t,e){var n;return n=t.promise(),n.promiseType=t.promiseType,n.$$state&&o.debug("promiseType: "+n.promiseType+", state: "+C(n.$$state.status)),n.cancelCb=e,n},g=function(t,e){return t.promiseType===G.create&&e.promiseType!==G["delete"]&&e.promiseType!==G.init&&(o.debug("lastPromise.promiseType "+e.promiseType+", newPromiseType: "+t.promiseType+", SKIPPED MUST COME AFTER DELETE ONLY"),!0)},x=function(t,e,i){var r;return e.promiseType===G["delete"]&&i.promiseType!==G["delete"]&&null!=i.cancelCb&&n.isFunction(i.cancelCb)&&_(i)&&(o.debug("promiseType: "+e.promiseType+", CANCELING LAST PROMISE type: "+i.promiseType),i.cancelCb("cancel safe"),r=t.peek(),null!=r&&_(r))?r.hasOwnProperty("cancelCb")&&n.isFunction(r.cancelCb)?(o.debug("promiseType: "+r.promiseType+", CANCELING FIRST PROMISE type: "+r.promiseType),r.cancelCb("cancel safe")):o.warn("first promise was not cancelable"):void 0},l=function(t,e,i){var o,r;if(t.existingPieces){if(o=n.last(t.existingPieces._content),g(e,o))return;return x(t.existingPieces,e,o),r=u(o["finally"](function(){return b(e,i)})),r.cancelCb=i,r.promiseType=e.promiseType,t.existingPieces.enqueue(r),o["finally"](function(){return t.existingPieces.dequeue()})}return t.existingPieces=new s.Queue,t.existingPieces.enqueue(b(e,i))},M=function(t,e,i,r,s){var a;return null==i&&(i=""),a=function(t){return o.debug(t+": "+t),null!=r&&n.isFunction(r)?r(t):void 0},l(t,p(s,e),a)},d=80,v={value:null},O=function(t,e,n){var i,o;try{return t.apply(e,n)}catch(o){return i=o,v.value=i,v}},w=function(t,e,n,i){var r,s;return s=O(t,e,i),s===v&&(r="error within chunking iterator: "+v.value,o.error(r),n.reject(r)),"cancel safe"!==s},c=function(t,e,n){var i,o;return i=t===e,o=e[n],i?o:t[o]},h=["length","forEach","map"],y=function(t,i,o,r){var s,a,u;if(e.isArray(t))s=t;else if(i)s=i;else{s=[];for(a in t)u=t[a],t.hasOwnProperty(a)&&!n.includes(h,a)&&s.push(a)}return null==r&&(r=o),e.isArray(s)&&!(null!=s?s.length:void 0)&&r!==o?o():r(s,i)},f=function(i,o,r,s,a,u,l,p){return y(i,p,function(p,h){var d,g,m,v;for(d=o&&o<p.length?o:p.length,g=l,m=!0;m&&d--&&g<(p?p.length:g+1);)v=c(i,p,g),m=!!e.isFunction(v)||w(s,void 0,u,[v,g]),++g;if(p){if(!(m&&g<p.length))return u.resolve();if(l=g,o)return null!=a&&n.isFunction(a)&&w(a,void 0,u,[]),t(function(){return f(i,o,r,s,a,u,l,h)},r,!1)}})},m=function(t,e,n,r,s,a,u){var l,p,c;return null==n&&(n=d),null==s&&(s=0),null==a&&(a=1),c=void 0,p=i.defer(),c=p.promise,a?y(t,u,function(){return p.resolve(),c},function(i,o){return f(t,n,a,e,r,p,s,o),c}):(l="pause (delay) must be set from _async!",o.error(l),p.reject(l),c)},k=function(t,e,n,o,r,s,a){var u;return u=[],y(t,a,function(){return i.resolve(u)},function(i,a){return m(t,function(t){return u.push(e(t))},n,o,r,s,a).then(function(){return u})})},{each:m,map:k,managePromiseQueue:M,promiseLock:M,defaultChunkSize:d,getArrayAndKeys:y,chunkSizeFrom:function(t,e){return null==e&&(e=void 0),n.isNumber(t)&&(e=t),(a.isFalse(t)||t===!1)&&(e=!1),e}}}])}.call(this),function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapBaseObject",function(){var e,n;return n=["extended","included"],e=function(){function e(){}return e.extend=function(e){var i,o,r;for(i in e)r=e[i],t.call(n,i)<0&&(this[i]=r);return null!=(o=e.extended)&&o.apply(this),this},e.include=function(e){var i,o,r;for(i in e)r=e[i],t.call(n,i)<0&&(this.prototype[i]=r);return null!=(o=e.included)&&o.apply(this),this},e}()})}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapChildEvents",function(){return{onChildCreation:function(t){}}})}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapCtrlHandle",["$q",function(t){var e;return e={handle:function(n,i){return n.$on("$destroy",function(){return e.handle(n)}),n.deferred=t.defer(),{getScope:function(){return n}}},mapPromise:function(t,e){var n;return n=e.getScope(),n.deferred.promise.then(function(e){return t.map=e}),n.deferred.promise}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapEventsHelper",["uiGmapLogger",function(t){var i,o;return o=function(t){return e.isDefined(t.events)&&null!=t.events&&e.isObject(t.events)},i=function(t,e){return o(t)?t:o(e)?e:void 0},{setEvents:function(t,o,r,s){var a;return a=i(o,r),null!=a?n.compact(n.map(a.events,function(i,u){var l;return s&&(l=n(s).includes(u)),a.events.hasOwnProperty(u)&&e.isFunction(a.events[u])&&!l?google.maps.event.addListener(t,u,function(){return o.$evalAsync||(o.$evalAsync=function(){}),o.$evalAsync(i.apply(o,[t,u,r,arguments]))}):void 0})):void 0},removeEvents:function(t){var e,n;if(t)for(e in t)n=t[e],n&&t.hasOwnProperty(e)&&google.maps.event.removeListener(n)}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapFitHelper",["uiGmapLogger","$timeout",function(t,e){return{fit:function(t,i){var o,r,s,a,u;if(i&&(null!=t?t.length:void 0)){o=new google.maps.LatLngBounds,r=!1;for(s in t)a=t[s],a&&(r||(r=!0),u=n.isFunction(a.getPosition)?a.getPosition():a),o.extend(u);if(r)return e(function(){return i.fitBounds(o)})}}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapGmapUtil",["uiGmapLogger","$compile",function(t,i){var o,r,s,a,u,l;return r=function(t,e,n){return t===e||-1!==n.indexOf(t)},o=function(t){return r(t,!1,["false","FALSE",0,"n","N","no","NO"])},a=function(t){return Array.isArray(t)&&2===t.length?t[1]:e.isDefined(t.type)&&"Point"===t.type?t.coordinates[1]:t.latitude},u=function(t){return Array.isArray(t)&&2===t.length?t[0]:e.isDefined(t.type)&&"Point"===t.type?t.coordinates[0]:t.longitude},s=function(t){return t?t instanceof google.maps.LatLng?t:Array.isArray(t)&&2===t.length?new google.maps.LatLng(t[1],t[0]):e.isDefined(t.type)&&"Point"===t.type?new google.maps.LatLng(t.coordinates[1],t.coordinates[0]):new google.maps.LatLng(t.latitude,t.longitude):void 0},l=function(t){if(e.isUndefined(t))return!1;if(n.isArray(t)){if(2===t.length)return!0}else if(null!=t&&(null!=t?t.type:void 0)&&"Point"===t.type&&n.isArray(t.coordinates)&&2===t.coordinates.length)return!0;return!(!t||!e.isDefined((null!=t?t.latitude:void 0)&&e.isDefined(null!=t?t.longitude:void 0)))},{setCoordsFromEvent:function(t,n){return t?(Array.isArray(t)&&2===t.length?(t[1]=n.lat(),t[0]=n.lng()):e.isDefined(t.type)&&"Point"===t.type?(t.coordinates[1]=n.lat(),t.coordinates[0]=n.lng()):(t.latitude=n.lat(),t.longitude=n.lng()),t):void 0},getLabelPositionPoint:function(t){var e,n;return void 0!==t?(t=/^([-\d\.]+)\s([-\d\.]+)$/.exec(t),e=parseFloat(t[1]),n=parseFloat(t[2]),null!=e&&null!=n?new google.maps.Point(e,n):void 0):void 0},createWindowOptions:function(n,o,r,a){var u;return null!=r&&null!=a&&null!=i?(u=e.extend({},a,{content:this.buildContent(o,a,r),position:null!=a.position?a.position:e.isObject(n)?n.getPosition():s(o.coords)}),null!=n&&null==(null!=u?u.pixelOffset:void 0)&&(null==u.boxClass||(u.pixelOffset={height:0,width:-2})),u):a?a:(t.error("infoWindow defaults not defined"),r?void 0:t.error("infoWindow content not defined"))},buildContent:function(t,e,n){var o,r;return null!=e.content?r=e.content:null!=i?(n=n.replace(/^\s+|\s+$/g,""),o=""===n?"":i(n)(t),o.length>0&&(r=o[0])):r=n,r},defaultDelay:50,isTrue:function(t){return r(t,!0,["true","TRUE",1,"y","Y","yes","YES"])},isFalse:o,isFalsy:function(t){return r(t,!1,[void 0,null])||o(t)},getCoords:s,validateCoords:l,equalCoords:function(t,e){return a(t)===a(e)&&u(t)===u(e)},validatePath:function(t){var i,o,r,s;if(o=0,e.isUndefined(t.type)){if(!Array.isArray(t)||t.length<2)return!1;for(;o<t.length;){if(!(e.isDefined(t[o].latitude)&&e.isDefined(t[o].longitude)||"function"==typeof t[o].lat&&"function"==typeof t[o].lng))return!1;o++}return!0}if(e.isUndefined(t.coordinates))return!1;if("Polygon"===t.type){if(t.coordinates[0].length<4)return!1;i=t.coordinates[0]}else if("MultiPolygon"===t.type){if(s={max:0,index:0},n.forEach(t.coordinates,function(t,e){return t[0].length>this.max?(this.max=t[0].length,this.index=e):void 0},s),r=t.coordinates[s.index],i=r[0],i.length<4)return!1}else{if("LineString"!==t.type)return!1;if(t.coordinates.length<2)return!1;i=t.coordinates}for(;o<i.length;){if(2!==i[o].length)return!1;o++}return!0},convertPathPoints:function(t){var i,o,r,s,a;if(o=0,s=new google.maps.MVCArray,e.isUndefined(t.type))for(;o<t.length;)e.isDefined(t[o].latitude)&&e.isDefined(t[o].longitude)?r=new google.maps.LatLng(t[o].latitude,t[o].longitude):"function"==typeof t[o].lat&&"function"==typeof t[o].lng&&(r=t[o]),s.push(r),o++;else for("Polygon"===t.type?i=t.coordinates[0]:"MultiPolygon"===t.type?(a={max:0,index:0},n.forEach(t.coordinates,function(t,e){return t[0].length>this.max?(this.max=t[0].length,this.index=e):void 0},a),i=t.coordinates[a.index][0]):"LineString"===t.type&&(i=t.coordinates);o<i.length;)s.push(new google.maps.LatLng(i[o][1],i[o][0])),o++;return s},getPath:function(t,e){var i;return null!=e&&n.isString(e)?(i=t,n.each(e.split("."),function(t){return i?i=i[t]:void 0}),i):e},validateBoundPoints:function(t){return!(e.isUndefined(t.sw.latitude)||e.isUndefined(t.sw.longitude)||e.isUndefined(t.ne.latitude)||e.isUndefined(t.ne.longitude))},convertBoundPoints:function(t){var e;return e=new google.maps.LatLngBounds(new google.maps.LatLng(t.sw.latitude,t.sw.longitude),new google.maps.LatLng(t.ne.latitude,t.ne.longitude))},fitMapBounds:function(t,e){return t.fitBounds(e)}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapIsReady",["$q","$timeout",function(t,e){var n,i,o,r;return i=0,r=[],o=function(){return t.all(r)},n=function(t,r,s){return e(function(){return 0>=s?void t.reject("Your maps are not found we have checked the maximum amount of times. :)"):void(i!==r?n(t,r,s-1):t.resolve(o()))},100)},{spawn:function(){var e;return e=t.defer(),r.push(e.promise),i+=1,{instance:i,deferred:e}},promises:o,instances:function(){return i},promise:function(e,i){var o;return null==e&&(e=1),null==i&&(i=50),o=t.defer(),n(o,e,i),o.promise},reset:function(){i=0,r.length=0},decrement:function(){i>0&&(i-=1),r.length&&(r.length-=1)}}}])}.call(this),function(){var t=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapLinked",["uiGmapBaseObject",function(e){var n;return n=function(e){function n(t,e,n,i){this.scope=t,this.element=e,this.attrs=n,this.ctrls=i}return t(n,e),n}(e)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapLogger",["nemSimpleLogger",function(t){return t.spawn()}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapModelKey",["uiGmapBaseObject","uiGmapGmapUtil",function(o,r){return function(o){function s(e,n){this.scope=e,this["interface"]=null!=n?n:{scopeKeys:[]},this.modelsLength=t(this.modelsLength,this),this.updateChild=t(this.updateChild,this),this.destroy=t(this.destroy,this),this.setChildScope=t(this.setChildScope,this),this.getChanges=t(this.getChanges,this),this.getProp=t(this.getProp,this),this.setIdKey=t(this.setIdKey,this),this.modelKeyComparison=t(this.modelKeyComparison,this),s.__super__.constructor.call(this),this.defaultIdKey="id",this.idKey=void 0}return i(s,o),s.prototype.evalModelHandle=function(t,e){return null!=t&&null!=e?"self"===e?t:(n.isFunction(e)&&(e=e()),r.getPath(t,e)):void 0},s.prototype.modelKeyComparison=function(t,e){var i,o,s,a,u,l;if(s=this["interface"].scopeKeys.indexOf("coords")>=0,(s&&null!=this.scope.coords||!s)&&(u=this.scope),null==u)throw"No scope set!";return s&&(i=this.scopeOrModelVal("coords",u,t),o=this.scopeOrModelVal("coords",u,e),a=r.equalCoords(i,o),!a)?a:(l=n.without(this["interface"].scopeKeys,"coords"),a=n.every(l,function(i){return function(o){var r,s;return r=i.scopeOrModelVal(u[o],u,t),s=i.scopeOrModelVal(u[o],u,e),u.deepComparison?n.isEqual(r,s):r===s}}(this)))},s.prototype.setIdKey=function(t){return this.idKey=null!=t.idKey?t.idKey:this.defaultIdKey},s.prototype.setVal=function(t,e,n){return this.modelOrKey(t,e=n),t},s.prototype.modelOrKey=function(t,e){return null!=e?"self"!==e?r.getPath(t,e):t:void 0},s.prototype.getProp=function(t,e,n){return this.scopeOrModelVal(t,e,n)},s.prototype.getChanges=function(t,e,i){var o,r,s;i&&(e=n.pick(e,i),t=n.pick(t,i)),r={},s={},o={};for(s in t)e&&e[s]===t[s]||(n.isArray(t[s])?r[s]=t[s]:n.isObject(t[s])?(o=this.getChanges(t[s],e?e[s]:null),n.isEmpty(o)||(r[s]=o)):r[s]=t[s]);return r},s.prototype.scopeOrModelVal=function(t,e,i,o){var r,s,a,u;return null==o&&(o=!1),r=function(t,e,n){return null==n&&(n=!1),n?{isScope:t,value:e}:e},u=n.get(e,t),n.isFunction(u)?r(!0,u(i),o):n.isObject(u)?r(!0,u,o):n.isString(u)?(s=u,a=s?"self"===s?i:n.get(i,s):n.get(i,t),n.isFunction(a)?r(!1,a(),o):r(!1,a,o)):r(!0,u,o)},s.prototype.setChildScope=function(t,e,n){var i,o,r,s;for(o in t)r=t[o],i=this.scopeOrModelVal(r,e,n,!0),null!=(null!=i?i.value:void 0)&&(s=i.value,s!==e[r]&&(e[r]=s));return e.model=n},s.prototype.onDestroy=function(t){},s.prototype.destroy=function(t){var e;return null==t&&(t=!1),null==this.scope||(null!=(e=this.scope)?e.$$destroyed:void 0)||!this.needToManualDestroy&&!t?this.clean():this.scope.$destroy()},s.prototype.updateChild=function(t,e){return null==e[this.idKey]?void this.$log.error("Model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key."):t.updateModel(e)},s.prototype.modelsLength=function(t){var n,i;return null==t&&(t=void 0),n=0,i=t?t:this.scope.models,null==i?n:n=e.isArray(i)||null!=i.length?i.length:Object.keys(i).length},s}(o)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapModelsWatcher",["uiGmapLogger","uiGmap_async","$q","uiGmapPromise",function(t,e,n,i){return{didQueueInitPromise:function(t,n){return 0===n.models.length&&(e.promiseLock(t,i.promiseTypes.init,null,null,function(){return i.resolve()}),!0)},figureOutState:function(e,n,i,o,r){var s,a,u,l,p;return s=[],u={},l=[],p=[],n.models.forEach(function(r){var a;return null==r[e]?t.error(" id missing for model #{m.toString()},\ncan not use do comparison/insertion"):(u[r[e]]={},null==i.get(r[e])?s.push(r):(a=i.get(r[e]),o(r,a.clonedModel,n)?void 0:p.push({model:r,child:a})))}),a=i.values(),a.forEach(function(n){var i;return null==n?void t.error("child undefined in ModelsWatcher."):null==n.model?void t.error("child.model undefined in ModelsWatcher."):(i=n.model[e],null==u[i]?l.push(n):void 0)}),{adds:s,removals:l,updates:p}}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapPromise",["$q","$timeout","uiGmapLogger",function(t,e,i){var o,r,s,a,u,l,p,c,h,d,f;return h={create:"create",update:"update","delete":"delete",init:"init"},c={IN_PROGRESS:0,RESOLVED:1,REJECTED:2},f=function(){var t;return t={},t[""+c.IN_PROGRESS]="in-progress",t[""+c.RESOLVED]="resolved",t[""+c.REJECTED]="rejected",t}(),a=function(t){return t.$$state?t.$$state.status===c.IN_PROGRESS:!t.hasOwnProperty("$$v")||void 0},u=function(t){return t.$$state?t.$$state.status===c.RESOLVED:!!t.hasOwnProperty("$$v")||void 0},p=function(t){return f[t]||"done w error"},o=function(e){var n,i,o;return n=t.defer(),i=t.all([e,n.promise]),o=t.defer(),e.then(n.resolve,function(){},function(t){return n.notify(t),o.notify(t)}),i.then(function(t){return o.resolve(t[0]||t[1])},function(t){return o.reject(t)}),o.promise.cancel=function(t){return null==t&&(t="canceled"),n.reject(t)},o.promise.notify=function(t){return null==t&&(t="cancel safe"),o.notify(t),e.hasOwnProperty("notify")?e.notify(t):void 0},null!=e.promiseType&&(o.promise.promiseType=e.promiseType),o.promise},r=function(t,e){return{promise:t,promiseType:e}},s=function(){return t.defer()},d=function(){var e;return e=t.defer(),e.resolve.apply(void 0,arguments),e.promise},l=function(o){var r;return n.isFunction(o)?(r=t.defer(),e(function(){var t;return t=o(),r.resolve(t)}),r.promise):void i.error("uiGmapPromise.promise() only accepts functions")},{defer:s,promise:l,resolve:d,promiseTypes:h,isInProgress:a,isResolved:u,promiseStatus:p,ExposedPromise:o,SniffedPromise:r}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapPropMap",function(){var e;return e=function(){function e(){this.removeAll=t(this.removeAll,this),this.slice=t(this.slice,this),this.push=t(this.push,this),this.keys=t(this.keys,this),this.values=t(this.values,this),this.remove=t(this.remove,this),this.put=t(this.put,this),this.stateChanged=t(this.stateChanged,this),this.get=t(this.get,this),this.length=0,this.dict={},this.didValsStateChange=!1,this.didKeysStateChange=!1,this.allVals=[],this.allKeys=[]}return e.prototype.get=function(t){return this.dict[t]},e.prototype.stateChanged=function(){return this.didValsStateChange=!0,this.didKeysStateChange=!0},e.prototype.put=function(t,e){return null==this.get(t)&&this.length++,this.stateChanged(),this.dict[t]=e},e.prototype.remove=function(t,e){var n;return null==e&&(e=!1),!e||this.get(t)?(n=this.dict[t],delete this.dict[t],this.length--,this.stateChanged(),n):void 0},e.prototype.valuesOrKeys=function(t){var e,i;return null==t&&(t="Keys"),this["did"+t+"StateChange"]?(i=[],e=[],n.each(this.dict,function(t,n){return i.push(t),e.push(n)}),this.didKeysStateChange=!1,this.didValsStateChange=!1,this.allVals=i,this.allKeys=e,this["all"+t]):this["all"+t]},e.prototype.values=function(){return this.valuesOrKeys("Vals")},e.prototype.keys=function(){return this.valuesOrKeys()},e.prototype.push=function(t,e){return null==e&&(e="key"),this.put(t[e],t)},e.prototype.slice=function(){return this.keys().map(function(t){return function(e){return t.remove(e)}}(this))},e.prototype.removeAll=function(){return this.slice()},e.prototype.each=function(t){return n.each(this.dict,function(e,n){return t(e)})},e.prototype.map=function(t){return n.map(this.dict,function(e,n){return t(e)})},e}()})}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapPropertyAction",["uiGmapLogger",function(t){var e;return e=function(t){return this.setIfChange=function(e){return function(i,o){return n.isEqual(o,i)?void 0:t(e,i)}},this.sic=this.setIfChange,this}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.module("uiGmapgoogle-maps.directives.api.managers").factory("uiGmapClustererMarkerManager",["uiGmapLogger","uiGmapFitHelper","uiGmapPropMap","uiGmapEventsHelper",function(n,i,o,r){var s;return s=function(){function s(e,i,r,a){null==i&&(i={}),this.opt_options=null!=r?r:{},this.opt_events=a,this.checkSync=t(this.checkSync,this),this.getGMarkers=t(this.getGMarkers,this),this.fit=t(this.fit,this),this.destroy=t(this.destroy,this),this.attachEvents=t(this.attachEvents,this),this.clear=t(this.clear,this),this.draw=t(this.draw,this),this.removeMany=t(this.removeMany,this),this.remove=t(this.remove,this),this.addMany=t(this.addMany,this),this.update=t(this.update,this),this.add=t(this.add,this),this.type=s.type,this.clusterer=new NgMapMarkerClusterer(e,i,this.opt_options),this.propMapGMarkers=new o,this.attachEvents(this.opt_events,"opt_events"),this.clusterer.setIgnoreHidden(!0),this.noDrawOnSingleAddRemoves=!0,n.info(this)}return s.type="ClustererMarkerManager",s.prototype.checkKey=function(t){var e;return null==t.key?(e="gMarker.key undefined and it is REQUIRED!!",n.error(e)):void 0},s.prototype.add=function(t){return this.checkKey(t),this.clusterer.addMarker(t,this.noDrawOnSingleAddRemoves),this.propMapGMarkers.put(t.key,t),this.checkSync()},s.prototype.update=function(t){return this.remove(t),this.add(t)},s.prototype.addMany=function(t){return t.forEach(function(t){return function(e){return t.add(e)}}(this))},s.prototype.remove=function(t){var e;return this.checkKey(t),e=this.propMapGMarkers.get(t.key),e&&(this.clusterer.removeMarker(t,this.noDrawOnSingleAddRemoves),this.propMapGMarkers.remove(t.key)),this.checkSync()},s.prototype.removeMany=function(t){return t.forEach(function(t){return function(e){return t.remove(e)}}(this))},s.prototype.draw=function(){return this.clusterer.repaint()},s.prototype.clear=function(){return this.removeMany(this.getGMarkers()),this.clusterer.repaint()},s.prototype.attachEvents=function(t,i){var o,r,s;if(this.listeners=[],e.isDefined(t)&&null!=t&&e.isObject(t)){s=[];for(r in t)o=t[r],t.hasOwnProperty(r)&&e.isFunction(t[r])?(n.info(i+": Attaching event: "+r+" to clusterer"),s.push(this.listeners.push(google.maps.event.addListener(this.clusterer,r,t[r])))):s.push(void 0);return s}},s.prototype.clearEvents=function(){return r.removeEvents(this.listeners),this.listeners=[]},s.prototype.destroy=function(){return this.clearEvents(),this.clear()},s.prototype.fit=function(){return i.fit(this.getGMarkers(),this.clusterer.getMap())},s.prototype.getGMarkers=function(){return this.clusterer.getMarkers().values()},s.prototype.checkSync=function(){},s}()}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.managers").service("uiGmapGoogleMapObjectManager",[function(){var t,n;return t=[],n=[],{createMapInstance:function(i,o){var r;return r=null,0===t.length?(r=new google.maps.Map(i,o),n.push(r)):(r=t.pop(),e.element(i).append(r.getDiv()),r.setOptions(o),n.push(r)),r},recycleMapInstance:function(e){var i;if(i=n.indexOf(e),0>i)throw new Error("Expected map instance to be a previously used instance");return n.splice(i,1),t.push(e)}}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.module("uiGmapgoogle-maps.directives.api.managers").factory("uiGmapMarkerManager",["uiGmapLogger","uiGmapFitHelper","uiGmapPropMap",function(e,n,i){var o;return o=function(){function o(n,r,s){this.getGMarkers=t(this.getGMarkers,this),this.fit=t(this.fit,this),this.handleOptDraw=t(this.handleOptDraw,this),this.clear=t(this.clear,this),this.destroy=t(this.destroy,this),this.draw=t(this.draw,this),this.removeMany=t(this.removeMany,this),this.remove=t(this.remove,this),this.addMany=t(this.addMany,this),this.update=t(this.update,this),this.add=t(this.add,this),this.type=o.type,this.gMap=n,this.gMarkers=new i,this.$log=e,this.$log.info(this)}return o.type="MarkerManager",o.prototype.add=function(t,n){var i,o;if(null==n&&(n=!0),null==t.key)throw o="gMarker.key undefined and it is REQUIRED!!",e.error(o),o;return(i=this.gMarkers.get(t.key))?void 0:(this.handleOptDraw(t,n,!0),this.gMarkers.put(t.key,t))},o.prototype.update=function(t,e){return null==e&&(e=!0),this.remove(t,e),this.add(t,e)},o.prototype.addMany=function(t){return t.forEach(function(t){return function(e){return t.add(e)}}(this))},o.prototype.remove=function(t,e){return null==e&&(e=!0),this.handleOptDraw(t,e,!1),this.gMarkers.get(t.key)?this.gMarkers.remove(t.key):void 0},o.prototype.removeMany=function(t){return t.forEach(function(t){return function(e){return t.remove(e)}}(this))},o.prototype.draw=function(){var t;return t=[],this.gMarkers.each(function(e){return function(n){return n.isDrawn?void 0:n.doAdd?(n.setMap(e.gMap),n.isDrawn=!0):t.push(n)}}(this)),t.forEach(function(t){
return function(e){return e.isDrawn=!1,t.remove(e,!0)}}(this))},o.prototype.destroy=function(){return this.clear()},o.prototype.clear=function(){return this.gMarkers.each(function(t){return t.setMap(null)}),delete this.gMarkers,this.gMarkers=new i},o.prototype.handleOptDraw=function(t,e,n){return e===!0?(n?t.setMap(this.gMap):t.setMap(null),t.isDrawn=!0):(t.isDrawn=!1,t.doAdd=n)},o.prototype.fit=function(){return n.fit(this.getGMarkers(),this.gMap)},o.prototype.getGMarkers=function(){return this.gMarkers.values()},o}()}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.module("uiGmapgoogle-maps.directives.api.managers").factory("uiGmapSpiderfierMarkerManager",["uiGmapLogger","uiGmapFitHelper","uiGmapPropMap","uiGmapMarkerSpiderfier",function(i,o,r,s){var a;return a=function(){function a(e,n,o,u,l){null==n&&(n={}),this.opt_options=null!=o?o:{},this.opt_events=u,this.scope=l,this.checkSync=t(this.checkSync,this),this.isSpiderfied=t(this.isSpiderfied,this),this.getGMarkers=t(this.getGMarkers,this),this.fit=t(this.fit,this),this.destroy=t(this.destroy,this),this.attachEvents=t(this.attachEvents,this),this.clear=t(this.clear,this),this.draw=t(this.draw,this),this.removeMany=t(this.removeMany,this),this.remove=t(this.remove,this),this.addMany=t(this.addMany,this),this.update=t(this.update,this),this.add=t(this.add,this),this.type=a.type,this.markerSpiderfier=new s(e,this.opt_options),this.propMapGMarkers=new r,this.attachEvents(this.opt_events,"opt_events"),this.noDrawOnSingleAddRemoves=!0,i.info(this)}return a.type="SpiderfierMarkerManager",a.prototype.checkKey=function(t){var e;return null==t.key?(e="gMarker.key undefined and it is REQUIRED!!",i.error(e)):void 0},a.prototype.add=function(t){return t.setMap(this.markerSpiderfier.map),this.checkKey(t),this.markerSpiderfier.addMarker(t,this.noDrawOnSingleAddRemoves),this.propMapGMarkers.put(t.key,t),this.checkSync()},a.prototype.update=function(t){return this.remove(t),this.add(t)},a.prototype.addMany=function(t){return t.forEach(function(t){return function(e){return t.add(e)}}(this))},a.prototype.remove=function(t){var e;return this.checkKey(t),e=this.propMapGMarkers.get(t.key),e&&(t.setMap(null),this.markerSpiderfier.removeMarker(t,this.noDrawOnSingleAddRemoves),this.propMapGMarkers.remove(t.key)),this.checkSync()},a.prototype.removeMany=function(t){return t.forEach(function(t){return function(e){return t.remove(e)}}(this))},a.prototype.draw=function(){},a.prototype.clear=function(){return this.removeMany(this.getGMarkers())},a.prototype.attachEvents=function(t,o){return e.isDefined(t)&&null!=t&&e.isObject(t)?n.each(t,function(n){return function(r,s){return t.hasOwnProperty(s)&&e.isFunction(t[s])?(i.info(o+": Attaching event: "+s+" to markerSpiderfier"),n.markerSpiderfier.addListener(s,function(){return"spiderfy"===s||"unspiderfy"===s?n.scope.$evalAsync(t[s].apply(t,arguments)):n.scope.$evalAsync(t[s].apply(t,[arguments[0],s,arguments[0].model,arguments]))})):void 0}}(this)):void 0},a.prototype.clearEvents=function(t,n){var o,r;if(e.isDefined(t)&&null!=t&&e.isObject(t))for(r in t)o=t[r],t.hasOwnProperty(r)&&e.isFunction(t[r])&&(i.info(n+": Clearing event: "+r+" to markerSpiderfier"),this.markerSpiderfier.clearListeners(r))},a.prototype.destroy=function(){return this.clearEvents(this.opt_events,"opt_events"),this.clear()},a.prototype.fit=function(){return o.fit(this.getGMarkers(),this.markerSpiderfier.map)},a.prototype.getGMarkers=function(){return this.markerSpiderfier.getMarkers()},a.prototype.isSpiderfied=function(){return n.find(this.getGMarkers(),function(t){return null!=(null!=t?t._omsData:void 0)})},a.prototype.checkSync=function(){},a}()}])}.call(this),function(){e.module("uiGmapgoogle-maps").factory("uiGmapadd-events",["$timeout",function(t){var n,i;return n=function(e,n,i){return google.maps.event.addListener(e,n,function(){return i.apply(this,arguments),t(function(){},!0)})},i=function(t,i,o){var r;return o?n(t,i,o):(r=[],e.forEach(i,function(e,i){return r.push(n(t,i,e))}),function(){return e.forEach(r,function(t){return google.maps.event.removeListener(t)}),r=null})}}])}.call(this),function(){e.module("uiGmapgoogle-maps").factory("uiGmaparray-sync",["uiGmapadd-events",function(t){return function(n,i,o,r){var s,a,u,l,p,c,h,d,f;return l=!1,d=i.$eval(o),i["static"]||(p={set_at:function(t){var e;return!l&&(e=n.getAt(t))?e.lng&&e.lat?(d[t].latitude=e.lat(),d[t].longitude=e.lng()):d[t]=e:void 0},insert_at:function(t){var e;return!l&&(e=n.getAt(t))?e.lng&&e.lat?d.splice(t,0,{latitude:e.lat(),longitude:e.lng()}):d.splice(t,0,e):void 0},remove_at:function(t){return l?void 0:d.splice(t,1)}},"Polygon"===d.type?s=d.coordinates[0]:"LineString"===d.type&&(s=d.coordinates),a={set_at:function(t){var e;return!l&&(e=n.getAt(t),e&&e.lng&&e.lat)?(s[t][1]=e.lat(),s[t][0]=e.lng()):void 0},insert_at:function(t){var e;return!l&&(e=n.getAt(t),e&&e.lng&&e.lat)?s.splice(t,0,[e.lng(),e.lat()]):void 0},remove_at:function(t){return l?void 0:s.splice(t,1)}},h=t(n,e.isUndefined(d.type)?p:a)),c=function(t){var e,i,o,s,a,u,p,c;if(l=!0,u=n,e=!1,t){for(i=0,p=u.getLength(),s=t.length,o=Math.min(p,s),a=void 0;o>i;)c=u.getAt(i),a=t[i],"function"==typeof a.equals?a.equals(c)||(u.setAt(i,a),e=!0):c.lat()===a.latitude&&c.lng()===a.longitude||(u.setAt(i,new google.maps.LatLng(a.latitude,a.longitude)),e=!0),i++;for(;s>i;)a=t[i],"function"==typeof a.lat&&"function"==typeof a.lng?u.push(a):u.push(new google.maps.LatLng(a.latitude,a.longitude)),e=!0,i++;for(;p>i;)u.pop(),e=!0,i++}return l=!1,e?r(u):void 0},u=function(t){var e,i,o,s,a,u,p,c,h;if(l=!0,p=n,i=!1,t){for("Polygon"===d.type?e=t.coordinates[0]:"LineString"===d.type&&(e=t.coordinates),o=0,c=p.getLength(),a=e.length,s=Math.min(c,a),u=void 0;s>o;)h=p.getAt(o),u=e[o],h.lat()===u[1]&&h.lng()===u[0]||(p.setAt(o,new google.maps.LatLng(u[1],u[0])),i=!0),o++;for(;a>o;)u=e[o],p.push(new google.maps.LatLng(u[1],u[0])),i=!0,o++;for(;c>o;)p.pop(),i=!0,o++}return l=!1,i?r(p):void 0},i["static"]||(f=e.isUndefined(d.type)?i.$watchCollection(o,c):i.$watch(o,u,!0)),function(){return h&&(h(),h=null),f?(f(),f=null):void 0}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapChromeFixes",["$timeout",function(t){return{maybeRepaint:function(e){return e?(e.style.opacity=.9,t(function(){return e.style.opacity=1})):void 0}}}])}.call(this),function(){e.module("uiGmapgoogle-maps").service("uiGmapObjectIterators",function(){var t,e,i,o;return t=["length","forEach","map"],e=[],i=function(e){return e.forEach=function(i){return n.each(n.omit(e,t),function(t){return n.isFunction(t)?void 0:i(t)})},e},e.push(i),o=function(e){return e.map=function(i){return n.map(n.omit(e,t),function(t){return n.isFunction(t)?void 0:i(t)})},e},e.push(o),{slapMap:o,slapForEach:i,slapAll:function(t){return e.forEach(function(e){return e(t)}),t}}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.options.builders").service("uiGmapCommonOptionsBuilder",["uiGmapBaseObject","uiGmapLogger","uiGmapModelKey",function(i,o,r){var s;return s=function(i){function r(){return this.watchProps=t(this.watchProps,this),this.buildOpts=t(this.buildOpts,this),r.__super__.constructor.apply(this,arguments)}return n(r,i),r.prototype.props=["clickable","draggable","editable","visible",{prop:"stroke",isColl:!0}],r.prototype.getCorrectModel=function(t){return e.isDefined(null!=t?t.model:void 0)?t.model:t},r.prototype.buildOpts=function(t,n,i){var r,s,a;return null==t&&(t={}),null==i&&(i={}),this.scope?this.gMap?(r=this.getCorrectModel(this.scope),a=this.scopeOrModelVal("stroke",this.scope,r),s=e.extend(t,this.DEFAULTS,{map:this.gMap,strokeColor:null!=a?a.color:void 0,strokeOpacity:null!=a?a.opacity:void 0,strokeWeight:null!=a?a.weight:void 0}),e.forEach(e.extend(i,{clickable:!0,draggable:!1,editable:!1,"static":!1,fit:!1,visible:!0,zIndex:0,icons:[]}),function(t){return function(i,o){var a;return a=n?n[o]:t.scopeOrModelVal(o,t.scope,r),e.isUndefined(a)?s[o]=i:s[o]=r[o]}}(this)),s["static"]&&(s.editable=!1),s):void o.error("this.map not defined in CommonOptionsBuilder can not buildOpts"):void o.error("this.scope not defined in CommonOptionsBuilder can not buildOpts")},r.prototype.watchProps=function(t){return null==t&&(t=this.props),t.forEach(function(t){return function(e){return null!=t.attrs[e]||null!=t.attrs[null!=e?e.prop:void 0]?(null!=e?e.isColl:void 0)?t.scope.$watchCollection(e.prop,t.setMyOptions):t.scope.$watch(e,t.setMyOptions):void 0}}(this))},r}(r)}])}.call(this),function(){var t=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.options.builders").factory("uiGmapPolylineOptionsBuilder",["uiGmapCommonOptionsBuilder",function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.buildOpts=function(t,e){return n.__super__.buildOpts.call(this,{path:t},e,{geodesic:!1})},n}(e)}]).factory("uiGmapShapeOptionsBuilder",["uiGmapCommonOptionsBuilder",function(n){var i;return i=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.buildOpts=function(t,n,o){var r,s;return s=this.getCorrectModel(this.scope),r=n?n.fill:this.scopeOrModelVal("fill",this.scope,s),t=e.extend(t,{fillColor:null!=r?r.color:void 0,fillOpacity:null!=r?r.opacity:void 0}),i.__super__.buildOpts.call(this,t,n,o)},i}(n)}]).factory("uiGmapPolygonOptionsBuilder",["uiGmapShapeOptionsBuilder",function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.buildOpts=function(t,e){return n.__super__.buildOpts.call(this,{path:t},e,{geodesic:!1})},n}(e)}]).factory("uiGmapRectangleOptionsBuilder",["uiGmapShapeOptionsBuilder",function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.buildOpts=function(t,e){return n.__super__.buildOpts.call(this,{bounds:t},e)},n}(e)}]).factory("uiGmapCircleOptionsBuilder",["uiGmapShapeOptionsBuilder",function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.buildOpts=function(t,e,i){return n.__super__.buildOpts.call(this,{center:t,radius:e},i)},n}(e)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.options").service("uiGmapMarkerOptions",["uiGmapLogger","uiGmapGmapUtil",function(t,i){return n.extend(i,{createOptions:function(t,n,o,r){var s;return null==o&&(o={}),s=e.extend({},o,{position:null!=o.position?o.position:i.getCoords(t),visible:null!=o.visible?o.visible:i.validateCoords(t)}),null==o.icon&&null==n||(s=e.extend(s,{icon:null!=o.icon?o.icon:n})),null!=r&&(s.map=r),s},isLabel:function(t){return null!=t&&(null!=t.labelContent||null!=t.labelAnchor||null!=t.labelClass||null!=t.labelStyle||null!=t.labelVisible)}})}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapBasePolyChildModel",["uiGmapLogger","$timeout","uiGmaparray-sync","uiGmapGmapUtil","uiGmapEventsHelper",function(o,r,s,a,u){return function(o,r){var l;return l=function(o){function l(i){var o,a,l;this.scope=i.scope,this.attrs=i.attrs,this.gMap=i.gMap,this.defaults=i.defaults,this.model=i.model,a=i.gObjectChangeCb,this.isScopeModel=null!=(l=i.isScopeModel)&&l,this.clean=t(this.clean,this),this.isScopeModel&&(this.clonedModel=n.clone(this.model,!0)),this.isDragging=!1,this.internalEvents={dragend:function(t){return function(){return n.defer(function(){return t.isDragging=!1})}}(this),dragstart:function(t){return function(){return t.isDragging=!0}}(this)},o=function(t){return function(){var n;return t.isDragging?void 0:(t.pathPoints=t.convertPathPoints(t.scope.path),null!=t.gObject&&t.clean(),null!=t.scope.model&&(n=t.scope),t.pathPoints.length>0&&(t.gObject=r(t.buildOpts(t.pathPoints,n))),t.gObject?(s(t.gObject.getPath(),t.scope,"path",function(e){return t.pathPoints=e,null!=a?a():void 0}),e.isDefined(t.scope.events)&&e.isObject(t.scope.events)&&(t.listeners=t.model?u.setEvents(t.gObject,t.scope,t.model):u.setEvents(t.gObject,t.scope,t.scope)),t.internalListeners=t.model?u.setEvents(t.gObject,{events:t.internalEvents},t.model):u.setEvents(t.gObject,{events:t.internalEvents},t.scope)):void 0)}}(this),o(),this.scope.$watch("path",function(t){return function(e,i){return n.isEqual(e,i)&&t.gObject?void 0:o()}}(this),!0),!this.scope["static"]&&e.isDefined(this.scope.editable)&&this.scope.$watch("editable",function(t){return function(e,n){var i;return e!==n?(e=!t.isFalse(e),null!=(i=t.gObject)?i.setEditable(e):void 0):void 0}}(this),!0),e.isDefined(this.scope.draggable)&&this.scope.$watch("draggable",function(t){return function(e,n){var i;return e!==n?(e=!t.isFalse(e),null!=(i=t.gObject)?i.setDraggable(e):void 0):void 0}}(this),!0),e.isDefined(this.scope.visible)&&this.scope.$watch("visible",function(t){return function(e,n){var i;return e!==n&&(e=!t.isFalse(e)),null!=(i=t.gObject)?i.setVisible(e):void 0}}(this),!0),e.isDefined(this.scope.geodesic)&&this.scope.$watch("geodesic",function(t){return function(e,n){var i;return e!==n?(e=!t.isFalse(e),null!=(i=t.gObject)?i.setOptions(t.buildOpts(t.gObject.getPath())):void 0):void 0}}(this),!0),e.isDefined(this.scope.stroke)&&e.isDefined(this.scope.stroke.weight)&&this.scope.$watch("stroke.weight",function(t){return function(e,n){var i;return e!==n&&null!=(i=t.gObject)?i.setOptions(t.buildOpts(t.gObject.getPath())):void 0}}(this),!0),e.isDefined(this.scope.stroke)&&e.isDefined(this.scope.stroke.color)&&this.scope.$watch("stroke.color",function(t){return function(e,n){var i;return e!==n&&null!=(i=t.gObject)?i.setOptions(t.buildOpts(t.gObject.getPath())):void 0}}(this),!0),e.isDefined(this.scope.stroke)&&e.isDefined(this.scope.stroke.opacity)&&this.scope.$watch("stroke.opacity",function(t){return function(e,n){var i;return e!==n&&null!=(i=t.gObject)?i.setOptions(t.buildOpts(t.gObject.getPath())):void 0}}(this),!0),e.isDefined(this.scope.icons)&&this.scope.$watch("icons",function(t){return function(e,n){var i;return e!==n&&null!=(i=t.gObject)?i.setOptions(t.buildOpts(t.gObject.getPath())):void 0}}(this),!0),this.scope.$on("$destroy",function(t){return function(){return t.clean(),t.scope=null}}(this)),e.isDefined(this.scope.fill)&&e.isDefined(this.scope.fill.color)&&this.scope.$watch("fill.color",function(t){return function(e,n){return e!==n?t.gObject.setOptions(t.buildOpts(t.gObject.getPath())):void 0}}(this)),e.isDefined(this.scope.fill)&&e.isDefined(this.scope.fill.opacity)&&this.scope.$watch("fill.opacity",function(t){return function(e,n){return e!==n?t.gObject.setOptions(t.buildOpts(t.gObject.getPath())):void 0}}(this)),e.isDefined(this.scope.zIndex)&&this.scope.$watch("zIndex",function(t){return function(e,n){return e!==n?t.gObject.setOptions(t.buildOpts(t.gObject.getPath())):void 0}}(this))}return i(l,o),l.include(a),l.prototype.clean=function(){var t;return u.removeEvents(this.listeners),u.removeEvents(this.internalListeners),null!=(t=this.gObject)&&t.setMap(null),this.gObject=null},l}(o)}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.models.child").factory("uiGmapDrawFreeHandChildModel",["uiGmapLogger","$q",function(t,e){var i,o;return i=function(t,e,n){var i,o;o=new google.maps.Polyline({map:t,clickable:!1}),i=google.maps.event.addListener(t,"mousemove",function(t){return o.getPath().push(t.latLng)}),google.maps.event.addListenerOnce(t,"mouseup",function(r){var s;return google.maps.event.removeListener(i),s=o.getPath(),o.setMap(null),e.push(new google.maps.Polygon({map:t,path:s})),o=null,google.maps.event.clearListeners(t.getDiv(),"mousedown"),n()})},o=function(o,r){var s,a;return this.map=o,s=function(e){return function(){var n;return n={draggable:!1,disableDefaultUI:!0,scrollwheel:!1,disableDoubleClickZoom:!1},t.info("disabling map move"),e.map.setOptions(n)}}(this),a=function(t){return function(){var e,i;return e={draggable:!0,disableDefaultUI:!1,scrollwheel:!0,disableDoubleClickZoom:!0},null!=(i=t.deferred)&&i.resolve(),n.defer(function(){return t.map.setOptions(n.extend(e,r.options))})}}(this),this.engage=function(n){return function(o){return n.polys=o,n.deferred=e.defer(),s(),t.info("DrawFreeHandChildModel is engaged (drawing)."),google.maps.event.addDomListener(n.map.getDiv(),"mousedown",function(t){return i(n.map,n.polys,a)}),n.deferred.promise}}(this),this}}])}.call(this),function(){var i=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.child").factory("uiGmapMarkerChildModel",["uiGmapModelKey","uiGmapGmapUtil","uiGmapLogger","uiGmapEventsHelper","uiGmapPropertyAction","uiGmapMarkerOptions","uiGmapIMarker","uiGmapMarkerManager","uiGmapPromise",function(r,s,a,u,l,p,c,h,d){var f;return f=function(r){function f(t){this.internalEvents=i(this.internalEvents,this),this.setLabelOptions=i(this.setLabelOptions,this),this.setOptions=i(this.setOptions,this),this.setIcon=i(this.setIcon,this),this.setCoords=i(this.setCoords,this),this.isNotValid=i(this.isNotValid,this),this.maybeSetScopeValue=i(this.maybeSetScopeValue,this),this.createMarker=i(this.createMarker,this),this.setMyScope=i(this.setMyScope,this),this.updateModel=i(this.updateModel,this),this.handleModelChanges=i(this.handleModelChanges,this),this.destroy=i(this.destroy,this);var e,o,r,s,u,p,c;c=t.scope,this.model=t.model,this.keys=t.keys,this.gMap=t.gMap,this.defaults=null!=(o=t.defaults)?o:{},this.doClick=t.doClick,this.gManager=t.gManager,this.doDrawSelf=null==(r=t.doDrawSelf)||r,this.trackModel=null==(s=t.trackModel)||s,this.needRedraw=null!=(u=t.needRedraw)&&u,this.isScopeModel=null!=(p=t.isScopeModel)&&p,this.isScopeModel&&(this.clonedModel=n.clone(this.model,!0)),this.deferred=d.defer(),n.each(this.keys,function(t){return function(e,i){var o;return o=t.keys[i],null!=o&&!n.isFunction(o)&&n.isString(o)?t[i+"Key"]=o:void 0}}(this)),this.idKey=this.idKeyKey||"id",null!=this.model[this.idKey]&&(this.id=this.model[this.idKey]),f.__super__.constructor.call(this,c),this.scope.getGMarker=function(t){return function(){return t.gObject}}(this),this.firstTime=!0,this.trackModel?(this.scope.model=this.model,this.scope.$watch("model",function(t){return function(e,n){return e!==n?t.handleModelChanges(e,n):void 0}}(this),!0)):(e=new l(function(t){return function(e){return n.isFunction(e)&&(e="all"),t.firstTime?void 0:t.setMyScope(e,c)}}(this),!1),n.each(this.keys,function(t,n){return c.$watch(n,e.sic(n),!0)})),this.scope.$on("$destroy",function(t){return function(){return g(t)}}(this)),this.createMarker(this.model),a.info(this)}var g;return o(f,r),f.include(s),f.include(u),f.include(p),g=function(t){return null!=(null!=t?t.gObject:void 0)&&(t.removeEvents(t.externalListeners),t.removeEvents(t.internalListeners),null!=t?t.gObject:void 0)?(t.removeFromManager&&t.gManager.remove(t.gObject),t.gObject.setMap(null),t.gObject=null):void 0},f.prototype.destroy=function(t){return null==t&&(t=!0),this.removeFromManager=t,this.scope.$destroy()},f.prototype.handleModelChanges=function(t,e){var i,o,r;return i=this.getChanges(t,e,c.keys),this.firstTime?void 0:(o=0,r=n.keys(i).length,n.each(i,function(n){return function(i,s){var a;return o+=1,a=r===o,n.setMyScope(s,t,e,!1,!0,a),n.needRedraw=!0}}(this)))},f.prototype.updateModel=function(t){return this.isScopeModel&&(this.clonedModel=n.clone(t,!0)),this.setMyScope("all",t,this.model)},f.prototype.renderGMarker=function(e,n){var i,o,r;if(null==e&&(e=!0),i=this.getProp("coords",this.scope,this.model),null!=(null!=(r=this.gManager)?r.isSpiderfied:void 0)&&(o=this.gManager.isSpiderfied()),null!=i){if(!this.validateCoords(i))return void a.debug("MarkerChild does not have coords yet. They may be defined later.");if(null!=n&&n(),e&&this.gObject&&this.gManager.add(this.gObject),o)return this.gManager.markerSpiderfier.spiderListener(this.gObject,t.event)}else if(e&&this.gObject)return this.gManager.remove(this.gObject)},f.prototype.setMyScope=function(t,e,i,o,r){var s;switch(null==i&&(i=void 0),null==o&&(o=!1),null==r&&(r=!0),null==e?e=this.model:this.model=e,this.gObject||(this.setOptions(this.scope,r),s=!0),t){case"all":return n.each(this.keys,function(t){return function(n,s){return t.setMyScope(s,e,i,o,r)}}(this));case"icon":return this.maybeSetScopeValue({gSetter:this.setIcon,doDraw:r});case"coords":return this.maybeSetScopeValue({gSetter:this.setCoords,doDraw:r});case"options":if(!s)return this.createMarker(e,i,o,r)}},f.prototype.createMarker=function(t,e,n,i){return null==e&&(e=void 0),null==n&&(n=!1),null==i&&(i=!0),this.maybeSetScopeValue({gSetter:this.setOptions,doDraw:i}),this.firstTime=!1},f.prototype.maybeSetScopeValue=function(t){var e,n,i;return n=t.gSetter,e=null==(i=t.doDraw)||i,null!=n&&n(this.scope,e),this.doDrawSelf&&e?this.gManager.draw():void 0},f.prototype.isNotValid=function(t,e){var n,i;return null==e&&(e=!0),i=!!e&&void 0===this.gObject,n=!this.trackModel&&t.$id!==this.scope.$id,n||i},f.prototype.setCoords=function(t,e){return null==e&&(e=!0),this.isNotValid(t)||null==this.gObject?void 0:this.renderGMarker(e,function(e){return function(){var n,i,o;return i=e.getProp("coords",t,e.model),n=e.getCoords(i),o=e.gObject.getPosition(),null==o||null==n||n.lng()!==o.lng()||n.lat()!==o.lat()?(e.gObject.setPosition(n),e.gObject.setVisible(e.validateCoords(i))):void 0}}(this))},f.prototype.setIcon=function(t,e){return null==e&&(e=!0),this.isNotValid(t)||null==this.gObject?void 0:this.renderGMarker(e,function(e){return function(){var n,i,o;return o=e.gObject.getIcon(),i=e.getProp("icon",t,e.model),o!==i?(e.gObject.setIcon(i),n=e.getProp("coords",t,e.model),e.gObject.setPosition(e.getCoords(n)),e.gObject.setVisible(e.validateCoords(n))):void 0}}(this))},f.prototype.setOptions=function(t,e){var i;if(null==e&&(e=!0),!this.isNotValid(t,!1)){if(this.renderGMarker(e,function(e){return function(){var i,o,r;return o=e.getProp("coords",t,e.model),r=e.getProp("icon",t,e.model),i=e.getProp("options",t,e.model),e.opts=e.createOptions(o,r,i),e.isLabel(e.gObject)!==e.isLabel(e.opts)&&null!=e.gObject&&(e.gManager.remove(e.gObject),e.gObject=void 0),null!=e.gObject&&e.gObject.setOptions(e.setLabelOptions(e.opts)),e.gObject||(e.isLabel(e.opts)?e.gObject=new MarkerWithLabel(e.setLabelOptions(e.opts)):e.opts.content?(e.gObject=new RichMarker(e.opts),e.gObject.getIcon=e.gObject.getContent,e.gObject.setIcon=e.gObject.setContent):e.gObject=new google.maps.Marker(e.opts),n.extend(e.gObject,{model:e.model})),e.externalListeners&&e.removeEvents(e.externalListeners),e.internalListeners&&e.removeEvents(e.internalListeners),e.externalListeners=e.setEvents(e.gObject,e.scope,e.model,["dragend"]),e.internalListeners=e.setEvents(e.gObject,{events:e.internalEvents(),$evalAsync:function(){}},e.model),null!=e.id?e.gObject.key=e.id:void 0}}(this)),this.gObject&&(this.gObject.getMap()||this.gManager.type!==h.type))this.deferred.resolve(this.gObject);else{if(!this.gObject)return this.deferred.reject("gObject is null");null!=(i=this.gObject)&&i.getMap()&&this.gManager.type===h.type||(a.debug("gObject has no map yet"),this.deferred.resolve(this.gObject))}return this.model[this.fitKey]?this.gManager.fit():void 0}},f.prototype.setLabelOptions=function(t){return t.labelAnchor&&(t.labelAnchor=this.getLabelPositionPoint(t.labelAnchor)),t},f.prototype.internalEvents=function(){return{dragend:function(t){return function(e,n,i,o){var r,s,a;return s=t.trackModel?t.scope.model:t.model,a=t.setCoordsFromEvent(t.modelOrKey(s,t.coordsKey),t.gObject.getPosition()),s=t.setVal(i,t.coordsKey,a),r=t.scope.events,null!=(null!=r?r.dragend:void 0)&&r.dragend(e,n,s,o),t.scope.$apply()}}(this),click:function(t){return function(n,i,o,r){var s;return s=t.getProp("click",t.scope,t.model),t.doClick&&e.isFunction(s)?t.scope.$evalAsync(s(n,i,t.model,r)):void 0}}(this)}},f}(r)}])}.call(this),function(){var t=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolygonChildModel",["uiGmapBasePolyChildModel","uiGmapPolygonOptionsBuilder",function(e,n){var i,o,r;return r=function(t){return new google.maps.Polygon(t)},o=new e(n,r),i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(o)}])}.call(this),function(){var t=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolylineChildModel",["uiGmapBasePolyChildModel","uiGmapPolylineOptionsBuilder",function(e,n){var i,o,r;return r=function(t){return new google.maps.Polyline(t)},o=e(n,r),i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(o)}])}.call(this),function(){var i=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.child").factory("uiGmapWindowChildModel",["uiGmapBaseObject","uiGmapGmapUtil","uiGmapLogger","$compile","$http","$templateCache","uiGmapChromeFixes","uiGmapEventsHelper",function(r,s,a,u,l,p,c,h){var d;return d=function(r){function d(t){this.updateModel=i(this.updateModel,this),this.destroy=i(this.destroy,this),this.remove=i(this.remove,this),this.getLatestPosition=i(this.getLatestPosition,this),this.hideWindow=i(this.hideWindow,this),this.showWindow=i(this.showWindow,this),this.handleClick=i(this.handleClick,this),this.watchOptions=i(this.watchOptions,this),this.watchCoords=i(this.watchCoords,this),this.createGWin=i(this.createGWin,this),this.watchElement=i(this.watchElement,this),this.watchAndDoShow=i(this.watchAndDoShow,this),this.doShow=i(this.doShow,this);var e,o,r,s,u;this.model=null!=(o=t.model)?o:{},this.scope=t.scope,this.opts=t.opts,this.isIconVisibleOnClick=t.isIconVisibleOnClick,this.gMap=t.gMap,this.markerScope=t.markerScope,this.element=t.element,this.needToManualDestroy=null!=(r=t.needToManualDestroy)&&r,this.markerIsVisibleAfterWindowClose=null==(s=t.markerIsVisibleAfterWindowClose)||s,this.isScopeModel=null!=(u=t.isScopeModel)&&u,this.isScopeModel&&(this.clonedModel=n.clone(this.model,!0)),this.getGmarker=function(){var t,e;return null!=(null!=(t=this.markerScope)?t.getGMarker:void 0)&&null!=(e=this.markerScope)?e.getGMarker():void 0},this.listeners=[],this.createGWin(),e=this.getGmarker(),null!=e&&e.setClickable(!0),this.watchElement(),this.watchOptions(),this.watchCoords(),this.watchAndDoShow(),this.scope.$on("$destroy",function(t){return function(){return t.destroy()}}(this)),a.info(this)}return o(d,r),d.include(s),d.include(h),d.prototype.doShow=function(t){return this.scope.show===!0||t?this.showWindow():this.hideWindow()},d.prototype.watchAndDoShow=function(){return null!=this.model.show&&(this.scope.show=this.model.show),this.scope.$watch("show",this.doShow,!0),this.doShow()},d.prototype.watchElement=function(){return this.scope.$watch(function(t){return function(){var e,n;return(t.element||t.html)&&t.html!==t.element.html()&&t.gObject?(null!=(e=t.opts)&&(e.content=void 0),n=t.gObject.isOpen(),t.remove(),t.createGWin(n)):void 0}}(this))},d.prototype.createGWin=function(e){var i,o,r,s,a;return null==e&&(e=!1),r=this.getGmarker(),o={},null!=this.opts&&(this.scope.coords&&(this.opts.position=this.getCoords(this.scope.coords)),o=this.opts),this.element&&(this.html=n.isObject(this.element)?this.element.html():this.element),i=this.scope.options?this.scope.options:o,this.opts=this.createWindowOptions(r,this.markerScope||this.scope,this.html,i),null!=this.opts?(this.gObject||(this.opts.boxClass&&t.InfoBox&&"function"==typeof t.InfoBox?this.gObject=new t.InfoBox(this.opts):this.gObject=new google.maps.InfoWindow(this.opts),this.listeners.push(google.maps.event.addListener(this.gObject,"domready",function(){return c.maybeRepaint(this.content)})),this.listeners.push(google.maps.event.addListener(this.gObject,"closeclick",function(t){return function(){return r&&(r.setAnimation(t.oldMarkerAnimation),t.markerIsVisibleAfterWindowClose&&n.delay(function(){return r.setVisible(!1),r.setVisible(t.markerIsVisibleAfterWindowClose)},250)),t.gObject.close(),t.model.show=!1,null!=t.scope.closeClick?t.scope.$evalAsync(t.scope.closeClick()):t.scope.$evalAsync()}}(this)))),this.gObject.setContent(this.opts.content),this.handleClick((null!=(s=this.scope)&&null!=(a=s.options)?a.forceClick:void 0)||e),this.doShow(this.gObject.isOpen())):void 0},d.prototype.watchCoords=function(){var t;return t=null!=this.markerScope?this.markerScope:this.scope,t.$watch("coords",function(t){return function(e,n){var i;if(e!==n){if(null==e)t.hideWindow();else if(!t.validateCoords(e))return void a.error("WindowChildMarker cannot render marker as scope.coords as no position on marker: "+JSON.stringify(t.model));if(i=t.getCoords(e),t.doShow(),t.gObject.setPosition(i),t.opts)return t.opts.position=i}}}(this),!0)},d.prototype.watchOptions=function(){return this.scope.$watch("options",function(t){return function(e,n){if(e!==n&&(t.opts=e,null!=t.gObject)){if(t.gObject.setOptions(t.opts),null!=t.opts.visible&&t.opts.visible)return t.showWindow();if(null!=t.opts.visible)return t.hideWindow()}}}(this),!0)},d.prototype.handleClick=function(t){var e,n;return null!=this.gObject?(n=this.getGmarker(),e=function(t){return function(){return null==t.gObject&&t.createGWin(),t.showWindow(),null!=n?(t.initialMarkerVisibility=n.getVisible(),t.oldMarkerAnimation=n.getAnimation(),n.setVisible(t.isIconVisibleOnClick)):void 0}}(this),t&&e(),n?this.listeners=this.listeners.concat(this.setEvents(n,{events:{click:e}},this.model)):void 0):void 0},d.prototype.showWindow=function(){var t,n,i;return null!=this.gObject?(i=null,n=function(t){return function(){var e,n,i;if(!t.gObject.isOpen()){if(n=t.getGmarker(),null!=t.gObject&&null!=t.gObject.getPosition&&(i=t.gObject.getPosition()),n&&(i=n.getPosition()),!i)return;if(t.gObject.open(t.gMap,n),e=t.gObject.isOpen(),t.model.show!==e)return t.model.show=e}}}(this),this.scope.templateUrl?l.get(this.scope.templateUrl,{cache:p}).then(function(t){return function(o){var r;return i=t.scope.$new(),e.isDefined(t.scope.templateParameter)&&(i.parameter=t.scope.templateParameter),r=u(o.data)(i),t.gObject.setContent(r[0]),n()}}(this)):this.scope.template?(i=this.scope.$new(),e.isDefined(this.scope.templateParameter)&&(i.parameter=this.scope.templateParameter),t=u(this.scope.template)(i),this.gObject.setContent(t[0]),n()):n(),this.scope.$on("destroy",function(){return i.$destroy()})):void 0},d.prototype.hideWindow=function(){return null!=this.gObject&&this.gObject.isOpen()?this.gObject.close():void 0},d.prototype.getLatestPosition=function(t){var e;return e=this.getGmarker(),null==this.gObject||null==e||t?t?this.gObject.setPosition(t):void 0:this.gObject.setPosition(e.getPosition())},d.prototype.remove=function(){return this.hideWindow(),this.removeEvents(this.listeners),
this.listeners.length=0,delete this.gObject,delete this.opts},d.prototype.destroy=function(t){var e;return null==t&&(t=!1),this.remove(),null==this.scope||(null!=(e=this.scope)?e.$$destroyed:void 0)||!this.needToManualDestroy&&!t?void 0:this.scope.$destroy()},d.prototype.updateModel=function(t){return this.isScopeModel&&(this.clonedModel=n.clone(t,!0)),n.extend(this.model,this.clonedModel||t)},d}(r)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapBasePolysParentModel",["$timeout","uiGmapLogger","uiGmapModelKey","uiGmapModelsWatcher","uiGmapPropMap","uiGmap_async","uiGmapPromise","uiGmapFitHelper",function(o,r,s,a,u,l,p,c){return function(o,h,d){var f;return f=function(s){function f(e,i,s,a,l){this.element=i,this.attrs=s,this.gMap=a,this.defaults=l,this.maybeFit=t(this.maybeFit,this),this.createChild=t(this.createChild,this),this.pieceMeal=t(this.pieceMeal,this),this.createAllNew=t(this.createAllNew,this),this.watchIdKey=t(this.watchIdKey,this),this.createChildScopes=t(this.createChildScopes,this),this.watchDestroy=t(this.watchDestroy,this),this.onDestroy=t(this.onDestroy,this),this.rebuildAll=t(this.rebuildAll,this),this.doINeedToWipe=t(this.doINeedToWipe,this),this.watchModels=t(this.watchModels,this),f.__super__.constructor.call(this,e),this["interface"]=o,this.$log=r,this.plurals=new u,n.each(o.scopeKeys,function(t){return function(e){return t[e+"Key"]=void 0}}(this)),this.models=void 0,this.firstTime=!0,this.$log.info(this),this.createChildScopes()}return i(f,s),f.include(a),f.prototype.watchModels=function(t){return t.$watch("models",function(e){return function(n,i){return n!==i?e.doINeedToWipe(n)||t.doRebuildAll?e.rebuildAll(t,!0,!0):e.createChildScopes(!1):void 0}}(this),!0)},f.prototype.doINeedToWipe=function(t){var e;return e=null==t||0===t.length,this.plurals.length>0&&e},f.prototype.rebuildAll=function(t,e,n){return this.onDestroy(n).then(function(t){return function(){return e?t.createChildScopes():void 0}}(this))},f.prototype.onDestroy=function(){return f.__super__.onDestroy.call(this,this.scope),l.promiseLock(this,p.promiseTypes["delete"],void 0,void 0,function(t){return function(){return l.each(t.plurals.values(),function(t){return t.destroy(!0)},l.chunkSizeFrom(t.scope.cleanchunk,!1)).then(function(){var e;return null!=(e=t.plurals)?e.removeAll():void 0})}}(this))},f.prototype.watchDestroy=function(t){return t.$on("$destroy",function(e){return function(){return e.rebuildAll(t,!1,!0)}}(this))},f.prototype.createChildScopes=function(t){return null==t&&(t=!0),e.isUndefined(this.scope.models)?void this.$log.error("No models to create "+d+"s from! I Need direct models!"):null!=this.gMap&&null!=this.scope.models?(this.watchIdKey(this.scope),t?this.createAllNew(this.scope,!1):this.pieceMeal(this.scope,!1)):void 0},f.prototype.watchIdKey=function(t){return this.setIdKey(t),t.$watch("idKey",function(e){return function(n,i){return n!==i&&null==n?(e.idKey=n,e.rebuildAll(t,!0,!0)):void 0}}(this))},f.prototype.createAllNew=function(t,e){var n;return null==e&&(e=!1),this.models=t.models,this.firstTime&&(this.watchModels(t),this.watchDestroy(t)),this.didQueueInitPromise(this,t)?void 0:(n=null,l.promiseLock(this,p.promiseTypes.create,"createAllNew",function(t){return n=t},function(e){return function(){return l.map(t.models,function(t){var i;return i=e.createChild(t,e.gMap),n&&(r.debug("createNew should fall through safely"),i.isEnabled=!1),i.pathPoints.getArray()},l.chunkSizeFrom(t.chunk)).then(function(t){return e.maybeFit(t),e.firstTime=!1})}}(this)))},f.prototype.pieceMeal=function(t,e){var i,o;return null==e&&(e=!0),t.$$destroyed?void 0:(i=null,o=null,this.models=t.models,null!=t&&this.modelsLength()&&this.plurals.length?l.promiseLock(this,p.promiseTypes.update,"pieceMeal",function(t){return i=t},function(e){return function(){return p.promise(function(){return e.figureOutState(e.idKey,t,e.plurals,e.modelKeyComparison)}).then(function(r){return o=r,o.updates.length&&l.each(o.updates,function(t){return n.extend(t.child.scope,t.model),t.child.model=t.model}),l.each(o.removals,function(t){return null!=t?(t.destroy(),e.plurals.remove(t.model[e.idKey]),i):void 0},l.chunkSizeFrom(t.chunk))}).then(function(){return l.each(o.adds,function(t){return i&&r.debug("pieceMeal should fall through safely"),e.createChild(t,e.gMap),i},l.chunkSizeFrom(t.chunk)).then(function(){return e.maybeFit()})})}}(this)):(this.inProgress=!1,this.rebuildAll(this.scope,!0,!0)))},f.prototype.createChild=function(t,e){var n,i;return i=this.scope.$new(!1),this.setChildScope(o.scopeKeys,i,t),i.$watch("model",function(t){return function(e,n){return e!==n?t.setChildScope(o.scopeKeys,i,e):void 0}}(this),!0),i["static"]=this.scope["static"],n=new h({isScopeModel:!0,scope:i,attrs:this.attrs,gMap:e,defaults:this.defaults,model:t,gObjectChangeCb:function(t){return function(){return t.maybeFit()}}(this)}),null==t[this.idKey]?void this.$log.error(d+" model has no id to assign a child to.\nThis is required for performance. Please assign id,\nor redirect id to a different key."):(this.plurals.put(t[this.idKey],n),n)},f.prototype.maybeFit=function(t){return null==t&&(t=this.plurals.map(function(t){return t.pathPoints})),this.scope.fit?(t=n.flatten(t),c.fit(t,this.gMap)):void 0},f}(s)}}])}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapCircleParentModel",["uiGmapLogger","$timeout","uiGmapGmapUtil","uiGmapEventsHelper","uiGmapCircleOptionsBuilder",function(i,o,r,s,a){var u,l;return l=function(t,e){return t.settingFromDirective=!0,e(),o(function(){return t.settingFromDirective=!1})},u=function(o){function a(t,o,s,a,u){var p,c,h;this.attrs=s,this.gMap=a,this.DEFAULTS=u,this.scope=t,h=null,p=function(t){return function(){return h=null,null!=t.listeners?(t.removeEvents(t.listeners),t.listeners=void 0):void 0}}(this),c=new google.maps.Circle(this.buildOpts(r.getCoords(t.center),t.radius)),this.setMyOptions=function(e){return function(i,o){return t.settingFromDirective?void 0:!n.isEqual(i,o)||i!==o||null!=i&&null!=o&&i.coordinates!==o.coordinates?c.setOptions(e.buildOpts(r.getCoords(t.center),t.radius)):void 0}}(this),this.props=this.props.concat([{prop:"center",isColl:!0},{prop:"fill",isColl:!0},"radius","zIndex"]),this.watchProps(),null!=this.scope.control&&(this.scope.control.getCircle=function(){return c}),p(),this.listeners=this.setEvents(c,t,t,["radius_changed"])||[],this.listeners.push(google.maps.event.addListener(c,"radius_changed",function(){var i,o;return i=c.getRadius(),i!==h?(h=i,o=function(){return l(t,function(){var e,o;return i!==t.radius&&(t.radius=i),(null!=(e=t.events)?e.radius_changed:void 0)&&n.isFunction(null!=(o=t.events)?o.radius_changed:void 0)?t.events.radius_changed(c,"radius_changed",t,arguments):void 0})},e.mock?o():t.$evalAsync(function(){return o()})):void 0})),this.listeners.push(google.maps.event.addListener(c,"center_changed",function(){return t.$evalAsync(function(){return l(t,function(){return e.isDefined(t.center.type)?(t.center.coordinates[1]=c.getCenter().lat(),t.center.coordinates[0]=c.getCenter().lng()):(t.center.latitude=c.getCenter().lat(),t.center.longitude=c.getCenter().lng())})})})),t.$on("$destroy",function(){return p(),c.setMap(null)}),i.info(this)}return t(a,o),a.include(r),a.include(s),a}(a)}])}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapDrawingManagerParentModel",["uiGmapLogger","$timeout","uiGmapBaseObject","uiGmapEventsHelper",function(e,i,o,r){var s;return s=function(e){function i(t,e,i,o){var r,s;this.scope=t,this.attrs=i,this.map=o,r=new google.maps.drawing.DrawingManager(this.scope.options),r.setMap(this.map),s=void 0,null!=this.scope.control&&(this.scope.control.getDrawingManager=function(){return r}),!this.scope["static"]&&this.scope.options&&this.scope.$watch("options",function(t){return null!=r?r.setOptions(t):void 0},!0),null!=this.scope.events&&(s=this.setEvents(r,this.scope,this.scope),this.scope.$watch("events",function(t){return function(e,i){return n.isEqual(e,i)?void 0:(null!=s&&t.removeEvents(s),s=t.setEvents(r,t.scope,t.scope))}}(this))),this.scope.$on("$destroy",function(t){return function(){return null!=s&&t.removeEvents(s),r.setMap(null),r=null}}(this))}return t(i,e),i.include(r),i}(o)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapIMarkerParentModel",["uiGmapModelKey","uiGmapLogger",function(o,r){var s;return s=function(o){function s(n,i,o,a){if(this.scope=n,this.element=i,this.attrs=o,this.map=a,this.onWatch=t(this.onWatch,this),this.watch=t(this.watch,this),this.validateScope=t(this.validateScope,this),s.__super__.constructor.call(this,this.scope),this.$log=r,!this.validateScope(this.scope))throw new String("Unable to construct IMarkerParentModel due to invalid scope");this.doClick=e.isDefined(this.attrs.click),null!=this.scope.options&&(this.DEFAULTS=this.scope.options),this.watch("coords",this.scope),this.watch("icon",this.scope),this.watch("options",this.scope),this.scope.$on("$destroy",function(t){return function(){return t.onDestroy(t.scope)}}(this))}return i(s,o),s.prototype.DEFAULTS={},s.prototype.validateScope=function(t){var e;return null==t?(this.$log.error(this.constructor.name+": invalid scope used"),!1):(e=null!=t.coords,e?e:(this.$log.error(this.constructor.name+": no valid coords attribute found"),!1))},s.prototype.watch=function(t,e,i){return null==i&&(i=!0),e.$watch(t,function(i){return function(o,r){return n.isEqual(o,r)?void 0:i.onWatch(t,e,o,r)}}(this),i)},s.prototype.onWatch=function(t,e,n,i){},s}(o)}])}.call(this),function(){var t=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapIWindowParentModel",["uiGmapModelKey","uiGmapGmapUtil","uiGmapLogger",function(e,n,i){var o;return o=function(e){function o(t,e,n,r,s,a,u,l){o.__super__.constructor.call(this,t),this.$log=i,this.$timeout=s,this.$compile=a,this.$http=u,this.$templateCache=l,this.DEFAULTS={},null!=t.options&&(this.DEFAULTS=t.options)}return t(o,e),o.include(n),o.prototype.getItem=function(t,e,n){return"models"===e?t[e][n]:t[e].get(n)},o}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapLayerParentModel",["uiGmapBaseObject","uiGmapLogger","$timeout",function(i,o,r){var s;return s=function(i){function r(n,i,r,s,a,u){return this.scope=n,this.element=i,this.attrs=r,this.gMap=s,this.onLayerCreated=null!=a?a:void 0,this.$log=null!=u?u:o,this.createGoogleLayer=t(this.createGoogleLayer,this),null==this.attrs.type?void this.$log.info("type attribute for the layer directive is mandatory. Layer creation aborted!!"):(this.createGoogleLayer(),this.doShow=!0,e.isDefined(this.attrs.show)&&(this.doShow=this.scope.show),this.doShow&&null!=this.gMap&&this.gObject.setMap(this.gMap),this.scope.$watch("show",function(t){return function(e,n){return e!==n?(t.doShow=e,e?t.gObject.setMap(t.gMap):t.gObject.setMap(null)):void 0}}(this),!0),this.scope.$watch("options",function(t){return function(e,n){return e!==n&&t.doShow?t.gObject.setOptions(e):void 0}}(this),!0),void this.scope.$on("$destroy",function(t){return function(){return t.gObject.setMap(null)}}(this)))}return n(r,i),r.prototype.createGoogleLayer=function(){var t;return null==this.attrs.options?this.gObject=void 0===this.attrs.namespace?new google.maps[this.attrs.type]:new google.maps[this.attrs.namespace][this.attrs.type]:this.gObject=void 0===this.attrs.namespace?new google.maps[this.attrs.type](this.scope.options):new google.maps[this.attrs.namespace][this.attrs.type](this.scope.options),null!=this.gObject&&this.doShow&&this.gObject.setMap(this.gMap),null!=this.gObject&&null!=this.onLayerCreated&&"function"==typeof(t=this.onLayerCreated(this.scope,this.gObject))?t(this.gObject):void 0},r}(i)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapMapTypeParentModel",["uiGmapBaseObject","uiGmapLogger",function(o,r){var s;return s=function(o){function s(i,o,s,a,u,l,p){var c,h,d,f;return this.scope=i,this.element=o,this.attrs=s,this.gMap=a,this.$log=null!=u?u:r,this.childModel=l,this.propMap=p,this.refreshShown=t(this.refreshShown,this),this.hideOverlay=t(this.hideOverlay,this),this.showOverlay=t(this.showOverlay,this),this.refreshMapType=t(this.refreshMapType,this),this.createMapType=t(this.createMapType,this),null==this.scope.options?void this.$log.info("options attribute for the map-type directive is mandatory. Map type creation aborted!!"):(this.id=this.gMap.overlayMapTypesCount=this.gMap.overlayMapTypesCount+1||0,this.doShow=!0,this.createMapType(),this.refreshShown(),this.doShow&&null!=this.gMap&&this.showOverlay(),h=function(t){return function(){return t.childModel[t.attrs.show]}}(this),f=this.childModel?h:"show",this.scope.$watch(f,function(t){return function(e,n){return e!==n?(t.doShow=e,e?t.showOverlay():t.hideOverlay()):void 0}}(this)),c=function(t){return function(){return t.childModel[t.attrs.options]}}(this),d=this.childModel?c:"options",this.scope.$watchCollection(d,function(t){return function(e,i){var o,r;return!n.isEqual(e,i)&&(r=["tileSize","maxZoom","minZoom","name","alt"],o=n.some(r,function(t){return!i||!e||!n.isEqual(e[t],i[t])}))?t.refreshMapType():void 0}}(this)),e.isDefined(this.attrs.refresh)&&this.scope.$watch("refresh",function(t){return function(e,i){return n.isEqual(e,i)?void 0:t.refreshMapType()}}(this),!0),void this.scope.$on("$destroy",function(t){return function(){return t.hideOverlay(),t.mapType=null}}(this)))}return i(s,o),s.prototype.createMapType=function(){var t,n,i;if(i=this.childModel?this.attrs.options?this.childModel[this.attrs.options]:this.childModel:this.scope.options,null!=i.getTile)this.mapType=i;else{if(null==i.getTileUrl)return void this.$log.info("options should provide either getTile or getTileUrl methods. Map type creation aborted!!");this.mapType=new google.maps.ImageMapType(i)}return n=this.attrs.id?this.childModel?this.attrs.id:"id":void 0,t=n?this.childModel?this.childModel[n]:this.scope[n]:void 0,t&&(this.gMap.mapTypes.set(t,this.mapType),e.isDefined(this.attrs.show)||(this.doShow=!1)),this.mapType.layerId=this.id,this.childModel&&e.isDefined(this.scope.index)?this.propMap.put(this.mapType.layerId,this.scope.index):void 0},s.prototype.refreshMapType=function(){return this.hideOverlay(),this.mapType=null,this.createMapType(),this.doShow&&null!=this.gMap?this.showOverlay():void 0},s.prototype.showOverlay=function(){var t;return e.isDefined(this.scope.index)?(t=!1,this.gMap.overlayMapTypes.getLength()?(this.gMap.overlayMapTypes.forEach(function(n){return function(i,o){var r;t||(r=n.propMap.get(i.layerId.toString()),(r>n.scope.index||!e.isDefined(r))&&(t=!0,n.gMap.overlayMapTypes.insertAt(o,n.mapType)))}}(this)),t?void 0:this.gMap.overlayMapTypes.push(this.mapType)):this.gMap.overlayMapTypes.push(this.mapType)):this.gMap.overlayMapTypes.push(this.mapType)},s.prototype.hideOverlay=function(){var t;return t=!1,this.gMap.overlayMapTypes.forEach(function(e){return function(n,i){t||n.layerId!==e.id||(t=!0,e.gMap.overlayMapTypes.removeAt(i))}}(this))},s.prototype.refreshShown=function(){return this.doShow=!e.isDefined(this.attrs.show)||(this.childModel?this.childModel[this.attrs.show]:this.scope.show)},s}(o)}])}.call(this),function(){var t=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapMapTypesParentModel",["uiGmapBaseObject","uiGmapLogger","uiGmapMapTypeParentModel","uiGmapPropMap",function(e,n,i,o){var r;return r=function(e){function r(t,e,r,s,a){var u;return this.scope=t,this.element=e,this.attrs=r,this.gMap=s,this.$log=null!=a?a:n,null==this.attrs.mapTypes?void this.$log.info("layers attribute for the map-types directive is mandatory. Map types creation aborted!!"):(u=new o,void this.scope.mapTypes.forEach(function(t){return function(e,n){var o,r;r={options:t.scope.options,show:t.scope.show,refresh:t.scope.refresh},o=t.scope.$new(),o.index=n,new i(o,null,r,t.gMap,t.$log,e,u)}}(this)))}return t(r,e),r}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapMarkersParentModel",["uiGmapIMarkerParentModel","uiGmapModelsWatcher","uiGmapPropMap","uiGmapMarkerChildModel","uiGmap_async","uiGmapClustererMarkerManager","uiGmapMarkerManager","$timeout","uiGmapIMarker","uiGmapPromise","uiGmapGmapUtil","uiGmapLogger","uiGmapSpiderfierMarkerManager",function(o,r,s,a,u,l,p,c,h,d,f,g,m){var v,y;return y=function(t,e){return e.plurals=new s,e.scope.plurals=e.plurals,e},v=function(o){function c(e,i,o,r){this.maybeExecMappedEvent=t(this.maybeExecMappedEvent,this),this.onDestroy=t(this.onDestroy,this),this.newChildMarker=t(this.newChildMarker,this),this.pieceMeal=t(this.pieceMeal,this),this.rebuildAll=t(this.rebuildAll,this),this.createAllNew=t(this.createAllNew,this),this.bindToTypeEvents=t(this.bindToTypeEvents,this),this.createChildScopes=t(this.createChildScopes,this),this.validateScope=t(this.validateScope,this),this.onWatch=t(this.onWatch,this),c.__super__.constructor.call(this,e,i,o,r),this["interface"]=h,y(new s,this),this.scope.pluralsUpdate={updateCtr:0},this.$log.info(this),this.doRebuildAll=null!=this.scope.doRebuildAll&&this.scope.doRebuildAll,this.setIdKey(this.scope),this.scope.$watch("doRebuildAll",function(t){return function(e,n){return e!==n?t.doRebuildAll=e:void 0}}(this)),this.modelsLength()||(this.modelsRendered=!1),this.scope.$watch("models",function(t){return function(e,i){if(!n.isEqual(e,i)||!t.modelsRendered){if(0===e.length&&0===i.length)return;return t.modelsRendered=!0,t.onWatch("models",t.scope,e,i)}}}(this),!this.isTrue(o.modelsbyref)),this.watch("doCluster",this.scope),this.watch("type",this.scope),this.watch("clusterOptions",this.scope),this.watch("clusterEvents",this.scope),this.watch("typeOptions",this.scope),this.watch("typeEvents",this.scope),this.watch("fit",this.scope),this.watch("idKey",this.scope),this.gManager=void 0,this.createAllNew(this.scope)}return i(c,o),c.include(f),c.include(r),c.prototype.onWatch=function(t,e,n,i){return"idKey"===t&&n!==i&&(this.idKey=n),this.doRebuildAll||"doCluster"===t||"type"===t?this.rebuildAll(e):this.pieceMeal(e)},c.prototype.validateScope=function(t){var n;return n=e.isUndefined(t.models)||void 0===t.models,n&&this.$log.error(this.constructor.name+": no valid models attribute found"),c.__super__.validateScope.call(this,t)||n},c.prototype.createChildScopes=function(t){return null!=this.gMap&&null!=this.scope.models?t?this.createAllNew(this.scope,!1):this.pieceMeal(this.scope,!1):void 0},c.prototype.bindToTypeEvents=function(t,i){var o,r;return null==i&&(i=["click","mouseout","mouseover"]),r=this,this.origTypeEvents?e.extend(t,this.origTypeEvents):(this.origTypeEvents={},n.each(i,function(e){return function(n){return e.origTypeEvents[n]=null!=t?t[n]:void 0}}(this))),o={},n.each(i,function(t){return o[t]=function(e){return r.maybeExecMappedEvent(e,t)}}),e.extend(t,o)},c.prototype.createAllNew=function(t){var e,n,i,o;return null!=this.gManager&&(this.gManager instanceof m&&(e=this.gManager.isSpiderfied()),this.gManager.clear(),delete this.gManager),i=t.typeEvents||t.clusterEvents,o=t.typeOptions||t.clusterOptions,t.doCluster||"cluster"===t.type?(null!=i&&this.bindToTypeEvents(i),this.gManager=new l(this.map,void 0,o,i)):"spider"===t.type?(null!=i&&this.bindToTypeEvents(i,["spiderfy","unspiderfy"]),this.gManager=new m(this.map,void 0,o,i,this.scope),e&&this.gManager.spiderfy()):this.gManager=new p(this.map),this.didQueueInitPromise(this,t)?void 0:(n=null,u.promiseLock(this,d.promiseTypes.create,"createAllNew",function(t){return n=t},function(e){return function(){return u.each(t.models,function(i){return e.newChildMarker(i,t),n},u.chunkSizeFrom(t.chunk)).then(function(){return e.modelsRendered=!0,t.fit&&e.gManager.fit(),e.gManager.draw(),e.scope.pluralsUpdate.updateCtr+=1},u.chunkSizeFrom(t.chunk))}}(this)))},c.prototype.rebuildAll=function(t){var e;return t.doRebuild||void 0===t.doRebuild?(null!=(e=this.scope.plurals)?e.length:void 0)?this.onDestroy(t).then(function(e){return function(){return e.createAllNew(t)}}(this)):this.createAllNew(t):void 0},c.prototype.pieceMeal=function(t){var e,n;return t.$$destroyed?void 0:(e=null,n=null,this.modelsLength()&&this.scope.plurals.length?u.promiseLock(this,d.promiseTypes.update,"pieceMeal",function(t){return e=t},function(i){return function(){return d.promise(function(){return i.figureOutState(i.idKey,t,i.scope.plurals,i.modelKeyComparison)}).then(function(o){return n=o,u.each(n.removals,function(t){return null!=t?(null!=t.destroy&&t.destroy(),i.scope.plurals.remove(t.id),e):void 0},u.chunkSizeFrom(t.chunk))}).then(function(){return u.each(n.adds,function(n){return i.newChildMarker(n,t),e},u.chunkSizeFrom(t.chunk))}).then(function(){return u.each(n.updates,function(t){return i.updateChild(t.child,t.model),e},u.chunkSizeFrom(t.chunk))}).then(function(){return(n.adds.length>0||n.removals.length>0||n.updates.length>0)&&(t.plurals=i.scope.plurals,t.fit&&i.gManager.fit(),i.gManager.draw()),i.scope.pluralsUpdate.updateCtr+=1})}}(this)):(this.inProgress=!1,this.rebuildAll(t)))},c.prototype.newChildMarker=function(t,e){var n,i,o;if(!t)throw"model undefined";return null==t[this.idKey]?void this.$log.error("Marker model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key."):(this.$log.info("child",n,"markers",this.scope.markerModels),i=e.$new(!1),i.events=e.events,o={},h.scopeKeys.forEach(function(t){return o[t]=e[t]}),n=new a({scope:i,model:t,keys:o,gMap:this.map,defaults:this.DEFAULTS,doClick:this.doClick,gManager:this.gManager,doDrawSelf:!1,isScopeModel:!0}),this.scope.plurals.put(t[this.idKey],n),n)},c.prototype.onDestroy=function(t){return c.__super__.onDestroy.call(this,t),u.promiseLock(this,d.promiseTypes["delete"],void 0,void 0,function(t){return function(){return u.each(t.scope.plurals.values(),function(t){return null!=t?t.destroy(!1):void 0},u.chunkSizeFrom(t.scope.cleanchunk,!1)).then(function(){return null!=t.gManager&&t.gManager.destroy(),t.plurals.removeAll(),t.plurals!==t.scope.plurals&&console.error("plurals out of sync for MarkersParentModel"),t.scope.pluralsUpdate.updateCtr+=1})}}(this))},c.prototype.maybeExecMappedEvent=function(t,e){var i,o;return this.scope.$$destroyed?void 0:(o=this.scope.typeEvents||this.scope.clusterEvents,n.isFunction(null!=o?o[e]:void 0)&&(i=this.mapTypeToPlurals(t),this.origTypeEvents[e])?this.origTypeEvents[e](i.group,i.mapped):void 0)},c.prototype.mapTypeToPlurals=function(t){var e,i,o;return n.isArray(t)?e=t:n.isFunction(t.getMarkers)&&(e=t.getMarkers()),null==e?void g.error("Unable to map event as we cannot find the array group to map"):(i=(null!=(o=this.scope.plurals.values())?o.length:void 0)?e.map(function(t){return function(e){return t.scope.plurals.get(e.key).model}}(this)):[],{cluster:t,mapped:i,group:t})},c.prototype.getItem=function(t,e,n){return"models"===e?t[e][n]:t[e].get(n)},c}(o)}])}.call(this),function(){["Polygon","Polyline"].forEach(function(t){return e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmap"+t+"sParentModel",["uiGmapBasePolysParentModel","uiGmap"+t+"ChildModel","uiGmapI"+t,function(e,n,i){return e(i,n,t)}])})}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapRectangleParentModel",["uiGmapLogger","uiGmapGmapUtil","uiGmapEventsHelper","uiGmapRectangleOptionsBuilder",function(e,i,o,r){var s;return s=function(r){function s(t,i,o,r,s){var a,u,l,p,c,h,d,f,g,m,v;this.scope=t,this.attrs=o,this.gMap=r,this.DEFAULTS=s,a=void 0,p=!1,g=[],f=void 0,c=function(t){return function(){return t.isTrue(t.attrs.fit)?t.fitMapBounds(t.gMap,a):void 0}}(this),l=function(t){return function(){var n,i,o;return null!=t.scope.bounds&&null!=(null!=(n=t.scope.bounds)?n.sw:void 0)&&null!=(null!=(i=t.scope.bounds)?i.ne:void 0)&&t.validateBoundPoints(t.scope.bounds)?(a=t.convertBoundPoints(t.scope.bounds),e.info("new new bounds created: "+JSON.stringify(a))):null!=t.scope.bounds.getNorthEast&&null!=t.scope.bounds.getSouthWest?a=t.scope.bounds:null!=t.scope.bounds?e.error("Invalid bounds for newValue: "+JSON.stringify(null!=(o=t.scope)?o.bounds:void 0)):void 0}}(this),l(),h=new google.maps.Rectangle(this.buildOpts(a)),e.info("gObject (rectangle) created: "+h),m=!1,v=function(t){return function(){var e,n,i;return e=h.getBounds(),n=e.getNorthEast(),i=e.getSouthWest(),m?void 0:t.scope.$evalAsync(function(t){return null!=t.bounds&&null!=t.bounds.sw&&null!=t.bounds.ne&&(t.bounds.ne={latitude:n.lat(),longitude:n.lng()},t.bounds.sw={latitude:i.lat(),longitude:i.lng()}),null!=t.bounds.getNorthEast&&null!=t.bounds.getSouthWest?t.bounds=e:void 0})}}(this),d=function(t){return function(){return c(),t.removeEvents(g),g.push(google.maps.event.addListener(h,"dragstart",function(){return p=!0})),g.push(google.maps.event.addListener(h,"dragend",function(){return p=!1,v()})),g.push(google.maps.event.addListener(h,"bounds_changed",function(){return p?void 0:v()}))}}(this),u=function(t){return function(){return t.removeEvents(g),null!=f&&t.removeEvents(f),h.setMap(null)}}(this),null!=a&&d(),this.scope.$watch("bounds",function(t,e){var i;return n.isEqual(t,e)&&null!=a||p?void 0:(m=!0,null==t?void u():(null==a?i=!0:c(),l(),h.setBounds(a),m=!1,i&&null!=a?d():void 0))},!0),this.setMyOptions=function(t){return function(e,i){return n.isEqual(e,i)||null==a||null==e?void 0:h.setOptions(t.buildOpts(a))}}(this),this.props.push("bounds"),this.watchProps(this.props),null!=this.attrs.events&&(f=this.setEvents(h,this.scope,this.scope),this.scope.$watch("events",function(t){return function(e,i){return n.isEqual(e,i)?void 0:(null!=f&&t.removeEvents(f),f=t.setEvents(h,t.scope,t.scope))}}(this))),this.scope.$on("$destroy",function(){return u()}),e.info(this)}return t(s,r),s.include(i),s.include(o),s}(r)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapSearchBoxParentModel",["uiGmapBaseObject","uiGmapLogger","uiGmapEventsHelper",function(i,o,r){var s;return s=function(i){function s(n,i,r,s,a,u,l){var p;return this.scope=n,this.element=i,this.attrs=r,this.gMap=s,this.ctrlPosition=a,this.template=u,this.$log=null!=l?l:o,this.setVisibility=t(this.setVisibility,this),this.getBounds=t(this.getBounds,this),this.setBounds=t(this.setBounds,this),this.createSearchBox=t(this.createSearchBox,this),this.addToParentDiv=t(this.addToParentDiv,this),this.addAsMapControl=t(this.addAsMapControl,this),this.init=t(this.init,this),null==this.attrs.template?void this.$log.error("template attribute for the search-box directive is mandatory. Places Search Box creation aborted!!"):(e.isUndefined(this.scope.options)&&(this.scope.options={},this.scope.options.visible=!0),e.isUndefined(this.scope.options.visible)&&(this.scope.options.visible=!0),e.isUndefined(this.scope.options.autocomplete)&&(this.scope.options.autocomplete=!1),this.visible=this.scope.options.visible,this.autocomplete=this.scope.options.autocomplete,p=e.element("<div></div>"),p.append(this.template),this.input=p.find("input")[0],void this.init())}return n(s,i),s.include(r),s.prototype.init=function(){return this.createSearchBox(),this.scope.$watch("options",function(t){return function(n,i){return e.isObject(n)&&(null!=n.bounds&&t.setBounds(n.bounds),null!=n.visible&&t.visible!==n.visible)?t.setVisibility(n.visible):void 0}}(this),!0),null!=this.attrs.parentdiv?this.addToParentDiv():this.addAsMapControl(),this.visible||this.setVisibility(this.visible),this.autocomplete?this.listener=google.maps.event.addListener(this.gObject,"place_changed",function(t){return function(){return t.places=t.gObject.getPlace()}}(this)):this.listener=google.maps.event.addListener(this.gObject,"places_changed",function(t){return function(){return t.places=t.gObject.getPlaces()}}(this)),this.listeners=this.setEvents(this.gObject,this.scope,this.scope),this.$log.info(this),this.scope.$on("$stateChangeSuccess",function(t){return function(){return null!=t.attrs.parentdiv?t.addToParentDiv():void 0}}(this)),this.scope.$on("$destroy",function(t){return function(){return t.gObject=null}}(this))},s.prototype.addAsMapControl=function(){return this.gMap.controls[google.maps.ControlPosition[this.ctrlPosition]].push(this.input)},s.prototype.addToParentDiv=function(){var t;return this.parentDiv=e.element(document.getElementById(this.scope.parentdiv)),(null!=(t=this.parentDiv)?t.length:void 0)?this.parentDiv.append(this.input):void 0},s.prototype.createSearchBox=function(){return this.autocomplete?this.gObject=new google.maps.places.Autocomplete(this.input,this.scope.options):this.gObject=new google.maps.places.SearchBox(this.input,this.scope.options)},s.prototype.setBounds=function(t){if(e.isUndefined(t.isEmpty))this.$log.error("Error: SearchBoxParentModel setBounds. Bounds not an instance of LatLngBounds.");else if(t.isEmpty()===!1&&null!=this.gObject)return this.gObject.setBounds(t)},s.prototype.getBounds=function(){return this.gObject.getBounds()},s.prototype.setVisibility=function(t){return null!=this.attrs.parentdiv?t===!1?this.parentDiv.addClass("ng-hide"):this.parentDiv.removeClass("ng-hide"):t===!1?this.gMap.controls[google.maps.ControlPosition[this.ctrlPosition]].clear():this.gMap.controls[google.maps.ControlPosition[this.ctrlPosition]].push(this.input),this.visible=t},s}(i)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);
return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapWindowsParentModel",["uiGmapIWindowParentModel","uiGmapModelsWatcher","uiGmapPropMap","uiGmapWindowChildModel","uiGmapLinked","uiGmap_async","uiGmapLogger","$timeout","$compile","$http","$templateCache","$interpolate","uiGmapPromise","uiGmapIWindow","uiGmapGmapUtil",function(o,r,s,a,u,l,p,c,h,d,f,g,m,v,y){var _;return _=function(o){function _(e,i,o,r,a,l){this.gMap=a,this.markersScope=l,this.modelKeyComparison=t(this.modelKeyComparison,this),this.interpolateContent=t(this.interpolateContent,this),this.setChildScope=t(this.setChildScope,this),this.createWindow=t(this.createWindow,this),this.setContentKeys=t(this.setContentKeys,this),this.pieceMeal=t(this.pieceMeal,this),this.createAllNew=t(this.createAllNew,this),this.watchIdKey=t(this.watchIdKey,this),this.createChildScopes=t(this.createChildScopes,this),this.watchOurScope=t(this.watchOurScope,this),this.watchDestroy=t(this.watchDestroy,this),this.onDestroy=t(this.onDestroy,this),this.rebuildAll=t(this.rebuildAll,this),this.doINeedToWipe=t(this.doINeedToWipe,this),this.watchModels=t(this.watchModels,this),this.go=t(this.go,this),_.__super__.constructor.call(this,e,i,o,r,c,h,d,f),this["interface"]=v,this.plurals=new s,n.each(v.scopeKeys,function(t){return function(e){return t[e+"Key"]=void 0}}(this)),this.linked=new u(e,i,o,r),this.contentKeys=void 0,this.isIconVisibleOnClick=void 0,this.firstTime=!0,this.firstWatchModels=!0,this.$log.info(self),this.parentScope=void 0,this.go(e)}return i(_,o),_.include(r),_.prototype.go=function(t){return this.watchOurScope(t),this.doRebuildAll=null!=this.scope.doRebuildAll&&this.scope.doRebuildAll,t.$watch("doRebuildAll",function(t){return function(e,n){return e!==n?t.doRebuildAll=e:void 0}}(this)),this.createChildScopes()},_.prototype.watchModels=function(t){var e;return e=null!=this.markersScope?"pluralsUpdate":"models",t.$watch(e,function(e){return function(i,o){var r;return!n.isEqual(i,o)||e.firstWatchModels?(e.firstWatchModels=!1,e.doRebuildAll||e.doINeedToWipe(t.models)?e.rebuildAll(t,!0,!0):(r=0===e.plurals.length,null!=e.existingPieces?n.last(e.existingPieces._content).then(function(){return e.createChildScopes(r)}):e.createChildScopes(r))):void 0}}(this),!0)},_.prototype.doINeedToWipe=function(t){var e;return e=null==t||0===t.length,this.plurals.length>0&&e},_.prototype.rebuildAll=function(t,e,n){return this.onDestroy(n).then(function(t){return function(){return e?t.createChildScopes():void 0}}(this))},_.prototype.onDestroy=function(t){return _.__super__.onDestroy.call(this,this.scope),l.promiseLock(this,m.promiseTypes["delete"],void 0,void 0,function(t){return function(){return l.each(t.plurals.values(),function(t){return t.destroy(!0)},l.chunkSizeFrom(t.scope.cleanchunk,!1)).then(function(){var e;return null!=(e=t.plurals)?e.removeAll():void 0})}}(this))},_.prototype.watchDestroy=function(t){return t.$on("$destroy",function(e){return function(){return e.firstWatchModels=!0,e.firstTime=!0,e.rebuildAll(t,!1,!0)}}(this))},_.prototype.watchOurScope=function(t){return n.each(v.scopeKeys,function(e){return function(n){var i;return i=n+"Key",e[i]="function"==typeof t[n]?t[n]():t[n]}}(this))},_.prototype.createChildScopes=function(t){var n,i,o;return null==t&&(t=!0),this.isIconVisibleOnClick=!0,e.isDefined(this.linked.attrs.isiconvisibleonclick)&&(this.isIconVisibleOnClick=this.linked.scope.isIconVisibleOnClick),n=e.isUndefined(this.linked.scope.models),!n||void 0!==this.markersScope&&void 0!==(null!=(i=this.markersScope)?i.plurals:void 0)&&void 0!==(null!=(o=this.markersScope)?o.models:void 0)?null!=this.gMap?null!=this.linked.scope.models?(this.watchIdKey(this.linked.scope),t?this.createAllNew(this.linked.scope,!1):this.pieceMeal(this.linked.scope,!1)):(this.parentScope=this.markersScope,this.watchIdKey(this.parentScope),t?this.createAllNew(this.markersScope,!0,"plurals",!1):this.pieceMeal(this.markersScope,!0,"plurals",!1)):void 0:void this.$log.error("No models to create windows from! Need direct models or models derived from markers!")},_.prototype.watchIdKey=function(t){return this.setIdKey(t),t.$watch("idKey",function(e){return function(n,i){return n!==i&&null==n?(e.idKey=n,e.rebuildAll(t,!0,!0)):void 0}}(this))},_.prototype.createAllNew=function(t,e,n,i){var o;return null==n&&(n="models"),null==i&&(i=!1),this.firstTime&&(this.watchModels(t),this.watchDestroy(t)),this.setContentKeys(t.models),this.didQueueInitPromise(this,t)?void 0:(o=null,l.promiseLock(this,m.promiseTypes.create,"createAllNew",function(t){return o=t},function(i){return function(){return l.each(t.models,function(r){var s,a;return s=e&&null!=(a=i.getItem(t,n,r[i.idKey]))?a.gObject:void 0,o||(!s&&i.markersScope&&p.error("Unable to get gMarker from markersScope!"),i.createWindow(r,s,i.gMap)),o},l.chunkSizeFrom(t.chunk)).then(function(){return i.firstTime=!1})}}(this)))},_.prototype.pieceMeal=function(t,e,n,i){var o,r;return null==n&&(n="models"),null==i&&(i=!0),t.$$destroyed?void 0:(o=null,r=null,null!=t&&this.modelsLength()&&this.plurals.length?l.promiseLock(this,m.promiseTypes.update,"pieceMeal",function(t){return o=t},function(e){return function(){return m.promise(function(){return e.figureOutState(e.idKey,t,e.plurals,e.modelKeyComparison)}).then(function(n){return r=n,l.each(r.removals,function(t){return null!=t?(e.plurals.remove(t.id),null!=t.destroy&&t.destroy(!0),o):void 0},l.chunkSizeFrom(t.chunk))}).then(function(){return l.each(r.adds,function(i){var r,s;if(r=null!=(s=e.getItem(t,n,i[e.idKey]))?s.gObject:void 0,!r)throw"Gmarker undefined";return e.createWindow(i,r,e.gMap),o})}).then(function(){return l.each(r.updates,function(t){return e.updateChild(t.child,t.model),o},l.chunkSizeFrom(t.chunk))})}}(this)):(p.debug("pieceMeal: rebuildAll"),this.rebuildAll(this.scope,!0,!0)))},_.prototype.setContentKeys=function(t){return this.modelsLength(t)?this.contentKeys=Object.keys(t[0]):void 0},_.prototype.createWindow=function(t,e,n){var i,o,r,s,u,l;return o=this.linked.scope.$new(!1),this.setChildScope(o,t),o.$watch("model",function(t){return function(e,n){return e!==n?t.setChildScope(o,e):void 0}}(this),!0),r={html:function(e){return function(){return e.interpolateContent(e.linked.element.html(),t)}}(this)},this.DEFAULTS=this.scopeOrModelVal(this.optionsKey,this.scope,t)||{},s=this.createWindowOptions(e,o,r.html(),this.DEFAULTS),i=new a({model:t,scope:o,opts:s,isIconVisibleOnClick:this.isIconVisibleOnClick,gMap:n,markerScope:null!=(u=this.markersScope)&&null!=(l=u.plurals.get(t[this.idKey]))?l.scope:void 0,element:r,needToManualDestroy:!1,markerIsVisibleAfterWindowClose:!0,isScopeModel:!0}),null==t[this.idKey]?void this.$log.error("Window model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key."):(this.plurals.put(t[this.idKey],i),i)},_.prototype.setChildScope=function(t,e){return n.each(v.scopeKeys,function(n){return function(i){var o,r;return o=i+"Key",r="self"===n[o]?e:e[n[o]],r!==t[i]?t[i]=r:void 0}}(this)),t.model=e},_.prototype.interpolateContent=function(t,e){var n,i,o,r,s,a;if(void 0!==this.contentKeys&&0!==this.contentKeys.length){for(n=g(t),o={},a=this.contentKeys,i=0,s=a.length;s>i;i++)r=a[i],o[r]=e[r];return n(o)}},_.prototype.modelKeyComparison=function(t,e){var i,o;if(o=null!=this.scope.coords?this.scope:this.parentScope,null==o)throw"No scope or parentScope set!";return(i=y.equalCoords(this.evalModelHandle(t,o.coords),this.evalModelHandle(e,o.coords)))?i=n.every(n.without(this["interface"].scopeKeys,"coords"),function(n){return function(i){return n.evalModelHandle(t,o[i])===n.evalModelHandle(e,o[i])}}(this)):i},_}(o)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapCircle",["uiGmapICircle","uiGmapCircleParentModel",function(t,e){return n.extend(t,{link:function(t,n,i,o){return o.getScope().deferred.promise.then(function(o){return new e(t,n,i,o)})}})}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapControl",["uiGmapIControl","$http","$templateCache","$compile","$controller","uiGmapGoogleMapApi",function(i,o,r,s,a,u){var l;return l=function(l){function p(){this.link=t(this.link,this),p.__super__.constructor.call(this)}return n(p,l),p.prototype.transclude=!0,p.prototype.link=function(t,n,l,p,c){return u.then(function(n){return function(u){var l,h,d,f;return f=c(),l=c().length>0,!l&&e.isUndefined(t.template)?void n.$log.error("mapControl: could not find a valid template property or elements for transclusion"):(h=e.isDefined(t.index&&!isNaN(parseInt(t.index)))?parseInt(t.index):void 0,d=e.isDefined(t.position)?t.position.toUpperCase().replace(/-/g,"_"):"TOP_CENTER",u.ControlPosition[d]?i.mapPromise(t,p).then(function(i){var u,p,f;return u=void 0,p=e.element("<div></div>"),f=function(t,e,n){return n&&(e[0].index=n),t.controls[google.maps.ControlPosition[d]].push(e[0])},l?c(function(t){return p.append(t),f(i,p,h)}):o.get(t.template,{cache:r}).success(function(n){var i,o;return o=t.$new(),p.append(n),e.isDefined(t.controller)&&(i=a(t.controller,{$scope:o}),p.children().data("$ngControllerController",i)),u=s(p.children())(o)}).error(function(t){return n.$log.error("mapControl: template could not be found")}).then(function(){return f(i,u,h)})}):void n.$log.error("mapControl: invalid position property"))}}(this))},p}(i)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").service("uiGmapDragZoom",["uiGmapCtrlHandle","uiGmapPropertyAction",function(t,e){return{restrict:"EMA",transclude:!0,template:'<div class="angular-google-map-dragzoom" ng-transclude style="display: none"></div>',require:"^uiGmapGoogleMap",scope:{keyboardkey:"=",options:"=",spec:"="},controller:["$scope","$element",function(e,i){return e.ctrlType="uiGmapDragZoom",n.extend(this,t.handle(e,i))}],link:function(n,i,o,r){return t.mapPromise(n,r).then(function(t){var i,o,r;return i=function(e){return t.enableKeyDragZoom(e)},o=new e(function(t,e){return e?i({key:e}):i()}),r=new e(function(t,e){return e?i(e):void 0}),n.$watch("keyboardkey",o.sic("keyboardkey")),o.sic(n.keyboardkey),n.$watch("options",r.sic("options")),r.sic(n.options)})}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapDrawingManager",["uiGmapIDrawingManager","uiGmapDrawingManagerParentModel",function(t,e){return n.extend(t,{link:function(t,n,i,o){return o.getScope().deferred.promise.then(function(o){return new e(t,n,i,o)})}})}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapApiFreeDrawPolygons",["uiGmapLogger","uiGmapBaseObject","uiGmapCtrlHandle","uiGmapDrawFreeHandChildModel","uiGmapLodash",function(e,o,r,s,a){var u;return u=function(o){function u(){return this.link=t(this.link,this),u.__super__.constructor.apply(this,arguments)}return i(u,o),u.include(r),u.prototype.restrict="EMA",u.prototype.replace=!0,u.prototype.require="^uiGmapGoogleMap",u.prototype.scope={polygons:"=",draw:"="},u.prototype.link=function(t,i,o,r){return this.mapPromise(t,r).then(function(i){return function(i){var o,u;return t.polygons?n.isArray(t.polygons)?(o=new s(i,r.getScope()),u=void 0,t.draw=function(){return"function"==typeof u&&u(),o.engage(t.polygons).then(function(){var e;return e=!0,u=t.$watchCollection("polygons",function(t,n){var i;return e||t===n?void(e=!1):(i=a.differenceObjects(n,t),i.forEach(function(t){return t.setMap(null)}))})})}):e.error("Free Draw Polygons must be of type Array!"):e.error("No polygons to bind to!")}}(this))},u}(o)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").service("uiGmapICircle",[function(){var t;return t={},{restrict:"EA",replace:!0,require:"^uiGmapGoogleMap",scope:{center:"=center",radius:"=radius",stroke:"=stroke",fill:"=fill",clickable:"=",draggable:"=",editable:"=",geodesic:"=",icons:"=icons",visible:"=",events:"=",control:"=",zIndex:"=zindex"}}}])}.call(this),function(){var t=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIControl",["uiGmapBaseObject","uiGmapLogger","uiGmapCtrlHandle",function(e,n,i){var o;return o=function(e){function o(){this.restrict="EA",this.replace=!0,this.require="^uiGmapGoogleMap",this.scope={template:"@template",position:"@position",controller:"@controller",index:"@index"},this.$log=n}return t(o,e),o.extend(i),o.prototype.link=function(t,e,n,i){throw new Exception("Not implemented!!")},o}(e)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").service("uiGmapIDrawingManager",[function(){return{restrict:"EA",replace:!0,require:"^uiGmapGoogleMap",scope:{"static":"@",control:"=",options:"=",events:"="}}}])}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIMarker",["uiGmapBaseObject","uiGmapCtrlHandle",function(e,i){var o;return o=function(e){function o(){this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.replace=!0,this.scope=n.extend(this.scope||{},o.scope)}return t(o,e),o.scope={coords:"=coords",icon:"=icon",click:"&click",options:"=options",events:"=events",fit:"=fit",idKey:"=idkey",control:"=control"},o.scopeKeys=n.keys(o.scope),o.keys=o.scopeKeys,o.extend(i),o}(e)}])}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIPolygon",["uiGmapGmapUtil","uiGmapBaseObject","uiGmapLogger","uiGmapCtrlHandle",function(e,i,o,r){var s;return s=function(i){function s(){}return t(s,i),s.scope={path:"=path",stroke:"=stroke",clickable:"=",draggable:"=",editable:"=",geodesic:"=",fill:"=",icons:"=icons",visible:"=","static":"=",events:"=",zIndex:"=zindex",fit:"=",control:"=control"},s.scopeKeys=n.keys(s.scope),s.include(e),s.extend(r),s.prototype.restrict="EMA",s.prototype.replace=!0,s.prototype.require="^uiGmapGoogleMap",s.prototype.scope=s.scope,s.prototype.DEFAULTS={},s.prototype.$log=o,s}(i)}])}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIPolyline",["uiGmapGmapUtil","uiGmapBaseObject","uiGmapLogger","uiGmapCtrlHandle",function(e,i,o,r){var s;return s=function(i){function s(){}return t(s,i),s.scope={path:"=",stroke:"=",clickable:"=",draggable:"=",editable:"=",geodesic:"=",icons:"=",visible:"=","static":"=",fit:"=",events:"=",zIndex:"=zindex"},s.scopeKeys=n.keys(s.scope),s.include(e),s.extend(r),s.prototype.restrict="EMA",s.prototype.replace=!0,s.prototype.require="^uiGmapGoogleMap",s.prototype.scope=s.scope,s.prototype.DEFAULTS={},s.prototype.$log=o,s}(i)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").service("uiGmapIRectangle",[function(){var t;return t={},{restrict:"EMA",require:"^uiGmapGoogleMap",replace:!0,scope:{bounds:"=",stroke:"=",clickable:"=",draggable:"=",editable:"=",fill:"=",visible:"=",events:"="}}}])}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIWindow",["uiGmapBaseObject","uiGmapChildEvents","uiGmapCtrlHandle",function(e,i,o){var r;return r=function(e){function r(){this.restrict="EMA",this.template=void 0,this.transclude=!0,this.priority=-100,this.require="^uiGmapGoogleMap",this.replace=!0,this.scope=n.extend(this.scope||{},r.scope)}return t(r,e),r.scope={coords:"=coords",template:"=template",templateUrl:"=templateurl",templateParameter:"=templateparameter",isIconVisibleOnClick:"=isiconvisibleonclick",closeClick:"&closeclick",options:"=options",control:"=control",show:"=show"},r.scopeKeys=n.keys(r.scope),r.include(i),r.extend(o),r}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapMap",["$timeout","$q","$log","uiGmapGmapUtil","uiGmapBaseObject","uiGmapCtrlHandle","uiGmapIsReady","uiGmapuuid","uiGmapExtendGWin","uiGmapExtendMarkerClusterer","uiGmapGoogleMapsUtilV3","uiGmapGoogleMapApi","uiGmapEventsHelper","uiGmapGoogleMapObjectManager",function(o,r,s,a,u,l,p,c,h,d,f,g,m,v){var y,_,b;return y=void 0,b=[f,h,d],_=function(r){function u(){this.link=t(this.link,this);var e;e=function(t){var e,i;return i=void 0,t.$on("$destroy",function(){return p.decrement()}),e=l.handle(t),t.ctrlType="Map",t.deferred.promise.then(function(){return b.forEach(function(t){return t.init()})}),e.getMap=function(){return t.map},i=n.extend(this,e)},this.controller=["$scope",e]}return i(u,r),u.include(a),u.prototype.restrict="EMA",u.prototype.transclude=!0,u.prototype.replace=!1,u.prototype.template='<div class="angular-google-map"><div class="angular-google-map-container">\n</div><div ng-transclude style="display: none"></div></div>',u.prototype.scope={center:"=",zoom:"=",dragging:"=",control:"=",options:"=",events:"=",eventOpts:"=",styles:"=",bounds:"=",update:"="},u.prototype.link=function(t,i,r){var a;return a=[],t.$on("$destroy",function(){return m.removeEvents(a),"true"===r.recycleMapInstance&&t.map?(v.recycleMapInstance(t.map),t.map=null):void 0}),t.idleAndZoomChanged=!1,g.then(function(u){return function(l){var h,d,f,g,_,b,w,M,k,x,C,G,O,D,L,P,S;if(y={mapTypeId:l.MapTypeId.ROADMAP},D=p.spawn(),G=function(){return D.deferred.resolve({instance:D.instance,map:h})},!e.isDefined(t.center)&&!e.isDefined(t.bounds))return void s.error("angular-google-maps: a center or bounds property is required");if(e.isDefined(t.center)||(t.center=new google.maps.LatLngBounds(u.getCoords(t.bounds.southwest),u.getCoords(t.bounds.northeast)).getCenter()),e.isDefined(t.zoom)||(t.zoom=10),_=e.element(i),_.addClass("angular-google-map"),x={options:{}},r.options&&(x.options=t.options),r.styles&&(x.styles=t.styles),r.type&&(L=r.type.toUpperCase(),google.maps.MapTypeId.hasOwnProperty(L)?x.mapTypeId=google.maps.MapTypeId[r.type.toUpperCase()]:s.error("angular-google-maps: invalid map type '"+r.type+"'")),M=e.extend({},y,x,{center:u.getCoords(t.center),zoom:t.zoom,bounds:t.bounds}),h="true"===r.recycleMapInstance?v.createMapInstance(_.find("div")[1],M):new google.maps.Map(_.find("div")[1],M),h.uiGmap_id=c.generate(),g=!1,a.push(google.maps.event.addListenerOnce(h,"idle",function(){return t.deferred.resolve(h),G()})),f=r.events&&null!=(null!=(C=t.events)?C.blacklist:void 0)?t.events.blacklist:[],n.isString(f)&&(f=[f]),k=function(e,i,o){return n.includes(f,e)?void 0:(o&&o(),a.push(google.maps.event.addListener(h,e,function(){var e;return(null!=(e=t.update)?e.lazy:void 0)?void 0:i()})))},n.includes(f,"all")||(k("dragstart",function(){return g=!0,t.$evalAsync(function(t){return null!=t.dragging?t.dragging=g:void 0})}),k("dragend",function(){return g=!1,t.$evalAsync(function(t){return null!=t.dragging?t.dragging=g:void 0})}),P=function(e,i){return null==e&&(e=h.center),null==i&&(i=t),n.includes(f,"center")||(i.center.latitude!==e.lat()&&(i.center.latitude=e.lat()),i.center.longitude===e.lng())?void 0:i.center.longitude=e.lng()},O=!1,k("idle",function(){var e,i,o;return e=h.getBounds(),i=e.getNorthEast(),o=e.getSouthWest(),O=!0,t.$evalAsync(function(e){return P(),n.isUndefined(e.bounds)||n.includes(f,"bounds")||(e.bounds.northeast={latitude:i.lat(),longitude:i.lng()},e.bounds.southwest={latitude:o.lat(),longitude:o.lng()}),n.includes(f,"zoom")||(e.zoom=h.zoom,t.idleAndZoomChanged=!t.idleAndZoomChanged),O=!1})})),e.isDefined(t.events)&&null!==t.events&&e.isObject(t.events)){w=function(e){return function(){return t.events[e].apply(t,[h,e,arguments])}},d=[];for(b in t.events)t.events.hasOwnProperty(b)&&e.isFunction(t.events[b])&&d.push(google.maps.event.addListener(h,b,w(b)));a.concat(d)}return h.getOptions=function(){return M},t.map=h,null!=r.control&&null!=t.control&&(t.control.refresh=function(t){var e,n,i;return null!=h?(null!=("undefined"!=typeof google&&null!==google&&null!=(n=google.maps)&&null!=(i=n.event)?i.trigger:void 0)&&null!=h&&google.maps.event.trigger(h,"resize"),null!=(null!=t?t.latitude:void 0)&&null!=(null!=t?t.longitude:void 0)?(e=u.getCoords(t),u.isTrue(r.pan)?h.panTo(e):h.setCenter(e)):void 0):void 0},t.control.getGMap=function(){return h},t.control.getMapOptions=function(){return M},t.control.getCustomEventListeners=function(){return d},t.control.removeEvents=function(t){return m.removeEvents(t)}),t.$watch("center",function(e,n){var i;return e===n||O||(i=u.getCoords(t.center),i.lat()===h.center.lat()&&i.lng()===h.center.lng())?void 0:g?void 0:(u.validateCoords(e)||s.error("Invalid center for newValue: "+JSON.stringify(e)),u.isTrue(r.pan)&&t.zoom===h.zoom?h.panTo(i):h.setCenter(i))},!0),S=null,t.$watch("zoom",function(e,i){var r,s;return null==e||n.isEqual(e,i)||(null!=h?h.getZoom():void 0)===(null!=t?t.zoom:void 0)||O?void 0:(null!=S&&o.cancel(S),S=o(function(){return h.setZoom(e)},(null!=(r=t.eventOpts)&&null!=(s=r.debounce)?s.zoomMs:void 0)+20,!1))}),t.$watch("bounds",function(t,e){var n,i,o,r,a,u,l;return t!==e?null==(null!=t&&null!=(o=t.northeast)?o.latitude:void 0)||null==(null!=t&&null!=(r=t.northeast)?r.longitude:void 0)||null==(null!=t&&null!=(a=t.southwest)?a.latitude:void 0)||null==(null!=t&&null!=(u=t.southwest)?u.longitude:void 0)?void s.error("Invalid map bounds for new value: "+JSON.stringify(t)):(i=new google.maps.LatLng(t.northeast.latitude,t.northeast.longitude),l=new google.maps.LatLng(t.southwest.latitude,t.southwest.longitude),n=new google.maps.LatLngBounds(l,i),h.fitBounds(n)):void 0}),["options","styles"].forEach(function(e){return t.$watch(e,function(t,i){return n.isEqual(t,i)?void 0:("options"===e?x.options=t:x.options[e]=t,null!=h?h.setOptions(x):void 0)},!0)})}}(this))},u}(u)}])}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapMarker",["uiGmapIMarker","uiGmapMarkerChildModel","uiGmapMarkerManager","uiGmapLogger",function(e,i,o,r){var s;return s=function(s){function a(){a.__super__.constructor.call(this),this.template='<span class="angular-google-map-marker" ng-transclude></span>',r.info(this)}return t(a,s),a.prototype.controller=["$scope","$element",function(t,i){return t.ctrlType="Marker",n.extend(this,e.handle(t,i))}],a.prototype.link=function(t,r,s,a){var u;return u=e.mapPromise(t,a),u.then(function(r){var s,a,u;return s=new o(r),a=n.object(e.keys,e.keys),u=new i({scope:t,model:t,keys:a,gMap:r,doClick:!0,gManager:s,doDrawSelf:!1,trackModel:!1}),u.deferred.promise.then(function(e){return t.deferred.resolve(e)}),null!=t.control?t.control.getGMarkers=s.getGMarkers:void 0}),t.$on("$destroy",function(){var t;return"undefined"!=typeof t&&null!==t&&t.clear(),t=null})},a}(e)}])}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapMarkers",["uiGmapIMarker","uiGmapPlural","uiGmapMarkersParentModel","uiGmap_sync","uiGmapLogger",function(e,i,o,r,s){var a;return a=function(r){function a(){a.__super__.constructor.call(this),this.template='<span class="angular-google-map-markers" ng-transclude></span>',i.extend(this,{doCluster:"=?docluster",clusterOptions:"=clusteroptions",clusterEvents:"=clusterevents",modelsByRef:"=modelsbyref",type:"=?type",typeOptions:"=?typeoptions",typeEvents:"=?typeevents",deepComparison:"=?deepcomparison"}),s.info(this)}return t(a,r),a.prototype.controller=["$scope","$element",function(t,i){return t.ctrlType="Markers",n.extend(this,e.handle(t,i))}],a.prototype.link=function(t,r,s,a){var u,l;return u=void 0,l=function(){return t.deferred.resolve()},e.mapPromise(t,a).then(function(e){var p;return p=a.getScope(),p.$watch("idleAndZoomChanged",function(){return n.defer(u.gManager.draw)}),u=new o(t,r,s,e),i.link(t,u),null!=t.control&&(t.control.getGMarkers=function(){var t;return null!=(t=u.gManager)?t.getGMarkers():void 0},t.control.getChildMarkers=function(){return u.plurals}),n.last(u.existingPieces._content).then(function(){return l()})})},a}(e)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").service("uiGmapPlural",[function(){var t;return t=function(t,e){return null!=t.control?(t.control.updateModels=function(n){return t.models=n,e.createChildScopes(!1)},t.control.newModels=function(n){return t.models=n,e.rebuildAll(t,!0,!0)},t.control.clean=function(){return e.rebuildAll(t,!1,!0)},t.control.getPlurals=function(){return e.plurals},t.control.getManager=function(){return e.gManager},t.control.hasManager=function(){return null!=e.gManager==1},t.control.managerDraw=function(){var e;return t.control.hasManager()&&null!=(e=t.control.getManager())?e.draw():void 0}):void 0},{extend:function(t,e){return n.extend(t.scope||{},e||{},{idKey:"=idkey",doRebuildAll:"=dorebuildall",models:"=models",chunk:"=chunk",cleanchunk:"=cleanchunk",control:"=control",deepComparison:"=deepcomparison"})},link:function(e,n){return t(e,n)}}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolygon",["uiGmapIPolygon","$timeout","uiGmapPolygonChildModel",function(e,i,o){var r;return r=function(i){function r(){return this.link=t(this.link,this),r.__super__.constructor.apply(this,arguments)}return n(r,i),r.prototype.link=function(t,n,i,r){var s,a;return s=[],a=e.mapPromise(t,r),null!=t.control&&(t.control.getInstance=this,t.control.polygons=s,t.control.promise=a),a.then(function(e){return function(n){return s.push(new o({scope:t,attrs:i,gMap:n,defaults:e.DEFAULTS}))}}(this))},r}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolygons",["uiGmapIPolygon","$timeout","uiGmapPolygonsParentModel","uiGmapPlural",function(i,o,r,s){var a;return a=function(i){function o(){this.link=t(this.link,this),o.__super__.constructor.call(this),s.extend(this),this.$log.info(this)}return n(o,i),o.prototype.link=function(t,n,i,o){return o.getScope().deferred.promise.then(function(o){return function(a){return(e.isUndefined(t.path)||null===t.path)&&o.$log.warn("polygons: no valid path attribute found"),t.models||o.$log.warn("polygons: no models found to create from"),s.link(t,new r(t,n,i,a,o.DEFAULTS))}}(this))},o}(i)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolyline",["uiGmapIPolyline","$timeout","uiGmapPolylineChildModel",function(i,o,r){var s;return s=function(o){function s(){return this.link=t(this.link,this),s.__super__.constructor.apply(this,arguments)}return n(s,o),s.prototype.link=function(t,n,o,s){return i.mapPromise(t,s).then(function(n){return function(i){return!e.isUndefined(t.path)&&null!==t.path&&n.validatePath(t.path)||n.$log.warn("polyline: no valid path attribute found"),new r({scope:t,attrs:o,gMap:i,defaults:n.DEFAULTS})}}(this))},s}(i)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolylines",["uiGmapIPolyline","$timeout","uiGmapPolylinesParentModel","uiGmapPlural",function(i,o,r,s){var a;return a=function(i){function o(){this.link=t(this.link,this),o.__super__.constructor.call(this),s.extend(this),this.$log.info(this)}return n(o,i),o.prototype.link=function(t,n,i,o){return o.getScope().deferred.promise.then(function(o){return function(a){return(e.isUndefined(t.path)||null===t.path)&&o.$log.warn("polylines: no valid path attribute found"),t.models||o.$log.warn("polylines: no models found to create from"),s.link(t,new r(t,n,i,a,o.DEFAULTS))}}(this))},o}(i)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapRectangle",["uiGmapLogger","uiGmapGmapUtil","uiGmapIRectangle","uiGmapRectangleParentModel",function(t,e,i,o){return n.extend(i,{link:function(t,e,n,i){return i.getScope().deferred.promise.then(function(i){return new o(t,e,n,i)})}})}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapWindow",["uiGmapIWindow","uiGmapGmapUtil","uiGmapWindowChildModel","uiGmapLodash","uiGmapLogger",function(i,o,r,s,a){var u;return u=function(u){function l(){this.link=t(this.link,this),l.__super__.constructor.call(this),this.require=["^uiGmapGoogleMap","^?uiGmapMarker"],this.template='<span class="angular-google-maps-window" ng-transclude></span>',a.debug(this),this.childWindows=[]}return n(l,u),l.include(o),l.prototype.link=function(t,n,o,r){var s,a;return s=r.length>1&&null!=r[1]?r[1]:void 0,a=null!=s?s.getScope():void 0,this.mapPromise=i.mapPromise(t,r[0]),this.mapPromise.then(function(i){return function(r){var u;return u=!0,e.isDefined(o.isiconvisibleonclick)&&(u=t.isIconVisibleOnClick),s?a.deferred.promise.then(function(e){return i.init(t,n,u,r,a)}):void i.init(t,n,u,r)}}(this))},l.prototype.init=function(t,e,n,i,o){var a,u,l,p,c;return u=null!=t.options?t.options:{},p=null!=t&&this.validateCoords(t.coords),null!=(null!=o?o.getGMarker:void 0)&&(l=o.getGMarker()),c=p?this.createWindowOptions(l,t,e.html(),u):u,null!=i&&(a=new r({scope:t,opts:c,isIconVisibleOnClick:n,gMap:i,markerScope:o,element:e}),this.childWindows.push(a),t.$on("$destroy",function(t){return function(){return t.childWindows=s.withoutObjects(t.childWindows,[a],function(t,e){
return t.scope.$id===e.scope.$id}),t.childWindows.length=0}}(this))),null!=t.control&&(t.control.getGWindows=function(t){return function(){return t.childWindows.map(function(t){return t.gObject})}}(this),t.control.getChildWindows=function(t){return function(){return t.childWindows}}(this),t.control.getPlurals=t.control.getChildWindows,t.control.showWindow=function(t){return function(){return t.childWindows.map(function(t){return t.showWindow()})}}(this),t.control.hideWindow=function(t){return function(){return t.childWindows.map(function(t){return t.hideWindow()})}}(this)),null!=this.onChildCreation&&null!=a?this.onChildCreation(a):void 0},l}(i)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapWindows",["uiGmapIWindow","uiGmapPlural","uiGmapWindowsParentModel","uiGmapPromise","uiGmapLogger",function(e,i,o,r,s){var a;return a=function(e){function a(){this.link=t(this.link,this),a.__super__.constructor.call(this),this.require=["^uiGmapGoogleMap","^?uiGmapMarkers"],this.template='<span class="angular-google-maps-windows" ng-transclude></span>',i.extend(this),s.debug(this)}return n(a,e),a.prototype.link=function(t,e,n,i){var o,s,a;return o=i[0].getScope(),s=i.length>1&&null!=i[1]?i[1]:void 0,a=null!=s?s.getScope():void 0,o.deferred.promise.then(function(o){return function(s){var u,l;return u=(null!=a&&null!=(l=a.deferred)?l.promise:void 0)||r.resolve(),u.then(function(){var r,u;return r=null!=(u=o.parentModel)?u.existingPieces:void 0,r?r.then(function(){return o.init(t,e,n,i,s,a)}):o.init(t,e,n,i,s,a)})}}(this))},a.prototype.init=function(t,e,n,r,s,a){var u;return u=new o(t,e,n,r,s,a),i.link(t,u),null!=t.control?(t.control.getGWindows=function(){return u.plurals.map(function(t){return t.gObject})},t.control.getChildWindows=function(){return u.plurals}):void 0},a}(e)}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapGoogleMap",["uiGmapMap",function(t){return new t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapMarker",["$timeout","uiGmapMarker",function(t,e){return new e(t)}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapMarkers",["$timeout","uiGmapMarkers",function(t,e){return new e(t)}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapPolygon",["uiGmapPolygon",function(t){return new t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapCircle",["uiGmapCircle",function(t){return t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapPolyline",["uiGmapPolyline",function(t){return new t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapPolylines",["uiGmapPolylines",function(t){return new t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapRectangle",["uiGmapLogger","uiGmapRectangle",function(t,e){return e}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapWindow",["$timeout","$compile","$http","$templateCache","uiGmapWindow",function(t,e,n,i,o){return new o(t,e,n,i)}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapWindows",["$timeout","$compile","$http","$templateCache","$interpolate","uiGmapWindows",function(t,e,n,i,o,r){return new r(t,e,n,i,o)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.module("uiGmapgoogle-maps").directive("uiGmapLayer",["$timeout","uiGmapLogger","uiGmapLayerParentModel",function(e,n,i){var o;return new(o=function(){function e(){this.link=t(this.link,this),this.$log=n,this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.template="<span class='angular-google-map-layer' ng-transclude></span>",this.replace=!0,this.scope={show:"=show",type:"=type",namespace:"=namespace",options:"=options",onCreated:"&oncreated"}}return e.prototype.link=function(t,e,n,o){return o.getScope().deferred.promise.then(function(o){return function(o){return null!=t.onCreated?new i(t,e,n,o,t.onCreated):new i(t,e,n,o)}}(this))},e}())}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapMapControl",["uiGmapControl",function(t){return new t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapDragZoom",["uiGmapDragZoom",function(t){return t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapDrawingManager",["uiGmapDrawingManager",function(t){return t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapFreeDrawPolygons",["uiGmapApiFreeDrawPolygons",function(t){return new t}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.module("uiGmapgoogle-maps").directive("uiGmapMapType",["$timeout","uiGmapLogger","uiGmapMapTypeParentModel",function(e,n,i){var o;return new(o=function(){function e(){this.link=t(this.link,this),this.$log=n,this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.template='<span class="angular-google-map-layer" ng-transclude></span>',this.replace=!0,this.scope={show:"=show",options:"=options",refresh:"=refresh",id:"@"}}return e.prototype.link=function(t,e,n,o){return o.getScope().deferred.promise.then(function(o){return function(o){return new i(t,e,n,o)}}(this))},e}())}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.module("uiGmapgoogle-maps").directive("uiGmapMapTypes",["$timeout","uiGmapLogger","uiGmapMapTypesParentModel",function(e,n,i){var o;return new(o=function(){function e(){this.link=t(this.link,this),this.$log=n,this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.template='<span class="angular-google-map-layers" ng-transclude></span>',this.scope={mapTypes:"=mapTypes",show:"=show",options:"=options",refresh:"=refresh",id:"=idKey"}}return e.prototype.link=function(t,e,n,o){return o.getScope().deferred.promise.then(function(o){return function(o){return new i(t,e,n,o)}}(this))},e}())}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapPolygons",["uiGmapPolygons",function(t){return new t}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.module("uiGmapgoogle-maps").directive("uiGmapSearchBox",["uiGmapGoogleMapApi","uiGmapLogger","uiGmapSearchBoxParentModel","$http","$templateCache","$compile",function(n,i,o,r,s,a){var u;return new(u=function(){function u(){this.link=t(this.link,this),this.$log=i,this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.template="<span class='angular-google-map-search' ng-transclude></span>",this.replace=!0,this.scope={template:"=template",events:"=events",position:"=?position",options:"=?options",parentdiv:"=?parentdiv",ngModel:"=?"}}return u.prototype.require="ngModel",u.prototype.link=function(t,i,u,l){return n.then(function(n){return function(p){return null==t.template&&(s.put("uigmap-searchbox-default.tpl.html",'<input type="text">'),t.template="uigmap-searchbox-default.tpl.html"),r.get(t.template,{cache:s}).success(function(r){return e.isUndefined(t.events)?void n.$log.error("searchBox: the events property is required"):l.getScope().deferred.promise.then(function(s){var l;return l=e.isDefined(t.position)?t.position.toUpperCase().replace(/-/g,"_"):"TOP_LEFT",p.ControlPosition[l]?new o(t,i,u,s,l,a(r)(t)):void n.$log.error("searchBox: invalid position property")})})}}(this))},u}())}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapShow",["$animate","uiGmapLogger",function(t,n){return{scope:{uiGmapShow:"=",uiGmapAfterShow:"&",uiGmapAfterHide:"&"},link:function(i,o){var r,s,a;return r=function(e,n){return t[e](o,"ng-hide").then(function(){return n()})},s=function(e,n){return t[e](o,"ng-hide",n)},a=function(t,i){return e.version.major>1?n.error("uiGmapShow is not supported for Angular Major greater than 1.\nYour Major is "+e.version.major+'"'):1===e.version.major&&e.version.minor<3?s(t,i):r(t,i)},i.$watch("uiGmapShow",function(t){return t&&a("removeClass",i.uiGmapAfterShow),t?void 0:a("addClass",i.uiGmapAfterHide)})}}}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapStreetViewPanorama",["uiGmapGoogleMapApi","uiGmapLogger","uiGmapGmapUtil","uiGmapEventsHelper",function(t,n,i,o){var r;return r="uiGmapStreetViewPanorama",{restrict:"EMA",template:'<div class="angular-google-map-street-view-panorama"></div>',replace:!0,scope:{focalcoord:"=",radius:"=?",events:"=?",options:"=?",control:"=?",povoptions:"=?",imagestatus:"="},link:function(s,a,u){return t.then(function(t){return function(t){var u,l,p,c,h,d,f,g,m,v;return g=void 0,v=void 0,p=!1,d=void 0,f=null,m=null,u=function(){return o.removeEvents(d),null!=g&&(g.unbind("position"),g.setVisible(!1)),null!=v?(null!=(null!=v?v.setVisible:void 0)&&v.setVisible(!1),v=void 0):void 0},h=function(t,n){var i;return i=google.maps.geometry.spherical.computeHeading(t,n),p=!0,s.radius=s.radius||50,m=e.extend({heading:i,zoom:1,pitch:0},s.povoptions||{}),f=f=e.extend({navigationControl:!1,addressControl:!1,linksControl:!1,position:t,pov:m,visible:!0},s.options||{}),p=!1},l=function(){var t;return s.focalcoord?s.radius?(u(),null==v&&(v=new google.maps.StreetViewService),s.events&&(d=o.setEvents(v,s,s)),t=i.getCoords(s.focalcoord),v.getPanoramaByLocation(t,s.radius,function(e,n){var i,o,r;return null!=s.imagestatus&&(s.imagestatus=n),null!=(null!=(r=s.events)?r.image_status_changed:void 0)&&s.events.image_status_changed(v,"image_status_changed",s,n),"OK"===n?(o=e.location.latLng,h(o,t),i=a[0],g=new google.maps.StreetViewPanorama(i,f)):void 0})):void n.error(r+": needs a radius to set the camera view from its focal target."):void n.error(r+": focalCoord needs to be defined")},null!=s.control&&(s.control.getOptions=function(){return f},s.control.getPovOptions=function(){return m},s.control.getGObject=function(){return v},s.control.getGPano=function(){return g}),s.$watch("options",function(t,e){return t===e||t===f||p?void 0:l()}),c=!0,s.$watch("focalcoord",function(t,e){return t===e&&!c||null==t?void 0:(c=!1,l())}),s.$on("$destroy",function(){return u()})}}(this))}}}])}.call(this),e.module("uiGmapgoogle-maps.wrapped").service("uiGmapuuid",function(){function t(){}return t.generate=function(){var e=t._gri,n=t._ha;return n(e(32),8)+"-"+n(e(16),4)+"-"+n(16384|e(12),4)+"-"+n(32768|e(14),4)+"-"+n(e(48),12)},t._gri=function(t){return 0>t?NaN:30>=t?0|Math.random()*(1<<t):53>=t?(0|1073741824*Math.random())+1073741824*(0|Math.random()*(1<<t-30)):NaN},t._ha=function(t,e){for(var n=t.toString(16),i=e-n.length,o="0";i>0;i>>>=1,o+=o)1&i&&(n=o+n);return n},t}),e.module("uiGmapgoogle-maps.wrapped").service("uiGmapGoogleMapsUtilV3",function(){return{init:n.once(function(){+function(){function e(t,n){t.getMarkerClusterer().extend(e,google.maps.OverlayView),this.cluster_=t,this.className_=t.getMarkerClusterer().getClusterClass(),this.styles_=n,this.center_=null,this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(t.getMap())}function n(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinimumClusterSize(),this.averageCenter_=t.getAverageCenter(),this.hideLabel_=t.getHideLabel(),this.markers_=[],this.center_=null,this.bounds_=null,this.clusterIcon_=new e(this,t.getStyles())}function o(t,e,n){this.extend(o,google.maps.OverlayView),e=e||[],n=n||{},this.markers_=[],this.clusters_=[],this.listeners_=[],this.activeMap_=null,this.ready_=!1,this.gridSize_=n.gridSize||60,this.minClusterSize_=n.minimumClusterSize||2,this.maxZoom_=n.maxZoom||null,this.styles_=n.styles||[],this.title_=n.title||"",this.zoomOnClick_=!0,void 0!==n.zoomOnClick&&(this.zoomOnClick_=n.zoomOnClick),this.averageCenter_=!1,void 0!==n.averageCenter&&(this.averageCenter_=n.averageCenter),this.ignoreHidden_=!1,void 0!==n.ignoreHidden&&(this.ignoreHidden_=n.ignoreHidden),this.enableRetinaIcons_=!1,void 0!==n.enableRetinaIcons&&(this.enableRetinaIcons_=n.enableRetinaIcons),this.hideLabel_=!1,void 0!==n.hideLabel&&(this.hideLabel_=n.hideLabel),this.imagePath_=n.imagePath||o.IMAGE_PATH,this.imageExtension_=n.imageExtension||o.IMAGE_EXTENSION,this.imageSizes_=n.imageSizes||o.IMAGE_SIZES,this.calculator_=n.calculator||o.CALCULATOR,this.batchSize_=n.batchSize||o.BATCH_SIZE,this.batchSizeIE_=n.batchSizeIE||o.BATCH_SIZE_IE,this.clusterClass_=n.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize_=this.batchSizeIE_),this.setupStyles_(),this.addMarkers(e,!0),this.setMap(t)}function r(t){t=t||{},google.maps.OverlayView.apply(this,arguments),this.content_=t.content||"",this.disableAutoPan_=t.disableAutoPan||!1,this.maxWidth_=t.maxWidth||0,this.pixelOffset_=t.pixelOffset||new google.maps.Size(0,0),this.position_=t.position||new google.maps.LatLng(0,0),this.zIndex_=t.zIndex||null,this.boxClass_=t.boxClass||"infoBox",this.boxStyle_=t.boxStyle||{},this.closeBoxMargin_=t.closeBoxMargin||"2px",this.closeBoxURL_=t.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===t.closeBoxURL&&(this.closeBoxURL_=""),this.infoBoxClearance_=t.infoBoxClearance||new google.maps.Size(1,1),"undefined"==typeof t.visible&&("undefined"==typeof t.isHidden?t.visible=!0:t.visible=!t.isHidden),this.isHidden_=!t.visible,this.alignBottom_=t.alignBottom||!1,this.pane_=t.pane||"floatPane",this.enableEventPropagation_=t.enableEventPropagation||!1,this.div_=null,this.closeListener_=null,this.moveListener_=null,this.contextListener_=null,this.eventListeners_=null,this.fixedWidthSet_=null}function s(t,e){function n(){}n.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new n,t.prototype.constructor=t}function a(t,e,n){this.marker_=t,this.handCursorURL_=t.handCursorURL,this.labelDiv_=document.createElement("div"),this.labelDiv_.style.cssText="position: absolute; overflow: hidden;",this.eventDiv_=document.createElement("div"),this.eventDiv_.style.cssText=this.labelDiv_.style.cssText,this.eventDiv_.setAttribute("onselectstart","return false;"),this.eventDiv_.setAttribute("ondragstart","return false;"),this.crossDiv_=a.getSharedCross(e)}function u(t){t=t||{},t.labelContent=t.labelContent||"",t.labelAnchor=t.labelAnchor||new google.maps.Point(0,0),t.labelClass=t.labelClass||"markerLabels",t.labelStyle=t.labelStyle||{},t.labelInBackground=t.labelInBackground||!1,"undefined"==typeof t.labelVisible&&(t.labelVisible=!0),"undefined"==typeof t.raiseOnDrag&&(t.raiseOnDrag=!0),"undefined"==typeof t.clickable&&(t.clickable=!0),"undefined"==typeof t.draggable&&(t.draggable=!1),"undefined"==typeof t.optimized&&(t.optimized=!1),t.crossImage=t.crossImage||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png",t.handCursor=t.handCursor||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur",t.optimized=!1,this.label=new a(this,t.crossImage,t.handCursor),google.maps.Marker.apply(this,arguments)}function l(t){var e=t||{};this.ready_=!1,this.dragging_=!1,t.visible==i&&(t.visible=!0),t.shadow==i&&(t.shadow="7px -3px 5px rgba(88,88,88,0.7)"),t.anchor==i&&(t.anchor=p.BOTTOM),this.setValues(e)}e.prototype.onAdd=function(){var t,e,n=this;this.div_=document.createElement("div"),this.div_.className=this.className_,this.visible_&&this.show(),this.getPanes().overlayMouseTarget.appendChild(this.div_),this.boundsChangedListener_=google.maps.event.addListener(this.getMap(),"bounds_changed",function(){e=t}),google.maps.event.addDomListener(this.div_,"mousedown",function(){t=!0,e=!1}),google.maps.event.addDomListener(this.div_,"click",function(i){if(t=!1,!e){var o,r,s=n.cluster_.getMarkerClusterer();google.maps.event.trigger(s,"click",n.cluster_),google.maps.event.trigger(s,"clusterclick",n.cluster_),s.getZoomOnClick()&&(r=s.getMaxZoom(),o=n.cluster_.getBounds(),s.getMap().fitBounds(o),setTimeout(function(){s.getMap().fitBounds(o),null!==r&&s.getMap().getZoom()>r&&s.getMap().setZoom(r+1)},100)),i.cancelBubble=!0,i.stopPropagation&&i.stopPropagation()}}),google.maps.event.addDomListener(this.div_,"mouseover",function(){var t=n.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"mouseover",n.cluster_)}),google.maps.event.addDomListener(this.div_,"mouseout",function(){var t=n.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"mouseout",n.cluster_)})},e.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),google.maps.event.removeListener(this.boundsChangedListener_),google.maps.event.clearInstanceListeners(this.div_),this.div_.parentNode.removeChild(this.div_),this.div_=null)},e.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},e.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},e.prototype.show=function(){if(this.div_){var t="",e=this.backgroundPosition_.split(" "),n=parseInt(e[0].trim(),10),i=parseInt(e[1].trim(),10),o=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(o),t="<img src='"+this.url_+"' style='position: absolute; top: "+i+"px; left: "+n+"px; ",t+=this.cluster_.getMarkerClusterer().enableRetinaIcons_?"width: "+this.width_+"px;height: "+this.height_+"px;":"clip: rect("+-1*i+"px, "+(-1*n+this.width_)+"px, "+(-1*i+this.height_)+"px, "+-1*n+"px);",t+="'>",this.div_.innerHTML=t+"<div style='position: absolute;top: "+this.anchorText_[0]+"px;left: "+this.anchorText_[1]+"px;color: "+this.textColor_+";font-size: "+this.textSize_+"px;font-family: "+this.fontFamily_+";font-weight: "+this.fontWeight_+";font-style: "+this.fontStyle_+";text-decoration: "+this.textDecoration_+";text-align: center;width: "+this.width_+"px;line-height:"+this.height_+"px;'>"+(this.cluster_.hideLabel_?" ":this.sums_.text)+"</div>",this.div_.title="undefined"==typeof this.sums_.title||""===this.sums_.title?this.cluster_.getMarkerClusterer().getTitle():this.sums_.title,this.div_.style.display=""}this.visible_=!0},e.prototype.useStyle=function(t){this.sums_=t;var e=Math.max(0,t.index-1);e=Math.min(this.styles_.length-1,e);var n=this.styles_[e];this.url_=n.url,this.height_=n.height,this.width_=n.width,this.anchorText_=n.anchorText||[0,0],this.anchorIcon_=n.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)],this.textColor_=n.textColor||"black",this.textSize_=n.textSize||11,this.textDecoration_=n.textDecoration||"none",this.fontWeight_=n.fontWeight||"bold",this.fontStyle_=n.fontStyle||"normal",this.fontFamily_=n.fontFamily||"Arial,sans-serif",this.backgroundPosition_=n.backgroundPosition||"0 0"},e.prototype.setCenter=function(t){this.center_=t},e.prototype.createCss=function(t){var e=[];return e.push("cursor: pointer;"),e.push("position: absolute; top: "+t.y+"px; left: "+t.x+"px;"),e.push("width: "+this.width_+"px; height: "+this.height_+"px;"),e.join("")},e.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return e.x-=this.anchorIcon_[1],e.y-=this.anchorIcon_[0],e.x=parseInt(e.x,10),e.y=parseInt(e.y,10),e},n.prototype.getSize=function(){return this.markers_.length},n.prototype.getMarkers=function(){return this.markers_},n.prototype.getCenter=function(){return this.center_},n.prototype.getMap=function(){return this.map_},n.prototype.getMarkerClusterer=function(){return this.markerClusterer_},n.prototype.getBounds=function(){var t,e=new google.maps.LatLngBounds(this.center_,this.center_),n=this.getMarkers();for(t=0;t<n.length;t++)e.extend(n[t].getPosition());return e},n.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=[],delete this.markers_},n.prototype.addMarker=function(t){var e,n,i;if(this.isMarkerAlreadyAdded_(t))return!1;if(this.center_){if(this.averageCenter_){var o=this.markers_.length+1,r=(this.center_.lat()*(o-1)+t.getPosition().lat())/o,s=(this.center_.lng()*(o-1)+t.getPosition().lng())/o;this.center_=new google.maps.LatLng(r,s),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();if(t.isAdded=!0,this.markers_.push(t),n=this.markers_.length,i=this.markerClusterer_.getMaxZoom(),null!==i&&this.map_.getZoom()>i)t.getMap()!==this.map_&&t.setMap(this.map_);else if(n<this.minClusterSize_)t.getMap()!==this.map_&&t.setMap(this.map_);else if(n===this.minClusterSize_)for(e=0;n>e;e++)this.markers_[e].setMap(null);else t.setMap(null);return!0},n.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},n.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},n.prototype.updateIcon_=function(){var t=this.markers_.length,e=this.markerClusterer_.getMaxZoom();if(null!==e&&this.map_.getZoom()>e)return void this.clusterIcon_.hide();if(t<this.minClusterSize_)return void this.clusterIcon_.hide();var n=this.markerClusterer_.getStyles().length,i=this.markerClusterer_.getCalculator()(this.markers_,n);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.useStyle(i),this.clusterIcon_.show()},n.prototype.isMarkerAlreadyAdded_=function(t){for(var e=0,n=this.markers_.length;n>e;e++)if(t===this.markers_[e])return!0;return!1},o.prototype.onAdd=function(){var t=this;this.activeMap_=this.getMap(),this.ready_=!0,this.repaint(),this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){t.resetViewport_(!1),(this.getZoom()===(this.get("minZoom")||0)||this.getZoom()===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")}),google.maps.event.addListener(this.getMap(),"idle",function(){t.redraw_()})]},o.prototype.onRemove=function(){var t;for(t=0;t<this.markers_.length;t++)this.markers_[t].getMap()!==this.activeMap_&&this.markers_[t].setMap(this.activeMap_);for(t=0;t<this.clusters_.length;t++)this.clusters_[t].remove();for(this.clusters_=[],t=0;t<this.listeners_.length;t++)google.maps.event.removeListener(this.listeners_[t]);this.listeners_=[],this.activeMap_=null,this.ready_=!1},o.prototype.draw=function(){},o.prototype.setupStyles_=function(){var t,e;if(!(this.styles_.length>0))for(t=0;t<this.imageSizes_.length;t++)e=this.imageSizes_[t],this.styles_.push({url:this.imagePath_+(t+1)+"."+this.imageExtension_,height:e,width:e})},o.prototype.fitMapToMarkers=function(){var t,e=this.getMarkers(),n=new google.maps.LatLngBounds;for(t=0;t<e.length;t++)n.extend(e[t].getPosition());this.getMap().fitBounds(n)},o.prototype.getGridSize=function(){return this.gridSize_},o.prototype.setGridSize=function(t){this.gridSize_=t},o.prototype.getMinimumClusterSize=function(){return this.minClusterSize_},o.prototype.setMinimumClusterSize=function(t){this.minClusterSize_=t},o.prototype.getMaxZoom=function(){return this.maxZoom_},o.prototype.setMaxZoom=function(t){this.maxZoom_=t},o.prototype.getStyles=function(){return this.styles_},o.prototype.setStyles=function(t){this.styles_=t},o.prototype.getTitle=function(){return this.title_},o.prototype.setTitle=function(t){this.title_=t},o.prototype.getZoomOnClick=function(){return this.zoomOnClick_},o.prototype.setZoomOnClick=function(t){this.zoomOnClick_=t},o.prototype.getAverageCenter=function(){return this.averageCenter_},o.prototype.setAverageCenter=function(t){this.averageCenter_=t},o.prototype.getIgnoreHidden=function(){return this.ignoreHidden_},o.prototype.setIgnoreHidden=function(t){this.ignoreHidden_=t},o.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons_},o.prototype.setEnableRetinaIcons=function(t){this.enableRetinaIcons_=t},o.prototype.getImageExtension=function(){return this.imageExtension_},o.prototype.setImageExtension=function(t){this.imageExtension_=t},o.prototype.getImagePath=function(){return this.imagePath_},o.prototype.setImagePath=function(t){this.imagePath_=t},o.prototype.getImageSizes=function(){return this.imageSizes_},o.prototype.setImageSizes=function(t){this.imageSizes_=t},o.prototype.getCalculator=function(){return this.calculator_},o.prototype.setCalculator=function(t){this.calculator_=t},o.prototype.setHideLabel=function(t){this.hideLabel_=t},o.prototype.getHideLabel=function(){return this.hideLabel_},o.prototype.getBatchSizeIE=function(){return this.batchSizeIE_},o.prototype.setBatchSizeIE=function(t){this.batchSizeIE_=t},o.prototype.getClusterClass=function(){return this.clusterClass_},o.prototype.setClusterClass=function(t){this.clusterClass_=t},o.prototype.getMarkers=function(){return this.markers_},o.prototype.getTotalMarkers=function(){return this.markers_.length},o.prototype.getClusters=function(){return this.clusters_},o.prototype.getTotalClusters=function(){return this.clusters_.length},o.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw_()},o.prototype.addMarkers=function(t,e){var n;for(n in t)t.hasOwnProperty(n)&&this.pushMarkerTo_(t[n]);e||this.redraw_()},o.prototype.pushMarkerTo_=function(t){if(t.getDraggable()){var e=this;google.maps.event.addListener(t,"dragend",function(){e.ready_&&(this.isAdded=!1,e.repaint())})}t.isAdded=!1,this.markers_.push(t)},o.prototype.removeMarker=function(t,e,n){var i=!n,o=this.removeMarker_(t,i);return!e&&o&&this.repaint(),o},o.prototype.removeMarkers=function(t,e,n){var i,o,r=!1,s=!n;for(i=0;i<t.length;i++)o=this.removeMarker_(t[i],s),r=r||o;return!e&&r&&this.repaint(),r},o.prototype.removeMarker_=function(t,e){var n,i=-1;if(this.markers_.indexOf)i=this.markers_.indexOf(t);else for(n=0;n<this.markers_.length;n++)if(t===this.markers_[n]){i=n;break}return-1!==i&&(e&&t.setMap(null),this.markers_.splice(i,1),!0)},o.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=[]},o.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_=[],this.resetViewport_(!1),this.redraw_(),setTimeout(function(){var e;for(e=0;e<t.length;e++)t[e].remove()},0)},o.prototype.getExtendedBounds=function(t){var e=this.getProjection(),n=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),i=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),o=e.fromLatLngToDivPixel(n);o.x+=this.gridSize_,o.y-=this.gridSize_;var r=e.fromLatLngToDivPixel(i);r.x-=this.gridSize_,r.y+=this.gridSize_;var s=e.fromDivPixelToLatLng(o),a=e.fromDivPixelToLatLng(r);return t.extend(s),t.extend(a),t},o.prototype.redraw_=function(){this.createClusters_(0)},o.prototype.resetViewport_=function(t){var e,n;for(e=0;e<this.clusters_.length;e++)this.clusters_[e].remove();for(this.clusters_=[],e=0;e<this.markers_.length;e++)n=this.markers_[e],n.isAdded=!1,t&&n.setMap(null)},o.prototype.distanceBetweenPoints_=function(t,e){var n=6371,i=(e.lat()-t.lat())*Math.PI/180,o=(e.lng()-t.lng())*Math.PI/180,r=Math.sin(i/2)*Math.sin(i/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2),s=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)),a=n*s;return a},o.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},o.prototype.addToClosestCluster_=function(t){var e,i,o,r,s=4e4,a=null;for(e=0;e<this.clusters_.length;e++)o=this.clusters_[e],r=o.getCenter(),r&&(i=this.distanceBetweenPoints_(r,t.getPosition()),s>i&&(s=i,a=o));a&&a.isMarkerInClusterBounds(t)?a.addMarker(t):(o=new n(this),o.addMarker(t),this.clusters_.push(o))},o.prototype.createClusters_=function(t){var e,n,i,o=this;if(this.ready_){0===t&&(google.maps.event.trigger(this,"clusteringbegin",this),"undefined"!=typeof this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),i=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625));var r=this.getExtendedBounds(i),s=Math.min(t+this.batchSize_,this.markers_.length);for(e=t;s>e;e++)n=this.markers_[e],!n.isAdded&&this.isMarkerInBounds_(n,r)&&(!this.ignoreHidden_||this.ignoreHidden_&&n.getVisible())&&this.addToClosestCluster_(n);if(s<this.markers_.length)this.timerRefStatic=setTimeout(function(){o.createClusters_(s)},0);else for(delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this),e=0;e<this.clusters_.length;e++)this.clusters_[e].updateIcon_()}},o.prototype.extend=function(t,e){return function(t){var e;for(e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},o.CALCULATOR=function(t,e){for(var n=0,i="",o=t.length.toString(),r=o;0!==r;)r=parseInt(r/10,10),n++;return n=Math.min(n,e),{text:o,index:n,title:i}},o.BATCH_SIZE=2e3,o.BATCH_SIZE_IE=500,o.IMAGE_PATH="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/images/m",o.IMAGE_EXTENSION="png",o.IMAGE_SIZES=[53,56,66,78,90],"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),r.prototype=new google.maps.OverlayView,r.prototype.createInfoBoxDiv_=function(){var t,e,n,i=this,o=function(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()},r=function(t){t.returnValue=!1,t.preventDefault&&t.preventDefault(),i.enableEventPropagation_||o(t)};if(!this.div_){if(this.div_=document.createElement("div"),this.setBoxStyle_(),"undefined"==typeof this.content_.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+this.content_:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(this.content_)),this.getPanes()[this.pane_].appendChild(this.div_),this.addClickHandler_(),this.div_.style.width?this.fixedWidthSet_=!0:0!==this.maxWidth_&&this.div_.offsetWidth>this.maxWidth_?(this.div_.style.width=this.maxWidth_,this.div_.style.overflow="auto",this.fixedWidthSet_=!0):(n=this.getBoxWidths_(),this.div_.style.width=this.div_.offsetWidth-n.left-n.right+"px",this.fixedWidthSet_=!1),this.panBox_(this.disableAutoPan_),!this.enableEventPropagation_){for(this.eventListeners_=[],e=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],t=0;t<e.length;t++)this.eventListeners_.push(google.maps.event.addDomListener(this.div_,e[t],o));this.eventListeners_.push(google.maps.event.addDomListener(this.div_,"mouseover",function(t){this.style.cursor="default"}))}this.contextListener_=google.maps.event.addDomListener(this.div_,"contextmenu",r),google.maps.event.trigger(this,"domready")}},r.prototype.getCloseBoxImg_=function(){var t="";return""!==this.closeBoxURL_&&(t="<img",t+=" src='"+this.closeBoxURL_+"'",t+=" align=right",t+=" style='",t+=" position: relative;",t+=" cursor: pointer;",t+=" margin: "+this.closeBoxMargin_+";",t+="'>"),t},r.prototype.addClickHandler_=function(){var t;""!==this.closeBoxURL_?(t=this.div_.firstChild,this.closeListener_=google.maps.event.addDomListener(t,"click",this.getCloseClickHandler_())):this.closeListener_=null},r.prototype.getCloseClickHandler_=function(){var t=this;return function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(t,"closeclick"),t.close()}},r.prototype.panBox_=function(t){var e,n,i=0,o=0;if(!t&&(e=this.getMap(),e instanceof google.maps.Map)){e.getBounds().contains(this.position_)||e.setCenter(this.position_),n=e.getBounds();var r=e.getDiv(),s=r.offsetWidth,a=r.offsetHeight,u=this.pixelOffset_.width,l=this.pixelOffset_.height,p=this.div_.offsetWidth,c=this.div_.offsetHeight,h=this.infoBoxClearance_.width,d=this.infoBoxClearance_.height,f=this.getProjection().fromLatLngToContainerPixel(this.position_);f.x<-u+h?i=f.x+u-h:f.x+p+u+h>s&&(i=f.x+p+u+h-s),this.alignBottom_?f.y<-l+d+c?o=f.y+l-d-c:f.y+l+d>a&&(o=f.y+l+d-a):f.y<-l+d?o=f.y+l-d:f.y+c+l+d>a&&(o=f.y+c+l+d-a),(0!==i||0!==o)&&(e.getCenter(),e.panBy(i,o))}},r.prototype.setBoxStyle_=function(){var t,e;if(this.div_){this.div_.className=this.boxClass_,this.div_.style.cssText="",
e=this.boxStyle_;for(t in e)e.hasOwnProperty(t)&&(this.div_.style[t]=e[t]);this.div_.style.WebkitTransform="translateZ(0)","undefined"!=typeof this.div_.style.opacity&&""!==this.div_.style.opacity&&(this.div_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*this.div_.style.opacity+')"',this.div_.style.filter="alpha(opacity="+100*this.div_.style.opacity+")"),this.div_.style.position="absolute",this.div_.style.visibility="hidden",null!==this.zIndex_&&(this.div_.style.zIndex=this.zIndex_)}},r.prototype.getBoxWidths_=function(){var t,e={top:0,bottom:0,left:0,right:0},n=this.div_;return document.defaultView&&document.defaultView.getComputedStyle?(t=n.ownerDocument.defaultView.getComputedStyle(n,""),t&&(e.top=parseInt(t.borderTopWidth,10)||0,e.bottom=parseInt(t.borderBottomWidth,10)||0,e.left=parseInt(t.borderLeftWidth,10)||0,e.right=parseInt(t.borderRightWidth,10)||0)):document.documentElement.currentStyle&&n.currentStyle&&(e.top=parseInt(n.currentStyle.borderTopWidth,10)||0,e.bottom=parseInt(n.currentStyle.borderBottomWidth,10)||0,e.left=parseInt(n.currentStyle.borderLeftWidth,10)||0,e.right=parseInt(n.currentStyle.borderRightWidth,10)||0),e},r.prototype.onRemove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_=null)},r.prototype.draw=function(){this.createInfoBoxDiv_();var t=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=t.x+this.pixelOffset_.width+"px",this.alignBottom_?this.div_.style.bottom=-(t.y+this.pixelOffset_.height)+"px":this.div_.style.top=t.y+this.pixelOffset_.height+"px",this.isHidden_?this.div_.style.visibility="hidden":this.div_.style.visibility="visible"},r.prototype.setOptions=function(t){"undefined"!=typeof t.boxClass&&(this.boxClass_=t.boxClass,this.setBoxStyle_()),"undefined"!=typeof t.boxStyle&&(this.boxStyle_=t.boxStyle,this.setBoxStyle_()),"undefined"!=typeof t.content&&this.setContent(t.content),"undefined"!=typeof t.disableAutoPan&&(this.disableAutoPan_=t.disableAutoPan),"undefined"!=typeof t.maxWidth&&(this.maxWidth_=t.maxWidth),"undefined"!=typeof t.pixelOffset&&(this.pixelOffset_=t.pixelOffset),"undefined"!=typeof t.alignBottom&&(this.alignBottom_=t.alignBottom),"undefined"!=typeof t.position&&this.setPosition(t.position),"undefined"!=typeof t.zIndex&&this.setZIndex(t.zIndex),"undefined"!=typeof t.closeBoxMargin&&(this.closeBoxMargin_=t.closeBoxMargin),"undefined"!=typeof t.closeBoxURL&&(this.closeBoxURL_=t.closeBoxURL),"undefined"!=typeof t.infoBoxClearance&&(this.infoBoxClearance_=t.infoBoxClearance),"undefined"!=typeof t.isHidden&&(this.isHidden_=t.isHidden),"undefined"!=typeof t.visible&&(this.isHidden_=!t.visible),"undefined"!=typeof t.enableEventPropagation&&(this.enableEventPropagation_=t.enableEventPropagation),this.div_&&this.draw()},r.prototype.setContent=function(t){this.content_=t,this.div_&&(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.fixedWidthSet_||(this.div_.style.width=""),"undefined"==typeof t.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+t:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(t)),this.fixedWidthSet_||(this.div_.style.width=this.div_.offsetWidth+"px","undefined"==typeof t.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+t:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(t))),this.addClickHandler_()),google.maps.event.trigger(this,"content_changed")},r.prototype.setPosition=function(t){this.position_=t,this.div_&&this.draw(),google.maps.event.trigger(this,"position_changed")},r.prototype.setZIndex=function(t){this.zIndex_=t,this.div_&&(this.div_.style.zIndex=t),google.maps.event.trigger(this,"zindex_changed")},r.prototype.setVisible=function(t){this.isHidden_=!t,this.div_&&(this.div_.style.visibility=this.isHidden_?"hidden":"visible")},r.prototype.getContent=function(){return this.content_},r.prototype.getPosition=function(){return this.position_},r.prototype.getZIndex=function(){return this.zIndex_},r.prototype.getVisible=function(){var t;return t="undefined"!=typeof this.getMap()&&null!==this.getMap()&&!this.isHidden_},r.prototype.show=function(){this.isHidden_=!1,this.div_&&(this.div_.style.visibility="visible")},r.prototype.hide=function(){this.isHidden_=!0,this.div_&&(this.div_.style.visibility="hidden")},r.prototype.open=function(t,e){var n=this;e&&(this.position_=e.getPosition(),this.moveListener_=google.maps.event.addListener(e,"position_changed",function(){n.setPosition(this.getPosition())})),this.setMap(t),this.div_&&this.panBox_()},r.prototype.close=function(){var t;if(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.eventListeners_){for(t=0;t<this.eventListeners_.length;t++)google.maps.event.removeListener(this.eventListeners_[t]);this.eventListeners_=null}this.moveListener_&&(google.maps.event.removeListener(this.moveListener_),this.moveListener_=null),this.contextListener_&&(google.maps.event.removeListener(this.contextListener_),this.contextListener_=null),this.setMap(null)},function(){function e(t,e){var n=this,i=new google.maps.OverlayView;i.onAdd=function(){n.init_(t,e)},i.draw=function(){},i.onRemove=function(){},i.setMap(t),this.prjov_=i}var n=function(t){var e;switch(t){case"thin":e="2px";break;case"medium":e="4px";break;case"thick":e="6px";break;default:e=t}return e},i=function(t){var e,i={};if(document.defaultView&&document.defaultView.getComputedStyle){if(e=t.ownerDocument.defaultView.getComputedStyle(t,""))return i.top=parseInt(e.borderTopWidth,10)||0,i.bottom=parseInt(e.borderBottomWidth,10)||0,i.left=parseInt(e.borderLeftWidth,10)||0,i.right=parseInt(e.borderRightWidth,10)||0,i}else if(document.documentElement.currentStyle&&t.currentStyle)return i.top=parseInt(n(t.currentStyle.borderTopWidth),10)||0,i.bottom=parseInt(n(t.currentStyle.borderBottomWidth),10)||0,i.left=parseInt(n(t.currentStyle.borderLeftWidth),10)||0,i.right=parseInt(n(t.currentStyle.borderRightWidth),10)||0,i;return i.top=parseInt(t.style["border-top-width"],10)||0,i.bottom=parseInt(t.style["border-bottom-width"],10)||0,i.left=parseInt(t.style["border-left-width"],10)||0,i.right=parseInt(t.style["border-right-width"],10)||0,i},o={x:0,y:0},r=function(t){o.x="undefined"!=typeof document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft,o.y="undefined"!=typeof document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop};r();var s=function(e){var n=0,i=0;return e=e||t.event,"undefined"!=typeof e.pageX?(n=e.pageX,i=e.pageY):"undefined"!=typeof e.clientX&&(n=e.clientX+o.x,i=e.clientY+o.y),{left:n,top:i}},a=function(e){for(var n=e.offsetLeft,i=e.offsetTop,o=e.offsetParent;null!==o;){o!==document.body&&o!==document.documentElement&&(n-=o.scrollLeft,i-=o.scrollTop);var r=o,s=r.offsetLeft,a=r.offsetTop;if(!s&&!a&&t.getComputedStyle){var u=document.defaultView.getComputedStyle(r,null).MozTransform||document.defaultView.getComputedStyle(r,null).WebkitTransform;if(u&&"string"==typeof u){var l=u.split(",");s+=parseInt(l[4],10)||0,a+=parseInt(l[5],10)||0}}n+=s,i+=a,o=o.offsetParent}return{left:n,top:i}},u=function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},l=function(t,e){"undefined"!=typeof e&&(t.style.opacity=e),"undefined"!=typeof t.style.opacity&&""!==t.style.opacity&&(t.style.filter="alpha(opacity="+100*t.style.opacity+")")};e.prototype.init_=function(e,n){var o,s=this;for(this.map_=e,n=n||{},this.key_=n.key||"shift",this.key_=this.key_.toLowerCase(),this.borderWidths_=i(this.map_.getDiv()),this.veilDiv_=[],o=0;4>o;o++)this.veilDiv_[o]=document.createElement("div"),this.veilDiv_[o].onselectstart=function(){return!1},u(this.veilDiv_[o].style,{backgroundColor:"gray",opacity:.25,cursor:"crosshair"}),u(this.veilDiv_[o].style,n.paneStyle),u(this.veilDiv_[o].style,n.veilStyle),u(this.veilDiv_[o].style,{position:"absolute",overflow:"hidden",display:"none"}),"shift"===this.key_&&(this.veilDiv_[o].style.MozUserSelect="none"),l(this.veilDiv_[o]),"transparent"===this.veilDiv_[o].style.backgroundColor&&(this.veilDiv_[o].style.backgroundColor="white",l(this.veilDiv_[o],0)),this.map_.getDiv().appendChild(this.veilDiv_[o]);this.noZoom_=n.noZoom||!1,this.visualEnabled_=n.visualEnabled||!1,this.visualClass_=n.visualClass||"",this.visualPosition_=n.visualPosition||google.maps.ControlPosition.LEFT_TOP,this.visualPositionOffset_=n.visualPositionOffset||new google.maps.Size(35,0),this.visualPositionIndex_=n.visualPositionIndex||null,this.visualSprite_=n.visualSprite||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/mapfiles/ftr/controls/dragzoom_btn.png",this.visualSize_=n.visualSize||new google.maps.Size(20,20),this.visualTips_=n.visualTips||{},this.visualTips_.off=this.visualTips_.off||"Turn on drag zoom mode",this.visualTips_.on=this.visualTips_.on||"Turn off drag zoom mode",this.boxDiv_=document.createElement("div"),u(this.boxDiv_.style,{border:"4px solid #736AFF"}),u(this.boxDiv_.style,n.boxStyle),u(this.boxDiv_.style,{position:"absolute",display:"none"}),l(this.boxDiv_),this.map_.getDiv().appendChild(this.boxDiv_),this.boxBorderWidths_=i(this.boxDiv_),this.listeners_=[google.maps.event.addDomListener(document,"keydown",function(t){s.onKeyDown_(t)}),google.maps.event.addDomListener(document,"keyup",function(t){s.onKeyUp_(t)}),google.maps.event.addDomListener(this.veilDiv_[0],"mousedown",function(t){s.onMouseDown_(t)}),google.maps.event.addDomListener(this.veilDiv_[1],"mousedown",function(t){s.onMouseDown_(t)}),google.maps.event.addDomListener(this.veilDiv_[2],"mousedown",function(t){s.onMouseDown_(t)}),google.maps.event.addDomListener(this.veilDiv_[3],"mousedown",function(t){s.onMouseDown_(t)}),google.maps.event.addDomListener(document,"mousedown",function(t){s.onMouseDownDocument_(t)}),google.maps.event.addDomListener(document,"mousemove",function(t){s.onMouseMove_(t)}),google.maps.event.addDomListener(document,"mouseup",function(t){s.onMouseUp_(t)}),google.maps.event.addDomListener(t,"scroll",r)],this.hotKeyDown_=!1,this.mouseDown_=!1,this.dragging_=!1,this.startPt_=null,this.endPt_=null,this.mapWidth_=null,this.mapHeight_=null,this.mousePosn_=null,this.mapPosn_=null,this.visualEnabled_&&(this.buttonDiv_=this.initControl_(this.visualPositionOffset_),null!==this.visualPositionIndex_&&(this.buttonDiv_.index=this.visualPositionIndex_),this.map_.controls[this.visualPosition_].push(this.buttonDiv_),this.controlIndex_=this.map_.controls[this.visualPosition_].length-1)},e.prototype.initControl_=function(t){var e,n,i=this;return e=document.createElement("div"),e.className=this.visualClass_,e.style.position="relative",e.style.overflow="hidden",e.style.height=this.visualSize_.height+"px",e.style.width=this.visualSize_.width+"px",e.title=this.visualTips_.off,n=document.createElement("img"),n.src=this.visualSprite_,n.style.position="absolute",n.style.left=-(2*this.visualSize_.width)+"px",n.style.top="0px",e.appendChild(n),e.onclick=function(t){i.hotKeyDown_=!i.hotKeyDown_,i.hotKeyDown_?(i.buttonDiv_.firstChild.style.left=-(0*i.visualSize_.width)+"px",i.buttonDiv_.title=i.visualTips_.on,i.activatedByControl_=!0,google.maps.event.trigger(i,"activate")):(i.buttonDiv_.firstChild.style.left=-(2*i.visualSize_.width)+"px",i.buttonDiv_.title=i.visualTips_.off,google.maps.event.trigger(i,"deactivate")),i.onMouseMove_(t)},e.onmouseover=function(){i.buttonDiv_.firstChild.style.left=-(1*i.visualSize_.width)+"px"},e.onmouseout=function(){i.hotKeyDown_?(i.buttonDiv_.firstChild.style.left=-(0*i.visualSize_.width)+"px",i.buttonDiv_.title=i.visualTips_.on):(i.buttonDiv_.firstChild.style.left=-(2*i.visualSize_.width)+"px",i.buttonDiv_.title=i.visualTips_.off)},e.ondragstart=function(){return!1},u(e.style,{cursor:"pointer",marginTop:t.height+"px",marginLeft:t.width+"px"}),e},e.prototype.isHotKeyDown_=function(e){var n;if(e=e||t.event,n=e.shiftKey&&"shift"===this.key_||e.altKey&&"alt"===this.key_||e.ctrlKey&&"ctrl"===this.key_,!n)switch(e.keyCode){case 16:"shift"===this.key_&&(n=!0);break;case 17:"ctrl"===this.key_&&(n=!0);break;case 18:"alt"===this.key_&&(n=!0)}return n},e.prototype.isMouseOnMap_=function(){var t=this.mousePosn_;if(t){var e=this.mapPosn_,n=this.map_.getDiv();return t.left>e.left&&t.left<e.left+n.offsetWidth&&t.top>e.top&&t.top<e.top+n.offsetHeight}return!1},e.prototype.setVeilVisibility_=function(){var t;if(this.map_&&this.hotKeyDown_&&this.isMouseOnMap_()){var e=this.map_.getDiv();if(this.mapWidth_=e.offsetWidth-(this.borderWidths_.left+this.borderWidths_.right),this.mapHeight_=e.offsetHeight-(this.borderWidths_.top+this.borderWidths_.bottom),this.activatedByControl_){var n=parseInt(this.buttonDiv_.style.left,10)+this.visualPositionOffset_.width,i=parseInt(this.buttonDiv_.style.top,10)+this.visualPositionOffset_.height,o=this.visualSize_.width,r=this.visualSize_.height;for(this.veilDiv_[0].style.top="0px",this.veilDiv_[0].style.left="0px",this.veilDiv_[0].style.width=n+"px",this.veilDiv_[0].style.height=this.mapHeight_+"px",this.veilDiv_[1].style.top="0px",this.veilDiv_[1].style.left=n+o+"px",this.veilDiv_[1].style.width=this.mapWidth_-(n+o)+"px",this.veilDiv_[1].style.height=this.mapHeight_+"px",this.veilDiv_[2].style.top="0px",this.veilDiv_[2].style.left=n+"px",this.veilDiv_[2].style.width=o+"px",this.veilDiv_[2].style.height=i+"px",this.veilDiv_[3].style.top=i+r+"px",this.veilDiv_[3].style.left=n+"px",this.veilDiv_[3].style.width=o+"px",this.veilDiv_[3].style.height=this.mapHeight_-(i+r)+"px",t=0;t<this.veilDiv_.length;t++)this.veilDiv_[t].style.display="block"}else{for(this.veilDiv_[0].style.left="0px",this.veilDiv_[0].style.top="0px",this.veilDiv_[0].style.width=this.mapWidth_+"px",this.veilDiv_[0].style.height=this.mapHeight_+"px",t=1;t<this.veilDiv_.length;t++)this.veilDiv_[t].style.width="0px",this.veilDiv_[t].style.height="0px";for(t=0;t<this.veilDiv_.length;t++)this.veilDiv_[t].style.display="block"}}else for(t=0;t<this.veilDiv_.length;t++)this.veilDiv_[t].style.display="none"},e.prototype.onKeyDown_=function(t){this.map_&&!this.hotKeyDown_&&this.isHotKeyDown_(t)&&(this.mapPosn_=a(this.map_.getDiv()),this.hotKeyDown_=!0,this.activatedByControl_=!1,this.setVeilVisibility_(),google.maps.event.trigger(this,"activate"))},e.prototype.getMousePoint_=function(t){var e=s(t),n=new google.maps.Point;return n.x=e.left-this.mapPosn_.left-this.borderWidths_.left,n.y=e.top-this.mapPosn_.top-this.borderWidths_.top,n.x=Math.min(n.x,this.mapWidth_),n.y=Math.min(n.y,this.mapHeight_),n.x=Math.max(n.x,0),n.y=Math.max(n.y,0),n},e.prototype.onMouseDown_=function(t){if(this.map_&&this.hotKeyDown_){this.mapPosn_=a(this.map_.getDiv()),this.dragging_=!0,this.startPt_=this.endPt_=this.getMousePoint_(t),this.boxDiv_.style.width=this.boxDiv_.style.height="0px";var e=this.prjov_.getProjection(),n=e.fromContainerPixelToLatLng(this.startPt_);google.maps.event.trigger(this,"dragstart",n)}},e.prototype.onMouseDownDocument_=function(t){this.mouseDown_=!0},e.prototype.onMouseMove_=function(t){if(this.mousePosn_=s(t),this.dragging_){this.endPt_=this.getMousePoint_(t);var e=Math.min(this.startPt_.x,this.endPt_.x),n=Math.min(this.startPt_.y,this.endPt_.y),i=Math.abs(this.startPt_.x-this.endPt_.x),o=Math.abs(this.startPt_.y-this.endPt_.y),r=Math.max(0,i-(this.boxBorderWidths_.left+this.boxBorderWidths_.right)),u=Math.max(0,o-(this.boxBorderWidths_.top+this.boxBorderWidths_.bottom));this.veilDiv_[0].style.top="0px",this.veilDiv_[0].style.left="0px",this.veilDiv_[0].style.width=e+"px",this.veilDiv_[0].style.height=this.mapHeight_+"px",this.veilDiv_[1].style.top="0px",this.veilDiv_[1].style.left=e+i+"px",this.veilDiv_[1].style.width=this.mapWidth_-(e+i)+"px",this.veilDiv_[1].style.height=this.mapHeight_+"px",this.veilDiv_[2].style.top="0px",this.veilDiv_[2].style.left=e+"px",this.veilDiv_[2].style.width=i+"px",this.veilDiv_[2].style.height=n+"px",this.veilDiv_[3].style.top=n+o+"px",this.veilDiv_[3].style.left=e+"px",this.veilDiv_[3].style.width=i+"px",this.veilDiv_[3].style.height=this.mapHeight_-(n+o)+"px",this.boxDiv_.style.top=n+"px",this.boxDiv_.style.left=e+"px",this.boxDiv_.style.width=r+"px",this.boxDiv_.style.height=u+"px",this.boxDiv_.style.display="block",google.maps.event.trigger(this,"drag",new google.maps.Point(e,n+o),new google.maps.Point(e+i,n),this.prjov_.getProjection())}else this.mouseDown_||(this.mapPosn_=a(this.map_.getDiv()),this.setVeilVisibility_())},e.prototype.onMouseUp_=function(t){var e,n=this;if(this.mouseDown_=!1,this.dragging_){if(this.getMousePoint_(t).x===this.startPt_.x&&this.getMousePoint_(t).y===this.startPt_.y)return void this.onKeyUp_(t);var i=Math.min(this.startPt_.x,this.endPt_.x),o=Math.min(this.startPt_.y,this.endPt_.y),r=Math.abs(this.startPt_.x-this.endPt_.x),s=Math.abs(this.startPt_.y-this.endPt_.y),a=!0;a&&(i+=this.borderWidths_.left,o+=this.borderWidths_.top);var u=this.prjov_.getProjection(),l=u.fromContainerPixelToLatLng(new google.maps.Point(i,o+s)),p=u.fromContainerPixelToLatLng(new google.maps.Point(i+r,o)),c=new google.maps.LatLngBounds(l,p);if(this.noZoom_)this.boxDiv_.style.display="none";else{e=this.map_.getZoom(),this.map_.fitBounds(c),this.map_.getZoom()<e&&this.map_.setZoom(e);var h=u.fromLatLngToContainerPixel(l),d=u.fromLatLngToContainerPixel(p);a&&(h.x-=this.borderWidths_.left,h.y-=this.borderWidths_.top,d.x-=this.borderWidths_.left,d.y-=this.borderWidths_.top),this.boxDiv_.style.left=h.x+"px",this.boxDiv_.style.top=d.y+"px",this.boxDiv_.style.width=Math.abs(d.x-h.x)-(this.boxBorderWidths_.left+this.boxBorderWidths_.right)+"px",this.boxDiv_.style.height=Math.abs(d.y-h.y)-(this.boxBorderWidths_.top+this.boxBorderWidths_.bottom)+"px",setTimeout(function(){n.boxDiv_.style.display="none"},1e3)}this.dragging_=!1,this.onMouseMove_(t),google.maps.event.trigger(this,"dragend",c),this.isHotKeyDown_(t)||this.onKeyUp_(t)}},e.prototype.onKeyUp_=function(t){var e,n,i,o,r,s,a,u,l=null;if(this.map_&&this.hotKeyDown_){for(this.hotKeyDown_=!1,this.dragging_&&(this.boxDiv_.style.display="none",this.dragging_=!1,n=Math.min(this.startPt_.x,this.endPt_.x),i=Math.min(this.startPt_.y,this.endPt_.y),o=Math.abs(this.startPt_.x-this.endPt_.x),r=Math.abs(this.startPt_.y-this.endPt_.y),s=this.prjov_.getProjection(),a=s.fromContainerPixelToLatLng(new google.maps.Point(n,i+r)),u=s.fromContainerPixelToLatLng(new google.maps.Point(n+o,i)),l=new google.maps.LatLngBounds(a,u)),e=0;e<this.veilDiv_.length;e++)this.veilDiv_[e].style.display="none";this.visualEnabled_&&(this.buttonDiv_.firstChild.style.left=-(2*this.visualSize_.width)+"px",this.buttonDiv_.title=this.visualTips_.off,this.buttonDiv_.style.display=""),google.maps.event.trigger(this,"deactivate",l)}},google.maps.Map.prototype.enableKeyDragZoom=function(t){this.dragZoom_=new e(this,t)},google.maps.Map.prototype.disableKeyDragZoom=function(){var t,e=this.dragZoom_;if(e){for(t=0;t<e.listeners_.length;++t)google.maps.event.removeListener(e.listeners_[t]);for(this.getDiv().removeChild(e.boxDiv_),t=0;t<e.veilDiv_.length;t++)this.getDiv().removeChild(e.veilDiv_[t]);e.visualEnabled_&&this.controls[e.visualPosition_].removeAt(e.controlIndex_),e.prjov_.setMap(null),this.dragZoom_=null}},google.maps.Map.prototype.keyDragZoomEnabled=function(){return null!==this.dragZoom_},google.maps.Map.prototype.getDragZoomObject=function(){return this.dragZoom_}}(),s(a,google.maps.OverlayView),a.getSharedCross=function(t){var e;return"undefined"==typeof a.getSharedCross.crossDiv&&(e=document.createElement("img"),e.style.cssText="position: absolute; z-index: 1000002; display: none;",e.style.marginLeft="-8px",e.style.marginTop="-9px",e.src=t,a.getSharedCross.crossDiv=e),a.getSharedCross.crossDiv},a.prototype.onAdd=function(){var t,e,n,i,o,r,s,u=this,l=!1,p=!1,c=20,h="url("+this.handCursorURL_+")",d=function(t){t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()},f=function(){u.marker_.setAnimation(null)};this.getPanes().overlayImage.appendChild(this.labelDiv_),this.getPanes().overlayMouseTarget.appendChild(this.eventDiv_),"undefined"==typeof a.getSharedCross.processed&&(this.getPanes().overlayImage.appendChild(this.crossDiv_),a.getSharedCross.processed=!0),this.listeners_=[google.maps.event.addDomListener(this.eventDiv_,"mouseover",function(t){(u.marker_.getDraggable()||u.marker_.getClickable())&&(this.style.cursor="pointer",google.maps.event.trigger(u.marker_,"mouseover",t))}),google.maps.event.addDomListener(this.eventDiv_,"mouseout",function(t){!u.marker_.getDraggable()&&!u.marker_.getClickable()||p||(this.style.cursor=u.marker_.getCursor(),google.maps.event.trigger(u.marker_,"mouseout",t))}),google.maps.event.addDomListener(this.eventDiv_,"mousedown",function(t){p=!1,u.marker_.getDraggable()&&(l=!0,this.style.cursor=h),(u.marker_.getDraggable()||u.marker_.getClickable())&&(google.maps.event.trigger(u.marker_,"mousedown",t),d(t))}),google.maps.event.addDomListener(document,"mouseup",function(e){var n;if(l&&(l=!1,u.eventDiv_.style.cursor="pointer",google.maps.event.trigger(u.marker_,"mouseup",e)),p){if(o){n=u.getProjection().fromLatLngToDivPixel(u.marker_.getPosition()),n.y+=c,u.marker_.setPosition(u.getProjection().fromDivPixelToLatLng(n));try{u.marker_.setAnimation(google.maps.Animation.BOUNCE),setTimeout(f,1406)}catch(r){}}u.crossDiv_.style.display="none",u.marker_.setZIndex(t),i=!0,p=!1,e.latLng=u.marker_.getPosition(),google.maps.event.trigger(u.marker_,"dragend",e)}}),google.maps.event.addListener(u.marker_.getMap(),"mousemove",function(i){var a;l&&(p?(i.latLng=new google.maps.LatLng(i.latLng.lat()-e,i.latLng.lng()-n),a=u.getProjection().fromLatLngToDivPixel(i.latLng),o&&(u.crossDiv_.style.left=a.x+"px",u.crossDiv_.style.top=a.y+"px",u.crossDiv_.style.display="",a.y-=c),u.marker_.setPosition(u.getProjection().fromDivPixelToLatLng(a)),o&&(u.eventDiv_.style.top=a.y+c+"px"),google.maps.event.trigger(u.marker_,"drag",i)):(e=i.latLng.lat()-u.marker_.getPosition().lat(),n=i.latLng.lng()-u.marker_.getPosition().lng(),t=u.marker_.getZIndex(),r=u.marker_.getPosition(),s=u.marker_.getMap().getCenter(),o=u.marker_.get("raiseOnDrag"),p=!0,u.marker_.setZIndex(1e6),i.latLng=u.marker_.getPosition(),google.maps.event.trigger(u.marker_,"dragstart",i)))}),google.maps.event.addDomListener(document,"keydown",function(t){p&&27===t.keyCode&&(o=!1,u.marker_.setPosition(r),u.marker_.getMap().setCenter(s),google.maps.event.trigger(document,"mouseup",t))}),google.maps.event.addDomListener(this.eventDiv_,"click",function(t){(u.marker_.getDraggable()||u.marker_.getClickable())&&(i?i=!1:(google.maps.event.trigger(u.marker_,"click",t),d(t)))}),google.maps.event.addDomListener(this.eventDiv_,"dblclick",function(t){(u.marker_.getDraggable()||u.marker_.getClickable())&&(google.maps.event.trigger(u.marker_,"dblclick",t),d(t))}),google.maps.event.addListener(this.marker_,"dragstart",function(t){p||(o=this.get("raiseOnDrag"))}),google.maps.event.addListener(this.marker_,"drag",function(t){p||o&&(u.setPosition(c),u.labelDiv_.style.zIndex=1e6+(this.get("labelInBackground")?-1:1))}),google.maps.event.addListener(this.marker_,"dragend",function(t){p||o&&u.setPosition(0)}),google.maps.event.addListener(this.marker_,"position_changed",function(){u.setPosition()}),google.maps.event.addListener(this.marker_,"zindex_changed",function(){u.setZIndex()}),google.maps.event.addListener(this.marker_,"visible_changed",function(){u.setVisible()}),google.maps.event.addListener(this.marker_,"labelvisible_changed",function(){u.setVisible()}),google.maps.event.addListener(this.marker_,"title_changed",function(){u.setTitle()}),google.maps.event.addListener(this.marker_,"labelcontent_changed",function(){u.setContent()}),google.maps.event.addListener(this.marker_,"labelanchor_changed",function(){u.setAnchor()}),google.maps.event.addListener(this.marker_,"labelclass_changed",function(){u.setStyles()}),google.maps.event.addListener(this.marker_,"labelstyle_changed",function(){u.setStyles()})]},a.prototype.onRemove=function(){var t;for(this.labelDiv_.parentNode.removeChild(this.labelDiv_),this.eventDiv_.parentNode.removeChild(this.eventDiv_),t=0;t<this.listeners_.length;t++)google.maps.event.removeListener(this.listeners_[t])},a.prototype.draw=function(){this.setContent(),this.setTitle(),this.setStyles()},a.prototype.setContent=function(){var t=this.marker_.get("labelContent");"undefined"==typeof t.nodeType?(this.labelDiv_.innerHTML=t,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(t),t=t.cloneNode(!0),this.eventDiv_.innerHTML="",this.eventDiv_.appendChild(t))},a.prototype.setTitle=function(){this.eventDiv_.title=this.marker_.getTitle()||""},a.prototype.setStyles=function(){var t,e;this.labelDiv_.className=this.marker_.get("labelClass"),this.eventDiv_.className=this.labelDiv_.className,this.labelDiv_.style.cssText="",this.eventDiv_.style.cssText="",e=this.marker_.get("labelStyle");for(t in e)e.hasOwnProperty(t)&&(this.labelDiv_.style[t]=e[t],this.eventDiv_.style[t]=e[t]);this.setMandatoryStyles()},a.prototype.setMandatoryStyles=function(){this.labelDiv_.style.position="absolute",this.labelDiv_.style.overflow="hidden","undefined"!=typeof this.labelDiv_.style.opacity&&""!==this.labelDiv_.style.opacity&&(this.labelDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+100*this.labelDiv_.style.opacity+')"',this.labelDiv_.style.filter="alpha(opacity="+100*this.labelDiv_.style.opacity+")"),this.eventDiv_.style.position=this.labelDiv_.style.position,this.eventDiv_.style.overflow=this.labelDiv_.style.overflow,this.eventDiv_.style.opacity=.01,this.eventDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity=1)"',this.eventDiv_.style.filter="alpha(opacity=1)",this.setAnchor(),this.setPosition(),this.setVisible()},a.prototype.setAnchor=function(){var t=this.marker_.get("labelAnchor");this.labelDiv_.style.marginLeft=-t.x+"px",this.labelDiv_.style.marginTop=-t.y+"px",this.eventDiv_.style.marginLeft=-t.x+"px",this.eventDiv_.style.marginTop=-t.y+"px"},a.prototype.setPosition=function(t){var e=this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());"undefined"==typeof t&&(t=0),this.labelDiv_.style.left=Math.round(e.x)+"px",this.labelDiv_.style.top=Math.round(e.y-t)+"px",this.eventDiv_.style.left=this.labelDiv_.style.left,this.eventDiv_.style.top=this.labelDiv_.style.top,this.setZIndex()},a.prototype.setZIndex=function(){var t=this.marker_.get("labelInBackground")?-1:1;"undefined"==typeof this.marker_.getZIndex()?(this.labelDiv_.style.zIndex=parseInt(this.labelDiv_.style.top,10)+t,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex):(this.labelDiv_.style.zIndex=this.marker_.getZIndex()+t,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex)},a.prototype.setVisible=function(){this.marker_.get("labelVisible")?this.labelDiv_.style.display=this.marker_.getVisible()?"block":"none":this.labelDiv_.style.display="none",this.eventDiv_.style.display=this.labelDiv_.style.display},s(u,google.maps.Marker),u.prototype.setMap=function(t){google.maps.Marker.prototype.setMap.apply(this,arguments),this.label.setMap(t)},l.prototype=new google.maps.OverlayView,t.RichMarker=l,l.prototype.getVisible=function(){return this.get("visible")},l.prototype.getVisible=l.prototype.getVisible,l.prototype.setVisible=function(t){this.set("visible",t)},l.prototype.setVisible=l.prototype.setVisible,l.prototype.visible_changed=function(){this.ready_&&(this.markerWrapper_.style.display=this.getVisible()?"":"none",this.draw())},l.prototype.visible_changed=l.prototype.visible_changed,l.prototype.setFlat=function(t){this.set("flat",!!t)},l.prototype.setFlat=l.prototype.setFlat,l.prototype.getFlat=function(){return this.get("flat")},l.prototype.getFlat=l.prototype.getFlat,l.prototype.getWidth=function(){return this.get("width")},l.prototype.getWidth=l.prototype.getWidth,l.prototype.getHeight=function(){return this.get("height")},l.prototype.getHeight=l.prototype.getHeight,l.prototype.setShadow=function(t){this.set("shadow",t),this.flat_changed()},l.prototype.setShadow=l.prototype.setShadow,l.prototype.getShadow=function(){return this.get("shadow")},l.prototype.getShadow=l.prototype.getShadow,l.prototype.flat_changed=function(){this.ready_&&(this.markerWrapper_.style.boxShadow=this.markerWrapper_.style.webkitBoxShadow=this.markerWrapper_.style.MozBoxShadow=this.getFlat()?"":this.getShadow())},l.prototype.flat_changed=l.prototype.flat_changed,l.prototype.setZIndex=function(t){this.set("zIndex",t)},l.prototype.setZIndex=l.prototype.setZIndex,l.prototype.getZIndex=function(){return this.get("zIndex")},l.prototype.getZIndex=l.prototype.getZIndex,l.prototype.zIndex_changed=function(){this.getZIndex()&&this.ready_&&(this.markerWrapper_.style.zIndex=this.getZIndex())},l.prototype.zIndex_changed=l.prototype.zIndex_changed,l.prototype.getDraggable=function(){return this.get("draggable")},l.prototype.getDraggable=l.prototype.getDraggable,l.prototype.setDraggable=function(t){this.set("draggable",!!t)},l.prototype.setDraggable=l.prototype.setDraggable,l.prototype.draggable_changed=function(){this.ready_&&(this.getDraggable()?this.addDragging_(this.markerWrapper_):this.removeDragListeners_())},l.prototype.draggable_changed=l.prototype.draggable_changed,l.prototype.getPosition=function(){return this.get("position")},l.prototype.getPosition=l.prototype.getPosition,l.prototype.setPosition=function(t){this.set("position",t)},l.prototype.setPosition=l.prototype.setPosition,l.prototype.position_changed=function(){this.draw()},l.prototype.position_changed=l.prototype.position_changed,l.prototype.getAnchor=function(){return this.get("anchor")},l.prototype.getAnchor=l.prototype.getAnchor,l.prototype.setAnchor=function(t){this.set("anchor",t)},l.prototype.setAnchor=l.prototype.setAnchor,l.prototype.anchor_changed=function(){this.draw()},l.prototype.anchor_changed=l.prototype.anchor_changed,l.prototype.htmlToDocumentFragment_=function(t){var e=document.createElement("DIV");if(e.innerHTML=t,1==e.childNodes.length)return e.removeChild(e.firstChild);for(var n=document.createDocumentFragment();e.firstChild;)n.appendChild(e.firstChild);return n},l.prototype.removeChildren_=function(t){if(t)for(var e;e=t.firstChild;)t.removeChild(e)},l.prototype.setContent=function(t){this.set("content",t)},l.prototype.setContent=l.prototype.setContent,l.prototype.getContent=function(){return this.get("content")},l.prototype.getContent=l.prototype.getContent,l.prototype.content_changed=function(){if(this.markerContent_){this.removeChildren_(this.markerContent_);var t=this.getContent();if(t){"string"==typeof t&&(t=t.replace(/^\s*([\S\s]*)\b\s*$/,"$1"),t=this.htmlToDocumentFragment_(t)),this.markerContent_.appendChild(t);for(var e,n=this,i=this.markerContent_.getElementsByTagName("IMG"),o=0;e=i[o];o++)google.maps.event.addDomListener(e,"mousedown",function(t){n.getDraggable()&&(t.preventDefault&&t.preventDefault(),t.returnValue=!1)}),google.maps.event.addDomListener(e,"load",function(){n.draw()});google.maps.event.trigger(this,"domready")}this.ready_&&this.draw()}},l.prototype.content_changed=l.prototype.content_changed,l.prototype.setCursor_=function(t){if(this.ready_){var e="";-1!==navigator.userAgent.indexOf("Gecko/")?("dragging"==t&&(e="-moz-grabbing"),"dragready"==t&&(e="-moz-grab"),"draggable"==t&&(e="pointer")):("dragging"!=t&&"dragready"!=t||(e="move"),"draggable"==t&&(e="pointer")),this.markerWrapper_.style.cursor!=e&&(this.markerWrapper_.style.cursor=e)}},l.prototype.startDrag=function(t){if(this.getDraggable()&&!this.dragging_){this.dragging_=!0;var e=this.getMap();this.mapDraggable_=e.get("draggable"),e.set("draggable",!1),this.mouseX_=t.clientX,this.mouseY_=t.clientY,this.setCursor_("dragready"),this.markerWrapper_.style.MozUserSelect="none",this.markerWrapper_.style.KhtmlUserSelect="none",this.markerWrapper_.style.WebkitUserSelect="none",this.markerWrapper_.unselectable="on",this.markerWrapper_.onselectstart=function(){return!1},this.addDraggingListeners_(),google.maps.event.trigger(this,"dragstart");
}},l.prototype.stopDrag=function(){this.getDraggable()&&this.dragging_&&(this.dragging_=!1,this.getMap().set("draggable",this.mapDraggable_),this.mouseX_=this.mouseY_=this.mapDraggable_=null,this.markerWrapper_.style.MozUserSelect="",this.markerWrapper_.style.KhtmlUserSelect="",this.markerWrapper_.style.WebkitUserSelect="",this.markerWrapper_.unselectable="off",this.markerWrapper_.onselectstart=function(){},this.removeDraggingListeners_(),this.setCursor_("draggable"),google.maps.event.trigger(this,"dragend"),this.draw())},l.prototype.drag=function(t){if(!this.getDraggable()||!this.dragging_)return void this.stopDrag();var e=this.mouseX_-t.clientX,n=this.mouseY_-t.clientY;this.mouseX_=t.clientX,this.mouseY_=t.clientY;var i=parseInt(this.markerWrapper_.style.left,10)-e,o=parseInt(this.markerWrapper_.style.top,10)-n;this.markerWrapper_.style.left=i+"px",this.markerWrapper_.style.top=o+"px";var r=this.getOffset_(),s=new google.maps.Point(i-r.width,o-r.height),a=this.getProjection();this.setPosition(a.fromDivPixelToLatLng(s)),this.setCursor_("dragging"),google.maps.event.trigger(this,"drag")},l.prototype.removeDragListeners_=function(){this.draggableListener_&&(google.maps.event.removeListener(this.draggableListener_),delete this.draggableListener_),this.setCursor_("")},l.prototype.addDragging_=function(t){if(t){var e=this;this.draggableListener_=google.maps.event.addDomListener(t,"mousedown",function(t){e.startDrag(t)}),this.setCursor_("draggable")}},l.prototype.addDraggingListeners_=function(){var e=this;this.markerWrapper_.setCapture?(this.markerWrapper_.setCapture(!0),this.draggingListeners_=[google.maps.event.addDomListener(this.markerWrapper_,"mousemove",function(t){e.drag(t)},!0),google.maps.event.addDomListener(this.markerWrapper_,"mouseup",function(){e.stopDrag(),e.markerWrapper_.releaseCapture()},!0)]):this.draggingListeners_=[google.maps.event.addDomListener(t,"mousemove",function(t){e.drag(t)},!0),google.maps.event.addDomListener(t,"mouseup",function(){e.stopDrag()},!0)]},l.prototype.removeDraggingListeners_=function(){if(this.draggingListeners_){for(var t,e=0;t=this.draggingListeners_[e];e++)google.maps.event.removeListener(t);this.draggingListeners_.length=0}},l.prototype.getOffset_=function(){var t=this.getAnchor();if("object"==typeof t)return t;var e=new google.maps.Size(0,0);if(!this.markerContent_)return e;var n=this.markerContent_.offsetWidth,i=this.markerContent_.offsetHeight;switch(t){case p.TOP_LEFT:break;case p.TOP:e.width=-n/2;break;case p.TOP_RIGHT:e.width=-n;break;case p.LEFT:e.height=-i/2;break;case p.MIDDLE:e.width=-n/2,e.height=-i/2;break;case p.RIGHT:e.width=-n,e.height=-i/2;break;case p.BOTTOM_LEFT:e.height=-i;break;case p.BOTTOM:e.width=-n/2,e.height=-i;break;case p.BOTTOM_RIGHT:e.width=-n,e.height=-i}return e},l.prototype.onAdd=function(){if(this.markerWrapper_||(this.markerWrapper_=document.createElement("DIV"),this.markerWrapper_.style.position="absolute"),this.getZIndex()&&(this.markerWrapper_.style.zIndex=this.getZIndex()),this.markerWrapper_.style.display=this.getVisible()?"":"none",!this.markerContent_){this.markerContent_=document.createElement("DIV"),this.markerWrapper_.appendChild(this.markerContent_);var t=this;google.maps.event.addDomListener(this.markerContent_,"click",function(e){google.maps.event.trigger(t,"click")}),google.maps.event.addDomListener(this.markerContent_,"mouseover",function(e){google.maps.event.trigger(t,"mouseover")}),google.maps.event.addDomListener(this.markerContent_,"mouseout",function(e){google.maps.event.trigger(t,"mouseout")})}this.ready_=!0,this.content_changed(),this.flat_changed(),this.draggable_changed();var e=this.getPanes();e&&e.overlayMouseTarget.appendChild(this.markerWrapper_),google.maps.event.trigger(this,"ready")},l.prototype.onAdd=l.prototype.onAdd,l.prototype.draw=function(){if(this.ready_&&!this.dragging_){var t=this.getProjection();if(t){var e=this.get("position"),n=t.fromLatLngToDivPixel(e),i=this.getOffset_();this.markerWrapper_.style.top=n.y+i.height+"px",this.markerWrapper_.style.left=n.x+i.width+"px";var o=this.markerContent_.offsetHeight,r=this.markerContent_.offsetWidth;r!=this.get("width")&&this.set("width",r),o!=this.get("height")&&this.set("height",o)}}},l.prototype.draw=l.prototype.draw,l.prototype.onRemove=function(){this.markerWrapper_&&this.markerWrapper_.parentNode&&this.markerWrapper_.parentNode.removeChild(this.markerWrapper_),this.removeDragListeners_()},l.prototype.onRemove=l.prototype.onRemove;var p={TOP_LEFT:1,TOP:2,TOP_RIGHT:3,LEFT:4,MIDDLE:5,RIGHT:6,BOTTOM_LEFT:7,BOTTOM:8,BOTTOM_RIGHT:9};t.RichMarkerPosition=p,t.InfoBox=r,t.Cluster=n,t.ClusterIcon=e,t.MarkerClusterer=o,t.MarkerLabel_=a,t.MarkerWithLabel=u,t.RichMarker=l}()})}}),function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,n,i){e.module("uiGmapgoogle-maps.wrapped").service("uiGmapDataStructures",function(){return{Graph:i(1).Graph,Queue:i(1).Queue}})},function(t,e,n){(function(){t.exports={Graph:n(2),Heap:n(3),LinkedList:n(4),Map:n(5),Queue:n(6),RedBlackTree:n(7),Trie:n(8)}}).call(this)},function(t,e){(function(){var e,n={}.hasOwnProperty;e=function(){function t(){this._nodes={},this.nodeSize=0,this.edgeSize=0}return t.prototype.addNode=function(t){return this._nodes[t]?void 0:(this.nodeSize++,this._nodes[t]={_outEdges:{},_inEdges:{}})},t.prototype.getNode=function(t){return this._nodes[t]},t.prototype.removeNode=function(t){var e,i,o,r,s;if(i=this._nodes[t]){r=i._outEdges;for(o in r)n.call(r,o)&&this.removeEdge(t,o);s=i._inEdges;for(e in s)n.call(s,e)&&this.removeEdge(e,t);return this.nodeSize--,delete this._nodes[t],i}},t.prototype.addEdge=function(t,e,n){var i,o,r;return null==n&&(n=1),!this.getEdge(t,e)&&(o=this._nodes[t],r=this._nodes[e],o&&r)?(i={weight:n},o._outEdges[e]=i,r._inEdges[t]=i,this.edgeSize++,i):void 0},t.prototype.getEdge=function(t,e){var n,i;return n=this._nodes[t],i=this._nodes[e],n&&i?n._outEdges[e]:void 0},t.prototype.removeEdge=function(t,e){var n,i,o;return i=this._nodes[t],o=this._nodes[e],(n=this.getEdge(t,e))?(delete i._outEdges[e],delete o._inEdges[t],this.edgeSize--,n):void 0},t.prototype.getInEdgesOf=function(t){var e,i,o,r;o=this._nodes[t],i=[],r=null!=o?o._inEdges:void 0;for(e in r)n.call(r,e)&&i.push(this.getEdge(e,t));return i},t.prototype.getOutEdgesOf=function(t){var e,i,o,r;e=this._nodes[t],i=[],r=null!=e?e._outEdges:void 0;for(o in r)n.call(r,o)&&i.push(this.getEdge(t,o));return i},t.prototype.getAllEdgesOf=function(t){var e,n,i,o,r,s,a;if(n=this.getInEdgesOf(t),i=this.getOutEdgesOf(t),0===n.length)return i;for(o=this.getEdge(t,t),e=r=0,s=n.length;s>=0?s>r:r>s;e=s>=0?++r:--r)if(n[e]===o){a=[n[n.length-1],n[e]],n[e]=a[0],n[n.length-1]=a[1],n.pop();break}return n.concat(i)},t.prototype.forEachNode=function(t){var e,i,o;o=this._nodes;for(e in o)n.call(o,e)&&(i=o[e],t(i,e))},t.prototype.forEachEdge=function(t){var e,i,o,r,s,a;s=this._nodes;for(i in s)if(n.call(s,i)){o=s[i],a=o._outEdges;for(r in a)n.call(a,r)&&(e=a[r],t(e))}},t}(),t.exports=e}).call(this)},function(t,e){(function(){var e,n,i,o;e=function(){function t(t){var e,n,i,o,r,s;for(null==t&&(t=[]),this._data=[void 0],i=0,r=t.length;r>i;i++)n=t[i],null!=n&&this._data.push(n);if(this._data.length>1)for(e=o=2,s=this._data.length;s>=2?s>o:o>s;e=s>=2?++o:--o)this._upHeap(e);this.size=this._data.length-1}return t.prototype.add=function(t){return null!=t?(this._data.push(t),this._upHeap(this._data.length-1),this.size++,t):void 0},t.prototype.removeMin=function(){var t;return 1!==this._data.length?(this.size--,2===this._data.length?this._data.pop():(t=this._data[1],this._data[1]=this._data.pop(),this._downHeap(),t)):void 0},t.prototype.peekMin=function(){return this._data[1]},t.prototype._upHeap=function(t){var e,n;for(e=this._data[t];this._data[t]<this._data[i(t)]&&t>1;)n=[this._data[i(t)],this._data[t]],this._data[t]=n[0],this._data[i(t)]=n[1],t=i(t)},t.prototype._downHeap=function(){var t,e,i;for(t=1;n(t<this._data.length)&&(e=n(t),e<this._data.length-1&&this._data[o(t)]<this._data[e]&&(e=o(t)),this._data[e]<this._data[t]);)i=[this._data[t],this._data[e]],this._data[e]=i[0],this._data[t]=i[1],t=e},t}(),i=function(t){return t>>1},n=function(t){return t<<1},o=function(t){return(t<<1)+1},t.exports=e}).call(this)},function(t,e){(function(){var e;e=function(){function t(t){var e,n,i;for(null==t&&(t=[]),this.head={prev:void 0,value:void 0,next:void 0},this.tail={prev:void 0,value:void 0,next:void 0},this.size=0,n=0,i=t.length;i>n;n++)e=t[n],this.add(e)}return t.prototype.at=function(t){var e,n,i,o,r;if(-this.size<=t&&t<this.size){if(t=this._adjust(t),2*t<this.size)for(e=this.head,n=i=1;t>=i;n=i+=1)e=e.next;else for(e=this.tail,n=o=1,r=this.size-t-1;r>=o;n=o+=1)e=e.prev;return e}},t.prototype.add=function(t,e){var n,i,o,r,s;return null==e&&(e=this.size),-this.size<=e&&e<=this.size?(i={value:t},e=this._adjust(e),0===this.size?this.head=i:0===e?(o=[i,this.head,i],this.head.prev=o[0],i.next=o[1],this.head=o[2]):(n=this.at(e-1),r=[n.next,i,i,n],i.next=r[0],null!=(s=n.next)?s.prev=r[1]:void 0,n.next=r[2],i.prev=r[3]),e===this.size&&(this.tail=i),this.size++,t):void 0},t.prototype.removeAt=function(t){var e,n,i;return null==t&&(t=this.size-1),-this.size<=t&&t<this.size&&0!==this.size?(t=this._adjust(t),1===this.size?(n=this.head.value,this.head.value=this.tail.value=void 0):0===t?(n=this.head.value,this.head=this.head.next,this.head.prev=void 0):(e=this.at(t),n=e.value,e.prev.next=e.next,null!=(i=e.next)&&(i.prev=e.prev),t===this.size-1&&(this.tail=e.prev)),this.size--,n):void 0},t.prototype.remove=function(t){var e;if(null!=t){for(e=this.head;e&&e.value!==t;)e=e.next;if(e)return 1===this.size?this.head.value=this.tail.value=void 0:e===this.head?(this.head=this.head.next,this.head.prev=void 0):e===this.tail?(this.tail=this.tail.prev,this.tail.next=void 0):(e.prev.next=e.next,e.next.prev=e.prev),this.size--,t}},t.prototype.indexOf=function(t,e){var n,i;if(null==e&&(e=0),null==this.head.value&&!this.head.next||e>=this.size)return-1;for(e=Math.max(0,this._adjust(e)),n=this.at(e),i=e;n&&n.value!==t;)n=n.next,i++;return i===this.size?-1:i},t.prototype._adjust=function(t){return 0>t?this.size+t:t},t}(),t.exports=e}).call(this)},function(t,e){(function(){var e,n,i,o,r={}.hasOwnProperty;n="_mapId_",e=function(){function t(e){var n,i;this._content={},this._itemId=0,this._id=t._newMapId(),this.size=0;for(n in e)r.call(e,n)&&(i=e[n],this.set(n,i))}return t._mapIdTracker=0,t._newMapId=function(){return this._mapIdTracker++},t.prototype.hash=function(t,e){var r,s;return null==e&&(e=!1),s=i(t),o(t)?(r=n+this._id,e&&!t[r]&&(t[r]=this._itemId++),r+"_"+t[r]):s+"_"+t},t.prototype.set=function(t,e){return this.has(t)||this.size++,this._content[this.hash(t,!0)]=[e,t],e},t.prototype.get=function(t){var e;return null!=(e=this._content[this.hash(t)])?e[0]:void 0},t.prototype.has=function(t){return this.hash(t)in this._content},t.prototype["delete"]=function(t){var e;return e=this.hash(t),e in this._content&&(delete this._content[e],o(t)&&delete t[n+this._id],this.size--,!0)},t.prototype.forEach=function(t){var e,n,i;i=this._content;for(e in i)r.call(i,e)&&(n=i[e],t(n[1],n[0]))},t}(),o=function(t){var e,n,o,r,s;for(e=["Boolean","Number","String","Undefined","Null","RegExp","Function"],o=i(t),r=0,s=e.length;s>r;r++)if(n=e[r],o===n)return!1;return!0},i=function(t){return Object.prototype.toString.apply(t).match(/\[object (.+)\]/)[1]},t.exports=e}).call(this)},function(t,e){(function(){var e;e=function(){function t(t){null==t&&(t=[]),this._content=t,this._dequeueIndex=0,this.size=this._content.length}return t.prototype.enqueue=function(t){return this.size++,this._content.push(t),t},t.prototype.dequeue=function(){var t;return 0!==this.size?(this.size--,t=this._content[this._dequeueIndex],this._dequeueIndex++,2*this._dequeueIndex>this._content.length&&(this._content=this._content.slice(this._dequeueIndex),this._dequeueIndex=0),t):void 0},t.prototype.peek=function(){return this._content[this._dequeueIndex]},t}(),t.exports=e}).call(this)},function(t,e){(function(){var e,n,i,o,r,s,a,u,l,p,c,h,d,f,g;n=0,i=1,o=2,a=3,r=1,e=2,s=function(){function t(t){var e,n,i;for(null==t&&(t=[]),this._root,this.size=0,n=0,i=t.length;i>n;n++)e=t[n],null!=e&&this.add(e)}return t.prototype.add=function(t){var s,c,h,d;if(null!=t){if(this.size++,h={value:t,_color:r},this._root){if(c=u(this._root,function(e){return t===e.value?n:t<e.value?e._left?i:(h._parent=e,e._left=h,a):e._right?o:(h._parent=e,e._right=h,a)}),null!=c)return}else this._root=h;for(s=h;;){if(s===this._root){s._color=e;break}if(s._parent._color===e)break;if((null!=(d=g(s))?d._color:void 0)!==r){!p(s)&&p(s._parent)?(this._rotateLeft(s._parent),s=s._left):p(s)&&!p(s._parent)&&(this._rotateRight(s._parent),s=s._right),s._parent._color=e,l(s)._color=r,p(s)?this._rotateRight(l(s)):this._rotateLeft(l(s));break}s._parent._color=e,g(s)._color=e,l(s)._color=r,s=l(s)}return t}},t.prototype.has=function(t){var e;return e=u(this._root,function(e){return t===e.value?n:t<e.value?i:o}),!!e},t.prototype.peekMin=function(){var t;return null!=(t=d(this._root))?t.value:void 0},t.prototype.peekMax=function(){var t;return null!=(t=h(this._root))?t.value:void 0},t.prototype.remove=function(t){var e;return(e=u(this._root,function(e){return t===e.value?n:t<e.value?i:o}))?(this._removeNode(this._root,e),this.size--,t):void 0},t.prototype.removeMin=function(){var t,e;return(t=d(this._root))?(e=t.value,this._removeNode(this._root,t),e):void 0},t.prototype.removeMax=function(){var t,e;return(t=h(this._root))?(e=t.value,this._removeNode(this._root,t),e):void 0},t.prototype._removeNode=function(t,n){var i,o,s,a,u,l,h,g,m,v;if(n._left&&n._right&&(o=d(n._right),n.value=o.value,n=o),o=n._left||n._right,o||(o={color:e,_right:void 0,_left:void 0,isLeaf:!0}),o._parent=n._parent,null!=(s=n._parent)&&(s[c(n)]=o),n._color===e)if(o._color===r)o._color=e,o._parent||(this._root=o);else for(;;){if(!o._parent){o.isLeaf?this._root=void 0:this._root=o;break}if(i=f(o),(null!=i?i._color:void 0)===r&&(o._parent._color=r,i._color=e,p(o)?this._rotateLeft(o._parent):this._rotateRight(o._parent)),i=f(o),o._parent._color!==e||i&&(i._color!==e||i._left&&i._left._color!==e||i._right&&i._right._color!==e)){if(!(o._parent._color!==r||i&&(i._color!==e||i._left&&(null!=(a=i._left)?a._color:void 0)!==e||i._right&&(null!=(u=i._right)?u._color:void 0)!==e))){null!=i&&(i._color=r),o._parent._color=e;break}if((null!=i?i._color:void 0)===e){!p(o)||i._right&&i._right._color!==e||(null!=(l=i._left)?l._color:void 0)!==r?p(o)||i._left&&i._left._color!==e||(null!=(g=i._right)?g._color:void 0)!==r||(i._color=r,null!=(m=i._right)&&(m._color=e),this._rotateLeft(i)):(i._color=r,null!=(h=i._left)&&(h._color=e),this._rotateRight(i));break}i=f(o),i._color=o._parent._color,p(o)?(i._right._color=e,this._rotateRight(o._parent)):(i._left._color=e,this._rotateLeft(o._parent))}else null!=i&&(i._color=r),o.isLeaf&&(o._parent[c(o)]=void 0),o=o._parent}return o.isLeaf&&null!=(v=o._parent)?v[c(o)]=void 0:void 0},t.prototype._rotateLeft=function(t){var e,n;return null!=(e=t._parent)&&(e[c(t)]=t._right),t._right._parent=t._parent,t._parent=t._right,t._right=t._right._left,t._parent._left=t,null!=(n=t._right)&&(n._parent=t),null==t._parent._parent?this._root=t._parent:void 0},t.prototype._rotateRight=function(t){var e,n;return null!=(e=t._parent)&&(e[c(t)]=t._left),t._left._parent=t._parent,t._parent=t._left,t._left=t._left._right,t._parent._right=t,null!=(n=t._left)&&(n._parent=t),null==t._parent._parent?this._root=t._parent:void 0},t}(),p=function(t){return t===t._parent._left},c=function(t){return p(t)?"_left":"_right"},u=function(t,e){var r,s,u;for(s=t,u=void 0;s;){if(r=e(s),r===n){u=s;break}if(r===i)s=s._left;else if(r===o)s=s._right;else if(r===a)break}return u},d=function(t){return u(t,function(t){return t._left?i:n})},h=function(t){return u(t,function(t){return t._right?o:n})},l=function(t){var e;return null!=(e=t._parent)?e._parent:void 0},g=function(t){return l(t)?p(t._parent)?l(t)._right:l(t)._left:void 0},f=function(t){return p(t)?t._parent._right:t._parent._left},t.exports=s}).call(this)},function(t,e,n){(function(){var e,i,o,r,s={}.hasOwnProperty;e=n(6),o="end",i=function(){function t(t){var e,n,i;for(null==t&&(t=[]),this._root={},this.size=0,n=0,i=t.length;i>n;n++)e=t[n],this.add(e)}return t.prototype.add=function(t){var e,n,i,r;if(null!=t){for(this.size++,e=this._root,i=0,r=t.length;r>i;i++)n=t[i],null==e[n]&&(e[n]={}),e=e[n];return e[o]=!0,t}},t.prototype.has=function(t){var e,n,i,r;if(null==t)return!1;for(e=this._root,i=0,r=t.length;r>i;i++){if(n=t[i],null==e[n])return!1;e=e[n]}return!!e[o]},t.prototype.longestPrefixOf=function(t){var e,n,i,o,r;if(null==t)return"";for(e=this._root,i="",o=0,r=t.length;r>o&&(n=t[o],null!=e[n]);o++)i+=n,e=e[n];return i},t.prototype.wordsWithPrefix=function(t){var n,i,r,a,u,l,p,c,h,d;if(null==t)return[];for(null!=t||(t=""),p=[],i=this._root,c=0,h=t.length;h>c;c++)if(r=t[c],i=i[r],null==i)return[];for(u=new e,u.enqueue([i,""]);0!==u.size;){d=u.dequeue(),a=d[0],n=d[1],a[o]&&p.push(t+n);for(r in a)s.call(a,r)&&(l=a[r],u.enqueue([l,n+r]))}return p},t.prototype.remove=function(t){var e,n,i,s,a,u,l,p;if(null!=t){for(e=this._root,s=[],a=0,l=t.length;l>a;a++){if(i=t[a],null==e[i])return;e=e[i],s.push([i,e])}if(e[o]){if(this.size--,delete e[o],r(e,1))return t;for(n=u=p=s.length-1;(1>=p?1>=u:u>=1)&&!r(s[n][1],1);n=1>=p?++u:--u)delete s[n-1][1][s[n][0]];return r(this._root[s[0][0]],1)||delete this._root[s[0][0]],t}}},t}(),r=function(t,e){var n,i;if(0===e)return!0;i=0;for(n in t)if(s.call(t,n)&&(i++,i>=e))return!0;return!1},t.exports=i}).call(this)}]),e.module("uiGmapgoogle-maps.wrapped").service("uiGmapMarkerSpiderfier",["uiGmapGoogleMapApi",function(e){var n=this;return+function(){var e={}.hasOwnProperty,n=[].slice;this.OverlappingMarkerSpiderfier=function(){function i(t,n){var i,r,s,a,u,l;this.map=t,null==n&&(n={});for(r in n)e.call(n,r)&&(l=n[r],this[r]=l);for(this.projHelper=new this.constructor.ProjHelper(this.map),this.initMarkerArrays(),this.listeners={},u=["click","zoom_changed","maptypeid_changed"],s=0,a=u.length;a>s;s++)i=u[s],o.addListener(this.map,i,function(t){return function(){return t.unspiderfy()}}(this))}var o,r,s,a,u,l,p,c,h,d,f;for(c=i.prototype,h=[i,c],s=0,l=h.length;l>s;s++)f=h[s],f.VERSION="0.3.3";return r=void 0,o=void 0,p=void 0,d=2*Math.PI,c.keepSpiderfied=!1,c.markersWontHide=!1,c.markersWontMove=!1,c.nearbyDistance=20,c.circleSpiralSwitchover=9,c.circleFootSeparation=23,c.circleStartAngle=d/12,c.spiralFootSeparation=26,c.spiralLengthStart=11,c.spiralLengthFactor=4,c.spiderfiedZIndex=1e3,c.usualLegZIndex=10,c.highlightedLegZIndex=20,c.event="click",c.minZoomLevel=!1,c.legWeight=1.5,c.legColors={usual:{},highlighted:{}},u=c.legColors.usual,a=c.legColors.highlighted,i.initializeGoogleMaps=function(t){return r=t.maps,o=r.event,p=r.MapTypeId,u[p.HYBRID]=u[p.SATELLITE]="#fff",a[p.HYBRID]=a[p.SATELLITE]="#f00",u[p.TERRAIN]=u[p.ROADMAP]="#444",a[p.TERRAIN]=a[p.ROADMAP]="#f00",this.ProjHelper=function(t){return this.setMap(t)},this.ProjHelper.prototype=new r.OverlayView,this.ProjHelper.prototype.draw=function(){}},c.initMarkerArrays=function(){return this.markers=[],this.markerListenerRefs=[]},c.addMarker=function(t){var e;return null!=t._oms?this:(t._oms=!0,e=[o.addListener(t,this.event,function(e){return function(n){return e.spiderListener(t,n)}}(this))],this.markersWontHide||e.push(o.addListener(t,"visible_changed",function(e){return function(){return e.markerChangeListener(t,!1)}}(this))),this.markersWontMove||e.push(o.addListener(t,"position_changed",function(e){return function(){return e.markerChangeListener(t,!0)}}(this))),this.markerListenerRefs.push(e),this.markers.push(t),this)},c.markerChangeListener=function(t,e){return null==t._omsData||!e&&t.getVisible()||null!=this.spiderfying||null!=this.unspiderfying?void 0:this.unspiderfy(e?t:null)},c.getMarkers=function(){return this.markers.slice(0)},c.removeMarker=function(t){var e,n,i,r,s;if(null!=t._omsData&&this.unspiderfy(),e=this.arrIndexOf(this.markers,t),0>e)return this;for(s=this.markerListenerRefs.splice(e,1)[0],n=0,i=s.length;i>n;n++)r=s[n],o.removeListener(r);return delete t._oms,this.markers.splice(e,1),this},c.clearMarkers=function(){var t,e,n,i,r,s,a,u,l;for(this.unspiderfy(),l=this.markers,t=e=0,n=l.length;n>e;t=++e){for(a=l[t],s=this.markerListenerRefs[t],u=0,i=s.length;i>u;u++)r=s[u],o.removeListener(r);delete a._oms}return this.initMarkerArrays(),this},c.addListener=function(t,e){var n;return(null!=(n=this.listeners)[t]?n[t]:n[t]=[]).push(e),this},c.removeListener=function(t,e){var n;return n=this.arrIndexOf(this.listeners[t],e),0>n||this.listeners[t].splice(n,1),this},c.clearListeners=function(t){return this.listeners[t]=[],this},c.trigger=function(){var t,e,i,o,r,s,a,u;for(e=arguments[0],t=2<=arguments.length?n.call(arguments,1):[],a=null!=(s=this.listeners[e])?s:[],u=[],o=0,r=a.length;r>o;o++)i=a[o],u.push(i.apply(null,t));return u},c.generatePtsCircle=function(t,e){var n,i,o,s,a,u,l,p;for(o=this.circleFootSeparation*(2+t),u=o/d,i=d/t,p=[],s=a=0,l=t;l>=0?l>a:a>l;s=l>=0?++a:--a)n=this.circleStartAngle+s*i,p.push(new r.Point(e.x+u*Math.cos(n),e.y+u*Math.sin(n)));return p},c.generatePtsSpiral=function(t,e){var n,i,o,s,a,u,l;for(s=this.spiralLengthStart,n=0,l=[],i=o=0,u=t;u>=0?u>o:o>u;i=u>=0?++o:--o)n+=this.spiralFootSeparation/s+5e-4*i,a=new r.Point(e.x+s*Math.cos(n),e.y+s*Math.sin(n)),s+=d*this.spiralLengthFactor/n,l.push(a);return l},c.spiderListener=function(e,n){var i,o,r,s,a,u,l,p,h,d,f,g,m;if(p=null!=e._omsData,p&&this.keepSpiderfied||("mouseover"===this.event?(i=this,o=function(){return i.unspiderfy()},t.clearTimeout(c.timeout),c.timeout=setTimeout(o,3e3)):this.unspiderfy()),p||this.map.getStreetView().getVisible()||"GoogleEarthAPI"===this.map.getMapTypeId())return this.trigger("click",e,n);for(d=[],f=[],h=this.nearbyDistance,g=h*h,l=this.llToPt(e.position),m=this.markers,r=0,s=m.length;s>r;r++)a=m[r],null!=a.map&&a.getVisible()&&(u=this.llToPt(a.position),this.ptDistanceSq(u,l)<g?d.push({marker:a,markerPt:u}):f.push(a));return 1===d.length?this.trigger("click",e,n):this.spiderfy(d,f)},c.markersNearMarker=function(t,e){var n,i,o,r,s,a,u,l,p,c,h;if(null==e&&(e=!1),null==this.projHelper.getProjection())throw"Must wait for 'idle' event on map before calling markersNearMarker";for(u=this.nearbyDistance,l=u*u,s=this.llToPt(t.position),a=[],p=this.markers,n=0,i=p.length;i>n&&(o=p[n],!(o!==t&&null!=o.map&&o.getVisible()&&(r=this.llToPt(null!=(c=null!=(h=o._omsData)?h.usualPosition:void 0)?c:o.position),this.ptDistanceSq(r,s)<l&&(a.push(o),e))));n++);return a},c.markersNearAnyOtherMarker=function(){var t,e,n,i,o,r,s,a,u,l,p,c,h,d,f,g,m,v,y,_,b;if(null==this.projHelper.getProjection())throw"Must wait for 'idle' event on map before calling markersNearAnyOtherMarker";for(f=this.nearbyDistance,g=f*f,h=function(){var t,e,n,i,o,r;for(n=this.markers,r=[],t=0,e=n.length;e>t;t++)a=n[t],r.push({pt:this.llToPt(null!=(i=null!=(o=a._omsData)?o.usualPosition:void 0)?i:a.position),willSpiderfy:!1});return r}.call(this),v=this.markers,e=i=0,o=v.length;o>i;e=++i)if(u=v[e],null!=u.map&&u.getVisible()&&(l=h[e],!l.willSpiderfy))for(y=this.markers,n=d=0,r=y.length;r>d;n=++d)if(p=y[n],n!==e&&null!=p.map&&p.getVisible()&&(c=h[n],(!(e>n)||c.willSpiderfy)&&this.ptDistanceSq(l.pt,c.pt)<g)){l.willSpiderfy=c.willSpiderfy=!0;break}for(_=this.markers,b=[],t=m=0,s=_.length;s>m;t=++m)a=_[t],h[t].willSpiderfy&&b.push(a);return b},c.makeHighlightListenerFuncs=function(t){return{highlight:function(e){return function(){return t._omsData.leg.setOptions({strokeColor:e.legColors.highlighted[e.map.mapTypeId],zIndex:e.highlightedLegZIndex})}}(this),unhighlight:function(e){return function(){return t._omsData.leg.setOptions({strokeColor:e.legColors.usual[e.map.mapTypeId],zIndex:e.usualLegZIndex})}}(this)}},c.spiderfy=function(t,e){var n,i,s,a,u,l,p,c,h,d,f;return!(this.minZoomLevel&&this.map.getZoom()<this.minZoomLevel)&&(this.spiderfying=!0,d=t.length,n=this.ptAverage(function(){var e,n,i;for(i=[],e=0,n=t.length;n>e;e++)c=t[e],i.push(c.markerPt);return i}()),a=d>=this.circleSpiralSwitchover?this.generatePtsSpiral(d,n).reverse():this.generatePtsCircle(d,n),f=function(){var e,n,c;for(c=[],e=0,n=a.length;n>e;e++)s=a[e],i=this.ptToLl(s),h=this.minExtract(t,function(t){return function(e){return t.ptDistanceSq(e.markerPt,s)}}(this)),p=h.marker,l=new r.Polyline({map:this.map,path:[p.position,i],strokeColor:this.legColors.usual[this.map.mapTypeId],strokeWeight:this.legWeight,zIndex:this.usualLegZIndex}),p._omsData={usualPosition:p.position,leg:l},this.legColors.highlighted[this.map.mapTypeId]!==this.legColors.usual[this.map.mapTypeId]&&(u=this.makeHighlightListenerFuncs(p),p._omsData.hightlightListeners={highlight:o.addListener(p,"mouseover",u.highlight),unhighlight:o.addListener(p,"mouseout",u.unhighlight)}),p.setPosition(i),p.setZIndex(Math.round(this.spiderfiedZIndex+s.y)),c.push(p);return c}.call(this),delete this.spiderfying,this.spiderfied=!0,this.trigger("spiderfy",f,e))},c.unspiderfy=function(t){var e,n,i,r,s,a,u;if(null==t&&(t=null),null==this.spiderfied)return this;for(this.unspiderfying=!0,u=[],s=[],a=this.markers,e=0,n=a.length;n>e;e++)r=a[e],null!=r._omsData?(r._omsData.leg.setMap(null),r!==t&&r.setPosition(r._omsData.usualPosition),r.setZIndex(null),i=r._omsData.hightlightListeners,null!=i&&(o.removeListener(i.highlight),o.removeListener(i.unhighlight)),delete r._omsData,u.push(r)):s.push(r);return delete this.unspiderfying,delete this.spiderfied,this.trigger("unspiderfy",u,s),this},c.ptDistanceSq=function(t,e){var n,i;return n=t.x-e.x,i=t.y-e.y,n*n+i*i},c.ptAverage=function(t){var e,n,i,o,s,a;for(s=a=0,e=0,n=t.length;n>e;e++)o=t[e],s+=o.x,a+=o.y;return i=t.length,new r.Point(s/i,a/i)},c.llToPt=function(t){return this.projHelper.getProjection().fromLatLngToDivPixel(t)},c.ptToLl=function(t){return this.projHelper.getProjection().fromDivPixelToLatLng(t)},c.minExtract=function(t,e){var n,i,o,r,s,a,u;for(o=s=0,a=t.length;a>s;o=++s)r=t[o],u=e(r),("undefined"==typeof n||null===n||i>u)&&(i=u,n=o);return t.splice(n,1)[0]},c.arrIndexOf=function(t,e){var n,i,o,r;if(null!=t.indexOf)return t.indexOf(e);for(n=i=0,o=t.length;o>i;n=++i)if(r=t[n],r===e)return n;return-1},i}()}.apply(n),e.then(function(){n.OverlappingMarkerSpiderfier.initializeGoogleMaps(t.google)}),this.OverlappingMarkerSpiderfier}]),e.module("uiGmapgoogle-maps.extensions").service("uiGmapExtendMarkerClusterer",["uiGmapLodash","uiGmapPropMap",function(e,i){return{init:n.once(function(){(function(){var n={}.hasOwnProperty,o=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t.NgMapCluster=function(t){function n(t){n.__super__.constructor.call(this,t),this.markers_=new i}return o(n,t),n.prototype.addMarker=function(t){var e,n;if(this.isMarkerAlreadyAdded_(t)){var i=this.markers_.get(t.key);if(i.getPosition().lat()==t.getPosition().lat()&&i.getPosition().lon()==t.getPosition().lon())return!1}if(this.center_){if(this.averageCenter_){var o=this.markers_.length+1,r=(this.center_.lat()*(o-1)+t.getPosition().lat())/o,s=(this.center_.lng()*(o-1)+t.getPosition().lng())/o;this.center_=new google.maps.LatLng(r,s),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();return t.isAdded=!0,this.markers_.push(t),e=this.markers_.length,n=this.markerClusterer_.getMaxZoom(),null!==n&&this.map_.getZoom()>n?t.getMap()!==this.map_&&t.setMap(this.map_):e<this.minClusterSize_?t.getMap()!==this.map_&&t.setMap(this.map_):e===this.minClusterSize_?this.markers_.each(function(t){t.setMap(null)}):t.setMap(null),!0},n.prototype.isMarkerAlreadyAdded_=function(t){return e.isNullOrUndefined(this.markers_.get(t.key))},n.prototype.getBounds=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);return this.getMarkers().each(function(e){t.extend(e.getPosition())}),t},n.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=new i,delete this.markers_},n}(Cluster),t.NgMapMarkerClusterer=function(t){function e(t,n,o){e.__super__.constructor.call(this,t,n,o),this.markers_=new i}return o(e,t),e.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=new i},e.prototype.removeMarker_=function(t){return!!this.markers_.get(t.key)&&(t.setMap(null),this.markers_.remove(t.key),!0)},e.prototype.createClusters_=function(t){var e,n,i,o=this;if(this.ready_){0===t&&(google.maps.event.trigger(this,"clusteringbegin",this),"undefined"!=typeof this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),i=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625));var r=this.getExtendedBounds(i),s=Math.min(t+this.batchSize_,this.markers_.length),a=this.markers_.values();for(e=t;s>e;e++)n=a[e],!n.isAdded&&this.isMarkerInBounds_(n,r)&&(!this.ignoreHidden_||this.ignoreHidden_&&n.getVisible())&&this.addToClosestCluster_(n);if(s<this.markers_.length)this.timerRefStatic=setTimeout(function(){o.createClusters_(s)},0);else{for(e=0;e<this.clusters_.length;e++)this.clusters_[e].updateIcon_();delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this)}}},e.prototype.addToClosestCluster_=function(t){var e,n,i,o,r=4e4,s=null;for(e=0;e<this.clusters_.length;e++)i=this.clusters_[e],o=i.getCenter(),o&&(n=this.distanceBetweenPoints_(o,t.getPosition()),r>n&&(r=n,s=i));s&&s.isMarkerInClusterBounds(t)?s.addMarker(t):(i=new NgMapCluster(this),i.addMarker(t),this.clusters_.push(i))},e.prototype.redraw_=function(){this.createClusters_(0)},e.prototype.resetViewport_=function(t){var e;for(e=0;e<this.clusters_.length;e++)this.clusters_[e].remove();this.clusters_=[],this.markers_.each(function(e){e.isAdded=!1,t&&e.setMap(null)})},e.prototype.extend=function(t,e){return function(t){var e;for(e in t.prototype)"constructor"!==e&&(this.prototype[e]=t.prototype[e]);return this}.apply(t,[e])},ClusterIcon.prototype.show=function(){if(this.div_){var t="",e=this.backgroundPosition_.split(" "),n=parseInt(e[0].trim(),10),i=parseInt(e[1].trim(),10),o=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(o),t="<img src='"+this.url_+"' style='position: absolute; top: "+i+"px; left: "+n+"px; ",t+=this.cluster_.getMarkerClusterer().enableRetinaIcons_?"width: "+this.width_+"px;height: "+this.height_+"px;":"clip: rect("+-1*i+"px, "+(-1*n+this.width_)+"px, "+(-1*i+this.height_)+"px, "+-1*n+"px);",t+="'>",this.div_.innerHTML=t+"<div style='position: absolute;top: "+this.anchorText_[0]+"px;left: "+this.anchorText_[1]+"px;color: "+this.textColor_+";font-size: "+this.textSize_+"px;font-family: "+this.fontFamily_+";font-weight: "+this.fontWeight_+";font-style: "+this.fontStyle_+";text-decoration: "+this.textDecoration_+";text-align: center;width: "+this.width_+"px;line-height:"+this.height_+"px;'>"+this.sums_.text+"</div>","undefined"==typeof this.sums_.title||""===this.sums_.title?this.div_.title=this.cluster_.getMarkerClusterer().getTitle():this.div_.title=this.sums_.title,this.div_.style.display=""}this.visible_=!0},e}(MarkerClusterer)}).call(this)})}}])}(window,angular,_);var angular=require("angular");angular.module("nemLogging",[]),angular.module("nemLogging").provider("nemDebug",function(){var t=null;return t=require("debug"),this.$get=function(){return t},this.debug=t,this});var bind=function(t,e){return function(){return t.apply(e,arguments)}},slice=[].slice;angular.module("nemLogging").provider("nemSimpleLogger",["nemDebugProvider",function(t){var e,n,i,o,r,s,a,u,l,p,c,h;for(c=t.debug,i={},o=["debug","info","warn","error","log"],e={},l=u=0,p=o.length;p>u;l=++u)h=o[l],
e[h]=l;return s=function(t,e,n){return t>=e?n():void 0},r=function(t){var e,n,i;if(e=!1,!t)return e;for(n=0,i=o.length;i>n&&(h=o[n],e=null!=t[h]&&"function"==typeof t[h],e);n++);return e},a=function(t,e){var n,r,s,a;for(null==i[t]&&(i[t]=c(t)),n=i[t],a={},r=0,s=o.length;s>r;r++)h=o[r],a[h]="debug"===h?n:e[h];return a},n=function(){function t(t){var n,i,a,u,l;if(this.$log=t,this.spawn=bind(this.spawn,this),!this.$log)throw"internalLogger undefined";if(!r(this.$log))throw"@$log is invalid";for(this.doLog=!0,l={},n=function(t){return function(n){return l[n]=function(){var i;return i=1<=arguments.length?slice.call(arguments,0):[],t.doLog?s(e[n],t.currentLevel,function(){var e;return(e=t.$log)[n].apply(e,i)}):void 0},t[n]=l[n]}}(this),i=0,a=o.length;a>i;i++)u=o[i],n(u);this.LEVELS=e,this.currentLevel=e.error}return t.prototype.spawn=function(e){if("string"==typeof e){if(!r(this.$log))throw"@$log is invalid";if(!c)throw"nemDebug is undefined this is probably the light version of this library sep debug logggers is not supported!";return a(e,this.$log)}return new t(e||this.$log)},t}(),this.decorator=["$log",function(t){var i;return i=new n(t),i.currentLevel=e.debug,i}],this.$get=["$log",function(t){return new n(t)}],this}]),function(){function t(t,e){if(t!==e){var n=null===t,i=t===b,o=t===t,r=null===e,s=e===b,a=e===e;if(t>e&&!r||!o||n&&!s&&a||i&&a)return 1;if(e>t&&!n||!a||r&&!i&&o||s&&o)return-1}return 0}function e(t,e,n){for(var i=t.length,o=n?i:-1;n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function n(t,e,n){if(e!==e)return h(t,n);n-=1;for(var i=t.length;++n<i;)if(t[n]===e)return n;return-1}function i(t){return"function"==typeof t||!1}function o(t){return null==t?"":t+""}function r(t,e){for(var n=-1,i=t.length;++n<i&&-1<e.indexOf(t.charAt(n)););return n}function s(t,e){for(var n=t.length;n--&&-1<e.indexOf(t.charAt(n)););return n}function a(e,n){return t(e.a,n.a)||e.b-n.b}function u(t){return At[t]}function l(t){return $t[t]}function p(t,e,n){return e?t=Bt[t]:n&&(t=zt[t]),"\\"+t}function c(t){return"\\"+zt[t]}function h(t,e,n){var i=t.length;for(e+=n?0:-1;n?e--:++e<i;){var o=t[e];if(o!==o)return e}return-1}function d(t){return!!t&&"object"==typeof t}function f(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function g(t,e){for(var n=-1,i=t.length,o=-1,r=[];++n<i;)t[n]===e&&(t[n]=B,r[++o]=n);return r}function m(t){for(var e=-1,n=t.length;++e<n&&f(t.charCodeAt(e)););return e}function v(t){for(var e=t.length;e--&&f(t.charCodeAt(e)););return e}function y(t){return jt[t]}function _(f){function At(t){if(d(t)&&!(Dr(t)||t instanceof Wt)){if(t instanceof jt)return t;if(to.call(t,"__chain__")&&to.call(t,"__wrapped__"))return Nn(t)}return new jt(t)}function $t(){}function jt(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function Wt(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Do,this.__views__=[]}function Bt(){this.__data__={}}function zt(t){var e=t?t.length:0;for(this.data={hash:vo(null),set:new po};e--;)this.push(t[e])}function Rt(t,e){var n=t.data;return("string"==typeof e||mi(e)?n.set.has(e):n.hash[e])?0:-1}function Nt(t,e){var n=-1,i=t.length;for(e||(e=zi(i));++n<i;)e[n]=t[n];return e}function Ft(t,e){for(var n=-1,i=t.length;++n<i&&!1!==e(t[n],n,t););return t}function Vt(t,e){for(var n=-1,i=t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function Kt(t,e){for(var n=-1,i=t.length,o=-1,r=[];++n<i;){var s=t[n];e(s,n,t)&&(r[++o]=s)}return r}function Zt(t,e){for(var n=-1,i=t.length,o=zi(i);++n<i;)o[n]=e(t[n],n,t);return o}function qt(t,e){for(var n=-1,i=e.length,o=t.length;++n<i;)t[o+n]=e[n];return t}function Yt(t,e,n,i){var o=-1,r=t.length;for(i&&r&&(n=t[++o]);++o<r;)n=e(n,t[o],o,t);return n}function Xt(t,e){for(var n=-1,i=t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function Qt(t,e,n,i){return t!==b&&to.call(i,n)?t:e}function Jt(t,e,n){for(var i=-1,o=Br(e),r=o.length;++i<r;){var s=o[i],a=t[s],u=n(a,e[s],s,t,e);(u===u?u===a:a!==a)&&(a!==b||s in t)||(t[s]=u)}return t}function te(t,e){return null==e?t:ne(e,Br(e),t)}function ee(t,e){for(var n=-1,i=null==t,o=!i&&Ln(t),r=o?t.length:0,s=e.length,a=zi(s);++n<s;){var u=e[n];a[n]=o?Pn(u,r)?t[u]:b:i?b:t[u]}return a}function ne(t,e,n){n||(n={});for(var i=-1,o=e.length;++i<o;){var r=e[i];n[r]=t[r]}return n}function ie(t,e,n){var i=typeof t;return"function"==i?e===b?t:Be(t,e,n):null==t?Ai:"object"==i?be(t):e===b?Bi(t):we(t,e)}function oe(t,e,n,i,o,r,s){var a;if(n&&(a=o?n(t,i,o):n(t)),a!==b)return a;if(!mi(t))return t;if(i=Dr(t)){if(a=Cn(t),!e)return Nt(t,a)}else{var u=no.call(t),l=u==K;if(u!=U&&u!=z&&(!l||o))return Tt[u]?On(t,u,e):o?t:{};if(a=Gn(l?{}:t),!e)return te(a,t)}for(r||(r=[]),s||(s=[]),o=r.length;o--;)if(r[o]==t)return s[o];return r.push(t),s.push(a),(i?Ft:de)(t,function(i,o){a[o]=oe(i,e,n,o,t,r,s)}),a}function re(t,e,n){if("function"!=typeof t)throw new qi(W);return co(function(){t.apply(b,n)},e)}function se(t,e){var i=t?t.length:0,o=[];if(!i)return o;var r=-1,s=Mn(),a=s===n,u=a&&e.length>=A&&vo&&po?new zt(e):null,l=e.length;u&&(s=Rt,a=!1,e=u);t:for(;++r<i;)if(u=t[r],a&&u===u){for(var p=l;p--;)if(e[p]===u)continue t;o.push(u)}else 0>s(e,u,0)&&o.push(u);return o}function ae(t,e){var n=!0;return Ao(t,function(t,i,o){return n=!!e(t,i,o)}),n}function ue(t,e,n,i){var o=i,r=o;return Ao(t,function(t,s,a){s=+e(t,s,a),(n(s,o)||s===i&&s===r)&&(o=s,r=t)}),r}function le(t,e){var n=[];return Ao(t,function(t,i,o){e(t,i,o)&&n.push(t)}),n}function pe(t,e,n,i){var o;return n(t,function(t,n,r){return e(t,n,r)?(o=i?n:t,!1):void 0}),o}function ce(t,e,n,i){i||(i=[]);for(var o=-1,r=t.length;++o<r;){var s=t[o];d(s)&&Ln(s)&&(n||Dr(s)||hi(s))?e?ce(s,e,n,i):qt(i,s):n||(i[i.length]=s)}return i}function he(t,e){jo(t,e,Oi)}function de(t,e){return jo(t,e,Br)}function fe(t,e){return Wo(t,e,Br)}function ge(t,e){for(var n=-1,i=e.length,o=-1,r=[];++n<i;){var s=e[n];gi(t[s])&&(r[++o]=s)}return r}function me(t,e,n){if(null!=t){n!==b&&n in zn(t)&&(e=[n]),n=0;for(var i=e.length;null!=t&&i>n;)t=t[e[n++]];return n&&n==i?t:b}}function ve(t,e,n,i,o,r){if(t===e)t=!0;else if(null==t||null==e||!mi(t)&&!d(e))t=t!==t&&e!==e;else t:{var s=ve,a=Dr(t),u=Dr(e),l=R,p=R;a||(l=no.call(t),l==z?l=U:l!=U&&(a=Mi(t))),u||(p=no.call(e),p==z?p=U:p!=U&&Mi(e));var c=l==U,u=p==U,p=l==p;if(!p||a||c){if(!i&&(l=c&&to.call(t,"__wrapped__"),u=u&&to.call(e,"__wrapped__"),l||u)){t=s(l?t.value():t,u?e.value():e,n,i,o,r);break t}if(p){for(o||(o=[]),r||(r=[]),l=o.length;l--;)if(o[l]==t){t=r[l]==e;break t}o.push(t),r.push(e),t=(a?vn:_n)(t,e,s,n,i,o,r),o.pop(),r.pop()}else t=!1}else t=yn(t,e,l)}return t}function ye(t,e,n){var i=e.length,o=i,r=!n;if(null==t)return!o;for(t=zn(t);i--;){var s=e[i];if(r&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var s=e[i],a=s[0],u=t[a],l=s[1];if(r&&s[2]){if(u===b&&!(a in t))return!1}else if(s=n?n(u,l,a):b,s===b?!ve(l,u,n,!0):!s)return!1}return!0}function _e(t,e){var n=-1,i=Ln(t)?zi(t.length):[];return Ao(t,function(t,o,r){i[++n]=e(t,o,r)}),i}function be(t){var e=kn(t);if(1==e.length&&e[0][2]){var n=e[0][0],i=e[0][1];return function(t){return null==t?!1:t[n]===i&&(i!==b||n in zn(t))}}return function(t){return ye(t,e)}}function we(t,e){var n=Dr(t),i=In(t)&&e===e&&!mi(e),o=t+"";return t=Rn(t),function(r){if(null==r)return!1;var s=o;if(r=zn(r),!(!n&&i||s in r)){if(r=1==t.length?r:me(r,De(t,0,-1)),null==r)return!1;s=Un(t),r=zn(r)}return r[s]===e?e!==b||s in r:ve(e,r[s],b,!0)}}function Me(t,e,n,i,o){if(!mi(t))return t;var r=Ln(e)&&(Dr(e)||Mi(e)),s=r?b:Br(e);return Ft(s||e,function(a,u){if(s&&(u=a,a=e[u]),d(a)){i||(i=[]),o||(o=[]);t:{for(var l=u,p=i,c=o,h=p.length,f=e[l];h--;)if(p[h]==f){t[l]=c[h];break t}var h=t[l],g=n?n(h,f,l,t,e):b,m=g===b;m&&(g=f,Ln(f)&&(Dr(f)||Mi(f))?g=Dr(h)?h:Ln(h)?Nt(h):[]:_i(f)||hi(f)?g=hi(h)?Ci(h):_i(h)?h:{}:m=!1),p.push(f),c.push(g),m?t[l]=Me(g,f,n,p,c):(g===g?g!==h:h===h)&&(t[l]=g)}}else l=t[u],p=n?n(l,a,u,t,e):b,(c=p===b)&&(p=a),p===b&&(!r||u in t)||!c&&(p===p?p===l:l!==l)||(t[u]=p)}),t}function ke(t){return function(e){return null==e?b:e[t]}}function xe(t){var e=t+"";return t=Rn(t),function(n){return me(n,t,e)}}function Ce(t,e){for(var n=t?e.length:0;n--;){var i=e[n];if(i!=o&&Pn(i)){var o=i;ho.call(t,i,1)}}}function Ge(t,e){return t+yo(Go()*(e-t+1))}function Oe(t,e,n,i,o){return o(t,function(t,o,r){n=i?(i=!1,t):e(n,t,o,r)}),n}function De(t,e,n){var i=-1,o=t.length;for(e=null==e?0:+e||0,0>e&&(e=-e>o?0:o+e),n=n===b||n>o?o:+n||0,0>n&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0,n=zi(o);++i<o;)n[i]=t[i+e];return n}function Le(t,e){var n;return Ao(t,function(t,i,o){return n=e(t,i,o),!n}),!!n}function Pe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].c;return t}function Se(e,n,i){var o=bn(),r=-1;return n=Zt(n,function(t){return o(t)}),e=_e(e,function(t){return{a:Zt(n,function(e){return e(t)}),b:++r,c:t}}),Pe(e,function(e,n){var o;t:{for(var r=-1,s=e.a,a=n.a,u=s.length,l=i.length;++r<u;)if(o=t(s[r],a[r])){if(r>=l)break t;r=i[r],o*="asc"===r||!0===r?1:-1;break t}o=e.b-n.b}return o})}function Ie(t,e){var n=0;return Ao(t,function(t,i,o){n+=+e(t,i,o)||0}),n}function Ee(t,e){var i=-1,o=Mn(),r=t.length,s=o===n,a=s&&r>=A,u=a&&vo&&po?new zt(void 0):null,l=[];u?(o=Rt,s=!1):(a=!1,u=e?[]:l);t:for(;++i<r;){var p=t[i],c=e?e(p,i,t):p;if(s&&p===p){for(var h=u.length;h--;)if(u[h]===c)continue t;e&&u.push(c),l.push(p)}else 0>o(u,c,0)&&((e||a)&&u.push(c),l.push(p))}return l}function Te(t,e){for(var n=-1,i=e.length,o=zi(i);++n<i;)o[n]=t[e[n]];return o}function Ae(t,e,n,i){for(var o=t.length,r=i?o:-1;(i?r--:++r<o)&&e(t[r],r,t););return n?De(t,i?0:r,i?r+1:o):De(t,i?r+1:0,i?o:r)}function $e(t,e){var n=t;n instanceof Wt&&(n=n.value());for(var i=-1,o=e.length;++i<o;)var r=e[i],n=r.func.apply(r.thisArg,qt([n],r.args));return n}function je(t,e,n){var i=0,o=t?t.length:i;if("number"==typeof e&&e===e&&Po>=o){for(;o>i;){var r=i+o>>>1,s=t[r];(n?e>=s:e>s)&&null!==s?i=r+1:o=r}return o}return We(t,e,Ai,n)}function We(t,e,n,i){e=n(e);for(var o=0,r=t?t.length:0,s=e!==e,a=null===e,u=e===b;r>o;){var l=yo((o+r)/2),p=n(t[l]),c=p!==b,h=p===p;(s?h||i:a?h&&c&&(i||null!=p):u?h&&(i||c):null==p?0:i?e>=p:e>p)?o=l+1:r=l}return ko(r,Lo)}function Be(t,e,n){if("function"!=typeof t)return Ai;if(e===b)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,o){return t.call(e,n,i,o)};case 4:return function(n,i,o,r){return t.call(e,n,i,o,r)};case 5:return function(n,i,o,r,s){return t.call(e,n,i,o,r,s)}}return function(){return t.apply(e,arguments)}}function ze(t){var e=new ro(t.byteLength);return new fo(e).set(new fo(t)),e}function Re(t,e,n){for(var i=n.length,o=-1,r=Mo(t.length-i,0),s=-1,a=e.length,u=zi(a+r);++s<a;)u[s]=e[s];for(;++o<i;)u[n[o]]=t[o];for(;r--;)u[s++]=t[o++];return u}function Ne(t,e,n){for(var i=-1,o=n.length,r=-1,s=Mo(t.length-o,0),a=-1,u=e.length,l=zi(s+u);++r<s;)l[r]=t[r];for(s=r;++a<u;)l[s+a]=e[a];for(;++i<o;)l[s+n[i]]=t[r++];return l}function Fe(t,e){return function(n,i,o){var r=e?e():{};if(i=bn(i,o,3),Dr(n)){o=-1;for(var s=n.length;++o<s;){var a=n[o];t(r,a,i(a,o,n),n)}}else Ao(n,function(e,n,o){t(r,e,i(e,n,o),o)});return r}}function Ve(t){return pi(function(e,n){var i=-1,o=null==e?0:n.length,r=o>2?n[o-2]:b,s=o>2?n[2]:b,a=o>1?n[o-1]:b;for("function"==typeof r?(r=Be(r,a,5),o-=2):(r="function"==typeof a?a:b,o-=r?1:0),s&&Sn(n[0],n[1],s)&&(r=3>o?b:r,o=1);++i<o;)(s=n[i])&&t(e,s,r);return e})}function Ke(t,e){return function(n,i){var o=n?Ro(n):0;if(!Tn(o))return t(n,i);for(var r=e?o:-1,s=zn(n);(e?r--:++r<o)&&!1!==i(s[r],r,s););return n}}function He(t){return function(e,n,i){var o=zn(e);i=i(e);for(var r=i.length,s=t?r:-1;t?s--:++s<r;){var a=i[s];if(!1===n(o[a],a,o))break}return e}}function Ue(t,e){function n(){return(this&&this!==Ht&&this instanceof n?i:t).apply(e,arguments)}var i=qe(t);return n}function Ze(t){return function(e){var n=-1;e=Ei(Pi(e));for(var i=e.length,o="";++n<i;)o=t(o,e[n],n);return o}}function qe(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=To(t.prototype),e=t.apply(n,e);return mi(e)?e:n}}function Ye(t){function e(n,i,o){return o&&Sn(n,i,o)&&(i=b),n=mn(n,t,b,b,b,b,b,i),n.placeholder=e.placeholder,n}return e}function Xe(t,e){return pi(function(n){var i=n[0];return null==i?i:(n.push(e),t.apply(b,n))})}function Qe(t,e){return function(n,i,o){if(o&&Sn(n,i,o)&&(i=b),i=bn(i,o,3),1==i.length){o=n=Dr(n)?n:Bn(n);for(var r=i,s=-1,a=o.length,u=e,l=u;++s<a;){var p=o[s],c=+r(p);t(c,u)&&(u=c,l=p)}if(o=l,!n.length||o!==e)return o}return ue(n,i,t,e)}}function Je(t,n){return function(i,o,r){return o=bn(o,r,3),Dr(i)?(o=e(i,o,n),o>-1?i[o]:b):pe(i,o,t)}}function tn(t){return function(n,i,o){return n&&n.length?(i=bn(i,o,3),e(n,i,t)):-1}}function en(t){return function(e,n,i){return n=bn(n,i,3),pe(e,n,t,!0)}}function nn(t){return function(){for(var e,n=arguments.length,i=t?n:-1,o=0,r=zi(n);t?i--:++i<n;){var s=r[o++]=arguments[i];if("function"!=typeof s)throw new qi(W);!e&&jt.prototype.thru&&"wrapper"==wn(s)&&(e=new jt([],!0))}for(i=e?-1:n;++i<n;){var s=r[i],o=wn(s),a="wrapper"==o?zo(s):b;e=a&&En(a[0])&&a[1]==(L|C|O|P)&&!a[4].length&&1==a[9]?e[wn(a[0])].apply(e,a[3]):1==s.length&&En(s)?e[o]():e.thru(s)}return function(){var t=arguments,i=t[0];if(e&&1==t.length&&Dr(i)&&i.length>=A)return e.plant(i).value();for(var o=0,t=n?r[o].apply(this,t):i;++o<n;)t=r[o].call(this,t);return t}}}function on(t,e){return function(n,i,o){return"function"==typeof i&&o===b&&Dr(n)?t(n,i):e(n,Be(i,o,3))}}function rn(t){return function(e,n,i){return("function"!=typeof n||i!==b)&&(n=Be(n,i,3)),t(e,n,Oi)}}function sn(t){return function(e,n,i){return("function"!=typeof n||i!==b)&&(n=Be(n,i,3)),t(e,n)}}function an(t){return function(e,n,i){var o={};return n=bn(n,i,3),de(e,function(e,i,r){r=n(e,i,r),i=t?r:i,e=t?e:r,o[i]=e}),o}}function un(t){return function(e,n,i){return e=o(e),(t?e:"")+hn(e,n,i)+(t?"":e)}}function ln(t){var e=pi(function(n,i){var o=g(i,e.placeholder);return mn(n,t,b,i,o)});return e}function pn(t,e){return function(n,i,o,r){var s=3>arguments.length;return"function"==typeof i&&r===b&&Dr(n)?t(n,i,o,s):Oe(n,bn(i,r,4),o,s,e)}}function cn(t,e,n,i,o,r,s,a,u,l){function p(){for(var _=arguments.length,w=_,x=zi(_);w--;)x[w]=arguments[w];if(i&&(x=Re(x,i,o)),r&&(x=Ne(x,r,s)),f||v){var w=p.placeholder,C=g(x,w),_=_-C.length;if(l>_){var G=a?Nt(a):b,_=Mo(l-_,0),L=f?C:b,C=f?b:C,P=f?x:b,x=f?b:x;return e|=f?O:D,e&=~(f?D:O),m||(e&=~(M|k)),x=[t,e,n,P,L,x,C,G,u,_],G=cn.apply(b,x),En(t)&&No(G,x),G.placeholder=w,G}}if(w=h?n:this,G=d?w[t]:t,a)for(_=x.length,L=ko(a.length,_),C=Nt(x);L--;)P=a[L],x[L]=Pn(P,_)?C[P]:b;return c&&u<x.length&&(x.length=u),this&&this!==Ht&&this instanceof p&&(G=y||qe(t)),G.apply(w,x)}var c=e&L,h=e&M,d=e&k,f=e&C,m=e&x,v=e&G,y=d?b:qe(t);return p}function hn(t,e,n){return t=t.length,e=+e,e>t&&bo(e)?(e-=t,n=null==n?" ":n+"",Si(n,mo(e/n.length)).slice(0,e)):""}function dn(t,e,n,i){function o(){for(var e=-1,a=arguments.length,u=-1,l=i.length,p=zi(l+a);++u<l;)p[u]=i[u];for(;a--;)p[u++]=arguments[++e];return(this&&this!==Ht&&this instanceof o?s:t).apply(r?n:this,p)}var r=e&M,s=qe(t);return o}function fn(t){var e=Vi[t];return function(t,n){return(n=n===b?0:+n||0)?(n=uo(10,n),e(t*n)/n):e(t)}}function gn(t){return function(e,n,i,o){var r=bn(i);return null==i&&r===ie?je(e,n,t):We(e,n,r(i,o,1),t)}}function mn(t,e,n,i,o,r,s,a){var u=e&k;if(!u&&"function"!=typeof t)throw new qi(W);var l=i?i.length:0;if(l||(e&=~(O|D),i=o=b),l-=o?o.length:0,e&D){var p=i,c=o;i=o=b}var h=u?b:zo(t);return n=[t,e,n,i,o,p,c,r,s,a],h&&(i=n[1],e=h[1],a=i|e,o=e==L&&i==C||e==L&&i==P&&n[7].length<=h[8]||e==(L|P)&&i==C,(L>a||o)&&(e&M&&(n[2]=h[2],a|=i&M?0:x),(i=h[3])&&(o=n[3],n[3]=o?Re(o,i,h[4]):Nt(i),n[4]=o?g(n[3],B):Nt(h[4])),(i=h[5])&&(o=n[5],n[5]=o?Ne(o,i,h[6]):Nt(i),n[6]=o?g(n[5],B):Nt(h[6])),(i=h[7])&&(n[7]=Nt(i)),e&L&&(n[8]=null==n[8]?h[8]:ko(n[8],h[8])),null==n[9]&&(n[9]=h[9]),n[0]=h[0],n[1]=a),e=n[1],a=n[9]),n[9]=null==a?u?0:t.length:Mo(a-l,0)||0,(h?Bo:No)(e==M?Ue(n[0],n[2]):e!=O&&e!=(M|O)||n[4].length?cn.apply(b,n):dn.apply(b,n),n)}function vn(t,e,n,i,o,r,s){var a=-1,u=t.length,l=e.length;if(u!=l&&(!o||u>=l))return!1;for(;++a<u;){var p=t[a],l=e[a],c=i?i(o?l:p,o?p:l,a):b;if(c!==b){if(c)continue;return!1}if(o){if(!Xt(e,function(t){return p===t||n(p,t,i,o,r,s)}))return!1}else if(p!==l&&!n(p,l,i,o,r,s))return!1}return!0}function yn(t,e,n){switch(n){case N:case F:return+t==+e;case V:return t.name==e.name&&t.message==e.message;case H:return t!=+t?e!=+e:t==+e;case Z:case q:return t==e+""}return!1}function _n(t,e,n,i,o,r,s){var a=Br(t),u=a.length,l=Br(e).length;if(u!=l&&!o)return!1;for(l=u;l--;){var p=a[l];if(!(o?p in e:to.call(e,p)))return!1}for(var c=o;++l<u;){var p=a[l],h=t[p],d=e[p],f=i?i(o?d:h,o?h:d,p):b;if(f===b?!n(h,d,i,o,r,s):!f)return!1;c||(c="constructor"==p)}return!(!c&&(n=t.constructor,i=e.constructor,n!=i&&"constructor"in t&&"constructor"in e&&!("function"==typeof n&&n instanceof n&&"function"==typeof i&&i instanceof i)))}function bn(t,e,n){var i=At.callback||Ti,i=i===Ti?ie:i;return n?i(t,e,n):i}function wn(t){for(var e=t.name+"",n=Eo[e],i=n?n.length:0;i--;){var o=n[i],r=o.func;if(null==r||r==t)return o.name}return e}function Mn(t,e,i){var o=At.indexOf||Hn,o=o===Hn?n:o;return t?o(t,e,i):o}function kn(t){t=Di(t);for(var e=t.length;e--;){var n=t[e][1];t[e][2]=n===n&&!mi(n)}return t}function xn(t,e){var n=null==t?b:t[e];return vi(n)?n:b}function Cn(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&to.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Gn(t){return t=t.constructor,"function"==typeof t&&t instanceof t||(t=Hi),new t}function On(t,e,n){var i=t.constructor;switch(e){case Y:return ze(t);case N:case F:return new i(+t);case X:case Q:case J:case tt:case et:case nt:case it:case ot:case rt:return e=t.buffer,new i(n?ze(e):e,t.byteOffset,t.length);case H:case q:return new i(t);case Z:var o=new i(t.source,xt.exec(t));o.lastIndex=t.lastIndex}return o}function Dn(t,e,n){return null==t||In(e,t)||(e=Rn(e),t=1==e.length?t:me(t,De(e,0,-1)),e=Un(e)),e=null==t?t:t[e],null==e?b:e.apply(t,n)}function Ln(t){return null!=t&&Tn(Ro(t))}function Pn(t,e){return t="number"==typeof t||Ot.test(t)?+t:-1,e=null==e?So:e,t>-1&&0==t%1&&e>t}function Sn(t,e,n){if(!mi(n))return!1;var i=typeof e;return("number"==i?Ln(n)&&Pn(e,n.length):"string"==i&&e in n)?(e=n[e],t===t?t===e:e!==e):!1}function In(t,e){var n=typeof t;return"string"==n&&vt.test(t)||"number"==n?!0:Dr(t)?!1:!mt.test(t)||null!=e&&t in zn(e)}function En(t){var e=wn(t),n=At[e];return"function"==typeof n&&e in Wt.prototype?t===n?!0:(e=zo(n),!!e&&t===e[0]):!1}function Tn(t){return"number"==typeof t&&t>-1&&0==t%1&&So>=t}function An(t,e){return t===b?e:Lr(t,e,An)}function $n(t,e){t=zn(t);for(var n=-1,i=e.length,o={};++n<i;){var r=e[n];r in t&&(o[r]=t[r])}return o}function jn(t,e){var n={};return he(t,function(t,i,o){e(t,i,o)&&(n[i]=t)}),n}function Wn(t){for(var e=Oi(t),n=e.length,i=n&&t.length,o=!!i&&Tn(i)&&(Dr(t)||hi(t)),r=-1,s=[];++r<n;){var a=e[r];(o&&Pn(a,i)||to.call(t,a))&&s.push(a)}return s}function Bn(t){return null==t?[]:Ln(t)?mi(t)?t:Hi(t):Li(t)}function zn(t){return mi(t)?t:Hi(t)}function Rn(t){if(Dr(t))return t;var e=[];return o(t).replace(yt,function(t,n,i,o){e.push(i?o.replace(Mt,"$1"):n||t)}),e}function Nn(t){return t instanceof Wt?t.clone():new jt(t.__wrapped__,t.__chain__,Nt(t.__actions__))}function Fn(t,e,n){return t&&t.length?((n?Sn(t,e,n):null==e)&&(e=1),De(t,0>e?0:e)):[]}function Vn(t,e,n){var i=t?t.length:0;return i?((n?Sn(t,e,n):null==e)&&(e=1),e=i-(+e||0),De(t,0,0>e?0:e)):[]}function Kn(t){return t?t[0]:b}function Hn(t,e,i){var o=t?t.length:0;if(!o)return-1;if("number"==typeof i)i=0>i?Mo(o+i,0):i;else if(i)return i=je(t,e),o>i&&(e===e?e===t[i]:t[i]!==t[i])?i:-1;return n(t,e,i||0)}function Un(t){var e=t?t.length:0;return e?t[e-1]:b}function Zn(t){return Fn(t,1)}function qn(t,e,i,o){if(!t||!t.length)return[];null!=e&&"boolean"!=typeof e&&(o=i,i=Sn(t,e,o)?b:e,e=!1);var r=bn();if((null!=i||r!==ie)&&(i=r(i,o,3)),e&&Mn()===n){e=i;var s;i=-1,o=t.length;for(var r=-1,a=[];++i<o;){var u=t[i],l=e?e(u,i,t):u;i&&s===l||(s=l,a[++r]=u)}t=a}else t=Ee(t,i);return t}function Yn(t){if(!t||!t.length)return[];var e=-1,n=0;t=Kt(t,function(t){return Ln(t)?(n=Mo(t.length,n),!0):void 0});for(var i=zi(n);++e<n;)i[e]=Zt(t,ke(e));return i}function Xn(t,e,n){return t&&t.length?(t=Yn(t),null==e?t:(e=Be(e,n,4),Zt(t,function(t){return Yt(t,e,b,!0)}))):[]}function Qn(t,e){var n=-1,i=t?t.length:0,o={};for(!i||e||Dr(t[0])||(e=[]);++n<i;){var r=t[n];e?o[r]=e[n]:r&&(o[r[0]]=r[1])}return o}function Jn(t){return t=At(t),t.__chain__=!0,t}function ti(t,e,n){return e.call(n,t)}function ei(t,e,n){var i=Dr(t)?Vt:ae;return n&&Sn(t,e,n)&&(e=b),("function"!=typeof e||n!==b)&&(e=bn(e,n,3)),i(t,e)}function ni(t,e,n){var i=Dr(t)?Kt:le;return e=bn(e,n,3),i(t,e)}function ii(t,e,n,i){var o=t?Ro(t):0;return Tn(o)||(t=Li(t),o=t.length),n="number"!=typeof n||i&&Sn(e,n,i)?0:0>n?Mo(o+n,0):n||0,"string"==typeof t||!Dr(t)&&wi(t)?o>=n&&-1<t.indexOf(e,n):!!o&&-1<Mn(t,e,n)}function oi(t,e,n){var i=Dr(t)?Zt:_e;return e=bn(e,n,3),i(t,e)}function ri(t,e,n){if(n?Sn(t,e,n):null==e){t=Bn(t);var i=t.length;return i>0?t[Ge(0,i-1)]:b}n=-1,t=xi(t);var i=t.length,o=i-1;for(e=ko(0>e?0:+e||0,i);++n<e;){var i=Ge(n,o),r=t[i];t[i]=t[n],t[n]=r}return t.length=e,t}function si(t,e,n){var i=Dr(t)?Xt:Le;return n&&Sn(t,e,n)&&(e=b),("function"!=typeof e||n!==b)&&(e=bn(e,n,3)),i(t,e)}function ai(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new qi(W);var i=t;t=e,e=i}return function(){return 0<--t&&(n=e.apply(this,arguments)),1>=t&&(e=b),n}}function ui(t,e,n){function i(e,n){n&&so(n),u=h=d=b,e&&(f=fr(),l=t.apply(c,a),h||u||(a=c=b))}function o(){var t=e-(fr()-p);0>=t||t>e?i(d,u):h=co(o,t)}function r(){i(m,h)}function s(){if(a=arguments,p=fr(),c=this,d=m&&(h||!v),!1===g)var n=v&&!h;else{u||v||(f=p);var i=g-(p-f),s=0>=i||i>g;s?(u&&(u=so(u)),f=p,l=t.apply(c,a)):u||(u=co(r,i))}return s&&h?h=so(h):h||e===g||(h=co(o,e)),n&&(s=!0,l=t.apply(c,a)),!s||h||u||(a=c=b),l}var a,u,l,p,c,h,d,f=0,g=!1,m=!0;if("function"!=typeof t)throw new qi(W);if(e=0>e?0:+e||0,!0===n)var v=!0,m=!1;else mi(n)&&(v=!!n.leading,g="maxWait"in n&&Mo(+n.maxWait||0,e),m="trailing"in n?!!n.trailing:m);return s.cancel=function(){h&&so(h),u&&so(u),f=0,u=h=d=b},s}function li(t,e){function n(){var i=arguments,o=e?e.apply(this,i):i[0],r=n.cache;return r.has(o)?r.get(o):(i=t.apply(this,i),n.cache=r.set(o,i),i)}if("function"!=typeof t||e&&"function"!=typeof e)throw new qi(W);return n.cache=new li.Cache,n}function pi(t,e){if("function"!=typeof t)throw new qi(W);return e=Mo(e===b?t.length-1:+e||0,0),function(){for(var n=arguments,i=-1,o=Mo(n.length-e,0),r=zi(o);++i<o;)r[i]=n[e+i];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,n[0],r);case 2:return t.call(this,n[0],n[1],r)}for(o=zi(e+1),i=-1;++i<e;)o[i]=n[i];return o[e]=r,t.apply(this,o)}}function ci(t,e){return t>e}function hi(t){return d(t)&&Ln(t)&&to.call(t,"callee")&&!lo.call(t,"callee")}function di(t,e,n,i){return i=(n="function"==typeof n?Be(n,i,3):b)?n(t,e):b,i===b?ve(t,e,n):!!i}function fi(t){return d(t)&&"string"==typeof t.message&&no.call(t)==V}function gi(t){return mi(t)&&no.call(t)==K}function mi(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function vi(t){return null==t?!1:gi(t)?oo.test(Ji.call(t)):d(t)&&Gt.test(t)}function yi(t){return"number"==typeof t||d(t)&&no.call(t)==H}function _i(t){var e;if(!d(t)||no.call(t)!=U||hi(t)||!(to.call(t,"constructor")||(e=t.constructor,"function"!=typeof e||e instanceof e)))return!1;var n;return he(t,function(t,e){n=e}),n===b||to.call(t,n)}function bi(t){return mi(t)&&no.call(t)==Z}function wi(t){return"string"==typeof t||d(t)&&no.call(t)==q}function Mi(t){return d(t)&&Tn(t.length)&&!!Et[no.call(t)]}function ki(t,e){return e>t}function xi(t){var e=t?Ro(t):0;return Tn(e)?e?Nt(t):[]:Li(t)}function Ci(t){return ne(t,Oi(t))}function Gi(t){return ge(t,Oi(t))}function Oi(t){if(null==t)return[];mi(t)||(t=Hi(t));for(var e=t.length,e=e&&Tn(e)&&(Dr(t)||hi(t))&&e||0,n=t.constructor,i=-1,n="function"==typeof n&&n.prototype===t,o=zi(e),r=e>0;++i<e;)o[i]=i+"";for(var s in t)r&&Pn(s,e)||"constructor"==s&&(n||!to.call(t,s))||o.push(s);return o}function Di(t){t=zn(t);for(var e=-1,n=Br(t),i=n.length,o=zi(i);++e<i;){var r=n[e];o[e]=[r,t[r]]}return o}function Li(t){return Te(t,Br(t))}function Pi(t){return(t=o(t))&&t.replace(Dt,u).replace(wt,"")}function Si(t,e){var n="";if(t=o(t),e=+e,1>e||!t||!bo(e))return n;do e%2&&(n+=t),e=yo(e/2),t+=t;while(e);return n}function Ii(t,e,n){var i=t;return(t=o(t))?(n?Sn(i,e,n):null==e)?t.slice(m(t),v(t)+1):(e+="",t.slice(r(t,e),s(t,e)+1)):t}function Ei(t,e,n){return n&&Sn(t,e,n)&&(e=b),t=o(t),t.match(e||St)||[]}function Ti(t,e,n){return n&&Sn(t,e,n)&&(e=b),d(t)?$i(t):ie(t,e)}function Ai(t){return t}function $i(t){return be(oe(t,!0))}function ji(t,e,n){if(null==n){var i=mi(e),o=i?Br(e):b;((o=o&&o.length?ge(e,o):b)?o.length:i)||(o=!1,n=e,e=t,t=this)}o||(o=ge(e,Br(e)));var r=!0,i=-1,s=gi(t),a=o.length;!1===n?r=!1:mi(n)&&"chain"in n&&(r=n.chain);for(;++i<a;){n=o[i];var u=e[n];t[n]=u,s&&(t.prototype[n]=function(e){return function(){var n=this.__chain__;if(r||n){var i=t(this.__wrapped__);return(i.__actions__=Nt(this.__actions__)).push({func:e,args:arguments,thisArg:t}),i.__chain__=n,i}return e.apply(t,qt([this.value()],arguments))}}(u))}return t}function Wi(){}function Bi(t){return In(t)?ke(t):xe(t)}f=f?Ut.defaults(Ht.Object(),f,Ut.pick(Ht,It)):Ht;var zi=f.Array,Ri=f.Date,Ni=f.Error,Fi=f.Function,Vi=f.Math,Ki=f.Number,Hi=f.Object,Ui=f.RegExp,Zi=f.String,qi=f.TypeError,Yi=zi.prototype,Xi=Hi.prototype,Qi=Zi.prototype,Ji=Fi.prototype.toString,to=Xi.hasOwnProperty,eo=0,no=Xi.toString,io=Ht._,oo=Ui("^"+Ji.call(to).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ro=f.ArrayBuffer,so=f.clearTimeout,ao=f.parseFloat,uo=Vi.pow,lo=Xi.propertyIsEnumerable,po=xn(f,"Set"),co=f.setTimeout,ho=Yi.splice,fo=f.Uint8Array,go=xn(f,"WeakMap"),mo=Vi.ceil,vo=xn(Hi,"create"),yo=Vi.floor,_o=xn(zi,"isArray"),bo=f.isFinite,wo=xn(Hi,"keys"),Mo=Vi.max,ko=Vi.min,xo=xn(Ri,"now"),Co=f.parseInt,Go=Vi.random,Oo=Ki.NEGATIVE_INFINITY,Do=Ki.POSITIVE_INFINITY,Lo=4294967294,Po=2147483647,So=9007199254740991,Io=go&&new go,Eo={};At.support={},At.templateSettings={escape:dt,evaluate:ft,interpolate:gt,variable:"",imports:{_:At}};var To=function(){function t(){}return function(e){if(mi(e)){t.prototype=e;var n=new t;t.prototype=b}return n||{}}}(),Ao=Ke(de),$o=Ke(fe,!0),jo=He(),Wo=He(!0),Bo=Io?function(t,e){return Io.set(t,e),t}:Ai,zo=Io?function(t){return Io.get(t)}:Wi,Ro=ke("length"),No=function(){var t=0,e=0;return function(n,i){var o=fr(),r=T-(o-e);if(e=o,r>0){if(++t>=E)return n}else t=0;return Bo(n,i)}}(),Fo=pi(function(t,e){return d(t)&&Ln(t)?se(t,ce(e,!1,!0)):[]}),Vo=tn(),Ko=tn(!0),Ho=pi(function(t){for(var e=t.length,i=e,o=zi(p),r=Mn(),s=r===n,a=[];i--;){var u=t[i]=Ln(u=t[i])?u:[];o[i]=s&&120<=u.length&&vo&&po?new zt(i&&u):null}var s=t[0],l=-1,p=s?s.length:0,c=o[0];t:for(;++l<p;)if(u=s[l],0>(c?Rt(c,u):r(a,u,0))){for(i=e;--i;){var h=o[i];if(0>(h?Rt(h,u):r(t[i],u,0)))continue t}c&&c.push(u),a.push(u)}return a}),Uo=pi(function(e,n){n=ce(n);var i=ee(e,n);return Ce(e,n.sort(t)),i}),Zo=gn(),qo=gn(!0),Yo=pi(function(t){return Ee(ce(t,!1,!0))}),Xo=pi(function(t,e){return Ln(t)?se(t,e):[]}),Qo=pi(Yn),Jo=pi(function(t){var e=t.length,n=e>2?t[e-2]:b,i=e>1?t[e-1]:b;return e>2&&"function"==typeof n?e-=2:(n=e>1&&"function"==typeof i?(--e,i):b,i=b),t.length=e,Xn(t,n,i)}),tr=pi(function(t){return t=ce(t),this.thru(function(e){e=Dr(e)?e:[zn(e)];for(var n=t,i=-1,o=e.length,r=-1,s=n.length,a=zi(o+s);++i<o;)a[i]=e[i];for(;++r<s;)a[i++]=n[r];return a})}),er=pi(function(t,e){return ee(t,ce(e))}),nr=Fe(function(t,e,n){to.call(t,n)?++t[n]:t[n]=1}),ir=Je(Ao),or=Je($o,!0),rr=on(Ft,Ao),sr=on(function(t,e){for(var n=t.length;n--&&!1!==e(t[n],n,t););return t},$o),ar=Fe(function(t,e,n){to.call(t,n)?t[n].push(e):t[n]=[e]}),ur=Fe(function(t,e,n){t[n]=e}),lr=pi(function(t,e,n){var i=-1,o="function"==typeof e,r=In(e),s=Ln(t)?zi(t.length):[];return Ao(t,function(t){var a=o?e:r&&null!=t?t[e]:b;s[++i]=a?a.apply(t,n):Dn(t,e,n)}),s}),pr=Fe(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),cr=pn(Yt,Ao),hr=pn(function(t,e,n,i){var o=t.length;for(i&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n},$o),dr=pi(function(t,e){if(null==t)return[];var n=e[2];return n&&Sn(e[0],e[1],n)&&(e.length=1),Se(t,ce(e),[])}),fr=xo||function(){return(new Ri).getTime()},gr=pi(function(t,e,n){var i=M;if(n.length)var o=g(n,gr.placeholder),i=i|O;return mn(t,i,e,n,o)}),mr=pi(function(t,e){e=e.length?ce(e):Gi(t);for(var n=-1,i=e.length;++n<i;){var o=e[n];t[o]=mn(t[o],M,t)}return t}),vr=pi(function(t,e,n){var i=M|k;if(n.length)var o=g(n,vr.placeholder),i=i|O;return mn(e,i,t,n,o)}),yr=Ye(C),_r=Ye(G),br=pi(function(t,e){return re(t,1,e)}),wr=pi(function(t,e,n){return re(t,e,n)}),Mr=nn(),kr=nn(!0),xr=pi(function(t,e){if(e=ce(e),"function"!=typeof t||!Vt(e,i))throw new qi(W);var n=e.length;return pi(function(i){for(var o=ko(i.length,n);o--;)i[o]=e[o](i[o]);return t.apply(this,i)})}),Cr=ln(O),Gr=ln(D),Or=pi(function(t,e){return mn(t,P,b,b,b,ce(e))}),Dr=_o||function(t){return d(t)&&Tn(t.length)&&no.call(t)==R},Lr=Ve(Me),Pr=Ve(function(t,e,n){return n?Jt(t,e,n):te(t,e)}),Sr=Xe(Pr,function(t,e){return t===b?e:t}),Ir=Xe(Lr,An),Er=en(de),Tr=en(fe),Ar=rn(jo),$r=rn(Wo),jr=sn(de),Wr=sn(fe),Br=wo?function(t){var e=null==t?b:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Ln(t)?Wn(t):mi(t)?wo(t):[]}:Wn,zr=an(!0),Rr=an(),Nr=pi(function(t,e){if(null==t)return{};if("function"!=typeof e[0])return e=Zt(ce(e),Zi),$n(t,se(Oi(t),e));var n=Be(e[0],e[1],3);return jn(t,function(t,e,i){return!n(t,e,i)})}),Fr=pi(function(t,e){return null==t?{}:"function"==typeof e[0]?jn(t,Be(e[0],e[1],3)):$n(t,ce(e))}),Vr=Ze(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),Kr=Ze(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Hr=un(),Ur=un(!0),Zr=Ze(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),qr=Ze(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Yr=pi(function(t,e){try{return t.apply(b,e)}catch(n){return fi(n)?n:new Ni(n)}}),Xr=pi(function(t,e){return function(n){return Dn(n,t,e)}}),Qr=pi(function(t,e){return function(n){return Dn(t,n,e)}}),Jr=fn("ceil"),ts=fn("floor"),es=Qe(ci,Oo),ns=Qe(ki,Do),is=fn("round");return At.prototype=$t.prototype,jt.prototype=To($t.prototype),jt.prototype.constructor=jt,Wt.prototype=To($t.prototype),Wt.prototype.constructor=Wt,Bt.prototype["delete"]=function(t){return this.has(t)&&delete this.__data__[t]},Bt.prototype.get=function(t){return"__proto__"==t?b:this.__data__[t]},Bt.prototype.has=function(t){return"__proto__"!=t&&to.call(this.__data__,t)},Bt.prototype.set=function(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this},zt.prototype.push=function(t){var e=this.data;"string"==typeof t||mi(t)?e.set.add(t):e.hash[t]=!0},li.Cache=Bt,At.after=function(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new qi(W);var n=t;t=e,e=n}return t=bo(t=+t)?t:0,function(){return 1>--t?e.apply(this,arguments):void 0}},At.ary=function(t,e,n){return n&&Sn(t,e,n)&&(e=b),e=t&&null==e?t.length:Mo(+e||0,0),mn(t,L,b,b,b,b,e)},At.assign=Pr,At.at=er,At.before=ai,At.bind=gr,At.bindAll=mr,At.bindKey=vr,At.callback=Ti,At.chain=Jn,At.chunk=function(t,e,n){e=(n?Sn(t,e,n):null==e)?1:Mo(yo(e)||1,1),n=0;for(var i=t?t.length:0,o=-1,r=zi(mo(i/e));i>n;)r[++o]=De(t,n,n+=e);return r},At.compact=function(t){for(var e=-1,n=t?t.length:0,i=-1,o=[];++e<n;){var r=t[e];r&&(o[++i]=r)}return o},At.constant=function(t){return function(){return t}},At.countBy=nr,At.create=function(t,e,n){
var i=To(t);return n&&Sn(t,e,n)&&(e=b),e?te(i,e):i},At.curry=yr,At.curryRight=_r,At.debounce=ui,At.defaults=Sr,At.defaultsDeep=Ir,At.defer=br,At.delay=wr,At.difference=Fo,At.drop=Fn,At.dropRight=Vn,At.dropRightWhile=function(t,e,n){return t&&t.length?Ae(t,bn(e,n,3),!0,!0):[]},At.dropWhile=function(t,e,n){return t&&t.length?Ae(t,bn(e,n,3),!0):[]},At.fill=function(t,e,n,i){var o=t?t.length:0;if(!o)return[];for(n&&"number"!=typeof n&&Sn(t,e,n)&&(n=0,i=o),o=t.length,n=null==n?0:+n||0,0>n&&(n=-n>o?0:o+n),i=i===b||i>o?o:+i||0,0>i&&(i+=o),o=n>i?0:i>>>0,n>>>=0;o>n;)t[n++]=e;return t},At.filter=ni,At.flatten=function(t,e,n){var i=t?t.length:0;return n&&Sn(t,e,n)&&(e=!1),i?ce(t,e):[]},At.flattenDeep=function(t){return t&&t.length?ce(t,!0):[]},At.flow=Mr,At.flowRight=kr,At.forEach=rr,At.forEachRight=sr,At.forIn=Ar,At.forInRight=$r,At.forOwn=jr,At.forOwnRight=Wr,At.functions=Gi,At.groupBy=ar,At.indexBy=ur,At.initial=function(t){return Vn(t,1)},At.intersection=Ho,At.invert=function(t,e,n){n&&Sn(t,e,n)&&(e=b),n=-1;for(var i=Br(t),o=i.length,r={};++n<o;){var s=i[n],a=t[s];e?to.call(r,a)?r[a].push(s):r[a]=[s]:r[a]=s}return r},At.invoke=lr,At.keys=Br,At.keysIn=Oi,At.map=oi,At.mapKeys=zr,At.mapValues=Rr,At.matches=$i,At.matchesProperty=function(t,e){return we(t,oe(e,!0))},At.memoize=li,At.merge=Lr,At.method=Xr,At.methodOf=Qr,At.mixin=ji,At.modArgs=xr,At.negate=function(t){if("function"!=typeof t)throw new qi(W);return function(){return!t.apply(this,arguments)}},At.omit=Nr,At.once=function(t){return ai(2,t)},At.pairs=Di,At.partial=Cr,At.partialRight=Gr,At.partition=pr,At.pick=Fr,At.pluck=function(t,e){return oi(t,Bi(e))},At.property=Bi,At.propertyOf=function(t){return function(e){return me(t,Rn(e),e+"")}},At.pull=function(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,i=Mn(),o=t.length;++n<o;)for(var r=0,s=t[n];-1<(r=i(e,s,r));)ho.call(e,r,1);return e},At.pullAt=Uo,At.range=function(t,e,n){n&&Sn(t,e,n)&&(e=n=b),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;var i=-1;e=Mo(mo((e-t)/(n||1)),0);for(var o=zi(e);++i<e;)o[i]=t,t+=n;return o},At.rearg=Or,At.reject=function(t,e,n){var i=Dr(t)?Kt:le;return e=bn(e,n,3),i(t,function(t,n,i){return!e(t,n,i)})},At.remove=function(t,e,n){var i=[];if(!t||!t.length)return i;var o=-1,r=[],s=t.length;for(e=bn(e,n,3);++o<s;)n=t[o],e(n,o,t)&&(i.push(n),r.push(o));return Ce(t,r),i},At.rest=Zn,At.restParam=pi,At.set=function(t,e,n){if(null==t)return t;var i=e+"";e=null!=t[i]||In(e,t)?[i]:Rn(e);for(var i=-1,o=e.length,r=o-1,s=t;null!=s&&++i<o;){var a=e[i];mi(s)&&(i==r?s[a]=n:null==s[a]&&(s[a]=Pn(e[i+1])?[]:{})),s=s[a]}return t},At.shuffle=function(t){return ri(t,Do)},At.slice=function(t,e,n){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Sn(t,e,n)&&(e=0,n=i),De(t,e,n)):[]},At.sortBy=function(t,e,n){if(null==t)return[];n&&Sn(t,e,n)&&(e=b);var i=-1;return e=bn(e,n,3),t=_e(t,function(t,n,o){return{a:e(t,n,o),b:++i,c:t}}),Pe(t,a)},At.sortByAll=dr,At.sortByOrder=function(t,e,n,i){return null==t?[]:(i&&Sn(e,n,i)&&(n=b),Dr(e)||(e=null==e?[]:[e]),Dr(n)||(n=null==n?[]:[n]),Se(t,e,n))},At.spread=function(t){if("function"!=typeof t)throw new qi(W);return function(e){return t.apply(this,e)}},At.take=function(t,e,n){return t&&t.length?((n?Sn(t,e,n):null==e)&&(e=1),De(t,0,0>e?0:e)):[]},At.takeRight=function(t,e,n){var i=t?t.length:0;return i?((n?Sn(t,e,n):null==e)&&(e=1),e=i-(+e||0),De(t,0>e?0:e)):[]},At.takeRightWhile=function(t,e,n){return t&&t.length?Ae(t,bn(e,n,3),!1,!0):[]},At.takeWhile=function(t,e,n){return t&&t.length?Ae(t,bn(e,n,3)):[]},At.tap=function(t,e,n){return e.call(n,t),t},At.throttle=function(t,e,n){var i=!0,o=!0;if("function"!=typeof t)throw new qi(W);return!1===n?i=!1:mi(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),ui(t,e,{leading:i,maxWait:+e,trailing:o})},At.thru=ti,At.times=function(t,e,n){if(t=yo(t),1>t||!bo(t))return[];var i=-1,o=zi(ko(t,4294967295));for(e=Be(e,n,1);++i<t;)4294967295>i?o[i]=e(i):e(i);return o},At.toArray=xi,At.toPlainObject=Ci,At.transform=function(t,e,n,i){var o=Dr(t)||Mi(t);return e=bn(e,i,4),null==n&&(o||mi(t)?(i=t.constructor,n=o?Dr(t)?new i:[]:To(gi(i)?i.prototype:b)):n={}),(o?Ft:de)(t,function(t,i,o){return e(n,t,i,o)}),n},At.union=Yo,At.uniq=qn,At.unzip=Yn,At.unzipWith=Xn,At.values=Li,At.valuesIn=function(t){return Te(t,Oi(t))},At.where=function(t,e){return ni(t,be(e))},At.without=Xo,At.wrap=function(t,e){return e=null==e?Ai:e,mn(e,O,b,[t],[])},At.xor=function(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Ln(n))var i=i?qt(se(i,n),se(n,i)):n}return i?Ee(i):[]},At.zip=Qo,At.zipObject=Qn,At.zipWith=Jo,At.backflow=kr,At.collect=oi,At.compose=kr,At.each=rr,At.eachRight=sr,At.extend=Pr,At.iteratee=Ti,At.methods=Gi,At.object=Qn,At.select=ni,At.tail=Zn,At.unique=qn,ji(At,At),At.add=function(t,e){return(+t||0)+(+e||0)},At.attempt=Yr,At.camelCase=Vr,At.capitalize=function(t){return(t=o(t))&&t.charAt(0).toUpperCase()+t.slice(1)},At.ceil=Jr,At.clone=function(t,e,n,i){return e&&"boolean"!=typeof e&&Sn(t,e,n)?e=!1:"function"==typeof e&&(i=n,n=e,e=!1),"function"==typeof n?oe(t,e,Be(n,i,3)):oe(t,e)},At.cloneDeep=function(t,e,n){return"function"==typeof e?oe(t,!0,Be(e,n,3)):oe(t,!0)},At.deburr=Pi,At.endsWith=function(t,e,n){t=o(t),e+="";var i=t.length;return n=n===b?i:ko(0>n?0:+n||0,i),n-=e.length,n>=0&&t.indexOf(e,n)==n},At.escape=function(t){return(t=o(t))&&ht.test(t)?t.replace(pt,l):t},At.escapeRegExp=function(t){return(t=o(t))&&bt.test(t)?t.replace(_t,p):t||"(?:)"},At.every=ei,At.find=ir,At.findIndex=Vo,At.findKey=Er,At.findLast=or,At.findLastIndex=Ko,At.findLastKey=Tr,At.findWhere=function(t,e){return ir(t,be(e))},At.first=Kn,At.floor=ts,At.get=function(t,e,n){return t=null==t?b:me(t,Rn(e),e+""),t===b?n:t},At.gt=ci,At.gte=function(t,e){return t>=e},At.has=function(t,e){if(null==t)return!1;var n=to.call(t,e);if(!n&&!In(e)){if(e=Rn(e),t=1==e.length?t:me(t,De(e,0,-1)),null==t)return!1;e=Un(e),n=to.call(t,e)}return n||Tn(t.length)&&Pn(e,t.length)&&(Dr(t)||hi(t))},At.identity=Ai,At.includes=ii,At.indexOf=Hn,At.inRange=function(t,e,n){return e=+e||0,n===b?(n=e,e=0):n=+n||0,t>=ko(e,n)&&t<Mo(e,n)},At.isArguments=hi,At.isArray=Dr,At.isBoolean=function(t){return!0===t||!1===t||d(t)&&no.call(t)==N},At.isDate=function(t){return d(t)&&no.call(t)==F},At.isElement=function(t){return!!t&&1===t.nodeType&&d(t)&&!_i(t)},At.isEmpty=function(t){return null==t?!0:Ln(t)&&(Dr(t)||wi(t)||hi(t)||d(t)&&gi(t.splice))?!t.length:!Br(t).length},At.isEqual=di,At.isError=fi,At.isFinite=function(t){return"number"==typeof t&&bo(t)},At.isFunction=gi,At.isMatch=function(t,e,n,i){return n="function"==typeof n?Be(n,i,3):b,ye(t,kn(e),n)},At.isNaN=function(t){return yi(t)&&t!=+t},At.isNative=vi,At.isNull=function(t){return null===t},At.isNumber=yi,At.isObject=mi,At.isPlainObject=_i,At.isRegExp=bi,At.isString=wi,At.isTypedArray=Mi,At.isUndefined=function(t){return t===b},At.kebabCase=Kr,At.last=Un,At.lastIndexOf=function(t,e,n){var i=t?t.length:0;if(!i)return-1;var o=i;if("number"==typeof n)o=(0>n?Mo(i+n,0):ko(n||0,i-1))+1;else if(n)return o=je(t,e,!0)-1,t=t[o],(e===e?e===t:t!==t)?o:-1;if(e!==e)return h(t,o,!0);for(;o--;)if(t[o]===e)return o;return-1},At.lt=ki,At.lte=function(t,e){return e>=t},At.max=es,At.min=ns,At.noConflict=function(){return Ht._=io,this},At.noop=Wi,At.now=fr,At.pad=function(t,e,n){t=o(t),e=+e;var i=t.length;return e>i&&bo(e)?(i=(e-i)/2,e=yo(i),i=mo(i),n=hn("",i,n),n.slice(0,e)+t+n):t},At.padLeft=Hr,At.padRight=Ur,At.parseInt=function(t,e,n){return(n?Sn(t,e,n):null==e)?e=0:e&&(e=+e),t=Ii(t),Co(t,e||(Ct.test(t)?16:10))},At.random=function(t,e,n){n&&Sn(t,e,n)&&(e=n=b);var i=null==t,o=null==e;return null==n&&(o&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,o=!0)),i&&o&&(e=1,o=!1),t=+t||0,o?(e=t,t=0):e=+e||0,n||t%1||e%1?(n=Go(),ko(t+n*(e-t+ao("1e-"+((n+"").length-1))),e)):Ge(t,e)},At.reduce=cr,At.reduceRight=hr,At.repeat=Si,At.result=function(t,e,n){var i=null==t?b:t[e];return i===b&&(null==t||In(e,t)||(e=Rn(e),t=1==e.length?t:me(t,De(e,0,-1)),i=null==t?b:t[Un(e)]),i=i===b?n:i),gi(i)?i.call(t):i},At.round=is,At.runInContext=_,At.size=function(t){var e=t?Ro(t):0;return Tn(e)?e:Br(t).length},At.snakeCase=Zr,At.some=si,At.sortedIndex=Zo,At.sortedLastIndex=qo,At.startCase=qr,At.startsWith=function(t,e,n){return t=o(t),n=null==n?0:ko(0>n?0:+n||0,t.length),t.lastIndexOf(e,n)==n},At.sum=function(t,e,n){if(n&&Sn(t,e,n)&&(e=b),e=bn(e,n,3),1==e.length){t=Dr(t)?t:Bn(t),n=t.length;for(var i=0;n--;)i+=+e(t[n])||0;t=i}else t=Ie(t,e);return t},At.template=function(t,e,n){var i=At.templateSettings;n&&Sn(t,e,n)&&(e=n=b),t=o(t),e=Jt(te({},n||e),i,Qt),n=Jt(te({},e.imports),i.imports,Qt);var r,s,a=Br(n),u=Te(n,a),l=0;n=e.interpolate||Lt;var p="__p+='";n=Ui((e.escape||Lt).source+"|"+n.source+"|"+(n===gt?kt:Lt).source+"|"+(e.evaluate||Lt).source+"|$","g");var h="sourceURL"in e?"//# sourceURL="+e.sourceURL+"\n":"";if(t.replace(n,function(e,n,i,o,a,u){return i||(i=o),p+=t.slice(l,u).replace(Pt,c),n&&(r=!0,p+="'+__e("+n+")+'"),a&&(s=!0,p+="';"+a+";\n__p+='"),i&&(p+="'+((__t=("+i+"))==null?'':__t)+'"),l=u+e.length,e}),p+="';",(e=e.variable)||(p="with(obj){"+p+"}"),p=(s?p.replace(st,""):p).replace(at,"$1").replace(ut,"$1;"),p="function("+(e||"obj")+"){"+(e?"":"obj||(obj={});")+"var __t,__p=''"+(r?",__e=_.escape":"")+(s?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+p+"return __p}",e=Yr(function(){return Fi(a,h+"return "+p).apply(b,u)}),e.source=p,fi(e))throw e;return e},At.trim=Ii,At.trimLeft=function(t,e,n){var i=t;return(t=o(t))?t.slice((n?Sn(i,e,n):null==e)?m(t):r(t,e+"")):t},At.trimRight=function(t,e,n){var i=t;return(t=o(t))?(n?Sn(i,e,n):null==e)?t.slice(0,v(t)+1):t.slice(0,s(t,e+"")+1):t},At.trunc=function(t,e,n){n&&Sn(t,e,n)&&(e=b);var i=S;if(n=I,null!=e)if(mi(e)){var r="separator"in e?e.separator:r,i="length"in e?+e.length||0:i;n="omission"in e?o(e.omission):n}else i=+e||0;if(t=o(t),i>=t.length)return t;if(i-=n.length,1>i)return n;if(e=t.slice(0,i),null==r)return e+n;if(bi(r)){if(t.slice(i).search(r)){var s,a=t.slice(0,i);for(r.global||(r=Ui(r.source,(xt.exec(r)||"")+"g")),r.lastIndex=0;t=r.exec(a);)s=t.index;e=e.slice(0,null==s?i:s)}}else t.indexOf(r,i)!=i&&(r=e.lastIndexOf(r),r>-1&&(e=e.slice(0,r)));return e+n},At.unescape=function(t){return(t=o(t))&&ct.test(t)?t.replace(lt,y):t},At.uniqueId=function(t){var e=++eo;return o(t)+e},At.words=Ei,At.all=ei,At.any=si,At.contains=ii,At.eq=di,At.detect=ir,At.foldl=cr,At.foldr=hr,At.head=Kn,At.include=ii,At.inject=cr,ji(At,function(){var t={};return de(At,function(e,n){At.prototype[n]||(t[n]=e)}),t}(),!1),At.sample=ri,At.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return ri(e,t)}):ri(this.value())},At.VERSION=w,Ft("bind bindKey curry curryRight partial partialRight".split(" "),function(t){At[t].placeholder=At}),Ft(["drop","take"],function(t,e){Wt.prototype[t]=function(n){var i=this.__filtered__;if(i&&!e)return new Wt(this);n=null==n?1:Mo(yo(n)||0,0);var o=this.clone();return i?o.__takeCount__=ko(o.__takeCount__,n):o.__views__.push({size:n,type:t+(0>o.__dir__?"Right":"")}),o},Wt.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Ft(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n!=j;Wt.prototype[t]=function(t,e){var o=this.clone();return o.__iteratees__.push({iteratee:bn(t,e,1),type:n}),o.__filtered__=o.__filtered__||i,o}}),Ft(["first","last"],function(t,e){var n="take"+(e?"Right":"");Wt.prototype[t]=function(){return this[n](1).value()[0]}}),Ft(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");Wt.prototype[t]=function(){return this.__filtered__?new Wt(this):this[n](1)}}),Ft(["pluck","where"],function(t,e){var n=e?"filter":"map",i=e?be:Bi;Wt.prototype[t]=function(t){return this[n](i(t))}}),Wt.prototype.compact=function(){return this.filter(Ai)},Wt.prototype.reject=function(t,e){return t=bn(t,e,1),this.filter(function(e){return!t(e)})},Wt.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return n.__filtered__&&(t>0||0>e)?new Wt(n):(0>t?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==b&&(e=+e||0,n=0>e?n.dropRight(-e):n.take(e-t)),n)},Wt.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},Wt.prototype.toArray=function(){return this.take(Do)},de(Wt.prototype,function(t,e){var n=/^(?:filter|map|reject)|While$/.test(e),i=/^(?:first|last)$/.test(e),o=At[i?"take"+("last"==e?"Right":""):e];o&&(At.prototype[e]=function(){function e(t){return i&&s?o(t,1)[0]:o.apply(b,qt([t],r))}var r=i?[1]:arguments,s=this.__chain__,a=this.__wrapped__,u=!!this.__actions__.length,l=a instanceof Wt,p=r[0],c=l||Dr(a);return c&&n&&"function"==typeof p&&1!=p.length&&(l=c=!1),p={func:ti,args:[e],thisArg:b},u=l&&!u,i&&!s?u?(a=a.clone(),a.__actions__.push(p),t.call(a)):o.call(b,this.value())[0]:!i&&c?(a=u?a:new Wt(this),a=t.apply(a,r),a.__actions__.push(p),new jt(a,s)):this.thru(e)})}),Ft("join pop push replace shift sort splice split unshift".split(" "),function(t){var e=(/^(?:replace|split)$/.test(t)?Qi:Yi)[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);At.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?e.apply(this.value(),t):this[n](function(n){return e.apply(n,t)})}}),de(Wt.prototype,function(t,e){var n=At[e];if(n){var i=n.name+"";(Eo[i]||(Eo[i]=[])).push({name:e,func:n})}}),Eo[cn(b,k).name]=[{name:"wrapper",func:b}],Wt.prototype.clone=function(){var t=new Wt(this.__wrapped__);return t.__actions__=Nt(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Nt(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Nt(this.__views__),t},Wt.prototype.reverse=function(){if(this.__filtered__){var t=new Wt(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t},Wt.prototype.value=function(){var t,e=this.__wrapped__.value(),n=this.__dir__,i=Dr(e),o=0>n,r=i?e.length:0;t=r;for(var s=this.__views__,a=0,u=-1,l=s.length;++u<l;){var p=s[u],c=p.size;switch(p.type){case"drop":a+=c;break;case"dropRight":t-=c;break;case"take":t=ko(t,a+c);break;case"takeRight":a=Mo(a,t-c)}}if(t={start:a,end:t},s=t.start,a=t.end,t=a-s,o=o?a:s-1,s=this.__iteratees__,a=s.length,u=0,l=ko(t,this.__takeCount__),!i||A>r||r==t&&l==t)return $e(e,this.__actions__);i=[];t:for(;t--&&l>u;){for(o+=n,r=-1,p=e[o];++r<a;){var h=s[r],c=h.type,h=h.iteratee(p);if(c==j)p=h;else if(!h){if(c==$)continue t;break t}}i[u++]=p}return i},At.prototype.chain=function(){return Jn(this)},At.prototype.commit=function(){return new jt(this.value(),this.__chain__)},At.prototype.concat=tr,At.prototype.plant=function(t){for(var e,n=this;n instanceof $t;){var i=Nn(n);e?o.__wrapped__=i:e=i;var o=i,n=n.__wrapped__}return o.__wrapped__=t,e},At.prototype.reverse=function(){function t(t){return t.reverse()}var e=this.__wrapped__;return e instanceof Wt?(this.__actions__.length&&(e=new Wt(this)),e=e.reverse(),e.__actions__.push({func:ti,args:[t],thisArg:b}),new jt(e,this.__chain__)):this.thru(t)},At.prototype.toString=function(){return this.value()+""},At.prototype.run=At.prototype.toJSON=At.prototype.valueOf=At.prototype.value=function(){return $e(this.__wrapped__,this.__actions__)},At.prototype.collect=At.prototype.map,At.prototype.head=At.prototype.first,At.prototype.select=At.prototype.filter,At.prototype.tail=At.prototype.rest,At}var b,w="3.10.1",M=1,k=2,x=4,C=8,G=16,O=32,D=64,L=128,P=256,S=30,I="...",E=150,T=16,A=200,$=1,j=2,W="Expected a function",B="__lodash_placeholder__",z="[object Arguments]",R="[object Array]",N="[object Boolean]",F="[object Date]",V="[object Error]",K="[object Function]",H="[object Number]",U="[object Object]",Z="[object RegExp]",q="[object String]",Y="[object ArrayBuffer]",X="[object Float32Array]",Q="[object Float64Array]",J="[object Int8Array]",tt="[object Int16Array]",et="[object Int32Array]",nt="[object Uint8Array]",it="[object Uint8ClampedArray]",ot="[object Uint16Array]",rt="[object Uint32Array]",st=/\b__p\+='';/g,at=/\b(__p\+=)''\+/g,ut=/(__e\(.*?\)|\b__t\))\+'';/g,lt=/&(?:amp|lt|gt|quot|#39|#96);/g,pt=/[&<>"'`]/g,ct=RegExp(lt.source),ht=RegExp(pt.source),dt=/<%-([\s\S]+?)%>/g,ft=/<%([\s\S]+?)%>/g,gt=/<%=([\s\S]+?)%>/g,mt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,vt=/^\w*$/,yt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,_t=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,bt=RegExp(_t.source),wt=/[\u0300-\u036f\ufe20-\ufe23]/g,Mt=/\\(\\)?/g,kt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xt=/\w*$/,Ct=/^0[xX]/,Gt=/^\[object .+?Constructor\]$/,Ot=/^\d+$/,Dt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Lt=/($^)/,Pt=/['\n\r\u2028\u2029\\]/g,St=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),It="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout isFinite parseFloat parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap".split(" "),Et={};Et[X]=Et[Q]=Et[J]=Et[tt]=Et[et]=Et[nt]=Et[it]=Et[ot]=Et[rt]=!0,Et[z]=Et[R]=Et[Y]=Et[N]=Et[F]=Et[V]=Et[K]=Et["[object Map]"]=Et[H]=Et[U]=Et[Z]=Et["[object Set]"]=Et[q]=Et["[object WeakMap]"]=!1;var Tt={};Tt[z]=Tt[R]=Tt[Y]=Tt[N]=Tt[F]=Tt[X]=Tt[Q]=Tt[J]=Tt[tt]=Tt[et]=Tt[H]=Tt[U]=Tt[Z]=Tt[q]=Tt[nt]=Tt[it]=Tt[ot]=Tt[rt]=!0,Tt[V]=Tt[K]=Tt["[object Map]"]=Tt["[object Set]"]=Tt["[object WeakMap]"]=!1;var At={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},$t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},jt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Wt={"function":!0,object:!0},Bt={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},zt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Rt=Wt[typeof exports]&&exports&&!exports.nodeType&&exports,Nt=Wt[typeof module]&&module&&!module.nodeType&&module,Ft=Wt[typeof self]&&self&&self.Object&&self,Vt=Wt[typeof window]&&window&&window.Object&&window,Kt=Nt&&Nt.exports===Rt&&Rt,Ht=Rt&&Nt&&"object"==typeof global&&global&&global.Object&&global||Vt!==(this&&this.window)&&Vt||Ft||this,Ut=_();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Ht._=Ut,define(function(){return Ut})):Rt&&Nt?Kt?(Nt.exports=Ut)._=Ut:Rt._=Ut:Ht._=Ut}.call(this),function(){"use strict";var t=angular.module("ToSicEavCustomGps",["uiGmapgoogle-maps"]);t.config(["formlyConfigProvider","defaultFieldWrappers",function(t,e){t.setType({name:"custom-gps",templateUrl:"fields/custom-gps/custom-gps.html",wrapper:e,controller:"FieldTemplate-CustomGpsController"})}]),t.config(["uiGmapGoogleMapApiProvider",function(t){t.configure({})}]),t.controller("FieldTemplate-CustomGpsController",["$scope","$filter","$modal","appId","debugState","eavAdminDialogs","addtemplatestocache","uiGmapGoogleMapApi",function(t,e,n,i,o,r,s,a){var u,l,p=t.to.settings["custom-gps"];p&&(u=p.LatField||null,l=p.LongField||null);t.hasAddressMask=p&&p.AddressMask&&""!==p.AddressMask;console.log(p);var c={latitude:47.17465989999999,longitude:9.469142499999975};t.position=angular.extend({},c),t.showMap=!1,t.map={center:angular.extend({},t.position),zoom:15},t.$watch("value.Value",function(){if(t.value&&"string"==typeof t.value.Value&&""!==t.value.Value){var e=JSON.parse(t.value.Value);angular.extend(t.position,e),angular.extend(t.map.center,t.position)}}),t.$watch("position",function(){h(t.position)},!0);var h=function(e){u&&t.model.hasOwnProperty(u)&&t.model[u]&&t.model[u]._currentValue&&(t.model[u]._currentValue.Value=e.latitude),l&&t.model.hasOwnProperty(l)&&t.model[l]&&t.model[l]._currentValue&&(t.model[l]._currentValue.Value=e.longitude),angular.extend(t.map.center,e),e!==t.position&&angular.extend(t.position,e),t.value&&(t.value.Value=JSON.stringify(e))};t.marker={position:t.position,options:{draggable:!0},events:{dragend:function(e){h(t.position)}}},t.formattedAddress=function(){if(!p)return"";var e=p.AddressMask;if(void 0===e)return"";var n=/\[.*?\]/gi,i=e.match(n);return angular.forEach(i,function(n,i){var o=n.replace(/[\[\]]/gi,""),r=t.model.hasOwnProperty(o)&&null!==t.model[o]?t.model[o]._currentValue.Value:"";e=e.replace(n,r)}),e},t.autoSelect=function(){var e=t.formattedAddress();(new google.maps.Geocoder).geocode({address:e},function(n,i){if(i==google.maps.GeocoderStatus.OK){var o=n[0].geometry.location;h({latitude:o.lat(),longitude:o.lng()}),t.showMap=!0,t.$apply()}else alert("Could not locate address: "+e)})},t.debug=o}]),t.service("addtemplatestocache",["$templateCache",function(t){t.put("fields/custom-gps/custom-gps.html","<div>Lat: <input type='number' ng-model='marker.position.latitude'/>, Lng: <input type='number' ng-model='marker.position.longitude'/><br><a ng-click='showMap = !showMap' class='btn btn-default' ng-click='autoSelect'><span icon='map-marker'></span></a><a class='btn btn-default' ng-click='autoSelect()' ng-show='hasAddressMask'><span icon='search'></span></a> {{formattedAddress()}}<br><ui-gmap-google-map center='map.center' zoom='map.zoom' ng-if='showMap'><ui-gmap-marker idkey='\"mapMarker1\"' coords='marker.position' options='marker.options' events='marker.events'></ui-gmap-marker></ui-gmap-google-map><div><div ng-if=\"debug.on\"><h4>debug info</h4><div>lat field name: '{{latField}}' lng field name: '{{longField}}'<br><pre>{{value | json}}</pre></div></div></div></div>")}])}(),angular.module("templates",[]).run(["$templateCache",function(t){t.put("fields/custom-gps/custom-gps.html","<div>\r\n    <div ng-if=\"debug.on\">\r\n        <h4>debug info</h4>\r\n        <div>lat field name: '{{latField}}' long-field name: '{{longField}}' </div>\r\n    </div>\r\n</div>")}]);