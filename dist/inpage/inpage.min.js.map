{"version":3,"sources":["inpage.min.js"],"names":["window","$2sxc","consts","c","cls","scMenu","scCb","scElm","attr","toolbar","toolbarData","settings","settingsData","publishAllowed","sel","Object","keys","forEach","key","index","finishUpgrade","domElement","mc","$","ajax","type","url","resolveServiceUrl","beforeSend","ServicesFramework","id","setModuleHeaders","success","alert","location","reload","system","_commands","makeDef","name","translateKey","icon","uiOnly","partOfPage","more","_lib","extend","title","uiActionOnly","definitions","create","cmdSpecs","addDef","def","act","enableTools","canDesign","isContent","app-import","edit","params","mode","showCondition","modConfig","entityId","useModuleList","new","dialog","contentType","isList","sortOrder","code","event","sxc","manage","_openNgDialog","add","_contentBlock","addItem","metadata","dynamicClasses","configureCommand","cmd","itm","Title","Metadata","keyType","targetType","items","remove","confirm","translate","removeFromList","delete","entityGuid","entityTitle","contentItems","moveup","changeOrder","Math","max","movedown","instance-list","publish","isPublished","disabled","allowPublish","publishId","part","replace","app-settings","appSettingsId","EntityId","app-resources","appResourcesId","app","zone","contentTypeName","contentTypeId","filters","enc","JSON","stringify","indexOf","btoa","newWindow","templateId","pipelineId","queryId","fn","console","log","customCode","warn","Function","err","error","inlineWindow","btn","target","fullMenu","closest","oldState","Number","newState","removeClass","addClass","fullScreen","instanceEngine","editContext","engine","commands","initializeInstanceCommands","specialSettings","_instanceConfig","ngDialogUrl","_editContext","Environment","SxcRootUrl","SxcVersion","isDebug","urlParams","get","action","addSimpleItem","ct","attributeSetName","ContentTypeName","push","addContentGroupItem","guid","isAdd","isEntity","cbid","sectionLanguageKey","Group","Guid","Index","Part","Add","addContentGroupItemSetsToEditList","withPresentation","isContentAndNotHeader","prefix","cTerm","pTerm","groupId","contentGroupId","toLowerCase","cbIsEntity","cbId","generateLink","prefill","i","length","Prefill","sharedParams","_dialogParameters","versioningRequirements","publishing","param","_linkToNgDialog","callback","reloadAndReInitialize","link","_quickDialog","showOrToggle","shiftKey","open","totalPopup","executeAction","nameOrSettings","altKey","origEvent","conf","prepareToAddContent","then","cg","ContentGroup","User","CanDesign","TemplateId","IsContent","QueryId","AppResourcesId","AppSettingsId","ContentBlock","VersioningRequirements","cViewWithoutContent","cUseExistingTemplate","cbm","getAndReload","webApi","initOrder","newOrder","destinationSortOrder","manipulator","parentId","fieldName","appName","container","newGuid","listTag","cblockList","find","field","result","newTag","after","prepend","_toolbarManager","buildToolbars","move","indexFrom","indexTo","replaceCb","newContent","justPreview","newStuff","disable","_manage","getTag","replaceWith","recreate","e","showMessage","html","ajaxLoad","alternateTemplateId","getPreviewWithTemplate","$quickE","reset","forceAjax","preview","_reloadWithAjax","dnn_tabVersioningEnabled","dnn","ContentEditorManager","triggerChangeOnPageContentEvent","hide","isCreated","IsCreated","when","updateTemplate","updateTemplateFromDia","forceCreate","contentGroup","showingAjaxPreview","isDisabled","HasContent","saveTemplate","data","textStatus","xhr","status","_updateContentGroupGuid","assign","forceCreateContentGroup","newTemplateChooserState","ec","lang","Language","Current","cbisentity","IsEntity","Id","originalparameters","parameters","dataType","$2sxcActionMenuMapper","moduleId","run","changeLayoutOrContent","adminApp","adminZone","develop","val","apply","this","arguments","search","itemId","itemGuid","itemTitle","ok","msgJs","hasOwnProperty","mngApi","sxci","getEditContextOfTag","htmlTag","getAttribute","parse","getEditContext","buildInstanceConfig","ce","cb","portalId","WebsiteId","tabId","PageId","InstanceId","version","appPath","AppUrl","IsList","getUserOfEditContext","canDevelop","buildQuickDialogConfig","appId","AppId","hasContent","templateChooserVisible","ShowTemplatePicker","user","supportsAjax","SupportsAjax","buildNgDialogParams","zoneId","ZoneId","tid","mid","langpri","Primary","langs","All","portalroot","WebsiteUrl","websiteroot","PartOfPage","approot","initInstance","userInfo","cmdEngine","editManager","getButton","actDef","groupIndex","generateButtonHtml","getToolbar","tbConfig","moreSettings","generateToolbarHtml","_isEditMode","IsEditable","_quickDialogConfig","_user","init","_handleErrors","openDialogId","sessionStorage","getItem","removeItem","errType","cbTag","errWrapper","msg","append","_getCbManipulator","Array","prototype","defineProperty","value","predicate","TypeError","o","len","thisArg","k","kValue","call","varArgs","to","nextSource","nextKey","buildContainerAndIFrame","newIFrame","document","createElement","extendIFrameWithSxcState","watchForResize","setSize","diagManager","getContainer","css","isFullscreen","iFrame","reSxc","hiddenSxc","cbApi","tagModule","newFrm","closeCallback","rewire","dialogName","parent","eq","sxcCacheKey","cacheKey","getManageInfo","getAdditionalDashboardConfig","persistDia","persistDialog","scrollToTarget","animate","scrollTop","offset","top","scrollTopOffset","toggle","show","cancel","localStorage","setItem","verb","message","reloadAndReInit","previewTemplate","rewriteUrl","devMode","keepWatching","resizeWatcher","clearInterval","cont","setInterval","frm","getIFrame","height","contentDocument","body","offsetHeight","previousHeight","style","minHeight","position","resizeInterval","diagShowClass","current","undefined","hasClass","toggleClass","isShowing","setAttribute","contentWindow","reboot","selectors","class","selector","listSelector","context","singleItem","mod","eitherCbOrMod","selected","i18N","invisible","unavailable","classes","win","main","template","contentBlocks","cachedPanes","modules","nearestCb","nearestMod","modManage","cbActions","modActions","prepareToolbarInDom","copyPasteInPage","cbAction","list","newClip","clipboard","createSpecs","mark","from","isNaN","clear","cmds","newData","item","prev","is","setSecondaryActionsState","listItems","currentItem","state","btns","filter","coords","getCoordinates","yh","y","positionAndAlign","click","clip","sendToPane","appOrContent","modId","getModuleId","className","oldClip","pane","getPaneName","actionsForModule","pl","empty","getMoveButtons","configAttr","config","enable","innerBlocks","_readPageConfig","confJ","confO","configs","finalConfig","hasInnerCBs","onCbButtonClick","actionsForCb","actionConfig","match","xhrError","optionalMessage","createModWithTypeName","paneName","sendDnnAjax","desktopModules","moduleToFind","module","ModuleName","createMod","ModuleID","moveMod","order","service","dnnSF","getTabId","dataVar","TabId","ModuleId","Pane","ModuleOrder","resize","deleteMod","getServiceRoot","d","serviceName","options","postData","Module","Page","Position","Sort","Visibility","AddExistingModule","CopyModule","generatePaneMoveButtons","pns","targets","p","pName","newPane","onModuleButtonClick","dnnMod","getBodyPosition","bodyPos","x","left","refreshDomObjects","bodyOffset","lists","element","width","refresh","highlightClass","lastCall","Date","findNearest","clientX","clientY","oldParent","parentContainer","alignTo","parentPane","parentCbList","substr","each","t","elements","maxDistance","nearestItem","nearestDistance","posX","scrollLeft","posY","w","distance","abs","initPanes","watchMouse","refreshTimeout","on","setTimeout","requestAnimationFrame","start","toggleParts","global","factory","define","amd","exports","Shake","hasDeviceMotion","threshold","timeout","lastTime","lastX","lastY","lastZ","addEventListener","stop","removeEventListener","devicemotion","currentTime","timeDifference","accelerationIncludingGravity","deltaX","deltaY","deltaZ","z","getTime","handleEvent","stopPropagation","toggleAllToolbars","cDisableAttrName","generateFallbackToolbar","settingsString","settingsForEmptyToolbar","getToolbarTags","parentTag","allInner","res","dbg","optionalId","toolbars","outsideCb","contentTag","toolbarConfig","toolbarSettings","tag","at","err2","hover","autoAddMore","flattenActionDefinition","entity","_2sxcEditInformation","editInfo","showClasses","classesList","split","box","symbol","onclick","command","button","data-i18n","outerHTML","btnList","groups","buttons","isArray","tbManager","standardButtons","tlbDef","buttonHelpers","buildFullDefinition","btnGroups","behaviourClasses","tbClasses","h","tools","defaultSettings","unstructuredConfig","allActions","instanceConfig","fullConfig","ensureDefinitionTree","debug","expandButtonGroups","removeDisableButtons","customize","original","defaults","fullSet","actions","g","expandButtonList","b","addDefaultBtnSettings","root","sharedProperties","acts","a","unshift","v","expandButtonConfig","sharedProps","_expanded","trim","full","removeUnfitButtons","evalPropOrFunction","splice","disableButtons","btnProperties","prvProperties","group","fallbackBtnSetting","propName","propOrFunction","fallback","sharedParameters","toolbarTemplate","initialized","_translateInit","i18next","use","i18nextXHRBackend","lng","fallbackLng","whitelist","preload","backend","loadPath","jqueryI18next","localize","n","r","concat","shift","obj","s","String","l","C","u","interpolation","unescapeSuffix","interpolationPrefix","suffix","interpolationSuffix","escapeValue","escapeInterpolation","nestingPrefix","reusePrefix","nestingSuffix","reuseSuffix","resStore","resources","ns","defaultNs","defaultNS","namespaces","fallbackToDefaultNS","fallbackNS","saveMissing","sendMissing","saveMissingTo","sendMissingTo","returnNull","fallbackOnNull","returnEmptyString","fallbackOnEmpty","returnObjects","returnObjectTrees","joinArrays","returnedObjectHandler","objectTreeKeyHandler","parseMissingKeyHandler","parseMissingKey","appendNamespaceToMissingKey","nsSeparator","nsseparator","keySeparator","keyseparator","shortcutFunction","overloadTranslationOptionHandler","postProcess","sprintf","lngWhitelist","load","resGetPath","addPath","resPostPath","allowMultiLoading","dynamicLoad","cache","expirationTime","enabled","useLocalStorage","defaultVariables","f","S","deprecate","services","languageUtils","toResolveHierarchy","language","loadLanguages","setLng","fixLng","getFixedT","changeLanguage","addPostProcessor","process","charAt","toUpperCase","slice","R","lngs","numbers","nr","plurals","P","fc","pluralSeparator","contextSeparator","missingKeyHandler","defaultValue","unescapePrefix","m","Symbol","iterator","constructor","classCallCheck","inherits","enumerable","writable","configurable","setPrototypeOf","__proto__","possibleConstructorReturn","ReferenceError","slicedToArray","next","done","_output","subs","logger","setDebug","forward","observers","off","emit","&","<",">","\"","'","/","L","addNamespaces","removeNamespaces","getResource","addResource","silent","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle","compatibilityAPI","toJSON","N","processors","handle","O","exists","resolve","extractFromKey","toString","join","extendTranslation","isValidLookup","backendConnector","interpolator","interpolate","nest","applyPostProcessor","count","pluralResolver","getSuffix","pop","resourceStore","j","getLanguagePartFromCode","formatLanguageCode","lowerCaseLng","map","cleanCode","isWhitelisted","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","E","rules","addRule","getRule","needsPlural","noAbs","compatibilityJSON","_","prefixEscaped","suffixEscaped","nestingPrefixEscaped","nestingSuffixEscaped","regexp","RegExp","regexpUnescape","nestingRegexp","exec","lastIndex","T","store","queue","queueLoad","pending","loaded","errors","toLoad","toLoadLanguages","toLoadNamespaces","read","readMulti","A","save","M","isInitialized","isClone","cacheConnector","languageDetector","detection","translator","loadResources","detect","languages","cacheUserLanguage","setDefaultNamespace","loadNamespaces","dir","createInstance","cloneInstance","H","encodeURIComponent","XMLHttpRequest","ActiveXObject","crossDomain","setRequestHeader","onreadystatechange","readyState","responseText","send","createClass","loadUrl","parseDefaultValueFromContent","text","selectorAttr","targetAttr","useOptionsAttr","optionsAttr","clone","tName","bind","i18nName","handleName","initAllModules","isFirstRun","initModule","tryShowTemplatePicker","uninitializedModules","cancelledDialog","openedTemplatePickerOnce","initializedModules","wasEmpty","showGlassesButtonIfUninitialized"],"mappings":"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","file":"inpage.min.js","sourcesContent":["// this enhances the $2sxc client controller with stuff only needed when logged in\r\n(function () {\r\n    if (!window.$2sxc || window.$2sxc.consts) return false;\r\n    $2sxc.c = $2sxc.consts = {\r\n        // classes\r\n        cls: {\r\n            scMenu: \"sc-menu\",\r\n            scCb: \"sc-content-block\",\r\n            scElm: \"sc-element\"\r\n        },\r\n        \r\n        // attribs\r\n        attr: {\r\n            toolbar: \"toolbar\",\r\n            toolbarData: \"data-toolbar\",\r\n            settings: \"settings\",\r\n            settingsData: \"data-settings\"\r\n        },\r\n\r\n        publishAllowed: \"DraftOptional\"\r\n\r\n    };\r\n\r\n    // selectors\r\n    var sel = $2sxc.c.sel = {};\r\n    Object.keys($2sxc.c.cls).forEach(function (key, index) {\r\n        sel[key] = \".\" + $2sxc.c.cls[key];\r\n    });\r\n\r\n    /*\r\n    ToDo: functional programming\r\n    $2sxc.c.sel = Object.entries($2sxc.c.cls).reduce((res, current) => {\r\n        res[entry[0]] = entry[1];\r\n        return t;\r\n    }, {});\r\n    */\r\n})();\n// this enhances the $2sxc client controller with stuff only needed when logged in\r\n(function () {\r\n    if (!window.$2sxc || window.$2sxc.system) return;\r\n\r\n    $2sxc.system = {\r\n        finishUpgrade: finishUpgrade\r\n    };\r\n\r\n    // upgrade command - started when an error contains a link to start this\r\n    function finishUpgrade(domElement) {\r\n        var mc = $2sxc(domElement);\r\n        $.ajax({\r\n            type: \"get\",\r\n            url: mc.resolveServiceUrl(\"view/module/finishinstallation\"),\r\n            beforeSend: $.ServicesFramework(mc.id).setModuleHeaders\r\n        }).success(function () {\r\n            alert(\"Upgrade ok, restarting the CMS and reloading...\");\r\n            location.reload();\r\n        });\r\n        alert(\"starting upgrade. This could take a few minutes. You'll see an 'ok' when it's done. Please wait...\");\r\n    }\r\n})();\n(function() {\r\n    $2sxc._commands = {};\r\n})();\n/*\r\n * Actions of 2sxc - mostly used in toolbars\r\n * \r\n * Minimal documentation regarding a button\r\n * the button can have the following properties / methods\r\n * - the indexer in the array (usually the same as the name)\r\n * - name (created in the buttonConfig)\r\n * - title - actually the translation key to retrieve the title (buttonConfig)\r\n * - icon - the icon-class\r\n * - uiActionOnly - true/false if this is just something visual; otherwise a webservice will ensure that a content-group exists (for editing etc.)\r\n * - showCondition(settings, moduleConfiguration) - would conditionally prevent adding this button by default\r\n * - code(settings, event) - the code executed on click, if it's not the default action\r\n * - dynamicClasses(settings) - can conditionally add more css-class names to add to the button, like the \"empty\" added if something doesn't have metadata\r\n * - disabled (new!)\r\n * - params - ...\r\n */\r\n\r\n(function () {\r\n    // helper function to create the configuration object\r\n    function makeDef(name, translateKey, icon, uiOnly, partOfPage, more) {\r\n        if (typeof (partOfPage) !== \"boolean\")\r\n            throw \"partOfPage in commands not provided, order will be wrong!\";\r\n\r\n        return $2sxc._lib.extend({\r\n            name: name,\r\n            title: \"Toolbar.\" + translateKey,\r\n            icon: \"icon-sxc-\" + icon,\r\n            uiActionOnly: uiOnly,\r\n            partOfPage: partOfPage\r\n        }, more);\r\n    }\r\n\r\n    $2sxc._commands.definitions = {};\r\n    $2sxc._commands.definitions.create = function (cmdSpecs) {\r\n        var enableTools = cmdSpecs.canDesign;\r\n        var isContent = cmdSpecs.isContent;\r\n\r\n        var act = {\r\n            // show the basic dashboard which allows view-changing\r\n            // 2017-09-06 2dm \"dash-view\" deprecated - old name for now \"layout\" - should not be used any more!\r\n            //\"dash-view\": makeDef(\"dash-view\", \"Dashboard\", \"\", true, { inlineWindow: true }),\r\n\r\n            // open the import dialog\r\n            \"app-import\": makeDef(\"app-import\", \"Dashboard\", \"\", true, false, {}),\r\n\r\n            // open an edit-item dialog\r\n            'edit': makeDef(\"edit\", \"Edit\", \"pencil\", false, true, {\r\n                params: { mode: \"edit\" },\r\n                showCondition: function (settings, modConfig) {\r\n                    return settings.entityId || settings.useModuleList; // need ID or a \"slot\", otherwise edit won't work\r\n                }\r\n            }),\r\n\r\n            // new is a dialog to add something, and will not add if cancelled\r\n            // new can also be used for mini-toolbars which just add an entity not attached to a module\r\n            // in that case it's essential to add a contentType like \r\n            // <ul class=\"sc-menu\" data-toolbar='{\"action\":\"new\", \"contentType\": \"Category\"}'></ul>\r\n            'new': makeDef(\"new\", \"New\", \"plus\", false, true, {\r\n                params: { mode: \"new\" },\r\n                dialog: \"edit\", // don't use \"new\" (default) but use \"edit\"\r\n                showCondition: function (settings, modConfig) {\r\n                    return settings.contentType || modConfig.isList && settings.useModuleList && settings.sortOrder !== -1; // don't provide new on the header-item\r\n                },\r\n                code: function (settings, event, sxc) {\r\n                    // todo - should refactor this to be a toolbarManager.contentBlock command\r\n                    sxc.manage._commands._openNgDialog($2sxc._lib.extend({}, settings, { sortOrder: settings.sortOrder + 1 }), event, sxc);\r\n                }\r\n            }),\r\n\r\n            // add brings no dialog, just add an empty item\r\n            'add': makeDef(\"add\", \"AddDemo\", \"plus-circled\", false, true, {\r\n                showCondition: function (settings, modConfig) {\r\n                    return modConfig.isList && settings.useModuleList && settings.sortOrder !== -1;\r\n                },\r\n                code: function (settings, event, sxc) {\r\n                    $2sxc._contentBlock.addItem(sxc, settings.sortOrder + 1);\r\n                }\r\n            }),\r\n\r\n            // create a metadata toolbar\r\n            \"metadata\": makeDef(\"metadata\", \"Metadata\", \"tag\", false, false, {\r\n                params: { mode: \"new\" },\r\n                dialog: \"edit\", // don't use \"new\" (default) but use \"edit\"\r\n                dynamicClasses: function (settings) {\r\n                    // if it doesn't have data yet, make it less strong\r\n                    return settings.entityId ? \"\" : \"empty\";\r\n                    // return settings.items && settings.items[0].entityId ? \"\" : \"empty\";\r\n                },\r\n                showCondition: function (settings) {\r\n                    return !!settings.metadata;\r\n                }, // only add a metadata-button if it has metadata-infos\r\n                configureCommand: function (cmd) {\r\n                    var itm = {\r\n                        Title: \"EditFormTitle.Metadata\",\r\n                        Metadata: $2sxc._lib.extend({ keyType: \"string\", targetType: 10 }, cmd.settings.metadata)\r\n                    };\r\n                    $2sxc._lib.extend(cmd.items[0], itm);\r\n                }\r\n            }),\r\n\r\n            // remove an item from the placeholder (usually for lists)\r\n            'remove': makeDef(\"remove\", \"Remove\", \"minus-circled\", false, true, {\r\n                showCondition: function (settings, modConfig) {\r\n                    return modConfig.isList && settings.useModuleList && settings.sortOrder !== -1;\r\n                },\r\n                code: function (settings, event, sxc) {\r\n                    if (confirm($2sxc.translate(\"Toolbar.ConfirmRemove\"))) {\r\n                        $2sxc._contentBlock.removeFromList(sxc, settings.sortOrder);\r\n                        //sxc.manage.contentBlock\r\n                        //    .removeFromList(settings.sortOrder);\r\n                    }\r\n                }\r\n            }),\r\n\r\n            // todo: work in progress related to https://github.com/2sic/2sxc/issues/618\r\n            'delete': makeDef(\"deleteItem\", \"Delete\", \"cancel\", true, false, {\r\n                // disabled: true,\r\n                showCondition: function (settings) {\r\n                    // can never be used for a modulelist item, as it is always in use somewhere\r\n                    if (settings.useModuleList)\r\n                        return false;\r\n                    \r\n                    // check if all data exists required for deleting\r\n                    return settings.entityId && settings.entityGuid && settings.entityTitle;\r\n                },\r\n                code: function (settings, event, sxc) {\r\n                    $2sxc.contentItems.delete(sxc, settings.entityId, settings.entityGuid, settings.entityTitle);\r\n                }\r\n            }),\r\n\r\n            'moveup': makeDef(\"moveup\", \"MoveUp\", \"move-up\", false, true, {\r\n                showCondition: function (settings, modConfig) {\r\n                    return modConfig.isList && settings.useModuleList && settings.sortOrder !== -1 && settings.sortOrder !== 0;\r\n                },\r\n                code: function (settings, event, sxc) {\r\n                    $2sxc._contentBlock.changeOrder(sxc, settings.sortOrder, Math.max(settings.sortOrder - 1, 0));\r\n                }\r\n            }),\r\n\r\n            'movedown': makeDef(\"movedown\", \"MoveDown\", \"move-down\", false, true, {\r\n                showCondition: function (settings, modConfig) {\r\n                    return modConfig.isList && settings.useModuleList && settings.sortOrder !== -1;\r\n                },\r\n                code: function (settings, event, sxc) {\r\n                    $2sxc._contentBlock.changeOrder(sxc, settings.sortOrder, settings.sortOrder + 1);\r\n                }\r\n            }),\r\n\r\n            'instance-list': makeDef(\"instance-list\", \"Sort\", \"list-numbered\", false, true, {\r\n                showCondition: function (settings, modConfig) { return modConfig.isList && settings.useModuleList && settings.sortOrder !== -1; }\r\n            }),\r\n\r\n            // todo: shouldn't be available if changes are not allowed\r\n            'publish': makeDef(\"publish\", \"Unpublished\", \"eye-off\", false, false, {\r\n                showCondition: function (settings, modConfig) {\r\n                    return settings.isPublished === false;\r\n                },\r\n                disabled: function(settings, modConfig) {\r\n                    return !cmdSpecs.allowPublish;\r\n                },\r\n                code: function (settings, event, sxc) {\r\n                    if (settings.isPublished) return alert($2sxc.translate(\"Toolbar.AlreadyPublished\"));\r\n\r\n                    // if we have an entity-id, publish based on that\r\n                    if (settings.entityId) return $2sxc._contentBlock.publishId(sxc, settings.entityId);\r\n\r\n                    var part = settings.sortOrder === -1 ? \"listcontent\" : \"content\";\r\n                    var index = settings.sortOrder === -1 ? 0 : settings.sortOrder;\r\n                    return $2sxc._contentBlock.publish(sxc, part, index);\r\n                }\r\n            }),\r\n\r\n            'replace': makeDef(\"replace\", \"Replace\", \"replace\", false, true, {\r\n                showCondition: function (settings) { return settings.useModuleList; }\r\n            }),\r\n\r\n            //#region app-actions: app-settings, app-resources\r\n            'app-settings': makeDef(\"app-settings\", \"AppSettings\", \"sliders\", true, false, {\r\n                dialog: \"edit\",\r\n                disabled: cmdSpecs.appSettingsId === null,\r\n                title: \"Toolbar.AppSettings\" + (cmdSpecs.appSettingsId === null ? \"Disabled\" : \"\"),\r\n                showCondition: function (settings, modConfig) {\r\n                    return enableTools && !isContent; // only if settings exist, or are 0 (to be created)\r\n                },\r\n                configureCommand: function (cmd) {\r\n                    cmd.items = [{ EntityId: cmdSpecs.appSettingsId }];\r\n                },\r\n                dynamicClasses: function (settings) {\r\n                    return cmdSpecs.appSettingsId !== null ? \"\" : \"empty\";  // if it doesn't have a query, make it less strong\r\n                }\r\n            }),\r\n\r\n            'app-resources': makeDef(\"app-resources\", \"AppResources\", \"language\", true, false, {\r\n                dialog: \"edit\",\r\n                disabled: cmdSpecs.appResourcesId === null,\r\n                title: \"Toolbar.AppResources\" + (cmdSpecs.appResourcesId === null ? \"Disabled\" : \"\"),\r\n                showCondition: function (settings, modConfig) {\r\n                    return enableTools && !isContent; // only if resources exist or are 0 (to be created)...\r\n                },\r\n                configureCommand: function (cmd) {\r\n                    cmd.items = [{ EntityId: cmdSpecs.appResourcesId }];\r\n                },\r\n                dynamicClasses: function (settings) {\r\n                    return cmdSpecs.appResourcesId !== null ? \"\" : \"empty\";  // if it doesn't have a query, make it less strong\r\n                }\r\n            }),\r\n            //#endregion\r\n\r\n            //#region app & zone\r\n            'app': makeDef(\"app\", \"App\", \"settings\", true, false, {\r\n                showCondition: enableTools\r\n            }),\r\n\r\n            'zone': makeDef(\"zone\", \"Zone\", \"manage\", true, false, {\r\n                showCondition: enableTools\r\n            })\r\n            //#endregion\r\n        };\r\n\r\n        // quick helper so we can better debug the creation of definitions\r\n        function addDef(def) {\r\n            act[def.name] = def;\r\n        }\r\n\r\n        //#region template commands: contenttype, contentitems, template-query, template-develop, template-settings\r\n        addDef(makeDef(\"contenttype\", \"ContentType\", \"fields\", true, false, {\r\n            showCondition: enableTools\r\n        }));\r\n\r\n        addDef(makeDef(\"contentitems\", \"ContentItems\", \"table\", true, false, {\r\n            params: { contentTypeName: cmdSpecs.contentTypeId },\r\n            showCondition: function (settings, modConfig) {\r\n                return enableTools && (settings.contentType || cmdSpecs.contentTypeId);\r\n            },\r\n            configureCommand: function (cmd) {\r\n                if (cmd.settings.contentType) // optionally override with custom type\r\n                    cmd.params.contentTypeName = cmd.settings.contentType;\r\n                // maybe: if item doesn't have a type, use that of template\r\n                // else if (cmdSpecs.contentTypeId)\r\n                //    cmd.params.contentTypeName = cmdSpecs.contentTypeId;\r\n                if (cmd.settings.filters) {\r\n                    var enc = JSON.stringify(cmd.settings.filters);\r\n                    \r\n                    // special case - if it contains a \"+\" character, this won't survive \r\n                    // encoding through the hash as it's always replaced with a space, even if it would be preconverted to %2b\r\n                    // so we're base64 encoding it - see https://github.com/2sic/2sxc/issues/1061\r\n                    if (enc.indexOf(\"+\") > -1)\r\n                        enc = btoa(enc);\r\n                    cmd.params.filters = enc;\r\n                }\r\n            }\r\n        }));\r\n\r\n        addDef(makeDef(\"template-develop\", \"Develop\", \"code\", true, false, {\r\n            newWindow: true,\r\n            dialog: \"develop\",\r\n            showCondition: enableTools,\r\n            configureCommand: function (cmd) {\r\n                cmd.items = [{ EntityId: cmdSpecs.templateId }];\r\n            }\r\n        }));\r\n\r\n        addDef(makeDef(\"template-query\", \"QueryEdit\", \"filter\", true, false, {\r\n            dialog: \"pipeline-designer\",\r\n            params: { pipelineId: cmdSpecs.queryId },\r\n            newWindow: true,\r\n            disabled: cmdSpecs.appSettingsId === null,\r\n            title: \"Toolbar.QueryEdit\" + (cmdSpecs.queryId === null ? \"Disabled\" : \"\"),\r\n            showCondition: function (settings, modConfig) {\r\n                return enableTools && !isContent;\r\n            },\r\n            dynamicClasses: function (settings) {\r\n                return cmdSpecs.queryId ? \"\" : \"empty\"; // if it doesn't have a query, make it less strong\r\n            }\r\n        }));\r\n\r\n        addDef(makeDef(\"template-settings\", \"TemplateSettings\", \"sliders\", true, false, {\r\n            dialog: \"edit\",\r\n            showCondition: enableTools,\r\n            configureCommand: function (cmd) {\r\n                cmd.items = [{ EntityId: cmdSpecs.templateId }];\r\n            }\r\n\r\n        }));\r\n        //#endregion template commands\r\n\r\n        //#region custom code buttons\r\n        addDef(makeDef(\"custom\", \"Custom\", \"bomb\", true, false, {\r\n            code: function (settings, event, sxc) {\r\n                var fn;\r\n                console.log(\"custom action with code - BETA feature, may change\");\r\n                if (!settings.customCode) {\r\n                    console.warn(\"custom code action, but no onclick found to run\", settings);\r\n                    return;\r\n                }\r\n                try {\r\n                    fn = new Function(\"settings\", \"event\", \"sxc\", settings.customCode); // jshint ignore:line\r\n                    fn(settings, event, sxc);\r\n                } catch (err) {\r\n                    console.error(\"error in custom button-code: \", settings);\r\n                }\r\n            }\r\n        }));\r\n        //#endregion\r\n\r\n        addDef(makeDef(\"layout\", \"ChangeLayout\", \"glasses\", true, true, {\r\n             inlineWindow: true \r\n        }));\r\n\r\n        addDef(makeDef(\"more\", \"MoreActions\", \"options btn-mode\", true, false, {\r\n            code: function (settings, event) {\r\n                var btn = $(event.target),\r\n                    fullMenu = btn.closest(\"ul.sc-menu\"),\r\n                    oldState = Number(fullMenu.attr(\"data-state\") || 0),\r\n                    max = Number(fullMenu.attr(\"group-count\")),\r\n                    newState = (oldState + 1) % max;\r\n\r\n                fullMenu.removeClass(\"group-\" + oldState)\r\n                    .addClass(\"group-\" + newState)\r\n                    .attr(\"data-state\", newState);\r\n            }\r\n        }));\r\n        \r\n        // show the version dialog\r\n        addDef(makeDef(\"item-history\", \"ItemHistory\", \"clock\", true, false, {\r\n            inlineWindow: true,\r\n            fullScreen: true\r\n        }));\r\n\r\n        return act;\r\n    };\r\n})();\r\n\n(function () {\r\n    $2sxc._commands.instanceEngine = function (sxc, editContext) {\r\n        var engine = {\r\n            commands: $2sxc._commands.initializeInstanceCommands(editContext),\r\n\r\n            // assemble an object which will store the configuration and execute it\r\n            create: function (specialSettings) {\r\n                var settings = $2sxc._lib.extend({}, sxc.manage._instanceConfig, specialSettings); // merge button with general toolbar-settings\r\n                var ngDialogUrl = sxc.manage._editContext.Environment.SxcRootUrl +\r\n                    \"desktopmodules/tosic_sexycontent/dist/dnn/ui.html?sxcver=\" +\r\n                    sxc.manage._editContext.Environment.SxcVersion;\r\n                var isDebug = $2sxc.urlParams.get(\"debug\") ? \"&debug=true\" : \"\";\r\n\r\n                var cmd = {\r\n                    settings: settings,\r\n                    items: settings.items || [], // use predefined or create empty array\r\n                    params: $2sxc._lib.extend({\r\n                        dialog: settings.dialog || settings.action // the variable used to name the dialog changed in the history of 2sxc from action to dialog\r\n                    }, settings.params),\r\n\r\n                    addSimpleItem: function () {\r\n                        var itm = {},\r\n                            ct = cmd.settings.contentType || cmd.settings.attributeSetName; // two ways to name the content-type-name this, v 7.2+ and older\r\n                        if (cmd.settings.entityId) itm.EntityId = cmd.settings.entityId;\r\n                        if (ct) itm.ContentTypeName = ct;\r\n\r\n                        // only add if there was stuff to add\r\n                        if (itm.EntityId || itm.ContentTypeName) cmd.items.push(itm);\r\n                    },\r\n\r\n                    // this adds an item of the content-group, based on the group GUID and the sequence number\r\n                    addContentGroupItem: function (guid, index, part, isAdd, isEntity, cbid, sectionLanguageKey) {\r\n                        cmd.items.push({\r\n                            Group: {\r\n                                Guid: guid,\r\n                                Index: index,\r\n                                Part: part,\r\n                                Add: isAdd\r\n                            },\r\n                            Title: $2sxc.translate(sectionLanguageKey)\r\n                        });\r\n                    },\r\n\r\n                    // this will tell the command to edit a item from the sorted list in the group, optionally together with the presentation item\r\n                    addContentGroupItemSetsToEditList: function (withPresentation) {\r\n                        var isContentAndNotHeader = (cmd.settings.sortOrder !== -1),\r\n                            index = isContentAndNotHeader ? cmd.settings.sortOrder : 0,\r\n                            prefix = isContentAndNotHeader ? \"\" : \"List\",\r\n                            cTerm = prefix + \"Content\",\r\n                            pTerm = prefix + \"Presentation\",\r\n                            isAdd = cmd.settings.action === \"new\",\r\n                            groupId = cmd.settings.contentGroupId;\r\n                        cmd.addContentGroupItem(groupId, index, cTerm.toLowerCase(), isAdd, cmd.settings.cbIsEntity, cmd.settings.cbId, \"EditFormTitle.\" + cTerm);\r\n\r\n                        if (withPresentation) cmd.addContentGroupItem(groupId, index, pTerm.toLowerCase(), isAdd, cmd.settings.cbIsEntity, cmd.settings.cbId, \"EditFormTitle.\" + pTerm);\r\n                    },\r\n\r\n                    // build the link, combining specific params with global ones and put all in the url\r\n                    generateLink: function () {\r\n                        // if there is no items-array, create an empty one (it's required later on)\r\n                        if (!cmd.settings.items) cmd.settings.items = [];\r\n                        //#region steps for all actions: prefill, serialize, open-dialog\r\n                        // when doing new, there may be a prefill in the link to initialize the new item\r\n                        if (cmd.settings.prefill) {\r\n                            for (var i = 0; i < cmd.items.length; i++) {\r\n                                cmd.items[i].Prefill = cmd.settings.prefill;\r\n                            }\r\n                        }\r\n                        cmd.params.items = JSON.stringify(cmd.items); // Serialize/json-ify the complex items-list\r\n\r\n                        // clone the params and adjust parts based on partOfPage settings...\r\n                        var sharedParams = $2sxc._lib.extend({}, sxc.manage._dialogParameters);\r\n                        if (!cmd.settings.partOfPage) {\r\n                            delete sharedParams.versioningRequirements;\r\n                            delete sharedParams.publishing;\r\n                            sharedParams.partOfPage = false;\r\n                        }\r\n\r\n                        return ngDialogUrl +\r\n                            \"#\" + $.param(sharedParams) +\r\n                            \"&\" + $.param(cmd.params) +\r\n                            isDebug;\r\n                        //#endregion\r\n                    }\r\n                };\r\n                return cmd;\r\n            },\r\n\r\n            // create a dialog link\r\n            _linkToNgDialog: function (specialSettings) {\r\n                var cmd = sxc.manage._commands.create(specialSettings);\r\n\r\n                if (cmd.settings.useModuleList) cmd.addContentGroupItemSetsToEditList(true);\r\n                else cmd.addSimpleItem();\r\n\r\n                // if the command has own configuration stuff, do that now\r\n                if (cmd.settings.configureCommand) cmd.settings.configureCommand(cmd);\r\n\r\n                return cmd.generateLink();\r\n            },\r\n\r\n            // open a new dialog of the angular-ui\r\n            _openNgDialog: function (settings, event, sxc /*, closeCallback*/) {\r\n                // the callback will handle events after closing the dialog\r\n                // and reload the in-page view w/ajax or page reload\r\n                var callback = function () {\r\n                    $2sxc._contentBlock.reloadAndReInitialize(sxc);\r\n                    // 2017-09-29 2dm: no call of _openNgDialog seems to give a callback ATM closeCallback();\r\n                };\r\n                var link = engine._linkToNgDialog(settings); // the link contains everything to open a full dialog (lots of params added)\r\n                if (settings.inlineWindow)\r\n                    return $2sxc._quickDialog.showOrToggle(sxc, link, callback, settings.fullScreen /* settings.dialog === \"item-history\"*/ , settings.dialog);\r\n                if (settings.newWindow || (event && event.shiftKey))\r\n                    return window.open(link);\r\n                return $2sxc.totalPopup.open(link, callback);\r\n            },\r\n\r\n            // ToDo: remove dead code\r\n            executeAction: function (nameOrSettings, settings, event) {\r\n\r\n                // cycle parameters, in case it was called with 2 params only\r\n                if (!event && settings && typeof settings.altKey !== \"undefined\") { // no event param, but settings contains the event-object\r\n                    event = settings; // move it to the correct variable\r\n                    settings = {}; // clear the settings variable, as none was provided\r\n                }\r\n\r\n                // pre-save event because afterwards we have a promise, so the event-object changes; funky syntax is because of browser differences\r\n                var origEvent = event || window.event;\r\n\r\n                // check if name is name (string) or object (settings)\r\n                settings = (typeof nameOrSettings === \"string\") ?\r\n                    $2sxc._lib.extend(settings || {}, {\r\n                        \"action\": nameOrSettings\r\n                    }) // place the name as an action-name into a command-object\r\n                    :\r\n                    nameOrSettings;\r\n\r\n                var conf = engine.commands[settings.action];\r\n                settings = $2sxc._lib.extend({}, conf, settings); // merge conf & settings, but settings has higher priority\r\n\r\n                if (!settings.dialog) settings.dialog = settings.action; // old code uses \"action\" as the parameter, now use verb ? dialog\r\n                if (!settings.code) settings.code = engine._openNgDialog; // decide what action to perform\r\n\r\n                if (conf.uiActionOnly) return settings.code(settings, origEvent, sxc);\r\n\r\n                // if more than just a UI-action, then it needs to be sure the content-group is created first\r\n                return $2sxc._contentBlock.prepareToAddContent(sxc, settings.useModuleList)\r\n                    .then(function () {\r\n                        return settings.code(settings, origEvent, sxc);\r\n                    });\r\n            }\r\n        };\r\n\r\n        return engine;\r\n    };\r\n})();\n(function() {\r\n    $2sxc._commands.initializeInstanceCommands = function(editContext) {\r\n        var cg = editContext.ContentGroup;\r\n        return $2sxc._commands.definitions.create({\r\n            canDesign: editContext.User.CanDesign,\r\n            templateId: cg.TemplateId,\r\n            contentTypeId: cg.ContentTypeName,\r\n            isContent: cg.IsContent,\r\n            queryId: cg.QueryId,\r\n            appResourcesId: cg.AppResourcesId,\r\n            appSettingsId: cg.AppSettingsId,\r\n            allowPublish: editContext.ContentBlock.VersioningRequirements === $2sxc.c.publishAllowed\r\n        });\r\n    };\r\n\r\n})();\n/* \r\n * this is a content block in the browser\r\n * \r\n * A Content Block is a standalone unit of content, with it's own definition of\r\n * 1. content items\r\n * 2. template\r\n * + some other stuff\r\n *\r\n * it should be able to render itself\r\n * \r\n * Maybe ToDo 2cb:\r\n * 2sxc should have one entry point (interface to browser context) only.\r\n * Otherwise, we cannot know, when which part will be executed and debugging becomes very difficult.\r\n * \r\n */\r\n(function () {\r\n\r\n    /**\r\n     * The main content-block manager\r\n     */\r\n    $2sxc._contentBlock = {\r\n\r\n        // constants\r\n        cViewWithoutContent: '_LayoutElement', // needed to differentiate the \"select item\" from the \"empty-is-selected\" which are both empty\r\n        cUseExistingTemplate: -1\r\n    };\r\n})();\n/* \n * this is a content block in the browser\n * \n * A Content Block is a standalone unit of content, with it's own definition of\n * 1. content items\n * 2. template\n * + some other stuff\n *\n * it should be able to render itself\n */\n(function () {\n\n    var cbm = $2sxc._contentBlock;\n\n    // internal helper, to do something and reload the content block\n    cbm.getAndReload = function (sxc, url, params) {\n        return sxc.webApi.get({\n            url: url,\n            params: params\n        }).then(function () { cbm.reloadAndReInitialize(sxc); });\n    };\n\n    /**\r\n     * remove an item from a list, then reload\r\n     * @param {} sxc \r\n     * @param {} sortOrder \r\n     * @returns {} \r\n     */\n    cbm.removeFromList = function(sxc, sortOrder) {\n        return cbm.getAndReload(sxc, \"view/module/removefromlist\", { sortOrder: sortOrder });\n    };\n\n    /**\r\n     * change the order of an item in a list, then reload\r\n     * @param {} sxc \r\n     * @param {} initOrder \r\n     * @param {} newOrder \r\n     * @returns {} \r\n     */\n    cbm.changeOrder = function(sxc, initOrder, newOrder) {\n        return cbm.getAndReload(sxc, \"view/module/changeorder\",\n            { sortOrder: initOrder, destinationSortOrder: newOrder });\n    };\n\n    /**\r\n     * add an item to the list at this position\r\n     * @param {} sxc \r\n     * @param {} sortOrder \r\n     * @returns {} \r\n     */\n    cbm.addItem = function(sxc, sortOrder) {\n        return cbm.getAndReload(sxc, \"view/module/additem\", { sortOrder: sortOrder });\n    };\n\n    /**\r\n     * set a content-item in this block to published, then reload\r\n     * @param {} sxc \r\n     * @param {} part \r\n     * @param {} sortOrder \r\n     * @returns {} \r\n     */\n    cbm.publish = function(sxc, part, sortOrder) {\n        return cbm.getAndReload(sxc, \"view/module/publish\", { part: part, sortOrder: sortOrder });\n    };\n\n    /**\r\n     * publish an item using it's ID\r\n     * @param {} sxc \r\n     * @param {} entityId \r\n     * @returns {} \r\n     */\n    cbm.publishId = function(sxc, entityId) {\n        return cbm.getAndReload(sxc, \"view/module/publish\", { id: entityId });\n    };\n\n\n})();\n// contains commands to create/move/delete a contentBlock in a page\r\n\r\n$2sxc._contentBlock.manipulator = function (sxc) {\r\n    return {\r\n        create: create,\r\n        move: move,\r\n        delete: remove\r\n    };\r\n\r\n    function create(parentId, fieldName, index, appName, container, newGuid) {\r\n        // the wrapper, into which this will be placed and the list of pre-existing blocks\r\n        var listTag = container;\r\n        if (listTag.length === 0) return alert('can\\'t add content-block as we couldn\\'t find the list');\r\n        var cblockList = listTag.find('div.sc-content-block');\r\n        if (index > cblockList.length) index = cblockList.length; // make sure index is never greater than the amount of items\r\n\r\n        var params = {\r\n            parentId: parentId,\r\n            field: fieldName,\r\n            sortOrder: index,\r\n            app: appName,\r\n            guid: newGuid,\r\n        };\r\n        return sxc.webApi.get({ url: 'view/module/generatecontentblock', params: params })\r\n            .then(function (result) {\r\n                var newTag = $(result); // prepare tag for inserting\r\n\r\n                // should I add it to a specific position...\r\n                if (cblockList.length > 0 && index > 0)\r\n                    $(cblockList[cblockList.length > index - 1 ? index - 1 : cblockList.length - 1])\r\n                        .after(newTag);\r\n                else //...or just at the beginning?\r\n                    listTag.prepend(newTag);\r\n\r\n                var sxcNew = $2sxc(newTag);\r\n                $2sxc._toolbarManager.buildToolbars(newTag);\r\n            });\r\n    }\r\n\r\n    function move(parentId, field, indexFrom, indexTo) {\r\n        var params = {\r\n            parentId: parentId,\r\n            field: field,\r\n            indexFrom: indexFrom,\r\n            indexTo: indexTo,\r\n        };\r\n\r\n        // todo: need sxc!\r\n        return sxc.webApi.get({ url: 'view/module/moveiteminlist', params: params })\r\n            .then(function () {\r\n                console.log(\"done moving!\");\r\n                window.location.reload();\r\n            });\r\n    }\r\n\r\n    // delete a content-block inside a list of content-blocks\r\n    function remove(parentId, field, index) {\r\n        if (!confirm($2sxc.translate('QuickInsertMenu.ConfirmDelete'))) return null;\r\n        var params = {\r\n            parentId: parentId,\r\n            field: field,\r\n            index: index,\r\n        };\r\n        return sxc.webApi.get({ url: 'view/module/RemoveItemInList', params: params })\r\n            .then(function () {\r\n                console.log('done deleting!');\r\n                window.location.reload();\r\n            });\r\n    }\r\n};\n/* \r\n * this is the content block manager in the browser\r\n * \r\n * A Content Block is a standalone unit of content, with it's own definition of\r\n * 1. content items\r\n * 2. template\r\n * + some other stuff\r\n *\r\n * it should be able to render itself\r\n */\r\n(function () {\r\n    var cbm = $2sxc._contentBlock;\r\n\r\n    /**\r\n     * ajax update/replace the content of the content-block\r\n     * optionally also initialze the toolbar (if not just preview)\r\n     * @param {Object<>} sxc \r\n     * @param {string} newContent \r\n     * @param {boolean} justPreview \r\n     * @returns {} \r\n     */\r\n    cbm.replaceCb = function (sxc, newContent, justPreview) {\r\n        try {\r\n            var newStuff = $(newContent);\r\n\r\n            // Must disable toolbar before we attach to DOM\r\n            if (justPreview) $2sxc._toolbarManager.disable(newStuff);\r\n\r\n            $($2sxc._manage.getTag(sxc)).replaceWith(newStuff);\r\n\r\n            // reset the cache, so the sxc-object is refreshed\r\n            sxc.recreate(true);\r\n        } catch (e) {\r\n            console.log(\"Error while rendering template:\", e);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Show a message where the content of a module should be - usually as placeholder till something else happens\r\n     * @param {object} sxc \r\n     * @param {string} newContent \r\n     * @returns {} - nothing\r\n     */\r\n    cbm.showMessage = function (sxc, newContent) {\r\n        $($2sxc._manage.getTag(sxc)).html(newContent);\r\n    };\r\n\r\n    cbm.ajaxLoad = function (sxc, alternateTemplateId, justPreview) {\r\n        // ajax-call, then replace\r\n        return cbm.getPreviewWithTemplate(sxc, alternateTemplateId)\r\n            .then(function (result) {\r\n                return cbm.replaceCb(sxc, result, justPreview);\r\n            })\r\n            .then($quickE.reset); // reset quick-edit, because the config could have changed\r\n    };\r\n\r\n    // this one assumes a replace / change has already happened, but now must be finalized...\r\n    cbm.reloadAndReInitialize = function (sxc, forceAjax, preview) {\r\n        var manage = sxc.manage;\r\n\r\n        // if ajax is not supported, we must reload the whole page\r\n        if (!forceAjax && !manage._reloadWithAjax) return window.location.reload();\r\n\r\n        return cbm.ajaxLoad(sxc, cbm.cUseExistingTemplate, !!preview)\r\n            .then(function () {\r\n                \r\n                if (dnn_tabVersioningEnabled) {\r\n                    dnn.ContentEditorManager.triggerChangeOnPageContentEvent();\r\n                }\r\n\r\n                // ToDo: tell Evoq that page has changed if it has changed (Ajax call)\r\n                // maybe check if already publish\r\n                // compare to HTML module\r\n                // if (publishing is required (FROM CONTENT BLOCK) and publish button not visible) show publish button\r\n\r\n                // 2017-09-02 2dm - believe this was meant to re-init the dialog manager, but it doesn't actually work\r\n                // must check for side-effects, which would need the manager to re-build the configuration\r\n                $2sxc._quickDialog.hide();\r\n            });\r\n    };\r\n\r\n})();\r\n\n/* \r\n * this is part of the content block manager\r\n */\r\n(function () {\r\n    var cbm = $2sxc._contentBlock;\r\n\r\n    Object.assign(cbm, {\r\n        prepareToAddContent: prepareToAddContent,\r\n        updateTemplateFromDia: updateTemplateFromDia\r\n    });\r\n\r\n    return;\r\n\r\n    /**\r\n     * prepare the instance so content can be added\r\n     * this ensure the content-group has been created, which is required to add content\r\n     * @param {} sxc \r\n     * @returns {} \r\n     */\r\n    function prepareToAddContent(sxc, useModuleList) {\r\n        var isCreated = sxc.manage._editContext.ContentGroup.IsCreated;\r\n        if (isCreated || !useModuleList) return $.when(null);\r\n        // return persistTemplate(sxc, null);\r\n        // var manage = sxc.manage;\r\n        // var contentGroup = manage._editContext.ContentGroup;\r\n        // var showingAjaxPreview = $2sxc._toolbarManager.isDisabled(sxc);\r\n        // var groupExistsAndTemplateUnchanged = !!contentGroup.HasContent; // && !showingAjaxPreview;\r\n\r\n        var templateId = /* templateId || */ sxc.manage._editContext.ContentGroup.TemplateId;\r\n\r\n        // template has not changed\r\n        // if (groupExistsAndTemplateUnchanged) return $.when(null);\r\n\r\n        // persist the template\r\n        return updateTemplate(sxc, templateId, true);\r\n    }\r\n\r\n    /**\r\n     * Update the template and adjust UI accordingly.\r\n     * @param {*} sxc \r\n     * @param {*} templateId \r\n     * @param {*} forceCreate \r\n     */\r\n    function updateTemplateFromDia(sxc, templateId, forceCreate) {\r\n        var contentGroup = sxc.manage._editContext.ContentGroup;\r\n        var showingAjaxPreview = $2sxc._toolbarManager.isDisabled(sxc);\r\n\r\n        // todo: should move things like remembering undo etc. back into the contentBlock state manager\r\n        // or just reset it, so it picks up the right values again ?\r\n        return updateTemplate(sxc, templateId, forceCreate)\r\n            .then(function () {\r\n                $2sxc._quickDialog.hide();\r\n\r\n                // if it didn't have content, then it only has now...\r\n                if (!contentGroup.HasContent) contentGroup.HasContent = forceCreate;\r\n\r\n                // only reload on ajax, not on app as that was already re-loaded on the preview\r\n                // necessary to show the original template again\r\n                if (showingAjaxPreview) cbm.reloadAndReInitialize(sxc);\r\n            });\r\n    }\r\n\r\n    /**\r\n     * Update the template.\r\n     */\r\n    function updateTemplate(sxc, templateId, forceCreate) {\r\n        return cbm.saveTemplate(sxc, templateId, forceCreate)\r\n            .then(function (data, textStatus, xhr) {\r\n\r\n                // error handling\r\n                if (xhr.status !== 200) return alert('error - result not ok, was not able to create ContentGroup');\r\n\r\n                if (!data) return;\r\n\r\n                // fixes a special case where the guid is given with quotes (dependes on version of angularjs) issue #532\r\n                newGuid = data.replace(/[\\\",\\']/g, '');\r\n\r\n                if (console) console.log('created content group {' + newGuid + '}');\r\n                sxc.manage._updateContentGroupGuid(newGuid);\r\n            });\r\n    }\r\n})();\n/* \r\n * this is a content block in the browser\r\n * \r\n * A Content Block is a standalone unit of content, with it's own definition of\r\n * 1. content items\r\n * 2. template\r\n * + some other stuff\r\n *\r\n * it should be able to render itself\r\n */\r\n(function () {\r\n\r\n    var cbm = $2sxc._contentBlock;\r\n\r\n    //#region functions working only with what they are given\r\n    // 2017-08-27 2dm: I'm working on cleaning up this code, and an important part \r\n    // is to have code which doesn't use old state (like object-properties initialized earlier)\r\n    // extracting these methods is part of the work\r\n\r\n    /**\r\n     * TODO - unclear if still in use\r\n     * @param {object} sxc \r\n     * @param {boolean} state \r\n     * @returns {promise} \r\n     */\r\n    // 2017-09-02 2dm removed, deprecated, it's not stored on the server any more\r\n    //cbm.setTemplateChooserState = function(sxc, state) {\r\n    //    return sxc.webApi.get({\r\n    //        url: \"view/module/SetTemplateChooserState\",\r\n    //        params: { state: state }\r\n    //    });\r\n    //};\r\n\r\n    /**\r\n     * Save the template configuration for this instance\r\n     * @param {object} sxc \r\n     * @param {int} templateId \r\n     * @param {boolean} [forceCreateContentGroup]\r\n     * @returns {promise} \r\n     */\r\n    cbm.saveTemplate = function(sxc, templateId, forceCreateContentGroup) {\r\n        return sxc.webApi.get({\r\n            url: \"view/module/savetemplateid\",\r\n            params: {\r\n                templateId: templateId,\r\n                forceCreateContentGroup: forceCreateContentGroup,\r\n                newTemplateChooserState: false\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Retrieve the preview from the web-api\r\n     * @param {object} sxc \r\n     * @param {int} templateId \r\n     * @returns {promise} promise with the html in the result\r\n     */\r\n    cbm.getPreviewWithTemplate = function(sxc, templateId) {\r\n        var ec = sxc.manage._editContext;\r\n        templateId = templateId || -1; // fallback, meaning use saved ID\r\n        return sxc.webApi.get({\r\n            url: \"view/module/rendertemplate\",\r\n            params: {\r\n                templateId: templateId,\r\n                lang: ec.Language.Current,\r\n                cbisentity: ec.ContentBlock.IsEntity,\r\n                cbid: ec.ContentBlock.Id,\r\n                originalparameters: JSON.stringify(ec.Environment.parameters)\r\n            },\r\n            dataType: \"html\"\r\n        });\r\n    };\r\n    //#endregion\r\n\r\n\r\n})();\n// Maps actions of the module menu to JS actions - needed because onclick event can't be set (actually, a bug in DNN)\r\nvar $2sxcActionMenuMapper = function (moduleId) {\r\n    var run = $2sxc(moduleId).manage.run;\r\n    return {\r\n        changeLayoutOrContent: function () { run(\"layout\"); },\r\n        addItem: function () { run(\"add\", { useModuleList: true, sortOrder: 0 }); },\r\n        edit: function () { run(\"edit\", { useModuleList: true, sortOrder: 0 }); },\r\n        adminApp: function () { run(\"app\"); },\r\n        adminZone: function () { run(\"zone\"); },\r\n        develop: function () { run(\"template-develop\"); },\r\n    };\r\n};\r\n//# sourceMappingURL=dnn-inpage-edit.js.map\n// The following script fixes a bug in DNN 08.00.04\r\n// the bug tries to detect a module-ID based on classes in a tag, \r\n// but uses a bad regex and captures the number 2 on all 2sxc-modules \r\n// instead of the real id\r\n// this patch changes the order of the className of 2sxc modules when\r\n// they are accessed through '$.fn.attr'\r\n// 'DnnModule-2sxc DnnModule-xxx' -> DNN thinks the mod id is 2 (false)\r\n// 'DnnModule-xxx DnnModule-2sxc' -> DNN thinks the mod id is xxx (correct)\r\n// documented here https://github.com/2sic/2sxc/issues/986\r\n(function () {\r\n    var fn = $.fn.attr;\r\n    $.fn.attr = function () {\r\n        var val = fn.apply(this, arguments);\r\n        if (arguments[0] !== \"class\"\r\n            || typeof val !== \"string\"\r\n            || val.search(\"DnnModule-2sxc \") === -1)\r\n            return val;\r\n        return val.replace(\"DnnModule-2sxc \", \"\") + \" DnnModule-2sxc\";\r\n    };\r\n})();\r\n//# sourceMappingURL=dnn-08.00.04.js.map\n// this enhances the $2sxc client controller with stuff only needed when logged in\r\n(function() {\r\n    if (window.$2sxc) {\r\n        \r\n        //#region contentItem Commands\r\n        $2sxc.contentItems = {\r\n            // delete command - try to really delete a content-item\r\n            \"delete\": function (sxc, itemId, itemGuid, itemTitle) {\r\n                // first show main warning / get ok\r\n                var ok = confirm($2sxc.translate(\"Delete.Confirm\")\r\n                    .replace(\"{id}\", itemId)\r\n                    .replace(\"{title}\", itemTitle));\r\n                if (!ok) return;\r\n\r\n                sxc.webApi.delete(\"app-content/any/\" + itemGuid, null, null, true)\r\n                    .success(function () {\r\n                        location.reload();\r\n                    }).error(function (error) {\r\n                        var msgJs = $2sxc.translate(\"Delete.ErrCheckConsole\");\r\n                        console.log(error);\r\n\r\n                        // check if it's a permission config problem\r\n                        if (error.status === 401) alert($2sxc.translate(\"Delete.ErrPermission\") + msgJs);\r\n                        if (error.status === 400) alert($2sxc.translate(\"Delete.ErrInUse\") + msgJs);\r\n                    });\r\n            }\r\n        };\r\n        //#endregion\r\n\r\n    }\r\n})();\n\r\n(function () {\r\n\t$2sxc._lib = {\r\n\t\textend:\r\n            function extend() { // same as angular.extend or jquery.extend, but without that additional dependency\r\n            \tfor (var i = 1; i < arguments.length; i++)\r\n            \t\tfor (var key in arguments[i])\r\n            \t\t\tif (arguments[i].hasOwnProperty(key))\r\n            \t\t\t\targuments[0][key] = arguments[i][key];\r\n            \treturn arguments[0];\r\n            }\r\n\t};\r\n})();\r\n\n// A helper-controller in charge of opening edit-dialogs + creating the toolbars for it\r\n// all in-page toolbars etc.\r\n// if loaded, it's found under the $2sxc(module).manage\r\n// it has commands to\r\n// - getButton\r\n// - getToolbar\r\n// - run(...)\r\n// - isEditMode\r\n\r\n(function () {\r\n    $2sxc._manage = {};\r\n})();\n\r\n(function() {\r\n    var mngApi = $2sxc._manage;\r\n\r\n    /**\r\n     * Get a html tag of the current sxc instance\r\n     * @param {any} sxci\r\n     * @return {jquery} - resulting html\r\n     */\r\n    $2sxc._manage.getTag = function(sxci) {\r\n        return $(\"div[data-cb-id='\" + sxci.cbid + \"']\")[0];\r\n    };\r\n\r\n\r\n\r\n    /**\r\n     * get the edit-context object (a json object) of the current tag/sxc-instance\r\n     * @param {any} htmlTag\r\n     * @return {any} edit-context object\r\n     */\r\n    $2sxc._manage.getEditContextOfTag = function getEditContextOfTag(htmlTag) {\r\n        var attr = htmlTag.getAttribute(\"data-edit-context\");\r\n        return JSON.parse(attr || \"\");\r\n    };\r\n\r\n\r\n\r\n    /**\r\n     * get edit-context info of an sxc-object\r\n     * @param {any} sxc\r\n     * @return {any} edit context info\r\n     */\r\n    $2sxc._manage.getEditContext = function getEditContext(sxc) {\r\n        return $2sxc._manage.getEditContextOfTag(mngApi.getTag(sxc));\r\n    };\r\n\r\n\r\n    /**\r\n     * builds a config object used in the toolbar system\r\n     * @param {any} editContext \r\n     * @returns {any} object containing various properties for this current sxc-instance\r\n     */\r\n    $2sxc._manage.buildInstanceConfig = function(editContext) {\r\n        var ce = editContext.Environment, cg = editContext.ContentGroup, cb = editContext.ContentBlock;\r\n        return {\r\n            portalId: ce.WebsiteId,\r\n            tabId: ce.PageId,\r\n            moduleId: ce.InstanceId,\r\n            version: ce.SxcVersion,\r\n\r\n            contentGroupId: cg.Guid,\r\n            cbIsEntity: cb.IsEntity,\r\n            cbId: cb.Id,\r\n            appPath: cg.AppUrl,\r\n            isList: cg.IsList\r\n        };\r\n    };\r\n\r\n\r\n    $2sxc._manage.getUserOfEditContext = function getUserOfEditContext(editContext) {\r\n        return { canDesign: editContext.User.CanDesign, canDevelop: editContext.User.CanDesign };\r\n    };\r\n\r\n\r\n\r\n    /**\r\n     * create a config-object for the quick-dialog, with all settings which the quick-dialog will need\r\n     * @param {any} editContext\r\n     * @returns {any} \r\n     */\r\n\r\n    $2sxc._manage.buildQuickDialogConfig = function buildQuickDialogConfig(editContext) {\r\n        return {\r\n            appId: editContext.ContentGroup.AppId,\r\n            isContent: editContext.ContentGroup.IsContent,\r\n            hasContent: editContext.ContentGroup.HasContent,\r\n            isList: editContext.ContentGroup.IsList,\r\n            templateId: editContext.ContentGroup.TemplateId,\r\n            contentTypeId: editContext.ContentGroup.ContentTypeName,\r\n            templateChooserVisible: editContext.ContentBlock.ShowTemplatePicker, // todo: maybe move to content-goup\r\n            user: $2sxc._manage.getUserOfEditContext(editContext),\r\n            supportsAjax: editContext.ContentGroup.SupportsAjax\r\n        };\r\n    };\r\n\r\n    /**\r\n        * get all parameters needed by NG dialogs from an sxc\r\n        * @param {any} sxc\r\n        * @param {any} [editContext]\r\n        * @return {any} special object containing the ng-dialog parameters\r\n        */\r\n    $2sxc._manage.buildNgDialogParams = function buildNgDialogParams(sxc, editContext) {\r\n        if (!editContext) editContext = mngApi.getEditContext(sxc);\r\n        return {\r\n            zoneId: editContext.ContentGroup.ZoneId,\r\n            appId: editContext.ContentGroup.AppId,\r\n            tid: editContext.Environment.PageId,\r\n            mid: editContext.Environment.InstanceId,\r\n            cbid: sxc.cbid,\r\n            lang: editContext.Language.Current,\r\n            langpri: editContext.Language.Primary,\r\n            langs: JSON.stringify(editContext.Language.All),\r\n            portalroot: editContext.Environment.WebsiteUrl,\r\n            websiteroot: editContext.Environment.SxcRootUrl,\r\n            partOfPage: editContext.ContentBlock.PartOfPage,\r\n            //versioningRequirements: editContext.ContentBlock.VersioningRequirements,\r\n            publishing: editContext.ContentBlock.VersioningRequirements,\r\n\r\n            // todo: probably move the user into the dashboard info\r\n            user: $2sxc._manage.getUserOfEditContext(editContext),\r\n            approot: editContext.ContentGroup.AppUrl || null // this is the only value which doesn't have a slash by default.  note that the app-root doesn't exist when opening \"manage-app\"\r\n        };\r\n    };\r\n})();\n// A helper-controller in charge of opening edit-dialogs + creating the toolbars for it\r\n// all in-page toolbars etc.\r\n// if loaded, it's found under the $2sxc(module).manage\r\n// it has commands to\r\n// - getButton\r\n// - getToolbar\r\n// - run(...)\r\n// - isEditMode\r\n\r\n(function () {\r\n    $2sxc._manage.initInstance = function(sxc) {\r\n        try {\r\n            initInstance(sxc);\r\n        } catch (e) {\r\n            console.error(\"error in 2sxc - will log but not throw\", e);\r\n        }\r\n    };\r\n\r\n    var mngApi = $2sxc._manage;\r\n    function initInstance(sxc) {\r\n        var editContext = mngApi.getEditContext(sxc);\r\n        var userInfo = mngApi.getUserOfEditContext(editContext);\r\n\r\n        var cmdEngine = $2sxc._commands.instanceEngine(sxc, editContext);\r\n\r\n        var editManager = sxc.manage = {\r\n            //#region Official, public properties and commands, which are stable for use from the outside\r\n            /**\r\n             * run a command - often used in toolbars and custom buttons\r\n             */\r\n            run: cmdEngine.executeAction,\r\n\r\n            /**\r\n             * Generate a button (an <a>-tag) for one specific toolbar-action.\r\n             * @param {Object<any>} actDef - settings, an object containing the specs for the expected buton\r\n             * @param {int} groupIndex - number what button-group it's in'\r\n             * @returns {string} html of a button\r\n             */\r\n            getButton: function (actDef, groupIndex) {\r\n                return $2sxc._toolbarManager.generateButtonHtml(sxc, actDef, groupIndex);\r\n            },\r\n\r\n            /**\r\n             * Builds the toolbar and returns it as HTML\r\n             * @param {Object<any>} tbConfig - general toolbar config\r\n             * @param {Object<any>} moreSettings - additional / override settings\r\n             * @returns {string} html of the current toolbar\r\n             */\r\n            getToolbar: function (tbConfig, moreSettings) {\r\n                return $2sxc._toolbarManager.generateToolbarHtml(sxc, tbConfig, moreSettings);\r\n            },\r\n            //#endregion official, public properties - everything below this can change at any time\r\n\r\n            // internal method to find out if it's in edit-mode\r\n            _isEditMode: function () { return editContext.Environment.IsEditable; },\r\n            _reloadWithAjax: editContext.ContentGroup.SupportsAjax,\r\n            _dialogParameters: mngApi.buildNgDialogParams(sxc, editContext),      // used for various dialogs\r\n            _instanceConfig: mngApi.buildInstanceConfig(editContext), // used to configure buttons / toolbars\r\n            _editContext: editContext,              // metadata necessary to know what/how to edit\r\n            _quickDialogConfig: mngApi.buildQuickDialogConfig(editContext),           // used for in-page dialogs\r\n            _commands: cmdEngine,                        // used to handle the commands for this content-block\r\n            _user: userInfo,\r\n\r\n            // init this object \r\n            init: function init() {\r\n                // enhance UI in case there are known errors / issues\r\n                if (editContext.error.type)\r\n                    editManager._handleErrors(editContext.error.type, $2sxc._manage.getTag(sxc));\r\n\r\n                // todo: move this to dialog-handling\r\n                // display the dialog\r\n                var openDialogId = sessionStorage.getItem(\"dia-cbid\");\r\n                if (editContext.error.type || !openDialogId || openDialogId !== sxc.cbid) return false;\r\n                sessionStorage.removeItem(\"dia-cbid\");\r\n                editManager.run(\"layout\");\r\n            },\r\n\r\n            // private: show error when the app-data hasn't been installed yet for this imported-module\r\n            _handleErrors: function (errType, cbTag) {\r\n                var errWrapper = $(\"<div class=\\\"dnnFormMessage dnnFormWarning sc-element\\\"></div>\");\r\n                var msg = \"\";\r\n                var toolbar = $(\"<ul class='sc-menu'></ul>\");\r\n                if (errType === \"DataIsMissing\") {\r\n                    msg = \"Error: System.Exception: Data is missing - usually when a site is copied but the content / apps have not been imported yet - check 2sxc.org/help?tag=export-import\";\r\n                    toolbar.attr(\"data-toolbar\", '[{\\\"action\\\": \\\"zone\\\"}, {\\\"action\\\": \\\"more\\\"}]');\r\n                }\r\n                errWrapper.append(msg);\r\n                errWrapper.append(toolbar);\r\n                $(cbTag).append(errWrapper);\r\n            },\r\n\r\n            // change config by replacing the guid, and refreshing dependend sub-objects\r\n            _updateContentGroupGuid: function (newGuid) {\r\n                editContext.ContentGroup.Guid = newGuid;\r\n                editManager._instanceConfig = mngApi.buildInstanceConfig(editContext);\r\n            },\r\n\r\n            _getCbManipulator: function () {\r\n                return $2sxc._contentBlock.manipulator(sxc);\r\n            }\r\n        };\r\n\r\n        editManager.init();\r\n        return editManager;\r\n    }\r\n})();\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\r\nif (!Array.prototype.find) {\r\n    Object.defineProperty(Array.prototype, 'find', {\r\n        value: function (predicate) {\r\n            // 1. Let O be ? ToObject(this value).\r\n            if (this == null) { // jshint ignore:line\r\n                throw new TypeError('\"this\" is null or not defined');\r\n            }\r\n\r\n            var o = Object(this);\r\n\r\n            // 2. Let len be ? ToLength(? Get(O, \"length\")).\r\n            var len = o.length >>> 0;\r\n\r\n            // 3. If IsCallable(predicate) is false, throw a TypeError exception.\r\n            if (typeof predicate !== 'function') {\r\n                throw new TypeError('predicate must be a function');\r\n            }\r\n\r\n            // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\r\n            var thisArg = arguments[1];\r\n\r\n            // 5. Let k be 0.\r\n            var k = 0;\r\n\r\n            // 6. Repeat, while k < len\r\n            while (k < len) {\r\n                // a. Let Pk be ! ToString(k).\r\n                // b. Let kValue be ? Get(O, Pk).\r\n                // c. Let testResult be ToBoolean(? Call(predicate, T,  kValue, k, O )).\r\n                // d. If testResult is true, return kValue.\r\n                var kValue = o[k];\r\n                if (predicate.call(thisArg, kValue, k, o)) {\r\n                    return kValue;\r\n                }\r\n                // e. Increase k by 1.\r\n                k++;\r\n            }\r\n\r\n            // 7. Return undefined.\r\n            return undefined;\r\n        }\r\n    });\r\n}\nif (typeof Object.assign != 'function') {\r\n    Object.assign = function (target, varArgs) { // .length of function is 2\r\n        'use strict';\r\n        if (target === null) { // TypeError if undefined or null\r\n            throw new TypeError('Cannot convert undefined or null to object');\r\n        }\r\n\r\n        var to = Object(target);\r\n\r\n        for (var index = 1; index < arguments.length; index++) {\r\n            var nextSource = arguments[index];\r\n\r\n            if (nextSource !== null) { // Skip over if undefined or null\r\n                for (var nextKey in nextSource) {\r\n                    // Avoid bugs when hasOwnProperty is shadowed\r\n                    if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\r\n                        to[nextKey] = nextSource[nextKey];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return to;\r\n    };\r\n}\n// this is a dialog manager which is in charge of all\r\n// quick-dialogs. \r\n// it always has a reference to the latest dialog created by any module instance\r\n\r\n(function () {\r\n    var resizeInterval = 200;\r\n    var scrollTopOffset = 80;\r\n    var resizeWatcher = null;\r\n    var diagShowClass = \"dia-select\";\r\n    var isFullscreen = false;\r\n\r\n    /**\r\n     * dialog manager - the currently active dialog object\r\n     */\r\n    var diagManager = $2sxc._quickDialog = {\r\n        current: null,\r\n\r\n        /**\r\n         * toggle visibility\r\n         * @param {boolean} [show] true/false optional\r\n         */\r\n        toggle: function (show) {\r\n            var cont = $(diagManager.getContainer());\r\n            if (show === undefined)\r\n                show = !cont.hasClass(diagShowClass);\r\n            // show/hide visually\r\n            cont.toggleClass(diagShowClass, show);\r\n            diagManager.current = show ? diagManager.getIFrame() : null;\r\n        },\r\n\r\n        hide: function () {\r\n            if (diagManager.current) diagManager.toggle(false);\r\n        },\r\n\r\n        /**\r\n         * cancel the current dialog\r\n         */\r\n        cancel: function () {\r\n            if (diagManager.current) diagManager.current.cancel(); // cancel & hide\r\n        },\r\n\r\n        /**\r\n         * Remember dialog state across page-reload\r\n         * @param {Object<any>} sxc - the sxc which is persisted for\r\n         */\r\n        persistDialog: function (sxc) {\r\n            sessionStorage.setItem(\"dia-cbid\", sxc.cbid);\r\n        },\r\n\r\n        /**\r\n         * get the current container\r\n         * @returns {element} html element of the div\r\n         */\r\n        getContainer: function () {\r\n            var container = $(\".inpage-frame-wrapper\");\r\n            return container.length > 0 ? container : buildContainerAndIFrame();\r\n        },\r\n\r\n        /**\r\n         * find the iframe which hosts the dialog\r\n         * @param {html} [container] - html-container as jQuery object\r\n         * @returns {html} iframe object\r\n         */\r\n        getIFrame: function (container) {\r\n            if (!container) container = diagManager.getContainer();\r\n            return container.find(\"iframe\")[0];\r\n        },\r\n\r\n        /**\r\n         * check if the dialog is showing for the current sxc-instance\r\n         * @param {Object<any>} sxc - sxc object\r\n         * @param {string} dialogName - name of dialog\r\n         * @returns {boolean} true if it's currently showing for this sxc-instance\r\n         */\r\n        isShowing: function (sxc, dialogName) {\r\n            return diagManager.current // there is a current dialog\r\n                &&\r\n                diagManager.current.sxcCacheKey === sxc.cacheKey // the iframe is showing for the current sxc\r\n                &&\r\n                diagManager.current.dialogName === dialogName; // the view is the same as previously\r\n        },\r\n\r\n        /**\r\n         * show / reset the current iframe to use new url and callback\r\n         * @param {any} sxc - sxc object\r\n         * @param {string} url - url to show\r\n         * @param {function()} closeCallback - callback event\r\n         * @param {boolean} fullScreen - if it should open full screen\r\n         * @param {string} [dialogName] - optional name of dialog, to check if it's already open\r\n         * @returns {any} jquery object of the iframe\r\n         */\r\n        showOrToggle: function (sxc, url, closeCallback, fullScreen, dialogName) {\r\n            setSize(fullScreen);\r\n            var iFrame = diagManager.getIFrame();\r\n\r\n            // in case it's a toggle\r\n            if (dialogName && diagManager.isShowing(sxc, dialogName))\r\n                return diagManager.hide();\r\n\r\n            iFrame.rewire(sxc, closeCallback, dialogName);\r\n            iFrame.setAttribute(\"src\", rewriteUrl(url));\r\n            // if the window had already been loaded, re-init\r\n            if (iFrame.contentWindow && iFrame.contentWindow.reboot)\r\n                iFrame.contentWindow.reboot();\r\n\r\n            // make sure it's visible'\r\n            iFrame.toggle(true);\r\n            return iFrame;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * build the container in the dom w/iframe for re-use\r\n     * @return {jquery} jquery dom-object \r\n     */\r\n    function buildContainerAndIFrame() {\r\n        var container = $('<div class=\"inpage-frame-wrapper\"><div class=\"inpage-frame\"></div></div>');\r\n        var newIFrame = document.createElement(\"iframe\");\r\n        newIFrame = extendIFrameWithSxcState(newIFrame);\r\n        container.find(\".inpage-frame\").html(newIFrame);\r\n        $(\"body\").append(container);\r\n\r\n        watchForResize();\r\n        return container;\r\n    }\r\n\r\n    function setSize(fullScreen) {\r\n        var container = diagManager.getContainer();\r\n        // set container height\r\n        container.css(\"min-height\", fullScreen ? \"100%\" : \"225px\");\r\n        isFullscreen = fullScreen;\r\n    }\r\n\r\n    function extendIFrameWithSxcState(iFrame) {\r\n        var hiddenSxc = null;\r\n        var cbApi = $2sxc._contentBlock;\r\n        var tagModule = null;\r\n\r\n        /**\r\n         * get the sxc-object of this iframe\r\n         * @returns {Object<any>} refreshed sxc-object\r\n         */\r\n        function reSxc() {\r\n            if (!hiddenSxc) throw \"can't find sxc-instance of IFrame, probably it wasn't initialized yet\";\r\n            return hiddenSxc.recreate();\r\n        }\r\n\r\n        var newFrm = Object.assign(iFrame, {\r\n            closeCallback: null,\r\n            rewire: function (sxc, callback, dialogName) {\r\n                hiddenSxc = sxc;\r\n                tagModule = $($($2sxc._manage.getTag(sxc)).parent().eq(0));\r\n                newFrm.sxcCacheKey = sxc.cacheKey;\r\n                newFrm.closeCallback = callback;\r\n                if (dialogName) newFrm.dialogName = dialogName;\r\n            },\r\n            getManageInfo: function () {\r\n                return reSxc().manage._dialogParameters;\r\n            },\r\n            getAdditionalDashboardConfig: function () {\r\n                return reSxc().manage._quickDialogConfig;\r\n            },\r\n            persistDia: function () {\r\n                diagManager.persistDialog(reSxc());\r\n            },\r\n            scrollToTarget: function () {\r\n                $(\"body\").animate({\r\n                    scrollTop: tagModule.offset().top - scrollTopOffset\r\n                });\r\n            },\r\n            toggle: function (show) {\r\n                diagManager.toggle(show);\r\n            },\r\n            cancel: function () {\r\n                newFrm.toggle(false);\r\n                //todo: only re-init if something was changed?\r\n                // return cbApi.reloadAndReInitialize(reSxc());\r\n\r\n                // cancel the dialog\r\n                localStorage.setItem('cancelled-dialog', true);\r\n                return newFrm.closeCallback();\r\n            },\r\n            run: function (verb) {\r\n                reSxc().manage.run(verb);\r\n            },\r\n            showMessage: function (message) {\r\n                cbApi.showMessage(reSxc(), '<p class=\"no-live-preview-available\">' + message + \"</p>\");\r\n            },\r\n            reloadAndReInit: function () {\r\n                return cbApi.reloadAndReInitialize(reSxc(), true, true);\r\n            },\r\n            saveTemplate: function (templateId) {\r\n                return cbApi.updateTemplateFromDia(reSxc(), templateId, false);\r\n            },\r\n            previewTemplate: function (templateId) {\r\n                return cbApi.ajaxLoad(reSxc(), templateId, true);\r\n            }\r\n        });\r\n        return newFrm;\r\n    }\r\n\r\n    /**\r\n     * rewrite the url to fit the quick-dialog situation\r\n     * optionally with a live-compiled version from ng-serve\r\n     * @param {string} url - original url pointing to the \"wrong\" dialog\r\n     * @returns {string} new url\r\n     */\r\n    function rewriteUrl(url) {\r\n        // change default url-schema from the primary angular-app to the quick-dialog\r\n        url = url.replace(\"dist/dnn/ui.html?\", \"dist/ng/ui.html?\");\r\n\r\n        // special debug-code when running on local ng-serve\r\n        // this is only activated if the developer manually sets a value in the localStorage\r\n        try {\r\n            var devMode = localStorage.getItem(\"devMode\");\r\n            if (devMode && ~~devMode)\r\n                url = url.replace(\"/desktopmodules/tosic_sexycontent/dist/ng/ui.html\", \"http://localhost:4200\");\r\n        } catch (e) {\r\n            // ignore\r\n        }\r\n        return url;\r\n    }\r\n\r\n    /**\r\n     * create watcher which monitors the iframe size and adjusts the container as needed\r\n     * @param {boolean} [keepWatching] optional true/false to start/stop the watcher\r\n     * @returns {null} nothing\r\n     */\r\n    function watchForResize(keepWatching) {\r\n        if (keepWatching === false && resizeWatcher) {\r\n            clearInterval(resizeWatcher);\r\n            resizeWatcher = null;\r\n            return null;\r\n        }\r\n\r\n        var cont = diagManager.getContainer();\r\n        if (!resizeWatcher) // only add a timer if not already running\r\n            resizeWatcher = setInterval(function () {\r\n                try {\r\n                    var frm = diagManager.getIFrame(cont);\r\n                    if (!frm) return;\r\n                    var height = frm.contentDocument.body.offsetHeight;\r\n                    if (frm.previousHeight === height) return;\r\n                    frm.style.minHeight = cont.css(\"min-height\");\r\n                    frm.style.height = height + \"px\";\r\n                    frm.previousHeight = height;\r\n                    if (isFullscreen) {\r\n                        frm.style.height = \"100%\";\r\n                        frm.style.position = \"absolute\";\r\n                    }\r\n                } catch (e) {\r\n                    // ignore\r\n                }\r\n            }, resizeInterval);\r\n        return resizeWatcher;\r\n    }\r\n})();\n$(function () {\r\n    \"use strict\";\r\n\r\n    // the quick-edit object\r\n    var $quickE = window.$quickE = {};\r\n\r\n    // selectors used all over the in-page-editing, centralized to ensure consistency\r\n    $quickE.selectors = {\r\n        cb: {\r\n            id: \"cb\",\r\n            \"class\": \"sc-content-block\",\r\n            selector: \".sc-content-block\",\r\n            listSelector: \".sc-content-block-list\",\r\n            context: \"data-list-context\",\r\n            singleItem: \"single-item\"\r\n        },\r\n        mod: {\r\n            id: \"mod\",\r\n            \"class\": \"DnnModule\",\r\n            selector: \".DnnModule\",\r\n            listSelector: \".DNNEmptyPane, .dnnDropEmptyPanes, :has(>.DnnModule)\", // Found no better way to get all panes - the hidden variable does not exist when not in edit page mode\r\n            context: null\r\n        },\r\n        eitherCbOrMod: \".DnnModule, .sc-content-block\",\r\n        selected: \"sc-cb-is-selected\"\r\n    };\r\n\r\n\r\n    $quickE.btn = function(action, icon, i18N, invisible, unavailable, classes) {\r\n        return \"<a class='sc-content-block-menu-btn sc-cb-action icon-sxc-\" + icon + \" \"\r\n            + (invisible ? \" sc-invisible \" : \"\")\r\n            + (unavailable ? \" sc-unavailable \" : \"\")\r\n            + classes + \"' data-action='\" + action + \"' data-i18n='[title]QuickInsertMenu.\" + i18N + \"'></a>\";\r\n    };\r\n\r\n    // the quick-insert object\r\n    $.extend($quickE, {\r\n        body: $(\"body\"),\r\n        win: $(window),\r\n        main: $(\"<div class='sc-content-block-menu sc-content-block-quick-insert sc-i18n'></div>\"),\r\n        template: \"<a class='sc-content-block-menu-addcontent sc-invisible' data-type='Default' data-i18n='[titleTemplate]QuickInsertMenu.AddBlockContent'>x</a>\"\r\n            + \"<a class='sc-content-block-menu-addapp sc-invisible' data-type='' data-i18n='[titleTemplate]QuickInsertMenu.AddBlockApp'>x</a>\"\r\n            + $quickE.btn(\"select\", \"ok\", \"Select\", true)\r\n            + $quickE.btn(\"paste\", \"paste\", \"Paste\", true, true),\r\n        selected: $(\"<div class='sc-content-block-menu sc-content-block-selected-menu sc-i18n'></div>\")\r\n            .append(\r\n                $quickE.btn(\"delete\", \"trash-empty\", \"Delete\"),\r\n                $quickE.btn(\"sendToPane\", \"export\", \"Move\", null, null, \"sc-cb-mod-only\"),\r\n                \"<div id='paneList'></div>\"\r\n            ),\r\n        contentBlocks: null,\r\n        cachedPanes: null,\r\n        modules: null,\r\n        nearestCb: null, \r\n        nearestMod: null,\r\n        modManage: null // will be populated later in the module section\r\n    });\r\n\r\n    // add stuff which dependes on other values to create\r\n    $.extend($quickE, {\r\n        cbActions: $($quickE.template),\r\n        modActions: $($quickE.template.replace(/QuickInsertMenu.AddBlock/g, \"QuickInsertMenu.AddModule\"))\r\n            .attr(\"data-context\", \"module\")\r\n            .addClass(\"sc-content-block-menu-module\")\r\n    });\r\n\r\n    // build the toolbar (hidden, but ready to show)\r\n    $quickE.prepareToolbarInDom = function() {\r\n        $quickE.body.append($quickE.main)\r\n            .append($quickE.selected);\r\n        $quickE.main.append($quickE.cbActions)\r\n            .append($quickE.modActions);\r\n    };\r\n\r\n});\n// add a clipboard to the quick edit\r\n$(function () {\r\n\r\n    // perform copy and paste commands - needs the clipboard\r\n    $quickE.copyPasteInPage = function (cbAction, list, index, type) {\r\n        var newClip = $quickE.clipboard.createSpecs(type, list, index);\r\n\r\n        // action!\r\n        switch (cbAction) {\r\n            case \"select\":\r\n                $quickE.clipboard.mark(newClip);\r\n                break;\r\n            case \"paste\":\r\n                var from = $quickE.clipboard.data.index, to = newClip.index;\r\n                // check that we only move block-to-block or module to module\r\n                if ($quickE.clipboard.data.type !== newClip.type)\r\n                    return alert(\"can't move module-to-block; move only works from module-to-module or block-to-block\");\r\n\r\n                if (isNaN(from) || isNaN(to) || from === to) // || from + 1 === to) // this moves it to the same spot, so ignore\r\n                    return $quickE.clipboard.clear(); // don't do anything\r\n\r\n                // cb-numbering is a bit different, because the selector is at the bottom\r\n                // only there we should also skip on +1;\r\n                if(newClip.type === $quickE.selectors.cb.id && from + 1 === to)\r\n                    return $quickE.clipboard.clear(); // don't do anything\r\n\r\n                if (type === $quickE.selectors.cb.type) {\r\n                    $2sxc(list).manage._getCbManipulator().move(newClip.parent, newClip.field, from, to);\r\n                } else {\r\n                    $quickE.cmds.mod.move($quickE.clipboard.data, newClip, from, to);\r\n                }\r\n                $quickE.clipboard.clear();\r\n                break;\r\n            default:\r\n        }\r\n        return null;\r\n    };\r\n\r\n    // clipboard object - remembers what module (or content-block) was previously copied / needs to be pasted\r\n    $quickE.clipboard = {\r\n        data: {},\r\n        mark: function (newData) {\r\n            if (newData) {\r\n                // if it was already selected with the same thing, then release it\r\n                if ($quickE.clipboard.data && $quickE.clipboard.data.item === newData.item)\r\n                    return $quickE.clipboard.clear();\r\n                $quickE.clipboard.data = newData;\r\n            }\r\n            $(\".\" + $quickE.selectors.selected).removeClass($quickE.selectors.selected); // clear previous markings\r\n            var cb = $($quickE.clipboard.data.item);\r\n            cb.addClass($quickE.selectors.selected);\r\n            if (cb.prev().is(\"iframe\"))\r\n                cb.prev().addClass($quickE.selectors.selected);\r\n            $quickE.setSecondaryActionsState(true);\r\n            $quickE.selected.toggle(cb, $quickE.clipboard.data.type);\r\n        },\r\n        clear: function () {\r\n            $(\".\" + $quickE.selectors.selected).removeClass($quickE.selectors.selected);\r\n            $quickE.clipboard.data = null;\r\n            $quickE.setSecondaryActionsState(false);\r\n            $quickE.selected.toggle(false);\r\n        },\r\n\r\n        createSpecs: function (type, list, index) {\r\n            var listItems = list.find($quickE.selectors[type].selector);\r\n            if (index >= listItems.length) index = listItems.length - 1; // sometimes the index is 1 larger than the length, then select last\r\n            var currentItem = listItems[index];\r\n            var editContext = JSON.parse(list.attr($quickE.selectors.cb.context) || null) || { parent: \"dnn\", field: list.id };\r\n            return { parent: editContext.parent, field: editContext.field, list: list, item: currentItem, index: index, type: type };\r\n        }\r\n    };\r\n\r\n\r\n    $quickE.setSecondaryActionsState = function (state) {\r\n        var btns = $(\"a.sc-content-block-menu-btn\");\r\n        btns = btns.filter(\".icon-sxc-paste\");\r\n        btns.toggleClass(\"sc-unavailable\", !state);\r\n    };\r\n\r\n\r\n    $quickE.selected.toggle = function (target) {\r\n        if (!target)\r\n            return $quickE.selected.hide();\r\n\r\n        var coords = $quickE.getCoordinates(target);\r\n        coords.yh = coords.y + 20;\r\n        $quickE.positionAndAlign($quickE.selected, coords);\r\n        $quickE.selected.target = target;\r\n    };\r\n\r\n    // bind clipboard actions \r\n    $(\"a\", $quickE.selected).click(function () {\r\n        var action = $(this).data(\"action\");\r\n        var clip = $quickE.clipboard.data;\r\n        switch (action) {\r\n            case \"delete\":\r\n                return $quickE.cmds[clip.type].delete(clip);\r\n            case \"sendToPane\":\r\n                return $quickE.cmds.mod.sendToPane(clip);\r\n        }\r\n    });\r\n\r\n});\n// extend the quick edit with the core commands\n$(function () {\n    $quickE.cmds = {\n        cb: {\n            \"delete\": function (clip) {\n                return $2sxc(clip.list).manage._getCbManipulator().delete(clip.parent, clip.field, clip.index);\n            },\n            \"create\": function(parent, field, index, appOrContent, list, newGuid) {\n                return $2sxc(list).manage._getCbManipulator().create(parent, field, index, appOrContent, list, newGuid);\n            }\n        },\n        mod: {\n            \"delete\": function (clip) {\n                if (!confirm(\"are you sure?\")) return;\n                var modId = $quickE.modManage.getModuleId(clip.item.className);\n                $quickE.modManage.delete(modId);\n            },\n            // todo: unsure if this is a good place for this bit of code...\n            move: function (oldClip, newClip, from, to) {\n                var modId = $quickE.modManage.getModuleId(oldClip.item.className);\n                var pane = $quickE.modManage.getPaneName(newClip.list);\n                $quickE.modManage.move(modId, pane, to);\n            },\n            sendToPane: function() {\n                var pane = $quickE.main.actionsForModule.closest($quickE.selectors.mod.listSelector);\n\n                // show the pane-options\n                var pl = $quickE.selected.find(\"#paneList\");\n                if (!pl.is(\":empty\"))\n                    pl.empty();\n                pl.append($quickE.modManage.getMoveButtons($quickE.modManage.getPaneName(pane)));\n\n            }\n        }\n    };\n\n\n\n});\n$(function () {\r\n    var configAttr = \"quick-edit-config\";\r\n\r\n    // the initial configuration\r\n    var conf = $quickE.config = {\r\n        enable: true,\r\n        innerBlocks: {\r\n            enable: null    // default: auto-detect\r\n        },\r\n        modules: {\r\n            enable: null    // default: auto-detect\r\n        }\r\n    };\r\n    \r\n    $quickE._readPageConfig = function () {\r\n        var configs = $(\"[\" + configAttr + \"]\"), finalConfig = {}, confJ, confO;\r\n\r\n        // any inner blocks found? will currently affect if modules can be inserted...\r\n        var hasInnerCBs = ($($quickE.selectors.cb.listSelector).length > 0);\r\n\r\n        if (configs.length > 0) {\r\n            // go through reverse list, as the last is the most important...\r\n            for (var c = configs.length; c >= 0; c--) {\r\n                confJ = configs[0].getAttribute(configAttr);\r\n                try {\r\n                    confO = JSON.parse(confJ);\r\n                    $.extend(finalConfig, confO);\r\n                } catch (e) {\r\n                    console.warn('had trouble with json', e);\r\n                }\r\n            }\r\n            $.extend(conf, finalConfig);\r\n        }\r\n\r\n        // re-check \"auto\" or \"null\"\r\n        // if it has inner-content, then it's probably a details page, where quickly adding modules would be a problem, so for now, disable modules in this case\r\n        if (conf.modules.enable === null || conf.modules.enable === 'auto') conf.modules.enable = !hasInnerCBs;\r\n\r\n        // for now, ContentBlocks are only enabled if they exist on the page\r\n        if (conf.innerBlocks.enable === null || conf.innerBlocks.enable === 'auto') conf.innerBlocks.enable = hasInnerCBs;  \r\n    };\r\n\r\n});\n// content-block specific stuff like actions\r\n$(function () {\r\n\r\n    function onCbButtonClick () {\r\n        var list = $quickE.main.actionsForCb.closest($quickE.selectors.cb.listSelector),\r\n            listItems = list.find($quickE.selectors.cb.selector),\r\n            actionConfig = JSON.parse(list.attr($quickE.selectors.cb.context)),\r\n            index = 0,\r\n            newGuid = actionConfig.guid || null;\r\n\r\n        if ($quickE.main.actionsForCb.hasClass($quickE.selectors.cb.class))\r\n            index = listItems.index($quickE.main.actionsForCb[0]) + 1;\r\n\r\n        // check cut/paste\r\n        var cbAction = $(this).data(\"action\");\r\n        if (cbAction)\r\n            // this is a cut/paste action\r\n            return $quickE.copyPasteInPage(cbAction, list, index, $quickE.selectors.cb.id);\r\n        else {\r\n            var appOrContent = $(this).data(\"type\");\r\n            return $quickE.cmds.cb.create(actionConfig.parent, actionConfig.field, index, appOrContent, list, newGuid);\r\n        } \r\n    }\r\n\r\n    $quickE.cbActions.click(onCbButtonClick);\r\n});\n// module specific stuff\r\n$(function () {\r\n    \"use strict\";\r\n\r\n    $quickE.modManage = {\r\n        \"delete\": deleteMod,\r\n        create: createModWithTypeName,\r\n        move: moveMod,\r\n        getPaneName: getPaneName,\r\n        getModuleId: getModuleId,\r\n        getMoveButtons: generatePaneMoveButtons\r\n    };\r\n\r\n\r\n    function getPaneName(pane) {\r\n        return $(pane).attr(\"id\").replace(\"dnn_\", \"\");\r\n    }\r\n\r\n    // find the correct module id from a list of classes - used on the module-wrapper\r\n    function getModuleId(classes) {\r\n        var result = classes.match(/DnnModule-([0-9]+)(?:\\W|$)/);\r\n        return (result && result.length === 2) ? result[1] : null;\r\n    }\r\n\r\n    // show an error when an xhr error occurs\r\n    function xhrError (xhr, optionalMessage) {\r\n        alert(optionalMessage || \"Error while talking to server.\");\r\n        console.log(xhr);\r\n    }\r\n\r\n    // service calls we'll need\r\n    function createModWithTypeName(paneName, index, type) {\r\n        return sendDnnAjax(null, \"controlbar/GetPortalDesktopModules\", {\r\n            data: \"category=All&loadingStartIndex=0&loadingPageSize=100&searchTerm=\",\r\n            success: function (desktopModules) {\r\n                var moduleToFind = type === \"Default\" ? \" Content\" : \" App\";\r\n                var module = null;\r\n\r\n                desktopModules.forEach(function (e, i) {\r\n                    if (e.ModuleName === moduleToFind)\r\n                        module = e;\r\n                });\r\n\r\n                return (!module)\r\n                    ? alert(moduleToFind + \" module not found.\")\r\n                    : createMod(paneName, index, module.ModuleID);\r\n            }\r\n        });\r\n    }\r\n\r\n    // move a dnn module\r\n    function moveMod(modId, pane, order) {\r\n        var service = $.dnnSF(modId);\r\n        var tabId = service.getTabId();\r\n        var dataVar = {\r\n            TabId: tabId,\r\n            ModuleId: modId,\r\n            Pane: pane,\r\n            ModuleOrder: (2 * order + 4) // strange formula, copied from DNN https://github.com/dnnsoftware/Dnn.Platform/blob/fd225b8de07042837f7473cd49fba13de42a3cc0/Website/admin/Menus/ModuleActions/ModuleActions.js#L70\r\n        };\r\n\r\n        sendDnnAjax(modId, \"ModuleService/MoveModule\", {\r\n            type: \"POST\",\r\n            data: dataVar,\r\n            success: function () {\r\n                window.location.reload();\r\n            }\r\n        });\r\n\r\n        //fire window resize to reposition action menus\r\n        $(window).resize();\r\n    }\r\n    \r\n    // delete a module\r\n    function deleteMod(modId) {\r\n        var service = $.dnnSF(modId);\r\n        var tabId = service.getTabId();\r\n        return sendDnnAjax(modId, \"2sxc/dnn/module/delete\", {\r\n            url: $.dnnSF().getServiceRoot(\"2sxc\") + \"dnn/module/delete\",\r\n            type: \"GET\",\r\n            data: {\r\n                tabId: tabId,\r\n                modId: modId\r\n            },\r\n            success: function(d) {\r\n                window.location.reload();\r\n            }\r\n        });\r\n    }\r\n\r\n    // call an api on dnn\r\n    function sendDnnAjax(modId, serviceName, options) {\r\n        var service = $.dnnSF(modId);\r\n\r\n        return $.ajax($.extend( {\r\n            type: \"GET\",\r\n            url: service.getServiceRoot(\"internalservices\") + serviceName,\r\n            beforeSend: service.setModuleHeaders,\r\n            error: xhrError\r\n        }, options));\r\n    }\r\n\r\n    // create / insert a new module\r\n    function createMod(paneName, position, modId) {\r\n        var postData = {\r\n            Module: modId,\r\n            Page: \"\",\r\n            Pane: paneName,\r\n            Position: -1,\r\n            Sort: position,\r\n            Visibility: 0,\r\n            AddExistingModule: false,\r\n            CopyModule: false\r\n        };\r\n        return sendDnnAjax(null, \"controlbar/AddModule\", {\r\n            type: \"POST\",\r\n            data: postData,\r\n            success: function (d) {\r\n                window.location.reload();\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    function generatePaneMoveButtons(current) {\r\n        var pns = $quickE.cachedPanes;\r\n        // generate list of panes as links\r\n        var targets = $(\"<div>\");\r\n        for (var p = 0; p < pns.length; p++) {\r\n            var pName = $quickE.modManage.getPaneName(pns[p]),\r\n                selected = (current === pName) ? \" selected \" : \"\";\r\n            if (!selected)\r\n                targets.append(\"<a data='\" + pName + \"'>\" + pName + \"</a>\");\r\n        }\r\n\r\n        // attach click event...\r\n        targets.find(\"a\").click(function (d) {\r\n            var link = $(this),\r\n                clip = $quickE.clipboard.data,\r\n                modId = $quickE.modManage.getModuleId(clip.item.className),\r\n                newPane = link.attr(\"data\");\r\n\r\n            $quickE.modManage.move(modId, newPane, 0);\r\n        });\r\n\r\n        return targets;\r\n    }\r\n\r\n});\n// module specific stuff\r\n$(function () {\r\n\r\n    function onModuleButtonClick() {\r\n        var type = $(this).data(\"type\"),\r\n            dnnMod = $quickE.main.actionsForModule,\r\n            pane = dnnMod.closest($quickE.selectors.mod.listSelector),\r\n            index = 0;\r\n\r\n        if (dnnMod.hasClass(\"DnnModule\"))\r\n            index = pane.find(\".DnnModule\").index(dnnMod[0]) + 1;\r\n\r\n        var cbAction = $(this).data(\"action\");\r\n        if (cbAction)  // copy/paste\r\n            return $quickE.copyPasteInPage(cbAction, pane, index, $quickE.selectors.mod.id);\r\n\r\n        return $quickE.modManage.create($quickE.modManage.getPaneName(pane), index, type);\r\n    }\r\n\r\n    // bind module actions click\r\n    $quickE.modActions.click(onModuleButtonClick);\r\n});\n// everything related to positioning the quick-edit in-page editing\r\n$(function () {\r\n\r\n\r\n    // Prepare offset calculation based on body positioning\r\n    $quickE.getBodyPosition = function () {\r\n        var bodyPos = $quickE.body.css(\"position\");\r\n        return bodyPos === \"relative\" || bodyPos === \"absolute\"\r\n            ? { x: $quickE.body.offset().left, y: $quickE.body.offset().top }\r\n            : { x: 0, y: 0 };\r\n    };\r\n\r\n    // Refresh content block and modules elements\r\n    $quickE.refreshDomObjects = function () {\r\n        $quickE.bodyOffset = $quickE.getBodyPosition(); // must update this, as sometimes after finishing page load the position changes, like when dnn adds the toolbar\r\n\r\n        //// Cache the panes (because panes can't change dynamically)\r\n        //if (!$quickE.cachedPanes)\r\n        //    $quickE.cachedPanes = $($quickE.selectors.mod.listSelector);\r\n        \r\n        if ($quickE.config.innerBlocks.enable) {\r\n            // get all content-block lists which are empty, or which allow multiple child-items\r\n            var lists = $($quickE.selectors.cb.listSelector)\r\n                .filter(\":not(.\" + $quickE.selectors.cb.singleItem + \"), :empty\");\r\n            $quickE.contentBlocks = lists // $($quickE.selectors.cb.listSelector)\r\n                .find($quickE.selectors.cb.selector)\r\n                .add(lists);// $quickE.selectors.cb.listSelector);\r\n        }\r\n        if ($quickE.config.modules.enable)\r\n            $quickE.modules = $quickE.cachedPanes\r\n                .find($quickE.selectors.mod.selector)\r\n                .add($quickE.cachedPanes);\r\n    };\r\n\r\n    // position, align and show a menu linked to another item\r\n    $quickE.positionAndAlign = function (element, coords) {\r\n        return element.css({\r\n            left: coords.x - $quickE.bodyOffset.x,\r\n            top: coords.yh - $quickE.bodyOffset.y,\r\n            width: coords.element.width()\r\n        }).show();\r\n    };\r\n\r\n    // Refresh positioning / visibility of the quick-insert bar\r\n    $quickE.refresh = function (e) {\r\n        var highlightClass = \"sc-cb-highlight-for-insert\";\r\n\r\n        if (!$quickE.refreshDomObjects.lastCall || (new Date() - $quickE.refreshDomObjects.lastCall > 1000)) {\r\n            // console.log('refreshed contentblock and modules');\r\n            $quickE.refreshDomObjects.lastCall = new Date();\r\n            $quickE.refreshDomObjects();\r\n        }\r\n\r\n        if ($quickE.config.innerBlocks.enable && $quickE.contentBlocks) {\r\n            $quickE.nearestCb = $quickE.findNearest($quickE.contentBlocks, { x: e.clientX, y: e.clientY }, $quickE.selectors.cb.selector);\r\n        }\r\n\r\n        if ($quickE.config.modules.enable && $quickE.modules) {\r\n            $quickE.nearestMod = $quickE.findNearest($quickE.modules, { x: e.clientX, y: e.clientY }, $quickE.selectors.mod.selector);\r\n        }\r\n\r\n        $quickE.modActions.toggleClass(\"sc-invisible\", $quickE.nearestMod === null);\r\n        $quickE.cbActions.toggleClass(\"sc-invisible\", $quickE.nearestCb === null);\r\n\r\n        var oldParent = $quickE.main.parentContainer;\r\n\r\n        if ($quickE.nearestCb !== null || $quickE.nearestMod !== null) {\r\n            var alignTo = $quickE.nearestCb || $quickE.nearestMod;\r\n\r\n            // find parent pane to highlight\r\n            var parentPane = $(alignTo.element).closest($quickE.selectors.mod.listSelector);\r\n            var parentCbList = $(alignTo.element).closest($quickE.selectors.cb.listSelector);\r\n            var parentContainer = (parentCbList.length ? parentCbList : parentPane)[0];\r\n\r\n            // put part of the pane-name into the button-labels\r\n            if (parentPane.length > 0) {\r\n                var paneName = parentPane.attr(\"id\") || \"\";\r\n                if (paneName.length > 4) paneName = paneName.substr(4);\r\n                $quickE.modActions.filter(\"[titleTemplate]\").each(function () {\r\n                    var t = $(this);\r\n                    t.attr(\"title\", t.attr(\"titleTemplate\").replace(\"{0}\", paneName));\r\n                });\r\n            }\r\n\r\n            $quickE.positionAndAlign($quickE.main, alignTo, true);\r\n\r\n            // Keep current block as current on menu\r\n            $quickE.main.actionsForCb = $quickE.nearestCb ? $quickE.nearestCb.element : null;\r\n            $quickE.main.actionsForModule = $quickE.nearestMod ? $quickE.nearestMod.element : null;\r\n            $quickE.main.parentContainer = parentContainer;\r\n            $(parentContainer).addClass(highlightClass);\r\n        } else {\r\n            $quickE.main.parentContainer = null;\r\n            $quickE.main.hide();\r\n        }\r\n\r\n        // if previously a parent-pane was highlighted, un-highlight it now\r\n        if (oldParent && oldParent !== $quickE.main.parentContainer)\r\n            $(oldParent).removeClass(highlightClass);\r\n    };\r\n\r\n    // Return the nearest element to the mouse cursor from elements (jQuery elements)\r\n    $quickE.findNearest = function (elements, position) {\r\n        var maxDistance = 30; // Defines the maximal distance of the cursor when the menu is displayed\r\n\r\n        var nearestItem = null;\r\n        var nearestDistance = maxDistance;\r\n\r\n        var posX = position.x + $quickE.win.scrollLeft();\r\n        var posY = position.y + $quickE.win.scrollTop();\r\n\r\n        // Find nearest element\r\n        elements.each(function () {\r\n            var e = $quickE.getCoordinates($(this));\r\n\r\n            // First check x coordinates - must be within container\r\n            if (posX < e.x || posX > e.x + e.w)\r\n                return;\r\n\r\n            // Check if y coordinates are within boundaries\r\n            var distance = Math.abs(posY - e.yh);\r\n\r\n            if (distance < maxDistance && distance < nearestDistance) {\r\n                nearestItem = e;\r\n                nearestDistance = distance;\r\n            }\r\n        });\r\n\r\n\r\n        return nearestItem;\r\n    };\r\n\r\n    $quickE.getCoordinates = function (element) {\r\n        return {\r\n            element: element,\r\n            x: element.offset().left,\r\n            w: element.width(),\r\n            y: element.offset().top,\r\n            // For content-block ITEMS, the menu must be visible at the end\r\n            // For content-block-LISTS, the menu must be at top\r\n            yh: element.offset().top + (element.is($quickE.selectors.eitherCbOrMod) ? element.height() : 0)\r\n        };\r\n    };\r\n\r\n});\n$(function () {\r\n    $quickE.enable = function () {\r\n        // build all toolbar html-elements\r\n        $quickE.prepareToolbarInDom();\r\n\r\n        // Cache the panes (because panes can't change dynamically)\r\n        $quickE.initPanes();\r\n    };\r\n\r\n    // start watching for mouse-move\r\n    $quickE.watchMouse = function() {\r\n        var refreshTimeout = null;\r\n        $(\"body\").on(\"mousemove\", function (e) {\r\n            if (refreshTimeout === null)\r\n                refreshTimeout = window.setTimeout(function() {\r\n                    requestAnimationFrame(function() {\r\n                        $quickE.refresh(e);\r\n                        refreshTimeout = null;\r\n                    });\r\n                }, 20);\r\n        });\r\n    };\r\n\r\n    $quickE.start = function() {\r\n        try {\r\n            $quickE._readPageConfig();\r\n            if ($quickE.config.enable) {\r\n                // initialize first body-offset\r\n                $quickE.bodyOffset = $quickE.getBodyPosition();\r\n\r\n                $quickE.enable();\r\n\r\n                $quickE.toggleParts();\r\n\r\n                $quickE.watchMouse();\r\n            }\r\n        } catch (e) {\r\n            console.error(\"couldn't start quick-edit\", e);\r\n        }\r\n    };\r\n\r\n    // cache the panes which can contain modules\r\n    $quickE.initPanes = function () {\r\n        $quickE.cachedPanes = $($quickE.selectors.mod.listSelector);\r\n        $quickE.cachedPanes.addClass(\"sc-cb-pane-glow\");\r\n    };\r\n\r\n    // enable/disable module/content-blocks as configured\r\n    $quickE.toggleParts = function () {\r\n        //// content blocks actions\r\n        //$quickE.cbActions.toggle($quickE.config.innerBlocks.enable);\r\n\r\n        //// module actions\r\n        //$quickE.modActions.hide($quickE.config.modules.enable);\r\n    };\r\n\r\n    // reset the quick-edit\r\n    // for example after ajax-loading a content-block, which may cause changed configurations\r\n    $quickE.reset = function() {\r\n        $quickE._readPageConfig();\r\n        $quickE.toggleParts();\r\n    };\r\n\r\n    // run on-load\r\n    $($quickE.start);\r\n});\n/*\r\n * Author: Alex Gibson\r\n * https://github.com/alexgibson/shake.js\r\n * License: MIT license\r\n */\r\n\r\n(function(global, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(function() {\r\n            return factory(global, global.document);\r\n        });\r\n    } else if (typeof module !== 'undefined' && module.exports) {\r\n        module.exports = factory(global, global.document);\r\n    } else {\r\n        global.Shake = factory(global, global.document);\r\n    }\r\n} (typeof window !== 'undefined' ? window : this, function (window, document) {\r\n\r\n    'use strict';\r\n\r\n    function Shake(options) {\r\n        //feature detect\r\n        this.hasDeviceMotion = 'ondevicemotion' in window;\r\n\r\n        this.options = {\r\n            threshold: 15, //default velocity threshold for shake to register\r\n            timeout: 1000,\r\n            callback: null // callback - will only be used if provided, otherwise generate event // function() {}//default interval between events\r\n        };\r\n\r\n        if (typeof options === 'object') {\r\n            for (var i in options) {\r\n                if (options.hasOwnProperty(i)) {\r\n                    this.options[i] = options[i];\r\n                }\r\n            }\r\n        }\r\n\r\n        //use date to prevent multiple shakes firing\r\n        this.lastTime = new Date();\r\n\r\n        //accelerometer values\r\n        this.lastX = null;\r\n        this.lastY = null;\r\n        this.lastZ = null;\r\n    }\r\n\r\n    //reset timer values\r\n    Shake.prototype.reset = function () {\r\n        this.lastTime = new Date();\r\n        this.lastX = null;\r\n        this.lastY = null;\r\n        this.lastZ = null;\r\n    };\r\n\r\n    //start listening for devicemotion\r\n    Shake.prototype.start = function () {\r\n        this.reset();\r\n        if (this.hasDeviceMotion) {\r\n            window.addEventListener('devicemotion', this, false);\r\n        }\r\n    };\r\n\r\n    //stop listening for devicemotion\r\n    Shake.prototype.stop = function () {\r\n        if (this.hasDeviceMotion) {\r\n            window.removeEventListener('devicemotion', this, false);\r\n        }\r\n        this.reset();\r\n    };\r\n\r\n    //calculates if shake did occur\r\n    Shake.prototype.devicemotion = function (e) {\r\n        var current = e.accelerationIncludingGravity;\r\n        var currentTime;\r\n        var timeDifference;\r\n        var deltaX = 0;\r\n        var deltaY = 0;\r\n        var deltaZ = 0;\r\n\r\n        if ((this.lastX === null) && (this.lastY === null) && (this.lastZ === null)) {\r\n            this.lastX = current.x;\r\n            this.lastY = current.y;\r\n            this.lastZ = current.z;\r\n            return;\r\n        }\r\n\r\n        deltaX = Math.abs(this.lastX - current.x);\r\n        deltaY = Math.abs(this.lastY - current.y);\r\n        deltaZ = Math.abs(this.lastZ - current.z);\r\n\r\n        if (((deltaX > this.options.threshold) && (deltaY > this.options.threshold)) || ((deltaX > this.options.threshold) && (deltaZ > this.options.threshold)) || ((deltaY > this.options.threshold) && (deltaZ > this.options.threshold))) {\r\n            //calculate time in milliseconds since last shake registered\r\n            currentTime = new Date();\r\n            timeDifference = currentTime.getTime() - this.lastTime.getTime();\r\n            \r\n            if (timeDifference > this.options.timeout) {\r\n                // once triggered, execute  the callback\r\n                if( typeof this.options.callback === 'function' ) {\r\n                    this.options.callback();\r\n                }\r\n                else\r\n                    console.log(\"shake event without callback detected\");\r\n                this.lastTime = new Date();\r\n            }\r\n        }\r\n\r\n        this.lastX = current.x;\r\n        this.lastY = current.y;\r\n        this.lastZ = current.z;\r\n    };\r\n\r\n    //event handler\r\n    Shake.prototype.handleEvent = function (e) {\r\n        if (typeof (this[e.type]) === 'function') {\r\n            return this[e.type](e);\r\n        }\r\n    };\r\n\r\n    return Shake;\r\n}));\r\n\n(function () {\r\n    \r\n    // prevent propagation of the click (if menu was clicked)\r\n    $($2sxc.c.sel.scMenu /*\".sc-menu\"*/).click(function (e) {\r\n        e.stopPropagation();\r\n    });\r\n})();\n// enable shake detection on all toolbars\r\n$(function () {\r\n\r\n    // this will add a css-class to auto-show all toolbars (or remove it again)\r\n    function toggleAllToolbars() {\r\n        $(document.body).toggleClass('sc-tb-show-all');\r\n    }\r\n    \r\n    // start shake-event monitoring, which will then generate a window-event\r\n    (new Shake({ callback: toggleAllToolbars })).start();\r\n});\n// the toolbar manager is an internal helper\r\n// taking care of toolbars, buttons etc.\r\n(function () {\r\n    /**\r\n     * Toolbar manager for the whole page - basically a set of APIs\r\n     */\r\n    $2sxc._toolbarManager = {\r\n\r\n        // internal constants\r\n        cDisableAttrName: \"data-disable-toolbar\"\r\n    };\r\n})();\n(function () {\r\n    // quick debug - set to false if not needed for production\r\n    var dbg = false;\r\n\r\n    // default / fallback settings for toolbars when nothings is specified\r\n    var settingsForEmptyToolbar = {\r\n        hover: 'left',\r\n        autoAddMore: 'left'\r\n    };\r\n\r\n    Object.assign($2sxc._toolbarManager, {\r\n        buildToolbars: buildToolbars,\r\n        disable: disable,\r\n        isDisabled: isDisabled\r\n    });\r\n\r\n    return;\r\n\r\n    // generate an empty / fallback toolbar tag\r\n    function generateFallbackToolbar() {\r\n        var settingsString = JSON.stringify(settingsForEmptyToolbar);\r\n        return $(\"<ul class='sc-menu' toolbar='' settings='\" + settingsString + \"'/>\");\r\n    }\r\n\r\n    // find current toolbars inside this wrapper-tag\r\n    function getToolbarTags(parentTag) {\r\n        var allInner = $(\".sc-menu[toolbar],.sc-menu[data-toolbar]\", parentTag);\r\n\r\n        // return only those, which don't belong to a sub-item\r\n        var res = allInner.filter(function (i, e) {\r\n            return $(e).closest(\".sc-content-block\")[0] === parentTag[0];\r\n        });\r\n        if (dbg) console.log(\"found toolbars for parent\", parentTag, res);\r\n        return res;\r\n    }\r\n\r\n    // create a process-toolbar command to generate toolbars inside a tag\r\n    function buildToolbars(parentTag, optionalId) {\r\n        parentTag = $(parentTag || \".DnnModule-\" + optionalId);\r\n\r\n        // if something says the toolbars are disabled, then skip\r\n        if (parentTag.attr($2sxc._toolbarManager.cDisableAttrName)) return;\r\n\r\n        // todo: change mechanism to not render toolbar, this uses a secret class name which the toolbar shouldn't know\r\n        // don't add, if it is has un-initialized content\r\n        // 2017-09-08 2dm disabled this, I believe the bootstrapping should never call this any more, if sc-uninitialized. if ok, then delete this in a few days\r\n        //var disableAutoAdd = $(\".sc-uninitialized\", parentTag).length !== 0;\r\n\r\n        var toolbars = getToolbarTags(parentTag);\r\n\r\n        // no toolbars found, must help a bit because otherwise editing is hard\r\n        if (toolbars.length === 0) { // && !disableAutoAdd) {\r\n            if (dbg) console.log(\"didn't find toolbar, so will auto-create\", parentTag);\r\n\r\n            var outsideCb = !parentTag.hasClass($2sxc.c.cls.scCb); // \"sc-content-block\");\r\n            var contentTag = outsideCb ? parentTag.find(\"div.sc-content-block\") : parentTag;\r\n            contentTag.addClass($2sxc.c.cls.scElm); // \"sc-element\");\r\n\r\n            contentTag.prepend(generateFallbackToolbar());\r\n            toolbars = getToolbarTags(parentTag);\r\n        }\r\n\r\n        toolbars.each(function initToolbar() {\r\n            var tag = $(this),\r\n                data = null,\r\n                toolbarConfig, toolbarSettings, at = $2sxc.c.attr;\r\n\r\n            try {\r\n                data = tag.attr(at.toolbar) || tag.attr(at.toolbarData) || \"{}\";\r\n                toolbarConfig = JSON.parse(data);\r\n                data = tag.attr(at.settings) || tag.attr(at.settingsData) || \"{}\";\r\n                toolbarSettings = JSON.parse(data);\r\n                if (toolbarConfig === {} && toolbarSettings === {})\r\n                    toolbarSettings = settingsForEmptyToolbar;\r\n            } catch (err) {\r\n                console\r\n                    .error(\"error in settings JSON - probably invalid - make sure you also quote your properties like \\\"name\\\": ...\", data, err);\r\n                return;\r\n            }\r\n\r\n            try {\r\n                tag.replaceWith($2sxc(tag).manage.getToolbar(toolbarConfig, toolbarSettings));\r\n            } catch (err2) {\r\n                // note: errors happen a lot on custom toolbars, amke sure the others are still rendered\r\n                console.error(\"error creating toolbar - will skip this one\", err2);\r\n            }\r\n        });\r\n    }\r\n    \r\n    function disable(tag) {\r\n        tag = $(tag);\r\n        tag.attr($2sxc._toolbarManager.cDisableAttrName, true);\r\n    }\r\n\r\n    function isDisabled(sxc) {\r\n        var tag = $($2sxc._manage.getTag(sxc));\r\n        return !!tag.attr($2sxc._toolbarManager.cDisableAttrName);\r\n    }\r\n})();\n(function () {\r\n    $2sxc._toolbarManager.generateButtonHtml = generateButtonHtml;\r\n    return;\r\n\r\n    // does some clean-up work on a button-definition object\r\n    // because the target item could be specified directly, or in a complex internal object called entity\r\n    function flattenActionDefinition(actDef) {\r\n        if (!actDef.entity || !actDef.entity._2sxcEditInformation) return;\r\n\r\n        var editInfo = actDef.entity._2sxcEditInformation;\r\n        actDef.useModuleList = (editInfo.sortOrder !== undefined); // has sort-order, so use list\r\n        if (editInfo.entityId !== undefined) actDef.entityId = editInfo.entityId;\r\n        if (editInfo.sortOrder !== undefined) actDef.sortOrder = editInfo.sortOrder;\r\n        delete actDef.entity; // clean up edit-info\r\n    }\r\n\r\n    // generate the html for a button\r\n    // Expects: instance sxc, action-definition, + group-index in which the button is shown\r\n    function generateButtonHtml(sxc, actDef, groupIndex) {\r\n\r\n        // if the button belongs to a content-item, move the specs up to the item into the settings-object\r\n        flattenActionDefinition(actDef);\r\n\r\n        // retrieve configuration for this button\r\n        var showClasses = \"group-\" + groupIndex + (actDef.disabled ? \" disabled\" : \"\"),\r\n            classesList = (actDef.classes || \"\").split(\",\"),\r\n            box = $(\"<div/>\"),\r\n            symbol = $(\"<i class=\\\"\" + actDef.icon + \"\\\" aria-hidden=\\\"true\\\"></i>\"),\r\n            onclick = actDef.disabled ?\r\n            \"\" :\r\n            \"$2sxc(\" + sxc.id + \", \" + sxc.cbid + \").manage.run(\" + JSON.stringify(actDef.command) + \", event);\";\r\n\r\n        for (var c = 0; c < classesList.length; c++) showClasses += \" \" + classesList[c];\r\n\r\n        var button = $(\"<a />\", {\r\n            'class': \"sc-\" + actDef.action + \" \" + showClasses +\r\n                (actDef.dynamicClasses ? \" \" + actDef.dynamicClasses(actDef) : \"\"),\r\n            'onclick': onclick,\r\n            'data-i18n': \"[title]\" + actDef.title\r\n        });\r\n        button.html(box.html(symbol));\r\n        return button[0].outerHTML;\r\n    }\r\n})();\n(function () {\r\n    var tbManager = $2sxc._toolbarManager;\r\n    $2sxc._toolbarManager.generateToolbarHtml = generateToolbarHtml;\r\n    return;\r\n\r\n    function generateToolbarHtml(sxc, tbConfig, moreSettings) {\r\n        // if it has an action or is an array, keep that. Otherwise get standard buttons\r\n        tbConfig = tbConfig || {}; // if null/undefined, use empty object\r\n        var btnList = tbConfig;\r\n        if (!tbConfig.action && !tbConfig.groups && !tbConfig.buttons && !Array.isArray(tbConfig))\r\n            btnList = tbManager.standardButtons(sxc.manage._user.canDesign /* editContext.User.CanDesign */ , tbConfig);\r\n\r\n        // whatever we had, if more settings were provided, override with these...\r\n        var tlbDef = tbManager.buttonHelpers.buildFullDefinition(btnList, sxc.manage._commands.commands, sxc.manage._instanceConfig /* tb.config */ , moreSettings);\r\n        var btnGroups = tlbDef.groups;\r\n        var behaviourClasses = \" sc-tb-hover-\" + tlbDef.settings.hover + \" sc-tb-show-\" + tlbDef.settings.show;\r\n\r\n        // todo: these settings assume it's not in an array...\r\n        var tbClasses = \"sc-menu group-0 \" + behaviourClasses + \" \" +\r\n            ((tbConfig.sortOrder === -1) ? \" listContent\" : \"\") +\r\n            (tlbDef.settings.classes ? \" \" + tlbDef.settings.classes : \"\");\r\n        var toolbar = $(\"<ul />\", {\r\n            'class': tbClasses,\r\n            'onclick': \"var e = arguments[0] || window.event; e.stopPropagation();\"\r\n        });\r\n\r\n        for (var i = 0; i < btnGroups.length; i++) {\r\n            var btns = btnGroups[i].buttons;\r\n            for (var h = 0; h < btns.length; h++)\r\n                toolbar.append($(\"<li />\").append($(tbManager.generateButtonHtml(sxc, btns[h], i))));\r\n        }\r\n\r\n        toolbar.attr(\"group-count\", btnGroups.length);\r\n        return toolbar[0].outerHTML;\r\n    }\r\n})();\n// the toolbar manager is an internal helper\r\n// taking care of toolbars, buttons etc.\r\n(function () {\r\n\r\n    // ToDo: refactor to avoid side-effects\r\n    var tools = $2sxc._toolbarManager.buttonHelpers = {\r\n\r\n        defaultSettings: {\r\n            autoAddMore: null,     // null | \"right\" | \"start\" | true\r\n            hover: \"right\",         // right | left | none\r\n            show: \"hover\",          // always | hover\r\n            // order or reverse, still thinking about this --> order: \"default\"    // default | reverse\r\n        },\r\n\r\n        // take any common input format and convert it to a full toolbar-structure definition\r\n        // can handle the following input formats (the param unstructuredConfig):\r\n        // complete tree (detected by \"groups): { groups: [ {}, {}], name: ..., defaults: {...} } \r\n        // group of buttons (detected by \"buttons): { buttons: \"...\" | [], name: ..., ... }\r\n        // list of buttons (detected by IsArray with action): [ { action: \"...\" | []}, { action: \"\"|[]} ]\r\n        // button (detected by \"command\"): { command: \"\"|[], icon: \"..\", ... }\r\n        // just a command (detected by \"action\"): { entityId: 17, action: \"edit\" }\r\n        // array of commands: [{entityId: 17, action: \"edit\"}, {contentType: \"blog\", action: \"new\"}]\r\n        buildFullDefinition: function (unstructuredConfig, allActions, instanceConfig, moreSettings) {\r\n            var fullConfig = tools.ensureDefinitionTree(unstructuredConfig, moreSettings);\r\n\r\n            // ToDo: don't use console.log in production\r\n            if (unstructuredConfig.debug) console.log(\"toolbar: detailed debug on; start build full Def\");\r\n            tools.expandButtonGroups(fullConfig, allActions);\r\n            tools.removeDisableButtons(fullConfig, instanceConfig);\r\n            if (fullConfig.debug) console.log(\"after remove: \", fullConfig);\r\n\r\n            tools.customize(fullConfig);\r\n\r\n            return fullConfig;\r\n        },\r\n\r\n        //#region build initial toolbar object\r\n        // this will take an input which could already be a tree, but it could also be a \r\n        // button-definition, or just a string, and make sure that afterwards it's a tree with groups\r\n        // the groups could still be in compact form, or already expanded, dependending on the input\r\n        // output is object with:\r\n        // - groups containing buttons[], but buttons could still be very flat\r\n        // - defaults, already officially formatted\r\n        // - params, officially formatted \r\n        ensureDefinitionTree: function (original, moreSettings) {\r\n            // original is null/undefined, just return empty set\r\n            if (!original) throw (\"preparing toolbar, with nothing to work on: \" + original);\r\n\r\n            // ensure that if it's just actions or buttons, they are then processed as arrays with 1 entry\r\n            if (!Array.isArray(original) && (original.action || original.buttons)) original = [original];\r\n\r\n            // ensure that arrays of actions or buttons are re-mapped to the right structure node\r\n            if (Array.isArray(original) && original.length) {\r\n                // an array of items having buttons, so it must be button-groups\r\n                if (original[0].buttons)\r\n                    original.groups = original; // move \"down\"\r\n\r\n                // array of items having an action, so these are buttons\r\n                else if (original[0].command || original[0].action)\r\n                    original = { groups: [{ buttons: original }] };\r\n                else\r\n                    console.warn(\"toolbar tried to build toolbar but couldn't detect type of this:\", original);\r\n            }\r\n\r\n            // build an object with this structure\r\n            return {\r\n                name: original.name || \"toolbar\", // name, no real use\r\n                debug: original.debug || false, // show more debug info\r\n                groups: original.groups || [], // the groups of buttons\r\n                defaults: original.defaults || {}, // the button defaults like icon, etc.\r\n                params: original.params || {}, // these are the default command parameters\r\n                settings: $2sxc._lib.extend({}, tools.defaultSettings, original.settings, moreSettings)\r\n            };\r\n        },\r\n        //#endregion inital toolbar object\r\n\r\n        // this will traverse a groups-tree and expand each group\r\n        // so if groups were just strings like \"edit,new\" or compact buttons, they will be expanded afterwards\r\n        expandButtonGroups: function (fullSet, actions) { //, itemSettings) {\r\n            // by now we should have a structure, let's check/fix the buttons\r\n            for (var g = 0; g < fullSet.groups.length; g++) {\r\n                // expand a verb-list like \"edit,new\" into objects like [{ action: \"edit\" }, {action: \"new\"}]\r\n                tools.expandButtonList(fullSet.groups[g], fullSet.settings);\r\n\r\n                // fix all the buttons\r\n                var btns = fullSet.groups[g].buttons;\r\n                if (Array.isArray(btns))\r\n                    for (var b = 0; b < btns.length; b++) {\r\n                        var btn = btns[b];\r\n                        if (!(actions[btn.command.action]))\r\n                            console.warn(\"warning: toolbar-button with unknown action-name:\", btn.command.action);\r\n                        $2sxc._lib.extend(btn.command, fullSet.params); // enhance the button with settings for this instance\r\n                        // tools.addCommandParams(fullSet, btn);\r\n                        tools.addDefaultBtnSettings(btn, fullSet.groups[g], fullSet, actions);      // ensure all buttons have either own settings, or the fallbacks\r\n                    }\r\n            }\r\n        },\r\n\r\n        // take a list of buttons (objects OR strings)\r\n        // and convert to proper array of buttons with actions\r\n        // on the in is a object with buttons, which are either:\r\n        // - a string like \"edit\" or multi-value \"layout,more\"\r\n        // - an array of such strings incl. optional complex objects which are\r\n        expandButtonList: function (root, settings) {\r\n            // var root = grp; // the root object which has all params of the command\r\n            var btns = [], sharedProperties = null;\r\n\r\n            // convert compact buttons (with multi-verb action objects) into own button-objects\r\n            // important because an older syntax allowed {action: \"new,edit\", entityId: 17}\r\n            if (Array.isArray(root.buttons)) {\r\n                for (var b = 0; b < root.buttons.length; b++) {\r\n                    var btn = root.buttons[b];\r\n                    if (typeof btn.action === \"string\" && btn.action.indexOf(\",\") > -1) { // if btns. is neither array nor string, it's a short-hand with action names\r\n                        var acts = btn.action.split(\",\");\r\n                        for (var a = 0; a < acts.length; a++) {\r\n                            btns.push($.extend(true, {}, btn, { action: acts[a] }));\r\n                        }\r\n                    } else\r\n                        btns.push(btn);\r\n                }\r\n            } else if (typeof root.buttons === \"string\") {\r\n                btns = root.buttons.split(\",\");\r\n                sharedProperties = $.extend({}, root); // inherit all fields used in the button\r\n                delete sharedProperties.buttons; // this one's not needed\r\n                delete sharedProperties.name; // this one's not needed\r\n                delete sharedProperties.action; //\r\n            } else {\r\n                btns = root.buttons;\r\n            }\r\n\r\n            // optionally add a more-button in each group\r\n            if (settings.autoAddMore) {\r\n                if (settings.autoAddMore === \"right\")\r\n                    btns.push(\"more\");\r\n                else {\r\n                    btns.unshift(\"more\");\r\n                }\r\n            }\r\n\r\n            // add each button - check if it's already an object or just the string\r\n            for (var v = 0; v < btns.length; v++) {\r\n                btns[v] = tools.expandButtonConfig(btns[v], sharedProperties);\r\n                // todo: refactor this out, not needed any more as they are all together now\r\n                // btns[v].group = root;// grp;    // attach group reference, needed for fallback etc.\r\n            }\r\n            root.buttons = btns; // ensure the internal def is also an array now\r\n        },\r\n\r\n        // takes an object like \"actionname\" or { action: \"actionname\", ... } and changes it to a { command: { action: \"actionname\" }, ... }\r\n        expandButtonConfig: function (original, sharedProps) {\r\n            // prevent multiple inits\r\n            if (original._expanded || original.command)\r\n                return original;\r\n\r\n            // if just a name, turn into a command\r\n            if (typeof original === \"string\")\r\n                original = { action: original };\r\n\r\n            // if it's a command w/action, wrap into command + trim\r\n            if (typeof original.action === \"string\") {\r\n                original.action = original.action.trim();\r\n                original = { command: original };\r\n            }\r\n            // some clean-up\r\n            delete original.action;  // remove the action property\r\n            original._expanded = true;\r\n            return original;\r\n        },\r\n\r\n        // remove buttons which are not valid based on add condition\r\n        removeDisableButtons: function (full, config) {\r\n            var btnGroups = full.groups;\r\n            for (var g = 0; g < btnGroups.length; g++) {\r\n                var btns = btnGroups[g].buttons;\r\n                removeUnfitButtons(btns, config);\r\n                disableButtons(btns, config);\r\n\r\n                // remove the group, if no buttons left, or only \"more\"\r\n                if (btns.length === 0 || (btns.length === 1 && btns[0].command.action === \"more\"))\r\n                    btnGroups.splice(g--, 1);   // remove, and decrement counter\r\n            }\r\n\r\n            function removeUnfitButtons(btns, config) {\r\n                for (var i = 0; i < btns.length; i++) {\r\n                    //var add = btns[i].showCondition;\r\n                    //if (add !== undefined)\r\n                    //    if (typeof (add) === \"function\" ? !add(btns[i].command, config) : !add)\r\n                    if (!tools.evalPropOrFunction(btns[i].showCondition, btns[i].command, config, true))\r\n                        btns.splice(i--, 1);\r\n                }\r\n            }\r\n\r\n            function disableButtons(btns, config) {\r\n                for (var i = 0; i < btns.length; i++) \r\n                    btns[i].disabled = tools.evalPropOrFunction(btns[i].disabled, btns[i].command, config, false);\r\n            }\r\n\r\n        },\r\n\r\n        btnProperties: [\r\n            \"classes\",\r\n            \"icon\",\r\n            \"title\",\r\n            \"dynamicClasses\",\r\n            \"showCondition\",\r\n            \"disabled\"\r\n        ],\r\n        prvProperties: [\r\n            \"defaults\",\r\n            \"params\",\r\n            \"name\"\r\n        ],\r\n\r\n        // enhance button-object with default icons, etc.\r\n        addDefaultBtnSettings: function (btn, group, groups, actions) {\r\n            for (var d = 0; d < tools.btnProperties.length; d++)\r\n                fallbackBtnSetting(btn, actions, tools.btnProperties[d]);\r\n\r\n            // configure missing button properties with various fallback options\r\n            function fallbackBtnSetting(btn, actions, propName) {\r\n                btn[propName] = btn[propName]   // by if already defined, use the already defined propery\r\n                    || (group.defaults && group.defaults[propName])     // if the group has defaults, try use use that property\r\n                    || (groups && groups.defaults && groups.defaults[propName])     // if the group has defaults, try use use that property\r\n                    || (actions[btn.command.action] && actions[btn.command.action][propName]); // if there is an action, try to use that property name\r\n            }\r\n        },\r\n\r\n        customize: function (toolbar) {\r\n            //if (!toolbar.settings) return;\r\n            //var set = toolbar.settings;\r\n            //if (set.autoAddMore) {\r\n            //    console.log(\"auto-more\");\r\n            //    var grps = toolbar.groups;\r\n            //    for (var g = 0; g < grps.length; g++) {\r\n            //        var btns = grps[g];\r\n            //        for (var i = 0; i < btns.length; i++) {\r\n            //        }\r\n            //    }\r\n            //}\r\n        },\r\n\r\n        evalPropOrFunction: function(propOrFunction, settings, config, fallback) {\r\n            if (propOrFunction === undefined || propOrFunction === null)\r\n                return fallback;\r\n            return typeof (propOrFunction) === \"function\" ? propOrFunction(settings, config) : propOrFunction;\r\n        }\r\n    };\r\n\r\n})();\n// the toolbar manager is an internal helper\r\n// taking care of toolbars, buttons etc.\r\n(function () {\r\n    $2sxc._toolbarManager.standardButtons = standardButtons;\r\n    return;\r\n    \r\n    function standardButtons(canDesign, sharedParameters) {\r\n        // create a deep-copy of the original object\r\n        var btns = $.extend(true, {}, $2sxc._toolbarManager.toolbarTemplate);\r\n        btns.params = sharedParameters && (Array.isArray(sharedParameters) && sharedParameters[0]) || sharedParameters;\r\n        if (!canDesign) btns.groups.splice(2, 1); // remove this menu\r\n        return btns;\r\n    }\r\n})();\n// the default / initial buttons in a standard toolbar\r\n(function () {\r\n\r\n    // ToDo: refactor to avoid side-effects\r\n    $2sxc._toolbarManager.toolbarTemplate = {\r\n        groups: [\r\n            // ToDo: remove dead code\r\n            //{\r\n            //    name: \"test\",\r\n            //    buttons: [\r\n            //        {\r\n            //            action: \"edit\",\r\n            //            icon: \"icon-sxc-code\",\r\n            //            title: \"just quick edit!\"\r\n            //        },\r\n            //        \"inexisting-action\",\r\n            //        \"edit\",\r\n            //        {\r\n            //            action: \"publish\",\r\n            //            showCondition: true,\r\n            //            title: \"forced publish button\"\r\n            //        },\r\n            //        {\r\n            //            command: {\r\n            //                action: \"custom\",\r\n            //                customCode: \"alert('custom button!')\"\r\n            //            }\r\n            //        },\r\n            //        \"more\"\r\n            //    ]\r\n            //},\r\n            {\r\n                name: \"default\",\r\n                buttons: \"edit,new,metadata,publish,layout\"\r\n            }, {\r\n                name: \"list\",\r\n                buttons: \"add,remove,moveup,movedown,instance-list,replace,item-history\"\r\n            }, {\r\n                name: \"data\",\r\n                buttons: \"delete\"\r\n            }, {\r\n                name: \"instance\",\r\n                buttons: \"template-develop,template-settings,contentitems,template-query,contenttype\",\r\n                defaults: {\r\n                    classes: \"group-pro\"\r\n                }\r\n            }, {\r\n                name: \"app\",\r\n                buttons: \"app,app-settings,app-resources,zone\",\r\n                defaults: {\r\n                    classes: \"group-pro\"\r\n                }\r\n            }\r\n        ],\r\n        defaults: {},\r\n        params: {},\r\n        settings: {\r\n            autoAddMore: \"right\",\r\n            // these are defaults, don't set again\r\n            // hover: \"right\",\r\n        }\r\n    };\r\n})();\n// initialize the translation system; ensure toolbars etc. are translated\r\n(function () {\r\n    var initialized = false;\r\n\r\n    $2sxc._translateInit = function (manage) {\r\n        if (initialized) return;\r\n        window.i18next\r\n            .use(window.i18nextXHRBackend)\r\n            .init({\r\n                lng: manage._editContext.Language.Current.substr(0,2), // \"en\",\r\n                fallbackLng: \"en\",\r\n                whitelist: [\"en\", \"de\", \"fr\", \"it\", \"uk\", \"nl\"],\r\n                preload: [\"en\"],\r\n                backend: {\r\n                    loadPath: manage._editContext.Environment.SxcRootUrl + \"desktopmodules/tosic_sexycontent/dist/i18n/inpage-{{lng}}.js\"\r\n                }\r\n            }, function (err, t) {\r\n                // for options see\r\n                // https://github.com/i18next/jquery-i18next#initialize-the-plugin\r\n                jqueryI18next.init(i18next, $);\r\n                // start localizing, details:\r\n                // https://github.com/i18next/jquery-i18next#usage-of-selector-function\r\n                $(\"ul.sc-menu\").localize(); // inline toolbars\r\n                $(\".sc-i18n\").localize();   // quick-insert menus\r\n            });\r\n        initialized = true;\r\n    };\r\n})();\r\n\n// provide an official translate API for 2sxc - currently internally using a jQuery library, but this may change\r\n(function () {\r\n    $2sxc.translate = function(key) {\r\n        // return key;\r\n        return ($.t && $.t(key)) || key;\r\n    };\r\n})();\n!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"i18next\",t):e.i18next=t()}(this,function(){\"use strict\";function e(e){return null==e?\"\":\"\"+e}function t(e,t,n){e.forEach(function(e){t[e]&&(n[e]=t[e])})}function n(e,t,n){function o(e){return e&&e.indexOf(\"###\")>-1?e.replace(/###/g,\".\"):e}for(var r=\"string\"!=typeof t?[].concat(t):t.split(\".\");r.length>1;){if(!e)return{};var i=o(r.shift());!e[i]&&n&&(e[i]=new n),e=e[i]}return e?{obj:e,k:o(r.shift())}:{}}function o(e,t,o){var r=n(e,t,Object),i=r.obj,s=r.k;i[s]=o}function r(e,t,o,r){var i=n(e,t,Object),s=i.obj,a=i.k;s[a]=s[a]||[],r&&(s[a]=s[a].concat(o)),r||s[a].push(o)}function i(e,t){var o=n(e,t),r=o.obj,i=o.k;return r?r[i]:void 0}function s(e,t,n){for(var o in t)o in e?\"string\"==typeof e[o]||e[o]instanceof String||\"string\"==typeof t[o]||t[o]instanceof String?n&&(e[o]=t[o]):s(e[o],t[o],n):e[o]=t[o];return e}function a(e){return e.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,\"\\\\$&\")}function l(e){return\"string\"==typeof e?e.replace(/[&<>\"'\\/]/g,function(e){return C[e]}):e}function u(e){return e.interpolation={unescapeSuffix:\"HTML\"},e.interpolation.prefix=e.interpolationPrefix||\"__\",e.interpolation.suffix=e.interpolationSuffix||\"__\",e.interpolation.escapeValue=e.escapeInterpolation||!1,e.interpolation.nestingPrefix=e.reusePrefix||\"$t(\",e.interpolation.nestingSuffix=e.reuseSuffix||\")\",e}function c(e){return e.resStore&&(e.resources=e.resStore),e.ns&&e.ns.defaultNs?(e.defaultNS=e.ns.defaultNs,e.ns=e.ns.namespaces):e.defaultNS=e.ns||\"translation\",e.fallbackToDefaultNS&&e.defaultNS&&(e.fallbackNS=e.defaultNS),e.saveMissing=e.sendMissing,e.saveMissingTo=e.sendMissingTo||\"current\",e.returnNull=!e.fallbackOnNull,e.returnEmptyString=!e.fallbackOnEmpty,e.returnObjects=e.returnObjectTrees,e.joinArrays=\"\\n\",e.returnedObjectHandler=e.objectTreeKeyHandler,e.parseMissingKeyHandler=e.parseMissingKey,e.appendNamespaceToMissingKey=!0,e.nsSeparator=e.nsseparator,e.keySeparator=e.keyseparator,\"sprintf\"===e.shortcutFunction&&(e.overloadTranslationOptionHandler=function(e){for(var t=[],n=1;n<e.length;n++)t.push(e[n]);return{postProcess:\"sprintf\",sprintf:t}}),e.whitelist=e.lngWhitelist,e.preload=e.preload,\"current\"===e.load&&(e.load=\"currentOnly\"),\"unspecific\"===e.load&&(e.load=\"languageOnly\"),e.backend=e.backend||{},e.backend.loadPath=e.resGetPath||\"locales/__lng__/__ns__.json\",e.backend.addPath=e.resPostPath||\"locales/add/__lng__/__ns__\",e.backend.allowMultiLoading=e.dynamicLoad,e.cache=e.cache||{},e.cache.prefix=\"res_\",e.cache.expirationTime=6048e5,e.cache.enabled=!!e.useLocalStorage,e=u(e),e.defaultVariables&&(e.interpolation.defaultVariables=e.defaultVariables),e}function p(e){return e=u(e),e.joinArrays=\"\\n\",e}function f(e){return(e.interpolationPrefix||e.interpolationSuffix||e.escapeInterpolation)&&(e=u(e)),e.nsSeparator=e.nsseparator,e.keySeparator=e.keyseparator,e.returnObjects=e.returnObjectTrees,e}function h(e){e.lng=function(){return S.deprecate(\"i18next.lng() can be replaced by i18next.language for detected language or i18next.languages for languages ordered by translation lookup.\"),e.services.languageUtils.toResolveHierarchy(e.language)[0]},e.preload=function(t,n){S.deprecate(\"i18next.preload() can be replaced with i18next.loadLanguages()\"),e.loadLanguages(t,n)},e.setLng=function(t,n,o){return S.deprecate(\"i18next.setLng() can be replaced with i18next.changeLanguage() or i18next.getFixedT() to get a translation function with fixed language or namespace.\"),\"function\"==typeof n&&(o=n,n={}),n||(n={}),n.fixLng===!0&&o?o(null,e.getFixedT(t)):void e.changeLanguage(t,o)},e.addPostProcessor=function(t,n){S.deprecate(\"i18next.addPostProcessor() can be replaced by i18next.use({ type: 'postProcessor', name: 'name', process: fc })\"),e.use({type:\"postProcessor\",name:t,process:n})}}function g(e){return e.charAt(0).toUpperCase()+e.slice(1)}function d(){var e={};return R.forEach(function(t){t.lngs.forEach(function(n){return e[n]={numbers:t.nr,plurals:P[t.fc]}})}),e}function v(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}function y(){return{debug:!1,ns:[\"translation\"],defaultNS:[\"translation\"],fallbackLng:[\"dev\"],fallbackNS:!1,whitelist:!1,load:\"all\",preload:!1,keySeparator:\".\",nsSeparator:\":\",pluralSeparator:\"_\",contextSeparator:\"_\",saveMissing:!1,saveMissingTo:\"fallback\",missingKeyHandler:!1,postProcess:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:function(){},parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,overloadTranslationOptionHandler:function(e){return{defaultValue:e[1]}},interpolation:{escapeValue:!0,prefix:\"{{\",suffix:\"}}\",unescapePrefix:\"-\",nestingPrefix:\"$t(\",nestingSuffix:\")\",defaultVariables:void 0}}}function b(e){return\"string\"==typeof e.ns&&(e.ns=[e.ns]),\"string\"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),\"string\"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&e.whitelist.indexOf(\"cimode\")<0&&e.whitelist.push(\"cimode\"),e}var m={};m[\"typeof\"]=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol?\"symbol\":typeof e},m.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")},m[\"extends\"]=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},m.inherits=function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},m.possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t},m.slicedToArray=function(){function e(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(l){r=!0,i=l}finally{try{!o&&a[\"return\"]&&a[\"return\"]()}finally{if(r)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}();var x={type:\"logger\",log:function(e){this._output(\"log\",e)},warn:function(e){this._output(\"warn\",e)},error:function(e){this._output(\"error\",e)},_output:function(e,t){console&&console[e]&&console[e].apply(console,Array.prototype.slice.call(t))}},k=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];m.classCallCheck(this,e),this.subs=[],this.init(t,n)}return e.prototype.init=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.prefix=t.prefix||\"i18next:\",this.logger=e||x,this.options=t,this.debug=t.debug!==!1},e.prototype.setDebug=function(e){this.debug=e,this.subs.forEach(function(t){t.setDebug(e)})},e.prototype.log=function(){this.forward(arguments,\"log\",\"\",!0)},e.prototype.warn=function(){this.forward(arguments,\"warn\",\"\",!0)},e.prototype.error=function(){this.forward(arguments,\"error\",\"\")},e.prototype.deprecate=function(){this.forward(arguments,\"warn\",\"WARNING DEPRECATED: \",!0)},e.prototype.forward=function(e,t,n,o){o&&!this.debug||(\"string\"==typeof e[0]&&(e[0]=n+this.prefix+\" \"+e[0]),this.logger[t](e))},e.prototype.create=function(t){var n=new e(this.logger,m[\"extends\"]({prefix:this.prefix+\":\"+t+\":\"},this.options));return this.subs.push(n),n},e}(),S=new k,w=function(){function e(){m.classCallCheck(this,e),this.observers={}}return e.prototype.on=function(e,t){var n=this;e.split(\" \").forEach(function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})},e.prototype.off=function(e,t){var n=this;this.observers[e]&&this.observers[e].forEach(function(){if(t){var o=n.observers[e].indexOf(t);o>-1&&n.observers[e].splice(o,1)}else delete n.observers[e]})},e.prototype.emit=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;t>o;o++)n[o-1]=arguments[o];this.observers[e]&&this.observers[e].forEach(function(e){e.apply(void 0,n)}),this.observers[\"*\"]&&this.observers[\"*\"].forEach(function(t){var o;t.apply(t,(o=[e]).concat.apply(o,n))})},e}(),C={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\",\"/\":\"&#x2F;\"},L=function(e){function t(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],o=arguments.length<=1||void 0===arguments[1]?{ns:[\"translation\"],defaultNS:\"translation\"}:arguments[1];m.classCallCheck(this,t);var r=m.possibleConstructorReturn(this,e.call(this));return r.data=n,r.options=o,r}return m.inherits(t,e),t.prototype.addNamespaces=function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)},t.prototype.removeNamespaces=function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)},t.prototype.getResource=function(e,t,n){var o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],r=o.keySeparator||this.options.keySeparator;void 0===r&&(r=\".\");var s=[e,t];return n&&\"string\"!=typeof n&&(s=s.concat(n)),n&&\"string\"==typeof n&&(s=s.concat(r?n.split(r):n)),e.indexOf(\".\")>-1&&(s=e.split(\".\")),i(this.data,s)},t.prototype.addResource=function(e,t,n,r){var i=arguments.length<=4||void 0===arguments[4]?{silent:!1}:arguments[4],s=this.options.keySeparator;void 0===s&&(s=\".\");var a=[e,t];n&&(a=a.concat(s?n.split(s):n)),e.indexOf(\".\")>-1&&(a=e.split(\".\"),r=t,t=a[1]),this.addNamespaces(t),o(this.data,a,r),i.silent||this.emit(\"added\",e,t,n,r)},t.prototype.addResources=function(e,t,n){for(var o in n)\"string\"==typeof n[o]&&this.addResource(e,t,o,n[o],{silent:!0});this.emit(\"added\",e,t,n)},t.prototype.addResourceBundle=function(e,t,n,r,a){var l=[e,t];e.indexOf(\".\")>-1&&(l=e.split(\".\"),r=n,n=t,t=l[1]),this.addNamespaces(t);var u=i(this.data,l)||{};r?s(u,n,a):u=m[\"extends\"]({},u,n),o(this.data,l,u),this.emit(\"added\",e,t,n)},t.prototype.removeResourceBundle=function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit(\"removed\",e,t)},t.prototype.hasResourceBundle=function(e,t){return void 0!==this.getResource(e,t)},t.prototype.getResourceBundle=function(e,t){return t||(t=this.options.defaultNS),\"v1\"===this.options.compatibilityAPI?m[\"extends\"]({},this.getResource(e,t)):this.getResource(e,t)},t.prototype.toJSON=function(){return this.data},t}(w),N={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,o,r){var i=this;return e.forEach(function(e){i.processors[e]&&(t=i.processors[e].process(t,n,o,r))}),t}},O=function(e){function n(o){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];m.classCallCheck(this,n);var i=m.possibleConstructorReturn(this,e.call(this));return t([\"resourceStore\",\"languageUtils\",\"pluralResolver\",\"interpolator\",\"backendConnector\"],o,i),i.options=r,i.logger=S.create(\"translator\"),i}return m.inherits(n,e),n.prototype.changeLanguage=function(e){e&&(this.language=e)},n.prototype.exists=function(e){var t=arguments.length<=1||void 0===arguments[1]?{interpolation:{}}:arguments[1];return\"v1\"===this.options.compatibilityAPI&&(t=f(t)),void 0!==this.resolve(e,t)},n.prototype.extractFromKey=function(e,t){var n=t.nsSeparator||this.options.nsSeparator;void 0===n&&(n=\":\");var o=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var r=e.split(n);o=r[0],e=r[1]}return\"string\"==typeof o&&(o=[o]),{key:e,namespaces:o}},n.prototype.translate=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(\"object\"!==(\"undefined\"==typeof t?\"undefined\":m[\"typeof\"](t))?t=this.options.overloadTranslationOptionHandler(arguments):\"v1\"===this.options.compatibilityAPI&&(t=f(t)),void 0===e||null===e||\"\"===e)return\"\";\"number\"==typeof e&&(e=String(e)),\"string\"==typeof e&&(e=[e]);var n=t.lng||this.language;if(n&&\"cimode\"===n.toLowerCase())return e[e.length-1];var o=t.keySeparator||this.options.keySeparator||\".\",r=this.extractFromKey(e[e.length-1],t),i=r.key,s=r.namespaces,a=s[s.length-1],l=this.resolve(e,t),u=Object.prototype.toString.apply(l),c=[\"[object Number]\",\"[object Function]\",\"[object RegExp]\"],p=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays;if(l&&\"string\"!=typeof l&&c.indexOf(u)<0&&(!p||\"[object Array]\"!==u)){if(!t.returnObjects&&!this.options.returnObjects)return this.logger.warn(\"accessing an object - but returnObjects options is not enabled!\"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(i,l,t):\"key '\"+i+\" (\"+this.language+\")' returned an object instead of string.\";var h=\"[object Array]\"===u?[]:{};for(var g in l)h[g]=this.translate(\"\"+i+o+g,m[\"extends\"]({joinArrays:!1,ns:s},t));l=h}else if(p&&\"[object Array]\"===u)l=l.join(p),l&&(l=this.extendTranslation(l,i,t));else{var d=!1,v=!1;if(!this.isValidLookup(l)&&t.defaultValue&&(d=!0,l=t.defaultValue),this.isValidLookup(l)||(v=!0,l=i),(v||d)&&(this.logger.log(\"missingKey\",n,a,i,l),this.options.saveMissing)){var y=[];if(\"fallback\"===this.options.saveMissingTo&&this.options.fallbackLng&&this.options.fallbackLng[0])for(var b=0;b<this.options.fallbackLng.length;b++)y.push(this.options.fallbackLng[b]);else\"all\"===this.options.saveMissingTo?y=this.languageUtils.toResolveHierarchy(t.lng||this.language):y.push(t.lng||this.language);this.options.missingKeyHandler?this.options.missingKeyHandler(y,a,i,l):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(y,a,i,l),this.emit(\"missingKey\",y,a,i,l)}l=this.extendTranslation(l,i,t),v&&l===i&&this.options.appendNamespaceToMissingKey&&(l=a+\":\"+i),v&&this.options.parseMissingKeyHandler&&(l=this.options.parseMissingKeyHandler(l))}return l},n.prototype.extendTranslation=function(e,t,n){var o=this;n.interpolation&&this.interpolator.init(n);var r=n.replace&&\"string\"!=typeof n.replace?n.replace:n;this.options.interpolation.defaultVariables&&(r=m[\"extends\"]({},this.options.interpolation.defaultVariables,r)),e=this.interpolator.interpolate(e,r),e=this.interpolator.nest(e,function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return o.translate.apply(o,t)},n),n.interpolation&&this.interpolator.reset();var i=n.postProcess||this.options.postProcess,s=\"string\"==typeof i?[i]:i;return void 0!==e&&s&&s.length&&n.applyPostProcessor!==!1&&(e=N.handle(s,e,t,n,this)),e},n.prototype.resolve=function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=void 0;return\"string\"==typeof e&&(e=[e]),e.forEach(function(e){if(!t.isValidLookup(o)){var r=t.extractFromKey(e,n),i=r.key,s=r.namespaces;t.options.fallbackNS&&(s=s.concat(t.options.fallbackNS));var a=void 0!==n.count&&\"string\"!=typeof n.count,l=void 0!==n.context&&\"string\"==typeof n.context&&\"\"!==n.context,u=n.lngs?n.lngs:t.languageUtils.toResolveHierarchy(n.lng||t.language);s.forEach(function(e){t.isValidLookup(o)||u.forEach(function(r){if(!t.isValidLookup(o)){var s=i,u=[s],c=void 0;a&&(c=t.pluralResolver.getSuffix(r,n.count)),a&&l&&u.push(s+c),l&&u.push(s+=\"\"+t.options.contextSeparator+n.context),a&&u.push(s+=c);for(var p=void 0;p=u.pop();)t.isValidLookup(o)||(o=t.getResource(r,e,p,n))}})})}}),o},n.prototype.isValidLookup=function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&\"\"===e)},n.prototype.getResource=function(e,t,n){var o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return this.resourceStore.getResource(e,t,n,o)},n}(w),j=function(){function e(t){m.classCallCheck(this,e),this.options=t,this.whitelist=this.options.whitelist||!1,this.logger=S.create(\"languageUtils\")}return e.prototype.getLanguagePartFromCode=function(e){if(e.indexOf(\"-\")<0)return e;var t=[\"NB-NO\",\"NN-NO\",\"nb-NO\",\"nn-NO\",\"nb-no\",\"nn-no\"],n=e.split(\"-\");return this.formatLanguageCode(t.indexOf(e)>-1?n[1].toLowerCase():n[0])},e.prototype.formatLanguageCode=function(e){if(\"string\"==typeof e&&e.indexOf(\"-\")>-1){var t=[\"hans\",\"hant\",\"latn\",\"cyrl\",\"cans\",\"mong\",\"arab\"],n=e.split(\"-\");return this.options.lowerCaseLng?n=n.map(function(e){return e.toLowerCase()}):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=g(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),\"sgn\"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=g(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=g(n[2].toLowerCase()))),n.join(\"-\")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e},e.prototype.isWhitelisted=function(e){return\"languageOnly\"===this.options.load&&(e=this.getLanguagePartFromCode(e)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(e)>-1},e.prototype.toResolveHierarchy=function(e,t){var n=this;t=t||this.options.fallbackLng||[],\"string\"==typeof t&&(t=[t]);var o=[],r=function(e){n.isWhitelisted(e)?o.push(e):n.logger.warn(\"rejecting non-whitelisted language code: \"+e)};return\"string\"==typeof e&&e.indexOf(\"-\")>-1?(\"languageOnly\"!==this.options.load&&r(this.formatLanguageCode(e)),\"currentOnly\"!==this.options.load&&r(this.getLanguagePartFromCode(e))):\"string\"==typeof e&&r(this.formatLanguageCode(e)),t.forEach(function(e){o.indexOf(e)<0&&r(n.formatLanguageCode(e))}),o},e}(),R=[{lngs:[\"ach\",\"ak\",\"am\",\"arn\",\"br\",\"fil\",\"gun\",\"ln\",\"mfe\",\"mg\",\"mi\",\"oc\",\"tg\",\"ti\",\"tr\",\"uz\",\"wa\"],nr:[1,2],fc:1},{lngs:[\"af\",\"an\",\"ast\",\"az\",\"bg\",\"bn\",\"ca\",\"da\",\"de\",\"dev\",\"el\",\"en\",\"eo\",\"es\",\"es_ar\",\"et\",\"eu\",\"fi\",\"fo\",\"fur\",\"fy\",\"gl\",\"gu\",\"ha\",\"he\",\"hi\",\"hu\",\"hy\",\"ia\",\"it\",\"kn\",\"ku\",\"lb\",\"mai\",\"ml\",\"mn\",\"mr\",\"nah\",\"nap\",\"nb\",\"ne\",\"nl\",\"nn\",\"no\",\"nso\",\"pa\",\"pap\",\"pms\",\"ps\",\"pt\",\"pt_br\",\"rm\",\"sco\",\"se\",\"si\",\"so\",\"son\",\"sq\",\"sv\",\"sw\",\"ta\",\"te\",\"tk\",\"ur\",\"yo\"],nr:[1,2],fc:2},{lngs:[\"ay\",\"bo\",\"cgg\",\"fa\",\"id\",\"ja\",\"jbo\",\"ka\",\"kk\",\"km\",\"ko\",\"ky\",\"lo\",\"ms\",\"sah\",\"su\",\"th\",\"tt\",\"ug\",\"vi\",\"wo\",\"zh\"],nr:[1],fc:3},{lngs:[\"be\",\"bs\",\"dz\",\"hr\",\"ru\",\"sr\",\"uk\"],nr:[1,2,5],fc:4},{lngs:[\"ar\"],nr:[0,1,2,3,11,100],fc:5},{lngs:[\"cs\",\"sk\"],nr:[1,2,5],fc:6},{lngs:[\"csb\",\"pl\"],nr:[1,2,5],fc:7},{lngs:[\"cy\"],nr:[1,2,3,8],fc:8},{lngs:[\"fr\"],nr:[1,2],fc:9},{lngs:[\"ga\"],nr:[1,2,3,7,11],fc:10},{lngs:[\"gd\"],nr:[1,2,3,20],fc:11},{lngs:[\"is\"],nr:[1,2],fc:12},{lngs:[\"jv\"],nr:[0,1],fc:13},{lngs:[\"kw\"],nr:[1,2,3,4],fc:14},{lngs:[\"lt\"],nr:[1,2,10],fc:15},{lngs:[\"lv\"],nr:[1,2,0],fc:16},{lngs:[\"mk\"],nr:[1,2],fc:17},{lngs:[\"mnk\"],nr:[0,1,2],fc:18},{lngs:[\"mt\"],nr:[1,2,11,20],fc:19},{lngs:[\"or\"],nr:[2,1],fc:2},{lngs:[\"ro\"],nr:[1,2,20],fc:20},{lngs:[\"sl\"],nr:[5,1,2,3],fc:21}],P={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)},5:function(e){return Number(0===e?0:1==e?1:2==e?2:e%100>=3&&10>=e%100?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&4>=e?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:7>e?2:11>e?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&20>e?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(10>e%100||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0===e||e%100>1&&11>e%100?1:e%100>10&&20>e%100?2:3)},20:function(e){return Number(1==e?0:0===e||e%100>0&&20>e%100?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)}},E=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];m.classCallCheck(this,e),this.languageUtils=t,this.options=n,this.logger=S.create(\"pluralResolver\"),this.rules=d()}return e.prototype.addRule=function(e,t){this.rules[e]=t},e.prototype.getRule=function(e){return this.rules[this.languageUtils.getLanguagePartFromCode(e)]},e.prototype.needsPlural=function(e){var t=this.getRule(e);return!(t&&t.numbers.length<=1)},e.prototype.getSuffix=function(e,t){var n=this.getRule(e);if(n){if(1===n.numbers.length)return\"\";var o=n.noAbs?n.plurals(t):n.plurals(Math.abs(t)),r=n.numbers[o];if(2===n.numbers.length&&1===n.numbers[0]&&(2===r?r=\"plural\":1===r&&(r=\"\")),\"v1\"===this.options.compatibilityJSON){if(1===r)return\"\";if(\"number\"==typeof r)return\"_plural_\"+r.toString()}return this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}return this.logger.warn(\"no plural rule found for: \"+e),\"\"},e}(),_=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];m.classCallCheck(this,t),this.logger=S.create(\"interpolator\"),this.init(e,!0)}return t.prototype.init=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];t&&(this.options=e),e.interpolation||(e.interpolation={escapeValue:!0});var n=e.interpolation;this.escapeValue=n.escapeValue,this.prefix=n.prefix?a(n.prefix):n.prefixEscaped||\"{{\",this.suffix=n.suffix?a(n.suffix):n.suffixEscaped||\"}}\",this.unescapePrefix=n.unescapeSuffix?\"\":n.unescapePrefix||\"-\",this.unescapeSuffix=this.unescapePrefix?\"\":n.unescapeSuffix||\"\",this.nestingPrefix=n.nestingPrefix?a(n.nestingPrefix):n.nestingPrefixEscaped||a(\"$t(\"),this.nestingSuffix=n.nestingSuffix?a(n.nestingSuffix):n.nestingSuffixEscaped||a(\")\");var o=this.prefix+\"(.+?)\"+this.suffix;this.regexp=new RegExp(o,\"g\");var r=this.prefix+this.unescapePrefix+\"(.+?)\"+this.unescapeSuffix+this.suffix;this.regexpUnescape=new RegExp(r,\"g\");var i=this.nestingPrefix+\"(.+?)\"+this.nestingSuffix;this.nestingRegexp=new RegExp(i,\"g\")},t.prototype.reset=function(){this.options&&this.init(this.options)},t.prototype.interpolate=function(t,n){function o(e){return e.replace(/\\$/g,\"$$$$\")}for(var r=void 0,s=void 0;r=this.regexpUnescape.exec(t);){var a=i(n,r[1].trim());t=t.replace(r[0],a)}for(;r=this.regexp.exec(t);)s=i(n,r[1].trim()),\"string\"!=typeof s&&(s=e(s)),s||(this.logger.warn(\"missed to pass in variable \"+r[1]+\" for interpolating \"+t),s=\"\"),s=o(this.escapeValue?l(s):s),t=t.replace(r[0],s),this.regexp.lastIndex=0;return t},t.prototype.nest=function(t,n){function o(e){return e.replace(/\\$/g,\"$$$$\")}function r(e){if(e.indexOf(\",\")<0)return e;var t=e.split(\",\");e=t.shift();var n=t.join(\",\");n=this.interpolate(n,u);try{u=JSON.parse(n)}catch(o){this.logger.error(\"failed parsing options string in nesting for key \"+e,o)}return e}var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],s=void 0,a=void 0,u=JSON.parse(JSON.stringify(i));for(u.applyPostProcessor=!1;s=this.nestingRegexp.exec(t);)a=n(r.call(this,s[1].trim()),u),\"string\"!=typeof a&&(a=e(a)),a||(this.logger.warn(\"missed to pass in variable \"+s[1]+\" for interpolating \"+t),a=\"\"),a=o(this.escapeValue?l(a):a),t=t.replace(s[0],a),this.regexp.lastIndex=0;return t},t}(),T=function(e){function t(n,o,r){var i=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];m.classCallCheck(this,t);var s=m.possibleConstructorReturn(this,e.call(this));return s.backend=n,s.store=o,s.services=r,s.options=i,s.logger=S.create(\"backendConnector\"),s.state={},s.queue=[],s.backend&&s.backend.init&&s.backend.init(r,i.backend,i),s}return m.inherits(t,e),t.prototype.queueLoad=function(e,t,n){var o=this,r=[],i=[],s=[],a=[];return e.forEach(function(e){var n=!0;t.forEach(function(t){var s=e+\"|\"+t;o.store.hasResourceBundle(e,t)?o.state[s]=2:o.state[s]<0||(1===o.state[s]?i.indexOf(s)<0&&i.push(s):(o.state[s]=1,n=!1,i.indexOf(s)<0&&i.push(s),r.indexOf(s)<0&&r.push(s),a.indexOf(t)<0&&a.push(t)))}),n||s.push(e)}),(r.length||i.length)&&this.queue.push({pending:i,loaded:{},errors:[],callback:n}),{toLoad:r,pending:i,toLoadLanguages:s,toLoadNamespaces:a}},t.prototype.loaded=function(e,t,n){var o=this,i=e.split(\"|\"),s=m.slicedToArray(i,2),a=s[0],l=s[1];t&&this.emit(\"failedLoading\",a,l,t),n&&this.store.addResourceBundle(a,l,n),this.state[e]=t?-1:2,this.queue.forEach(function(n){r(n.loaded,[a],l),v(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(n.errors.length?n.callback(n.errors):n.callback(),o.emit(\"loaded\",n.loaded),n.done=!0)}),this.queue=this.queue.filter(function(e){return!e.done})},t.prototype.read=function(e,t,n,o,r,i){var s=this;return o||(o=0),r||(r=250),e.length?void this.backend[n](e,t,function(a,l){return a&&l&&5>o?void setTimeout(function(){s.read.call(s,e,t,n,++o,2*r,i)},r):void i(a,l)}):i(null,{})},t.prototype.load=function(e,t,n){var o=this;if(!this.backend)return this.logger.warn(\"No backend was added via i18next.use. Will not load resources.\"),n&&n();var r=m[\"extends\"]({},this.backend.options,this.options.backend);\"string\"==typeof e&&(e=this.services.languageUtils.toResolveHierarchy(e)),\"string\"==typeof t&&(t=[t]);var s=this.queueLoad(e,t,n);return s.toLoad.length?void(r.allowMultiLoading&&this.backend.readMulti?this.read(s.toLoadLanguages,s.toLoadNamespaces,\"readMulti\",null,null,function(e,t){e&&o.logger.warn(\"loading namespaces \"+s.toLoadNamespaces.join(\", \")+\" for languages \"+s.toLoadLanguages.join(\", \")+\" via multiloading failed\",e),!e&&t&&o.logger.log(\"loaded namespaces \"+s.toLoadNamespaces.join(\", \")+\" for languages \"+s.toLoadLanguages.join(\", \")+\" via multiloading\",t),s.toLoad.forEach(function(n){var r=n.split(\"|\"),s=m.slicedToArray(r,2),a=s[0],l=s[1],u=i(t,[a,l]);if(u)o.loaded(n,e,u);else{var c=\"loading namespace \"+l+\" for language \"+a+\" via multiloading failed\";o.loaded(n,c),o.logger.error(c)}})}):!function(){var e=function(e){var t=this,n=e.split(\"|\"),o=m.slicedToArray(n,2),r=o[0],i=o[1];this.read(r,i,\"read\",null,null,function(n,o){n&&t.logger.warn(\"loading namespace \"+i+\" for language \"+r+\" failed\",n),!n&&o&&t.logger.log(\"loaded namespace \"+i+\" for language \"+r,o),t.loaded(e,n,o)})};s.toLoad.forEach(function(t){e.call(o,t)})}()):void(s.pending.length||n())},t.prototype.saveMissing=function(e,t,n,o){this.backend&&this.backend.create&&this.backend.create(e,t,n,o),this.store.addResource(e[0],t,n,o)},t}(w),A=function(e){function t(n,o,r){var i=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];m.classCallCheck(this,t);var s=m.possibleConstructorReturn(this,e.call(this));return s.cache=n,s.store=o,s.services=r,s.options=i,s.logger=S.create(\"cacheConnector\"),s.cache&&s.cache.init&&s.cache.init(r,i.cache,i),s}return m.inherits(t,e),t.prototype.load=function(e,t,n){var o=this;if(!this.cache)return n&&n();var r=m[\"extends\"]({},this.cache.options,this.options.cache);\"string\"==typeof e&&(e=this.services.languageUtils.toResolveHierarchy(e)),\"string\"==typeof t&&(t=[t]),r.enabled?this.cache.load(e,function(t,r){if(t&&o.logger.error(\"loading languages \"+e.join(\", \")+\" from cache failed\",t),r)for(var i in r)for(var s in r[i])if(\"i18nStamp\"!==s){var a=r[i][s];a&&o.store.addResourceBundle(i,s,a)}n&&n()}):n&&n()},t.prototype.save=function(){this.cache&&this.options.cache&&this.options.cache.enabled&&this.cache.save(this.store.data)},t}(w),M=function(e){function t(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],o=arguments[1];m.classCallCheck(this,t);var r=m.possibleConstructorReturn(this,e.call(this));return r.options=b(n),r.services={},r.logger=S,r.modules={},o&&!r.isInitialized&&r.init(n,o),r}return m.inherits(t,e),t.prototype.init=function(e,t){function n(e){return e?\"function\"==typeof e?new e:e:void 0}var o=this;if(\"function\"==typeof e&&(t=e,e={}),e||(e={}),\"v1\"===e.compatibilityAPI?this.options=m[\"extends\"]({},y(),b(c(e)),{}):\"v1\"===e.compatibilityJSON?this.options=m[\"extends\"]({},y(),b(p(e)),{}):this.options=m[\"extends\"]({},y(),this.options,b(e)),t||(t=function(){}),!this.options.isClone){this.modules.logger?S.init(n(this.modules.logger),this.options):S.init(null,this.options);var r=new j(this.options);this.store=new L(this.options.resources,this.options);var i=this.services;i.logger=S,i.resourceStore=this.store,i.resourceStore.on(\"added removed\",function(e,t){i.cacheConnector.save()}),i.languageUtils=r,i.pluralResolver=new E(r,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON}),i.interpolator=new _(this.options),i.backendConnector=new T(n(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on(\"*\",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];o.emit.apply(o,[e].concat(n))}),i.backendConnector.on(\"loaded\",function(e){i.cacheConnector.save()}),i.cacheConnector=new A(n(this.modules.cache),i.resourceStore,i,this.options),i.cacheConnector.on(\"*\",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];o.emit.apply(o,[e].concat(n))}),this.modules.languageDetector&&(i.languageDetector=n(this.modules.languageDetector),i.languageDetector.init(i,this.options.detection,this.options)),this.translator=new O(this.services,this.options),this.translator.on(\"*\",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];o.emit.apply(o,[e].concat(n))})}var s=[\"getResource\",\"addResource\",\"addResources\",\"addResourceBundle\",\"removeResourceBundle\",\"hasResourceBundle\",\"getResourceBundle\"];s.forEach(function(e){o[e]=function(){return this.store[e].apply(this.store,arguments)}}),\"v1\"===this.options.compatibilityAPI&&h(this);var a=function(){o.changeLanguage(o.options.lng,function(e,n){o.emit(\"initialized\",o.options),o.logger.log(\"initialized\",o.options),t(e,n)})};return this.options.resources?a():setTimeout(a,10),this},t.prototype.loadResources=function(e){var t=this;if(e||(e=function(){}),this.options.resources)e(null);else{var n=function(){if(t.language&&\"cimode\"===t.language.toLowerCase())return{v:e()};var n=[],o=function(e){var o=t.services.languageUtils.toResolveHierarchy(e);o.forEach(function(e){n.indexOf(e)<0&&n.push(e)})};o(t.language),t.options.preload&&t.options.preload.forEach(function(e){o(e)}),t.services.cacheConnector.load(n,t.options.ns,function(){t.services.backendConnector.load(n,t.options.ns,e)})}();if(\"object\"===(\"undefined\"==typeof n?\"undefined\":m[\"typeof\"](n)))return n.v}},t.prototype.use=function(e){return\"backend\"===e.type&&(this.modules.backend=e),\"cache\"===e.type&&(this.modules.cache=e),(\"logger\"===e.type||e.log&&e.warn&&e.warn)&&(this.modules.logger=e),\"languageDetector\"===e.type&&(this.modules.languageDetector=e),\"postProcessor\"===e.type&&N.addPostProcessor(e),this},t.prototype.changeLanguage=function(e,t){var n=this,o=function(o){e&&(n.emit(\"languageChanged\",e),n.logger.log(\"languageChanged\",e)),t&&t(o,function(){for(var e=arguments.length,t=Array(e),o=0;e>o;o++)t[o]=arguments[o];return n.t.apply(n,t)})};!e&&this.services.languageDetector&&(e=this.services.languageDetector.detect()),e&&(this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.translator.changeLanguage(e),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage(e)),this.loadResources(function(e){o(e)})},t.prototype.getFixedT=function(e,t){var n=this,o=function r(e,t){return t=t||{},t.lng=t.lng||r.lng,t.ns=t.ns||r.ns,n.t(e,t)};return o.lng=e,o.ns=t,o},t.prototype.t=function(){return this.translator&&this.translator.translate.apply(this.translator,arguments)},t.prototype.exists=function(){return this.translator&&this.translator.exists.apply(this.translator,arguments)},t.prototype.setDefaultNamespace=function(e){this.options.defaultNS=e},t.prototype.loadNamespaces=function(e,t){var n=this;return this.options.ns?(\"string\"==typeof e&&(e=[e]),e.forEach(function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)}),void this.loadResources(t)):t&&t()},t.prototype.loadLanguages=function(e,t){\"string\"==typeof e&&(e=[e]);var n=this.options.preload||[],o=e.filter(function(e){return n.indexOf(e)<0});return o.length?(this.options.preload=n.concat(o),\r\nvoid this.loadResources(t)):t()},t.prototype.dir=function(e){e||(e=this.language);var t=[\"ar\",\"shu\",\"sqr\",\"ssh\",\"xaa\",\"yhd\",\"yud\",\"aao\",\"abh\",\"abv\",\"acm\",\"acq\",\"acw\",\"acx\",\"acy\",\"adf\",\"ads\",\"aeb\",\"aec\",\"afb\",\"ajp\",\"apc\",\"apd\",\"arb\",\"arq\",\"ars\",\"ary\",\"arz\",\"auz\",\"avl\",\"ayh\",\"ayl\",\"ayn\",\"ayp\",\"bbz\",\"pga\",\"he\",\"iw\",\"ps\",\"pbt\",\"pbu\",\"pst\",\"prp\",\"prd\",\"ur\",\"ydd\",\"yds\",\"yih\",\"ji\",\"yi\",\"hbo\",\"men\",\"xmn\",\"fa\",\"jpr\",\"peo\",\"pes\",\"prs\",\"dv\",\"sam\"];return t.indexOf(this.services.languageUtils.getLanguagePartFromCode(e))?\"ltr\":\"rtl\"},t.prototype.createInstance=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments[1];return new t(e,n)},t.prototype.cloneInstance=function(){var e=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],o=arguments[1],r=new t(m[\"extends\"]({},n,this.options,{isClone:!0}),o),i=[\"store\",\"translator\",\"services\",\"language\"];return i.forEach(function(t){r[t]=e[t]}),r},t}(w),H=new M;return H});\n!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"i18nextXHRBackend\",t):e.i18nextXHRBackend=t()}(this,function(){\"use strict\";function e(e){return a.call(r.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e}function t(e,t,n,i,a){if(i&&\"object\"===(\"undefined\"==typeof i?\"undefined\":o[\"typeof\"](i))){var r=\"\",s=encodeURIComponent;for(var l in i)r+=\"&\"+s(l)+\"=\"+s(i[l]);i=r.slice(1)+(a?\"\":\"&_t=\"+new Date)}try{var c=new(XMLHttpRequest||ActiveXObject)(\"MSXML2.XMLHTTP.3.0\");c.open(i?\"POST\":\"GET\",e,1),t.crossDomain||c.setRequestHeader(\"X-Requested-With\",\"XMLHttpRequest\"),c.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\"),c.onreadystatechange=function(){c.readyState>3&&n&&n(c.responseText,c)},c.send(i)}catch(s){window.console&&console.log(s)}}function n(){return{loadPath:\"/locales/{{lng}}/{{ns}}.json\",addPath:\"locales/add/{{lng}}/{{ns}}\",allowMultiLoading:!1,parse:JSON.parse,crossDomain:!1,ajax:t}}var o={};o[\"typeof\"]=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol?\"symbol\":typeof e},o.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")},o.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var i=[],a=i.forEach,r=i.slice,s=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];o.classCallCheck(this,t),this.init(e,n),this.type=\"backend\"}return o.createClass(t,[{key:\"init\",value:function(t){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.services=t,this.options=e(o,this.options||{},n())}},{key:\"readMulti\",value:function(e,t,n){var o=this.services.interpolator.interpolate(this.options.loadPath,{lng:e.join(\"+\"),ns:t.join(\"+\")});this.loadUrl(o,n)}},{key:\"read\",value:function(e,t,n){var o=this.services.interpolator.interpolate(this.options.loadPath,{lng:e,ns:t});this.loadUrl(o,n)}},{key:\"loadUrl\",value:function(e,t){var n=this;this.options.ajax(e,this.options,function(o,i){var a=i.status.toString();if(0===a.indexOf(\"5\"))return t(\"failed loading \"+e,!0);if(0===a.indexOf(\"4\"))return t(\"failed loading \"+e,!1);var r=void 0,s=void 0;try{r=n.options.parse(o)}catch(l){s=\"failed parsing \"+e+\" to json\"}return s?t(s,!1):void t(null,r)})}},{key:\"create\",value:function(e,t,n,o){var i=this;\"string\"==typeof e&&(e=[e]);var a={};a[n]=o||\"\",e.forEach(function(e){var n=i.services.interpolator.interpolate(i.options.addPath,{lng:e,ns:t});i.options.ajax(n,i.options,function(e,t){},a)})}}]),t}();return s.type=\"backend\",s});\n!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(\"jqueryI18next\",e):t.jqueryI18next=e()}(this,function(){\"use strict\";function t(t,a){function r(n,a,r){function i(t,n){return s.parseDefaultValueFromContent?e[\"extends\"]({},t,{defaultValue:n}):t}if(0!==a.length){var o=\"text\";if(0===a.indexOf(\"[\")){var f=a.split(\"]\");a=f[1],o=f[0].substr(1,f[0].length-1)}if(a.indexOf(\";\")===a.length-1&&(a=a.substr(0,a.length-2)),\"html\"===o)n.html(t.t(a,i(r,n.html())));else if(\"text\"===o)n.text(t.t(a,i(r,n.text())));else if(\"prepend\"===o)n.prepend(t.t(a,i(r,n.html())));else if(\"append\"===o)n.append(t.t(a,i(r,n.html())));else if(0===o.indexOf(\"data-\")){var l=o.substr(\"data-\".length),d=t.t(a,i(r,n.data(l)));n.data(l,d),n.attr(o,d)}else n.attr(o,t.t(a,i(r,n.attr(o))))}}function i(t,n){var i=t.attr(s.selectorAttr);if(i||\"undefined\"==typeof i||i===!1||(i=t.text()||t.val()),i){var o=t,f=t.data(s.targetAttr);if(f&&(o=t.find(f)||t),n||s.useOptionsAttr!==!0||(n=t.data(s.optionsAttr)),n=n||{},i.indexOf(\";\")>=0){var l=i.split(\";\");a.each(l,function(t,e){\"\"!==e&&r(o,e,n)})}else r(o,i,n);if(s.useOptionsAttr===!0){var d={};d=e[\"extends\"]({clone:d},n),delete d.lng,t.data(s.optionsAttr,d)}}}function o(t){return this.each(function(){i(a(this),t);var e=a(this).find(\"[\"+s.selectorAttr+\"]\");e.each(function(){i(a(this),t)})})}var s=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];s=e[\"extends\"]({},n,s),a[s.tName]=t.t.bind(t),a[s.i18nName]=t,a.fn[s.handleName]=o}var e={};e[\"extends\"]=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};var n={tName:\"t\",i18nName:\"i18n\",handleName:\"localize\",selectorAttr:\"data-i18n\",targetAttr:\"i18n-target\",optionsAttr:\"i18n-options\",useOptionsAttr:!1,parseDefaultValueFromContent:!0},a={init:t};return a});\n// module & toolbar bootstrapping (initialize all toolbars after loading page)\r\n// this will run onReady...\r\n$(function () {\r\n    var initializedModules = [];\r\n    var openedTemplatePickerOnce = false;\r\n    var cancelledDialog = localStorage.getItem('cancelled-dialog');\r\n\r\n    if (cancelledDialog) localStorage.removeItem('cancelled-dialog');\r\n\r\n    initAllModules(true);\r\n\r\n    // watch for ajax reloads on edit or view-changes, to re-init the toolbars etc.\r\n    document.body.addEventListener(\"DOMSubtreeModified\", function (event) {\r\n        initAllModules(false);\r\n    }, false);\r\n\r\n    return; // avoid side-effects\r\n\r\n    function initAllModules(isFirstRun) {\r\n        $(\"div[data-edit-context]\").each(function () {\r\n            initModule(this, isFirstRun);\r\n        });\r\n        tryShowTemplatePicker();\r\n    }\r\n\r\n    /**\r\n     * Show the template picker if\r\n     * - template picker has not yet been opened\r\n     * - dialog has not been cancelled\r\n     * - only one uninitialized module on page\r\n     * @returns\r\n     */\r\n    function tryShowTemplatePicker() {\r\n        var uninitializedModules = $('.sc-uninitialized');\r\n\r\n        if (cancelledDialog || openedTemplatePickerOnce) return false;\r\n\r\n        // already showing a dialog\r\n        if ($2sxc._quickDialog.current !== null) return false;\r\n\r\n        // not exactly one uninitialized module\r\n        if (uninitializedModules.length !== 1) return false;\r\n\r\n        // show the template picker of this module\r\n        var module = uninitializedModules.parent('div[data-edit-context]')[0];\r\n        $2sxc(module).manage.run('layout');\r\n        openedTemplatePickerOnce = true;\r\n    }\r\n\r\n    function initModule(module, isFirstRun) {\r\n\r\n        // check if module is already in the list of initialized modules\r\n        if (initializedModules.find(function (m) {\r\n                return m === module;\r\n            })) return false;\r\n        \r\n        // add to modules-list\r\n        initializedModules.push(module);\r\n        \r\n        var sxc = $2sxc(module);\r\n        \r\n        // check if the sxc must be re-created. This is necessary when modules are dynamically changed\r\n        // because the configuration may change, and that is cached otherwise, resulting in toolbars with wrong config\r\n        if (!isFirstRun) sxc = sxc.recreate(true);\r\n        \r\n        // check if we must show the glasses\r\n        // this must run even after first-run, because it can be added ajax-style\r\n        var wasEmpty = showGlassesButtonIfUninitialized(sxc);\r\n        \r\n        if (isFirstRun || !wasEmpty) $2sxc._toolbarManager.buildToolbars(module);\r\n\r\n        return true;\r\n    }\r\n\r\n    function showGlassesButtonIfUninitialized(sxc) {\r\n\r\n        // already initialized\r\n        if (sxc.manage._editContext.ContentGroup.TemplateId !== 0) return false;\r\n\r\n        // already has a glasses button\r\n        var tag = $($2sxc._manage.getTag(sxc));\r\n        if (tag.find(\".sc-uninitialized\").length !== 0) return false;\r\n\r\n        // note: title is added on mouseover, as the translation isn't ready at page-load\r\n        var btn = $('<div class=\"sc-uninitialized\" onmouseover=\"this.title = $2sxc.translate(this.title)\" title=\"InPage.NewElement\"><div class=\"icon-sxc-glasses\"></div></div>');\r\n        btn.on(\"click\", function () {\r\n            sxc.manage.run(\"layout\");\r\n        });\r\n\r\n        tag.append(btn);\r\n        return true;\r\n    }\r\n});"],"sourceRoot":"/source/"}