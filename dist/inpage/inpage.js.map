{"version":3,"sources":["webpack:///webpack/bootstrap ab69b1b66cd61d01a88f","webpack:///./src/commands/command-base.ts","webpack:///./src/interfaces/window-in-page.ts","webpack:///./src/quick-edit/quick-e.ts","webpack:///./src/interfaces/sxc-controller-in-page.ts","webpack:///./src/manage/api.ts","webpack:///./src/context/context.ts","webpack:///./src/x-bootstrap/sxc.ts","webpack:///./src/logging/log.ts","webpack:///./src/quick-edit/selectors-instance.ts","webpack:///./src/translate/2sxc.translate.ts","webpack:///./src/commands/commands.ts","webpack:///./src/contentBlock/actions.ts","webpack:///./src/toolbar/build-toolbars.ts","webpack:///./src/toolbar/item/render-toolbar.ts","webpack:///./src/toolbar/button/expand-button-config.ts","webpack:///./src/logging/has-log.ts","webpack:///./src/contentBlock/render.ts","webpack:///./src/DebugConfig.ts","webpack:///./src/contentBlock/templates.ts","webpack:///./src/toolbar/item/render-button.ts","webpack:///./src/toolbar/button/button-action.ts","webpack:///./src/toolbar/button/button-config.ts","webpack:///./src/quick-dialog/quick-dialog.ts","webpack:///./src/manage/user-of-edit-context.ts","webpack:///./src/settings/DialogPaths.ts","webpack:///./src/quick-edit/clipboard.ts","webpack:///./src/cms/Cms.ts","webpack:///./src/context/context-of-instance.ts","webpack:///./src/toolbar/item/render-helpers.ts","webpack:///./src/toolbar/toolbar/toolbar-expand-config.ts","webpack:///./src/toolbar/adapters/parameters-adapter.ts","webpack:///./src/toolbar/adapters/settings-adapter.ts","webpack:///./src/toolbar/adapters/flatten-action-definition.ts","webpack:///./src/toolbar/toolbar/toolbar-settings.ts","webpack:///./src/toolbar/toolbar/toolbar-config-templates.ts","webpack:///./src/constants.ts","webpack:///./src/toolbar/tag-toolbar.ts","webpack:///./src/quick-edit/start.ts","webpack:///./src/quick-edit/positioning.ts","webpack:///./src/contentBlock/web-api-promises.ts","webpack:///./src/commands/command-open-ng-dialog.ts","webpack:///./src/quick-dialog/container.ts","webpack:///./src/quick-dialog/container-size.ts","webpack:///./src/quick-dialog/state.ts","webpack:///./src/quick-edit/cb.ts","webpack:///./src/quick-edit/mod.ts","webpack:///./src/quick-edit/mod-manage.ts","webpack:///./src/polyfills/include-polyfills.ts","webpack:///./src/polyfills/array.prototype.find.ts","webpack:///./src/polyfills/Object.assign.ts","webpack:///./src/polyfills/Element.closest.ts","webpack:///./src/polyfills/window.CustomEvent.ts","webpack:///./src/commands/engine.ts","webpack:///./src/context/base-context/system-context.ts","webpack:///./src/context/base-context/tenant-context.ts","webpack:///./src/context/base-context/user-context.ts","webpack:///./src/context/content-block-context/content-block-context.ts","webpack:///./src/context/context-of-button.ts","webpack:///./src/context/context-of-toolbar.ts","webpack:///./src/context/context-of-item.ts","webpack:///./src/context/context-of-content-block.ts","webpack:///./src/context/context-of-page.ts","webpack:///./src/context/context-of.ts","webpack:///./src/context/base-context/base-context.ts","webpack:///./src/context/instance-context/app-context.ts","webpack:///./src/context/instance-context/instance-context.ts","webpack:///./src/context/item-context/item-context.ts","webpack:///./src/context/page-context/page-context.ts","webpack:///./src/plumbing/is.ts","webpack:///./src/context/instance-context/ui-context.ts","webpack:///./src/toolbar/item/render-groups.ts","webpack:///./src/toolbar/adapters/old-parameters-adapter.ts","webpack:///./src/logging/entry.ts","webpack:///./src/manage/instance-config.ts","webpack:///./src/toolbar/adapters/old-toolbar-settings-adapter.ts","webpack:///./src/toolbar/button/expand-group-config.ts","webpack:///./src/toolbar/toolbar/toolbar-config.ts","webpack:///./src/toolbar/toolbar/templates/default-toolbar-template.ts","webpack:///./src/toolbar/toolbar/templates/left-toolbar-template.ts","webpack:///./src/quick-edit/config.ts","webpack:///./src/quick-edit/coords.ts","webpack:///./src/contentBlock/main-content-block.ts","webpack:///./src/quick-dialog/iframe-bridge.ts","webpack:///./src/quick-dialog/quick-dialog-config.ts","webpack:///./src/manage/session-state-handler.ts","webpack:///./src/quick-dialog/url-handler.ts","webpack:///./src/commands/command-link-to-ng-dialog.ts","webpack:///./src/commands/command-create.ts","webpack:///./src/commands/command.ts","webpack:///./src/manage/ng-dialog-params.ts","webpack:///./src/manage/manage.ts","webpack:///./src/manage/create.ts","webpack:///./src/commands/instance-engine.ts","webpack:///./src/contentBlock/manipulate.ts","webpack:///./src/toolbar/toolbar-manager.ts","webpack:///./src/toolbar/adapters/button-config-adapter.ts","webpack:///./src/toolbar/button/mod-config.ts","webpack:///./src/translate/2sxc._translateInit.ts","webpack:///./src/translate/libs/i18next.min.js","webpack:///./src/translate/libs/i18nextXHRBackend.min.js","webpack:///./src/translate/libs/jquery-i18next.min.js","webpack:///./src/x-bootstrap/module-bootstrapper.ts","webpack:///./src/logging/log-utils.ts","webpack:///./src/commands/command-definition.ts","webpack:///./src/entity-manipulation/item-commands.ts","webpack:///./src/quick-edit/cmds-strategy-factory.ts","webpack:///./src/inpage.{}.ts","webpack:///./src/polyfills/es6-promise.auto.js","webpack:///./node_modules/process/browser.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/2sxc-extensions/2sxc.consts.ts","webpack:///./src/2sxc-extensions/2sxc.system.ts","webpack:///./src/commands/command/add.ts","webpack:///./src/commands/command/app-import.ts","webpack:///./src/commands/command/app-resources.ts","webpack:///./src/commands/command/app-settings.ts","webpack:///./src/commands/command/app.ts","webpack:///./src/commands/command/content-items.ts","webpack:///./src/commands/command/content-type.ts","webpack:///./src/commands/command/custom.ts","webpack:///./src/commands/command/delete.ts","webpack:///./src/commands/command/edit.ts","webpack:///./src/commands/command/instance-list.ts","webpack:///./src/commands/command/item-history.ts","webpack:///./src/commands/command/layout.ts","webpack:///./src/commands/command/metadata.ts","webpack:///./src/commands/command/more.ts","webpack:///./src/commands/command/movedown.ts","webpack:///./src/commands/command/moveup.ts","webpack:///./src/commands/command/new.ts","webpack:///./src/commands/command/publish.ts","webpack:///./src/commands/command/remove.ts","webpack:///./src/commands/command/replace.ts","webpack:///./src/commands/command/template-develop.ts","webpack:///./src/commands/command/template-query.ts","webpack:///./src/commands/command/template-settings.ts","webpack:///./src/commands/command/zone.ts","webpack:///./src/commands/definition.ts","webpack:///./src/commands/params.ts","webpack:///./src/commands/settings.ts","webpack:///./src/contentBlock/action-params.ts","webpack:///./src/contentBlock/manipulate-params.ts","webpack:///./src/contentBlock/web-api-params.ts","webpack:///./src/data-edit-context/content-block.ts","webpack:///./src/data-edit-context/content-group.ts","webpack:///./src/data-edit-context/data-edit-context.ts","webpack:///./src/data-edit-context/environment.ts","webpack:///./src/data-edit-context/error.ts","webpack:///./src/data-edit-context/language.ts","webpack:///./src/data-edit-context/parameters-entity.ts","webpack:///./src/data-edit-context/ui.ts","webpack:///./src/data-edit-context/user.ts","webpack:///./src/dnn-menu-helper/dnn-inpage-edit.ts","webpack:///./src/dnn-workarounds/dnn-08.00.04.ts","webpack:///./src/interfaces/iiframe-bridge.ts","webpack:///./src/interfaces/iquick-dialog-config.ts","webpack:///./src/interfaces/iuser-of-edit-context.ts","webpack:///./src/lib-helpers/2sxc._lib.extend.ts","webpack:///./src/lib-helpers/jquery.ts","webpack:///./src/polyfills/Symbol.ts","webpack:///./src/quick-edit/cb-or-mod.ts","webpack:///./src/quick-edit/conf.ts","webpack:///./src/quick-edit/content-block.ts","webpack:///./src/quick-edit/module.ts","webpack:///./src/quick-edit/selectors.ts","webpack:///./src/quick-edit/specs.ts","webpack:///./src/toolbar/button/button-definition.ts","webpack:///./src/toolbar/button/group-config.ts","webpack:///./src/toolbar/item/item-render.ts","webpack:///./src/toolbar/libs/shake.ts","webpack:///./src/toolbar/toolbar-events.ts","webpack:///./src/toolbar/toolbar-shake.ts","webpack:///./src/toolbar/toolbar/toolbar-config-template.ts"],"names":[],"mappings":"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CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,CAAC;AACD;AACA,CAAC;AACD;AACA,CAAC;AACD;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,UAAU,IAAI;AACd;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA,uBAAuB;;AAEvB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA,mBAAmB,6CAA6C;AAChE;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA,UAAU,MAAM;AAChB,UAAU,OAAO;AACjB;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,UAAU,MAAM;AAChB;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,qBAAqB,YAAY;AACjC;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA,UAAU,IAAI;AACd;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;;AAEA;AACA,UAAU,SAAS;AACnB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,UAAU,SAAS;AACnB,UAAU,SAAS;AACnB;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,UAAU,SAAS;AACnB;AACA,WAAW;AACX;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B;AAC1B,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA,YAAY,SAAS;AACrB,aAAa;AACb;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,CAAC;;;;;;;;;ACxpCD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;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","file":"./inpage/inpage.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 106);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ab69b1b66cd61d01a88f","import { getButtonConfigDefaultsV1 } from '../toolbar/button/expand-button-config';\r\nimport { CommandDefinition } from './command-definition';\r\nimport { Commands } from './commands';\r\nimport { Definition } from './definition';\r\n\r\nexport abstract class CommandBase {\r\n\r\n  commandDefinition = new CommandDefinition();\r\n\r\n  // quick helper so we can better debug the creation of definitions\r\n  protected makeDef(name: string,\r\n                    translateKey: string,\r\n                    icon: string,\r\n                    uiOnly: boolean,\r\n                    partOfPage: boolean,\r\n                    more: Definition): void {\r\n    if (typeof (partOfPage) !== 'boolean') {\r\n      throw 'partOfPage in commands not provided, order will be wrong!';\r\n    }\r\n\r\n    // Toolbar API v2\r\n    this.commandDefinition.name = name;\r\n    this.commandDefinition.buttonConfig = getButtonConfigDefaultsV1(name, icon, translateKey, uiOnly, partOfPage, more);\r\n\r\n    this.registerInCatalog();\r\n  }\r\n\r\n  /** register new CommandDefinition with in Commands */\r\n  protected registerInCatalog() {\r\n    Commands.getInstance().addDef(this.commandDefinition);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command-base.ts","import { SxcControllerInPage } from './sxc-controller-in-page';\r\n\r\n// ReSharper disable InconsistentNaming\r\nexport interface WindowInPage extends Window {\r\n  $2sxc: SxcControllerInPage;\r\n  // event: Event;\r\n  dnn_tabVersioningEnabled: boolean;\r\n  dnn: any;\r\n  $quickE: any;\r\n  i18next: any;\r\n  i18nextXHRBackend: any;\r\n  $2sxcActionMenuMapper: any; // (moduleId: number) => ActionMenuMapper,\r\n}\r\n// ReSharper restore InconsistentNaming\r\n\r\nexport const windowInPage: WindowInPage = window as WindowInPage;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/interfaces/window-in-page.ts","import { Conf } from './conf';\r\nimport { Coords } from './coords';\r\nimport { getCoordinates, positionAndAlign } from './positioning';\r\n\r\n/**\r\n * the quick-edit object\r\n * the quick-insert object\r\n */\r\nclass QuickE {\r\n  body: any = $('body');\r\n  win: any = $(window);\r\n  main = $(\"<div class='sc-content-block-menu sc-content-block-quick-insert sc-i18n'></div>\");\r\n  template =\r\n    `<a class='sc-content-block-menu-addcontent sc-invisible' data-type='Default' data-i18n='[titleTemplate]QuickInsertMenu.AddBlockContent'>x</a><a class='sc-content-block-menu-addapp sc-invisible' data-type='' data-i18n='[titleTemplate]QuickInsertMenu.AddBlockApp'>x</a>${\r\n      btn('select', 'ok', 'Select', true)}${btn('paste', 'paste', 'Paste', true, true)}`;\r\n  selected: any = $(\"<div class='sc-content-block-menu sc-content-block-selected-menu sc-i18n'></div>\")\r\n    .append(\r\n      btn('delete', 'trash-empty', 'Delete'),\r\n      btn('sendToPane', 'export', 'Move', null, null, 'sc-cb-mod-only'),\r\n      \"<div id='paneList'></div>\",\r\n    );\r\n  // will be populated later in the module section\r\n  contentBlocks: any = null;\r\n  cachedPanes: any = null;\r\n  modules: any = null;\r\n  nearestCb: any = null;\r\n  nearestMod: any = null;\r\n  modManage: any = null;\r\n  // add stuff which depends on other values to create\r\n  cbActions: any = $(this.template);\r\n  modActions: any = $(this.template.replace(/QuickInsertMenu.AddBlock/g, 'QuickInsertMenu.AddModule'))\r\n    .attr('data-context', 'module')\r\n    .addClass('sc-content-block-menu-module');\r\n  //\r\n  config: Conf;\r\n  bodyOffset: Coords;\r\n\r\n  constructor() {\r\n\r\n    this.selected.toggle = (target: any) => {\r\n      if (!target || target.length === 0) {\r\n        this.selected.hide();\r\n      } else {\r\n        const coords = getCoordinates(target);\r\n        coords.yh = coords.y + 20;\r\n        positionAndAlign(this.selected, coords);\r\n        this.selected.target = target;\r\n      }\r\n    };\r\n\r\n  }\r\n}\r\n\r\nexport const $quickE = new QuickE();\r\n\r\nfunction btn(action: string,\r\n             icon: string,\r\n             i18N: string,\r\n             invisible?: boolean,\r\n             unavailable?: boolean,\r\n             classes?: string): string {\r\n  return `<a class='sc-content-block-menu-btn sc-cb-action icon-sxc-${icon} ${invisible ? ' sc-invisible ' : ''}${\r\n    unavailable ? ' sc-unavailable ' : ''}${classes}' data-action='${action\r\n    }' data-i18n='[title]QuickInsertMenu.${i18N}'></a>`;\r\n}\r\n\r\n/**\r\n * build the toolbar (hidden, but ready to show)\r\n */\r\nexport function prepareToolbarInDom(): void {\r\n  $quickE.body.append($quickE.main)\r\n    .append($quickE.selected);\r\n  $quickE.main.append($quickE.cbActions)\r\n    .append($quickE.modActions);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-edit/quick-e.ts","import { Cms } from '../cms/Cms';\r\nimport { windowInPage as window } from './window-in-page';\r\n\r\n/**\r\n * $2sxc interface declaration merging for in-page\r\n */\r\n// ReSharper disable InconsistentNaming\r\nexport interface SxcControllerInPage extends SxcControllerWithInternals {\r\n  api: any;\r\n  _commands: any;\r\n  _contentBlock: any;\r\n  _lib: any;\r\n  _quickDialog: any;\r\n  _toolbarManager: any;\r\n  c: any;\r\n  consts: any;\r\n  contentItems: any;\r\n  system: any;\r\n  translate: any;\r\n  context: any;\r\n  cms: Cms;\r\n}\r\n// ReSharper restore InconsistentNaming\r\n\r\nexport const $2sxcInPage: SxcControllerInPage = window.$2sxc;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/interfaces/sxc-controller-in-page.ts","import { DataEditContext } from '../data-edit-context/data-edit-context';\r\n\r\n/**\r\n * get edit-context info of html element or sxc-object\r\n * @param {SxcInstanceWithInternals} sxc\r\n * @param {HTMLElement} htmlElement\r\n * @return {DataEditContext} edit context info\r\n */\r\nexport function getEditContext(sxc: SxcInstanceWithInternals, htmlElement?: HTMLElement): DataEditContext {\r\n  let editContextTag: HTMLElement;\r\n  if (htmlElement) {\r\n    editContextTag = getContainerTag(htmlElement);\r\n  } else {\r\n    editContextTag = getTag(sxc);\r\n  }\r\n  return getEditContextOfTag(editContextTag);\r\n}\r\n\r\n/**\r\n * get nearest html tag of the sxc instance with data-edit-context\r\n * @param htmlTag\r\n */\r\nexport function getContainerTag(htmlTag: any): any {\r\n  return $(htmlTag).closest('div[data-edit-context]')[0];\r\n}\r\n\r\n/**\r\n * get a html tag of the sxc instance\r\n * @param {SxcInstanceWithInternals} sxci\r\n * @return {jquery} - resulting html\r\n */\r\nexport function getTag(sxci: SxcInstanceWithInternals): any {\r\n  return $(`div[data-cb-id='${sxci.cbid}']`)[0];\r\n}\r\n\r\n/**\r\n * get the edit-context object (a json object) of the current tag/sxc-instance\r\n * @param {any} htmlTag\r\n * @return {DataEditContext} edit-context object\r\n */\r\nexport function getEditContextOfTag(htmlTag: any): DataEditContext {\r\n  const attr = htmlTag.getAttribute('data-edit-context');\r\n  return JSON.parse(attr || '{ }') as DataEditContext;\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/manage/api.ts","import { DataEditContext } from '../data-edit-context/data-edit-context';\r\nimport { $2sxcInPage as $2sxc } from '../interfaces/sxc-controller-in-page';\r\nimport { getEditContext, getContainerTag } from '../manage/api';\r\nimport { getSxcInstance } from '../x-bootstrap/sxc';\r\nimport { SystemContext } from './base-context/system-context';\r\nimport { TenantContext } from './base-context/tenant-context';\r\nimport { UserContext } from './base-context/user-context';\r\nimport { ContentBlockContext } from './content-block-context/content-block-context';\r\nimport { ContextOfButton } from './context-of-button';\r\nimport { AppContext } from './instance-context/app-context';\r\nimport { InstanceContext } from './instance-context/instance-context';\r\nimport { ItemContext } from './item-context/item-context';\r\nimport { PageContext } from './page-context/page-context';\r\nimport { isSxcInstance } from '../plumbing/is';\r\nimport { UiContext } from './instance-context/ui-context';\r\n\r\n/**\r\n * Primary API to get the context (context is cached)\r\n * @param htmlElement or Id (moduleId)\r\n * @param cbid\r\n */\r\nexport function context(tagOrSxc: SxcInstanceWithInternals | HTMLElement | JQuery<HTMLElement>| number, cbid?: number): ContextOfButton {\r\n  let sxc: SxcInstanceWithInternals;\r\n  let containerTag: any = null;\r\n\r\n  if (isSxcInstance(tagOrSxc)) { // it is SxcInstance\r\n    sxc = tagOrSxc;\r\n  } else if (typeof tagOrSxc === 'number') { // it is number\r\n    sxc = getSxcInstance(tagOrSxc, cbid);\r\n  } else { // it is HTMLElement\r\n    sxc = getSxcInstance(tagOrSxc);\r\n    containerTag = getContainerTag(tagOrSxc);\r\n  };\r\n\r\n  const contextOfButton = getContextInstance(sxc, containerTag);\r\n  contextOfButton.sxc = sxc;\r\n  return contextOfButton;\r\n}\r\n\r\n/**\r\n * Create copy of context, so it can be modified before use\r\n * @param htmlElement or Id (moduleId)\r\n * @param cbid\r\n */\r\nexport function contextCopy(htmlElementOrId: HTMLElement | number, cbid?: number): ContextOfButton {\r\n  const contextOfButton = context(htmlElementOrId, cbid);\r\n  // set sxc to null because of cyclic reference, so we can serialize it\r\n  contextOfButton.sxc = null;\r\n  // make a copy\r\n  const copyOfContext = JSON.parse(JSON.stringify(contextOfButton));\r\n  // bring sxc back to context\r\n  contextOfButton.sxc = getSxcInstance(htmlElementOrId);\r\n  return copyOfContext;\r\n}\r\n\r\n/**\r\n * Create new context\r\n * @param sxc\r\n * @param htmlElement\r\n */\r\nexport function getContextInstance(sxc: SxcInstanceWithInternals, htmlElement?: HTMLElement): ContextOfButton {\r\n  const editContext = getEditContext(sxc, htmlElement);\r\n  return createContextFromEditContext(editContext);\r\n}\r\n\r\n/**\r\n * create part of context object (it is not cached)\r\n * @param editCtx\r\n */\r\nexport function createContextFromEditContext(editCtx: DataEditContext) {\r\n  const btnCtx = new ContextOfButton();\r\n\r\n  // *** ContextOf ***\r\n  // this will be everything about the current system, like system / api -paths etc.\r\n  btnCtx.system = new SystemContext();\r\n  if (editCtx.error) {\r\n    btnCtx.system.error = editCtx.error.type;\r\n  }\r\n  // empty\r\n\r\n  // this will be something about the current tenant(the dnn portal)\r\n  btnCtx.tenant = new TenantContext();\r\n  if (editCtx.Environment) {\r\n    btnCtx.tenant.id = editCtx.Environment.WebsiteId; // InstanceConfig.portalId\r\n    btnCtx.tenant.url = editCtx.Environment.WebsiteUrl; // NgDialogParams.portalroot\r\n  }\r\n\r\n  // things about the user\r\n  btnCtx.user = new UserContext();\r\n  if (editCtx.User) {\r\n    btnCtx.user.canDesign = editCtx.User.CanDesign;\r\n    btnCtx.user.canDevelop = editCtx.User.CanDevelop;\r\n  }\r\n\r\n  // *** ContextOfPage ***\r\n  // this will be information related to the current page\r\n  btnCtx.page = new PageContext();\r\n  if (editCtx.Environment) {\r\n    btnCtx.page.id = editCtx.Environment.PageId; // InstanceConfig.tabId, NgDialogParams.tid\r\n    btnCtx.page.url = editCtx.Environment.PageUrl;\r\n  }\r\n\r\n  // *** ContextOfInstance ***\r\n  // information related to the current DNN module, incl.instanceId, etc.\r\n  btnCtx.instance = new InstanceContext();\r\n  if (editCtx.Environment) {\r\n    btnCtx.instance.id = editCtx.Environment.InstanceId; // InstanceConfig.moduleId, NgDialogParams.mid\r\n    btnCtx.instance.isEditable = editCtx.Environment.IsEditable;\r\n    // sxc\r\n    btnCtx.instance.sxcVersion = editCtx.Environment.SxcVersion;\r\n    btnCtx.instance.parameters = editCtx.Environment.parameters;\r\n    btnCtx.instance.sxcRootUrl = editCtx.Environment.SxcRootUrl;// NgDialogParams.websiteroot\r\n  }\r\n  if (editCtx.ContentBlock) {\r\n    btnCtx.instance.allowPublish = editCtx.ContentBlock.VersioningRequirements === $2sxc.c.publishAllowed;// NgDialogParams.publishing\r\n  }\r\n\r\n  // this will be about the current app, settings of the app, app - paths, etc.\r\n  btnCtx.app = new AppContext();\r\n  if (editCtx.ContentGroup) {\r\n    btnCtx.app.id = editCtx.ContentGroup.AppId; // or NgDialogParams.appId\r\n    btnCtx.app.isContent = editCtx.ContentGroup.IsContent;\r\n    btnCtx.app.resourcesId = editCtx.ContentGroup.AppResourcesId;\r\n    btnCtx.app.settingsId = editCtx.ContentGroup.AppSettingsId;\r\n    btnCtx.app.appPath = editCtx.ContentGroup.AppUrl; // InstanceConfig.appPath, NgDialogParams.approot, this is the only value which doesn't have a slash by default. note that the app-root doesn't exist when opening \"manage-app\"\r\n    btnCtx.app.hasContent = editCtx.ContentGroup.HasContent;\r\n    btnCtx.app.supportsAjax = editCtx.ContentGroup.SupportsAjax;\r\n    btnCtx.app.zoneId = editCtx.ContentGroup.ZoneId; // or NgDialogParams.zoneId\r\n  }\r\n  if (editCtx.Language) {\r\n    // languages\r\n    btnCtx.app.currentLanguage = editCtx.Language.Current; // NgDialogParams.lang\r\n    btnCtx.app.primaryLanguage = editCtx.Language.Primary; // NgDialogParams.langpri\r\n    btnCtx.app.allLanguages = editCtx.Language.All; // or NgDialogParams.langs\r\n  }\r\n\r\n  // ensure that the UI will load the correct assets to enable editing\r\n  btnCtx.ui = new UiContext();\r\n  if (editCtx.Ui) {\r\n    btnCtx.ui.autoToolbar = editCtx.Ui.AutoToolbar; // toolbar auto-show\r\n    if (editCtx.Ui.Form) btnCtx.ui.form = editCtx.Ui.Form; // decide which dialog opens, eg ng8\r\n  }\r\n\r\n  // *** ContextOfContentBlock ***\r\n  // information related to the current contentBlock\r\n  btnCtx.contentBlock = new ContentBlockContext();\r\n  if (editCtx.ContentBlock) {\r\n    btnCtx.contentBlock.id = editCtx.ContentBlock.Id; // or sxc.cbid or InstanceConfig.cbid\r\n    btnCtx.contentBlock.isEntity = editCtx.ContentBlock.IsEntity; // ex: InstanceConfig.cbIsEntity\r\n    btnCtx.contentBlock.showTemplatePicker = editCtx.ContentBlock.ShowTemplatePicker;\r\n    btnCtx.contentBlock.versioningRequirements = editCtx.ContentBlock.VersioningRequirements;\r\n    btnCtx.contentBlock.parentFieldName = editCtx.ContentBlock.ParentFieldName;\r\n    btnCtx.contentBlock.parentFieldSortOrder = editCtx.ContentBlock.ParentFieldSortOrder;\r\n    btnCtx.contentBlock.partOfPage = editCtx.ContentBlock.PartOfPage;// NgDialogParams.partOfPage\r\n  }\r\n  if (editCtx.ContentGroup) {\r\n    btnCtx.contentBlock.isCreated = editCtx.ContentGroup.IsCreated;\r\n    btnCtx.contentBlock.isList = editCtx.ContentGroup.IsList; // ex: InstanceConfig.isList\r\n    btnCtx.contentBlock.queryId = editCtx.ContentGroup.QueryId;\r\n    btnCtx.contentBlock.templateId = editCtx.ContentGroup.TemplateId;\r\n    btnCtx.contentBlock.contentTypeId = editCtx.ContentGroup.ContentTypeName;\r\n    btnCtx.contentBlock.contentGroupId = editCtx.ContentGroup.Guid; // ex: InstanceConfig.contentGroupId\r\n  }\r\n\r\n  // *** ContextOfItem ***\r\n  // information about the current item\r\n  btnCtx.item = new ItemContext();\r\n  // empty\r\n\r\n  // *** ContextOfToolbar ***\r\n  // fill externally\r\n\r\n  // *** ContextOfButton ***\r\n  // fill externally\r\n\r\n  return btnCtx;\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/context/context.ts","import { $2sxcInPage as $2sxc } from '../interfaces/sxc-controller-in-page';\r\n\r\nexport function getSxcInstance(module: any, cbid?: number): SxcInstanceWithInternals {\r\n  const sxc = $2sxc(module, cbid) as SxcInstanceWithInternals;\r\n  return sxc;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/x-bootstrap/sxc.ts","import { Entry } from './entry';\r\nconst maxScopeLen = 3;\r\nconst maxNameLen = 6;\r\n\r\nconst liveDump = false;\r\n\r\nexport class Log {\r\n\r\n  /**\r\n   * all log-entries on this logger\r\n   */\r\n  entries = new Array<Entry>();\r\n\r\n  /**\r\n   * Create a logger and optionally attach it to a parent logger\r\n   * @param string name this logger should use\r\n   * @param Log optional parrent logger to attach to\r\n   * @param string optional initial message to log\r\n   */\r\n  constructor(name: string, parent?: Log, initialMessage?: string) {\r\n    this.rename(name);\r\n    this.linkLog(parent);\r\n    if (initialMessage != null)\r\n      this.add(initialMessage);\r\n\r\n  }\r\n\r\n  /**\r\n   * Full identifier of this log-object, with full hierarchy\r\n   */\r\n  fullIdentifier = (): string =>\r\n    `${(this.parent ? this.parent.fullIdentifier() : '')}${this.identifier()}`;\r\n\r\n  /**\r\n   * give this logger a new name\r\n   * usually happens in constructor, but in rare cases \r\n   * it's called manually\r\n   * @param name\r\n   */\r\n  rename(name: string) : void\r\n  {\r\n    try {\r\n      const dot = name.indexOf('.');\r\n      this.scope = dot > 0 ? name.substr(0, Math.min(dot, maxScopeLen)) + '.' : '';\r\n      const rest = dot > 0 ? name.substr(dot + 1) : name;\r\n      this.name = rest.substr(0, Math.min(rest.length, maxNameLen));\r\n      this.name = this.name.substr(0, Math.min(this.name.length, maxNameLen));\r\n    }\r\n    catch (e) {\r\n       /* ignore */\r\n    }\r\n  }\r\n\r\n  /**\r\n   * link this log to a parent\r\n   * usually happens in constructor, but in rare cases\r\n   * this must be called manually\r\n   */\r\n  linkLog = (parent: Log): void => {\r\n    this.parent = parent || this.parent; // if new parent isn't defined, don't replace\r\n  }\r\n\r\n  /**\r\n   * add a message to the log-list\r\n   * @param message\r\n   *\r\n   * preferred usage is with string parameter:\r\n   * log.add(`description ${ parameter }`);\r\n   *\r\n   * in case that we experience error with normal string parameter, we can use arrow function to enclose parameter like this () => parameter\r\n   * but use it very rarely, because there is certainly a performance implication!\r\n   * log.add(`description ${() => parameter}`);\r\n   */\r\n  add(message: Function | string): string {\r\n    let messageText: string;\r\n    if (message instanceof Function) {\r\n      try {\r\n        messageText = ((message as Function)()).toString();\r\n        message = null; // maybe it is unnecessary, but added to be safe as possible that arrow function parameter will be garbage collected\r\n      } catch (e) {\r\n        messageText = 'undefined';\r\n      }\r\n    } else {\r\n      messageText = message.toString(); \r\n    }\r\n    const entry = new Entry(this, messageText);\r\n    this.addEntry(entry);\r\n    if(liveDump) console.log(this.dump(undefined, undefined, undefined, entry));\r\n    return messageText;\r\n  }\r\n\r\n  /**\r\n   * helper to create a text-output of the log info\r\n   * @param separator\r\n   * @param start\r\n   * @param end\r\n   */\r\n  dump(separator = ' - ', start = '', end = '', one : Entry = null ): string {\r\n    var lg = start;\r\n    const dumpOne = (e: Entry) => lg += e.source() + separator + e.message + '\\n';\r\n    if (one)\r\n      dumpOne(one);\r\n    else\r\n      this.entries.forEach(dumpOne);\r\n    lg += end;\r\n    return lg;\r\n  }\r\n\r\n  /**\r\n   * add an entry-object to this logger\r\n   * this is often called by sub-loggers to add to parent\r\n   * @param entry\r\n   */\r\n  private addEntry(entry: Entry): void\r\n  {\r\n    this.entries.push(entry);\r\n    if (this.parent)\r\n      this.parent.addEntry(entry);\r\n  }\r\n\r\n  /**\r\n   * helper to generate a random 2-char ID\r\n   * @param stringLength\r\n   */\r\n  private randomString(stringLength: number): string {\r\n    const chars = '0123456789abcdefghiklmnopqrstuvwxyz';\r\n    let randomstring = '';\r\n    for (let i = 0; i < stringLength; i++) {\r\n      const rnum = Math.floor(Math.random() * chars.length);\r\n      randomstring += chars.substring(rnum, rnum + 1);\r\n    }\r\n    return randomstring;\r\n  }\r\n\r\n  /**\r\n   * parent logger - important if loggers are chained\r\n   */\r\n  private parent: Log;\r\n\r\n  /**\r\n   * scope of this logger - to easily see which ones\r\n   * are about the same topic\r\n   */\r\n  private scope = 'tdo';\r\n\r\n  /**\r\n   * name of this logger\r\n   */\r\n  private name = 'unknwn';\r\n\r\n\r\n  /**\r\n   * Unique 2-character ID of this specific log object\r\n   */\r\n  private id = (): string => this.idCache || (this.idCache = this.randomString(2));\r\n  private idCache: string;\r\n\r\n  /**\r\n   * Unique identifier of this log object, with name and ID\r\n   */\r\n  private identifier = (): string => `${this.scope}${this.name}(${this.id()})`;\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/logging/log.ts","import { CbOrMod } from './cb-or-mod';\r\nimport { Selectors } from './selectors';\r\n\r\n/**\r\n * selectors used all over the in-page-editing, centralized to ensure consistency\r\n */\r\nexport const selectors = {\r\n  cb: {\r\n    id: 'cb',\r\n    class: 'sc-content-block',\r\n    selector: '.sc-content-block',\r\n    listSelector: '.sc-content-block-list',\r\n    context: 'data-list-context',\r\n    singleItem: 'single-item',\r\n  } as CbOrMod,\r\n  mod: {\r\n    id: 'mod',\r\n    class: 'DnnModule',\r\n    selector: '.DnnModule',\r\n    listSelector:\r\n      '.DNNEmptyPane, .dnnDropEmptyPanes, :has(>.DnnModule)', // Found no better way to get all panes - the hidden variable does not exist when not in edit page mode\r\n    context: null,\r\n  } as CbOrMod,\r\n  eitherCbOrMod: '.DnnModule, .sc-content-block',\r\n  selected: 'sc-cb-is-selected',\r\n} as Selectors;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-edit/selectors-instance.ts","/**\r\n * provide an official translate API for 2sxc - currently internally using a jQuery library, but this may change\r\n * @param key\r\n */\r\nexport function translate(key: string): string {\r\n  // return key;\r\n  return ($.t && $.t(key)) || key;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/translate/2sxc.translate.ts","import { CommandDefinition } from './command-definition';\r\n//import { instanceEngine } from './instance-engine';\r\n\r\n// import all commands here to stop optimizers from excluding code that was not called form other module\r\nimport { Add } from './command/add';\r\nimport { App } from './command/app';\r\nimport { AppImport } from './command/app-import';\r\nimport { AppResources } from './command/app-resources';\r\nimport { AppSettings } from './command/app-settings';\r\nimport { ContentItems } from './command/content-items';\r\nimport { ContentType } from './command/content-type';\r\nimport { Custom } from './command/custom';\r\nimport { Delete } from './command/delete';\r\nimport { Edit } from './command/edit';\r\nimport { InstanceList } from './command/instance-list';\r\nimport { ItemHistory } from './command/item-history';\r\nimport { Layout } from './command/layout';\r\nimport { Metadata } from './command/metadata';\r\nimport { More } from './command/more';\r\nimport { MoveDown } from './command/movedown';\r\nimport { MoveUp } from './command/moveup';\r\nimport { New } from './command/new';\r\nimport { Publish } from './command/publish';\r\nimport { Remove } from './command/remove';\r\nimport { Replace } from './command/replace';\r\nimport { TemplateDevelop } from './command/template-develop';\r\nimport { TemplateQuery } from './command/template-query';\r\nimport { TemplateSettings } from './command/template-settings';\r\nimport { Zone } from './command/zone';\r\n\r\nexport class Commands {\r\n\r\n  private static instance: Commands;\r\n\r\n  commandList: CommandDefinition[] = [];\r\n  list: HashTable<CommandDefinition> = {}; // hash - table of action definitions, to be used a list()[\"action - name\"]\r\n  get = (name: string) => this.list[name]; // a specific action definition\r\n\r\n  private constructor() { }\r\n\r\n  static getInstance() {\r\n    if (!Commands.instance) {\r\n      Commands.instance = new Commands();\r\n    }\r\n    return Commands.instance;\r\n  }\r\n\r\n  public addDef = (def: CommandDefinition): void => {\r\n    if (!this.list[def.name]) {\r\n      // add\r\n      this.commandList.push(def);\r\n      this.list[def.name] = def;\r\n    } else if (this.list[def.name] !== def) {\r\n      // update\r\n      this.list[def.name] = def;\r\n    }\r\n  }\r\n\r\n  // 2dm disabled, unclear what this would be for\r\n  // todo q2stv - do we need this?\r\n  //instanceEngine = instanceEngine;\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/commands.ts","import { ActionParams } from './action-params';\r\nimport { renderer } from './render';\r\nimport { ContextOfButton } from '../context/context-of-button';\r\n/*\r\n * this is a content block in the browser\r\n *\r\n * A Content Block is a stand alone unit of content, with it's own definition of\r\n * 1. content items\r\n * 2. template\r\n * + some other stuff\r\n *\r\n * it should be able to render itself\r\n */\r\n\r\n/**\r\n * internal helper, to do something and reload the content block\r\n * @param {ContextOfButton} context\r\n * @param {string} url\r\n * @param {ActionParams} params\r\n * @returns {any}\r\n */\r\nfunction getAndReload(context: ContextOfButton, url: string, params: ActionParams): Promise<any> {\r\n  return new Promise((resolve: any, reject: any) => {\r\n    context.sxc.webApi.get(\r\n      {\r\n        url: url,\r\n        params: params,\r\n      }).done((data: any, textStatus: string, jqXHR: any) => {\r\n        if (jqXHR.status === 204 || jqXHR.status === 200) {\r\n          // resolve the promise with the response text\r\n          resolve(data);\r\n        } else {\r\n          // otherwise reject with the status text\r\n          // which will hopefully be a meaningful error\r\n          reject(Error(textStatus));\r\n        }\r\n      }).fail((jqXHR: any, textStatus: string, errorThrown: string) => {\r\n        reject(Error(errorThrown));\r\n      });;\r\n  }).then(() => { renderer.reloadAndReInitialize(context); });\r\n}\r\n\r\n/**\r\n * remove an item from a list, then reload\r\n * @param {ContextOfButton} context\r\n * @param {number} sortOrder\r\n * @returns {any}\r\n */\r\nexport function removeFromList(context: ContextOfButton, sortOrder: number): Promise<any> {\r\n  return getAndReload(context,\r\n    'view/module/removefromlist', {\r\n      sortOrder: sortOrder\r\n    } as ActionParams);\r\n}\r\n\r\n/**\r\n * change the order of an item in a list, then reload\r\n * @param {ContextOfButton} context\r\n * @param {number} initOrder\r\n * @param {number} newOrder\r\n * @returns {any}\r\n */\r\nexport function changeOrder(context: ContextOfButton, initOrder: number, newOrder: number): Promise<any> {\r\n  return getAndReload(context,\r\n    'view/module/changeorder', {\r\n      sortOrder: initOrder,\r\n      destinationSortOrder: newOrder\r\n    } as ActionParams);\r\n}\r\n\r\n/**\r\n * add an item to the list at this position\r\n * @param {ContextOfButton} context\r\n * @param {number} sortOrder\r\n * @returns {any}\r\n */\r\nexport function addItem(context: ContextOfButton, sortOrder: number): Promise<any> {\r\n  return getAndReload(context,\r\n    'view/module/additem', {\r\n      sortOrder: sortOrder\r\n    } as ActionParams);\r\n}\r\n\r\n/**\r\n * set a content-item in this block to published, then reload\r\n * @param {ContextOfButton} context\r\n * @param {string} part\r\n * @param {number} sortOrder\r\n * @returns {any}\r\n */\r\nexport function publish(context: ContextOfButton, part: string, sortOrder: number): Promise<any> {\r\n  return getAndReload(context,\r\n    'view/module/publish', {\r\n      part: part,\r\n      sortOrder: sortOrder\r\n    } as ActionParams);\r\n}\r\n\r\n/**\r\n * publish an item using it's ID\r\n * @param {ContextOfButton} context\r\n * @param {number} entityId\r\n * @returns {any}\r\n */\r\nexport function publishId(context: ContextOfButton, entityId: number): Promise<any> {\r\n  return getAndReload(context,\r\n    'view/module/publish', {\r\n      id: entityId\r\n    } as ActionParams);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/contentBlock/actions.ts","import { context } from '../context/context';\r\nimport { $2sxcInPage as $2sxc } from '../interfaces/sxc-controller-in-page';\r\nimport { getTag } from '../manage/api';\r\nimport { renderToolbar } from './item/render-toolbar';\r\nimport { expandToolbarConfig } from './toolbar/toolbar-expand-config';\r\nimport { ToolbarSettings, emptyToolbar } from './toolbar/toolbar-settings';\r\nimport { Log } from '../logging/log';\r\nimport Constants = require('../constants');\r\nimport { ToolbarInitConfig } from './toolbar-init-config';\r\nimport { TagToolbar } from './tag-toolbar';\r\n\r\n// quick debug - set to false if not needed for production\r\nconst dbg = false;\r\n\r\n/**\r\n * create a process - toolbar command to generate toolbars inside a tag\r\n * @param parentLog\r\n * @param parentTag\r\n * @param optionalId\r\n */\r\nexport function buildToolbars(parentLog: Log, parentTag: JQuery<HTMLElement>, optionalId?: number): void {\r\n  const log = new Log('Tlb.BldAll', parentLog);\r\n  parentTag = $(parentTag || '.DnnModule-' + optionalId);\r\n\r\n  // if something says the toolbars are disabled, then skip\r\n  if (parentTag.attr(Constants.toolbar.attr.disable))\r\n    return;\r\n\r\n  let toolbars = getToolbarTags(parentTag);\r\n\r\n  // no toolbars found, must help a bit because otherwise editing is hard\r\n  if (toolbars.length === 0) {\r\n    toolbars = addFallbackToolbar(parentTag);\r\n    if (toolbars == null) return;\r\n  }\r\n\r\n  for (let i = 0; i < toolbars.length; i++) {\r\n    const tag = $(toolbars[i]);\r\n    const config = loadConfigFromAttributes(toolbars[i]);\r\n\r\n    if(config != null)  // is null if load failed\r\n      try {\r\n        convertConfigToToolbarTags(tag, config, log);\r\n      } catch (err2) {\r\n        // catch any errors, as this is very common - make sure the others are still rendered\r\n        console.error('error creating toolbar - will skip this one', err2);\r\n      }\r\n  }\r\n}\r\n\r\n//////////////////////////////// Private Functions ////////////////////////////////////\r\n\r\n/**\r\n * Load the toolbar configuration from the sxc-toolbar attribute OR the old schema\r\n * @param tag\r\n * @return a configuration object or null in case of an error\r\n */\r\nfunction loadConfigFromAttributes(tag: HTMLElement): ToolbarInitConfig {\r\n  try {\r\n    const newConfigFormat = tryGetAttrText(tag, Constants.toolbar.attr.full);\r\n    if (newConfigFormat) {\r\n      return JSON.parse(newConfigFormat) as ToolbarInitConfig;\r\n    } else {\r\n      const at = $2sxc.c.attr;\r\n      const data = getFirstAttribute(tag, at.toolbar, at.toolbarData);\r\n      const settings = getFirstAttribute(tag, at.settings, at.settingsData);\r\n      return {\r\n        toolbar: JSON.parse(data),\r\n        settings: JSON.parse(settings) as ToolbarSettings\r\n      } as ToolbarInitConfig;\r\n    }\r\n  } catch (err) {\r\n    console.error(\r\n      'error in settings JSON - probably invalid - make sure you also quote your properties like \"name\": ...',\r\n      tag, err);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Take a configuration and convert into a toolbar-menu; also attach the hover-attribute\r\n * @param tag\r\n * @param config\r\n * @param log\r\n */\r\nfunction convertConfigToToolbarTags(tag: JQuery<HTMLElement>, config: ToolbarInitConfig, log: Log): void {\r\n  const cnt = context(tag);\r\n  cnt.toolbar = expandToolbarConfig(cnt, config.toolbar, config.settings, log);\r\n\r\n  if (tag.attr(Constants.toolbar.attr.full)) {\r\n    // new case, where the full toolbar is included in one setting\r\n    // ReSharper disable once WrongExpressionStatement\r\n    new TagToolbar(tag, cnt);\r\n    ensureToolbarHoverClass(tag);\r\n  } else {\r\n    const toolbar = renderToolbar(cnt);\r\n    // default case, tag is the old <ul> tag, so find the sc-element parent before replacing\r\n    const scElementParent = tag.closest(Constants.toolbar.selectors.ofOldHover);\r\n    tag.replaceWith(toolbar);\r\n\r\n    if (scElementParent.length > 0)\r\n      ensureToolbarHoverClass(scElementParent);\r\n  }\r\n\r\n}\r\n\r\n\r\n/** find current toolbars inside this wrapper-tag */\r\nfunction getToolbarTags(parentTag: JQuery<HTMLElement>): JQuery<HTMLElement> {\r\n  const allInner = $(`.sc-menu[toolbar],.sc-menu[data-toolbar],[${Constants.toolbar.attr.full}]`, parentTag);\r\n\r\n  // return only those, which don't belong to a sub-item\r\n  const onlyDirectDescendents = allInner\r\n    .filter((i: number, e: HTMLElement) => $(e).closest(Constants.cb.selectors.ofName)[0] === parentTag[0]);\r\n  if (dbg)\r\n    console.log('found toolbars for parent', parentTag, onlyDirectDescendents);\r\n  return onlyDirectDescendents;\r\n}\r\n\r\n/** add hover-attribute to tag */\r\nfunction ensureToolbarHoverClass(jtag: JQuery<HTMLElement>): void {\r\n  if (jtag.length <= 0) return; // skip in case nothing was given\r\n  const tag = jtag[0];\r\n  if (!tag.hasAttribute(Constants.toolbar.attr.hover))\r\n    tag.setAttribute(Constants.toolbar.attr.hover, '');\r\n}\r\n\r\n/** Create a default/fallback toolbar and return it */\r\nfunction addFallbackToolbar(parentTag: JQuery<HTMLElement>): JQuery<HTMLElement> {\r\n  if (dbg) console.log(\"didn't find toolbar, so will auto-create\", parentTag);\r\n\r\n  const outsideCb = !parentTag.hasClass(Constants.cb.classes.name);\r\n  const contentTag = outsideCb ? parentTag.find(`div${Constants.cb.selectors.ofName}`) : parentTag;\r\n\r\n  // auto toolbar\r\n  const ctx = context(contentTag);\r\n  if (ctx.ui.autoToolbar === false)\r\n    return null;\r\n\r\n  contentTag.attr(Constants.toolbar.attr.full, JSON.stringify(emptyToolbar));\r\n  \r\n  return contentTag;\r\n}\r\n\r\n/** Find the text of one or more attributes in fallback order, till we found one */\r\nfunction getFirstAttribute(toolbar: HTMLElement, name1: string, name2: string): string {\r\n  return tryGetAttrText(toolbar, name1) || tryGetAttrText(toolbar, name2) || '{}';\r\n}\r\n\r\n/** Get text-content of an attribute (or return null) */\r\nfunction tryGetAttrText(tag: HTMLElement, name: string): string {\r\n  const item1 = tag.attributes.getNamedItem(name);\r\n  return item1 && item1.textContent;\r\n}\r\n\r\nexport function disable(tag: HTMLElement | JQuery<HTMLElement>): void {\r\n  const jtag = $(tag);\r\n  jtag.attr(Constants.toolbar.attr.disable, 'true');\r\n}\r\n\r\nexport function isDisabled(sxc: SxcInstanceWithInternals): boolean {\r\n  const tag: any = $(getTag(sxc));\r\n  return !!tag.attr(Constants.toolbar.attr.disable);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/build-toolbars.ts","import { ContextOfButton } from '../../context/context-of-button';\r\nimport { renderGroups } from './render-groups';\r\nimport { addClasses } from './render-helpers';\r\n\r\nexport function renderToolbar(context: ContextOfButton): string {\r\n  // render groups of buttons\r\n  const groups = renderGroups(context);\r\n\r\n  // render toolbar\r\n  const toolbar = document.createElement('ul');\r\n  toolbar.classList.add('sc-menu');\r\n  toolbar.classList.add('group-0'); // IE11 fix, add each class separately\r\n\r\n  // add behaviour classes\r\n  toolbar.classList.add(`sc-tb-hover-${context.toolbar.settings.hover}`);\r\n  toolbar.classList.add(`sc-tb-show-${context.toolbar.settings.show}`);\r\n  if (context.toolbar.params.sortOrder === -1) {\r\n    toolbar.classList.add('listContent');\r\n  }\r\n  addClasses(toolbar, context.toolbar.settings.classes, ' ');\r\n  // stv: commented because I do not see that we need click event\r\n  // toolbar.setAttribute('onclick', 'var e = arguments[0] || window.event; e.preventDefault();'); // serialize JavaScript because of ajax\r\n\r\n  // add button groups to toolbar\r\n  toolbar.setAttribute('group-count', context.toolbar.groups.length.toString());\r\n  for (let g = 0; g < groups.length; g++) {\r\n    toolbar.appendChild(groups[g]);\r\n  }\r\n\r\n  return toolbar.outerHTML;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/item/render-toolbar.ts","import { Commands } from '../../commands/commands';\r\nimport { Definition } from '../../commands/definition';\r\nimport { ContextOfButton } from '../../context/context-of-button';\r\nimport { ButtonConfig } from './button-config';\r\nimport { ToolbarConfig } from '../toolbar/toolbar-config';\r\nimport { GroupConfig } from './group-config';\r\nimport { Log } from '../../logging/log';\r\n\r\n// takes an object like \"actionname\" or { action: \"actionname\", ... } and changes it to a { command: { action: \"actionname\" }, ... }\r\n// ReSharper disable once UnusedParameter\r\nexport function expandButtonConfig(original: any, sharedProps: any[], parentLog: Log) {\r\n  const log = new Log('Tlb.ExpBtn', parentLog, 'start');\r\n\r\n  // prevent multiple inits\r\n  if (original._expanded || original.command) {\r\n    log.add(`already expanded, won't modify`);\r\n    return original;\r\n  };\r\n\r\n  // if just a name, turn into a command\r\n  if (typeof original === 'string') {\r\n    log.add(`name \"${original}\" found, will re-map to .command.action`);\r\n    original = { command: { action: original.trim() } };\r\n  };\r\n\r\n  // if it's a command w/action, wrap into command + trim\r\n  if (typeof original.action === 'string') {\r\n    log.add(`action found, will move down to .command`);\r\n    original.action = original.action.trim();\r\n    original = { command: original };\r\n  }\r\n\r\n  // some clean-up\r\n  delete original.action; // remove the action property\r\n  original._expanded = true;\r\n\r\n  log.add('done');\r\n  return original;\r\n}\r\n\r\nexport function getButtonConfigDefaultsV1(name: string,\r\n                                          icon: string,\r\n                                          translateKey: string,\r\n                                          uiOnly: boolean,\r\n                                          partOfPage: boolean,\r\n                                          more: Definition): Partial<ButtonConfig> {\r\n  // \r\n  // stv: v1 code\r\n  const partialButtonConfig = {\r\n    icon: (context: ContextOfButton) => `icon-sxc-${icon}`,\r\n    title: (context: ContextOfButton) => `Toolbar.${translateKey}`,\r\n    uiActionOnly: (context: ContextOfButton) => uiOnly,\r\n    partOfPage: (context: ContextOfButton) => partOfPage,\r\n  } as Partial<ButtonConfig>;\r\n\r\n  Object.assign(partialButtonConfig, more);\r\n\r\n  return partialButtonConfig;\r\n}\r\n\r\n// remove buttons which are not valid based on add condition\r\nexport function removeDisableButtons(context: any, full: ToolbarConfig, config: any, parentLog: Log): void {\r\n  const log = new Log(`Tlb.RmvDsb', parentLog, 'start remove disabled buttons for ${full.groups.length} groups`);\r\n  const btnGroups = full.groups;\r\n  for (let g = 0; g < btnGroups.length; g++) {\r\n    const btns = btnGroups[g].buttons;\r\n    removeUnfitButtons(context, btns, config, log);\r\n\r\n    log.add('will disable appropriate buttons');\r\n    disableButtons(context, btns, config);\r\n\r\n    // remove the group, if no buttons left, or only \"more\"\r\n    // if (btns.length === 0 || (btns.length === 1 && btns[0].command.action === 'more'))\r\n    if (btns.length === 0 || (btns.length === 1 && btns[0].action.name === 'more')) {\r\n      log.add(`found no more buttons except for the \"more\" - will remove that too`);\r\n      btnGroups.splice(g--, 1);\r\n    } // remove, and decrement counter\r\n  }\r\n}\r\n\r\nfunction removeUnfitButtons(context: any, btns: ButtonConfig[], config: any, log: Log): void {\r\n  let removals = '';\r\n  for (let i = 0; i < btns.length; i++) {\r\n    // let add = btns[i].showCondition;\r\n    // if (add !== undefined)\r\n    //    if (typeof (add) === \"function\" ? !add(btns[i].command, config) : !add)\r\n    // if (!evalPropOrFunction(btns[i].showCondition, btns[i].command, config, true))\r\n    context.button = btns[i];\r\n    if (btns[i].action && !evalPropOrFunction(btns[i].showCondition, context, config, true)) {\r\n      removals += `#${i} \"${btns[i].action.name}\"; `;\r\n      btns.splice(i--, 1);\r\n    }\r\n  }\r\n  if(removals)\r\n    log.add(`removed buttons: ${removals}`);\r\n}\r\n\r\nfunction disableButtons(context: ContextOfButton, btns: ButtonConfig[], config: any): void {\r\n  for (let i = 0; i < btns.length; i++) {\r\n    // btns[i].disabled = evalPropOrFunction(btns[i].disabled, btns[i].command, config, false);\r\n    context.button = btns[i];\r\n    if (btns[i].action) {\r\n      btns[i].disabled = evalPropOrFunction(\r\n        btns[i].disabled,\r\n        context,\r\n        config,\r\n        false);\r\n    } else {\r\n      btns[i].disabled = ((context: ContextOfButton,) => false);\r\n    }\r\n\r\n  }\r\n}\r\n\r\nfunction evalPropOrFunction(propOrFunction: any, context: ContextOfButton, config: any, fallback: any): any {\r\n  if (propOrFunction === undefined || propOrFunction === null) {\r\n    return fallback;\r\n  }\r\n  if (typeof (propOrFunction) === 'function') {\r\n    return propOrFunction(context, config);\r\n  } else {\r\n    return propOrFunction;\r\n  }\r\n}\r\n\r\n/**\r\n * enhance button-object with default icons, etc.\r\n * @param btn\r\n * @param group\r\n * @param fullToolbarConfig\r\n * @param actions\r\n */\r\nexport function addDefaultBtnSettings(btn: ButtonConfig,\r\n                                      group: GroupConfig,\r\n                                      fullToolbarConfig: ToolbarConfig,\r\n                                      actions: Commands,\r\n                                      log: Log) {\r\n\r\n  // log.add(`adding default btn settings for ${btn.action.name}`);\r\n  log.add(`adding default btn settings for ${() => btn.action.name}`);\r\n  for (let d = 0; d < btnProperties.length; d++) {\r\n    fallbackBtnSetting(btn, group, fullToolbarConfig, actions, btnProperties[d]);\r\n  }\r\n}\r\n\r\nconst btnProperties = [\r\n  'classes',\r\n  'icon',\r\n  'title',\r\n  'dynamicClasses',\r\n  'showCondition',\r\n  'disabled'\r\n];\r\n\r\nconst prvProperties = [\r\n  'defaults',\r\n  'params',\r\n  'name'\r\n];\r\n\r\n/**\r\n * configure missing button properties with various fallback options\r\n * @param btn\r\n * @param group\r\n * @param fullToolbarConfig\r\n * @param actions\r\n * @param propName\r\n */\r\nfunction fallbackBtnSetting(btn: ButtonConfig,\r\n                            group: GroupConfig,\r\n                            fullToolbarConfig: ToolbarConfig,\r\n                            actions: Commands,\r\n                            propName: string): void {\r\n  if (btn[propName]) {\r\n\r\n    // if already defined, use the already defined property\r\n    btn[propName] = btn[propName];\r\n\r\n  } else if (group.defaults &&\r\n    group.defaults[propName]) {\r\n\r\n    // if the group has defaults, try use that property\r\n    btn[propName] = group.defaults[propName];\r\n\r\n  } else if (fullToolbarConfig &&\r\n    fullToolbarConfig.defaults &&\r\n    fullToolbarConfig.defaults[propName]) {\r\n\r\n    // if the toolbar has defaults, try use that property\r\n    btn[propName] = fullToolbarConfig.defaults[propName];\r\n\r\n  } else if (btn.action &&\r\n    btn.action.name &&\r\n    actions.get(btn.action.name) &&\r\n    actions.get(btn.action.name).buttonConfig &&\r\n    actions.get(btn.action.name).buttonConfig[propName]) {\r\n\r\n    // if there is an action, try to use that property name\r\n    btn[propName] = actions.get(btn.action.name).buttonConfig[propName];\r\n\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedParameter\r\nexport function customize(toolbar: ToolbarConfig): void {\r\n  // if (!toolbar.settings) return;\r\n  // let set = toolbar.settings;\r\n  // if (set.autoAddMore) {\r\n  //    console.log(\"auto-more\");\r\n  //    let grps = toolbar.groups;\r\n  //    for (let g = 0; g < grps.length; g++) {\r\n  //        let btns = grps[g];\r\n  //        for (let i = 0; i < btns.length; i++) {\r\n  //        }\r\n  //    }\r\n  // }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/button/expand-button-config.ts","import { Log } from './log';\r\nimport { IHasLog } from './ihas-log';\r\n\r\nexport class HasLog  implements  IHasLog {\r\n  log : Log;\r\n\r\n  /**\r\n   * initialize the logger\r\n   * ideally it has a parent-logger to attach to\r\n   * @param logName name to show in the logger\r\n   * @param parentLog parent-logger to attach to\r\n   * @param initialMessage optional start-message to log\r\n   */\r\n  constructor(logName:string, private parentLog?: Log, initialMessage?: string) {\r\n    this.initLogInternal(logName, parentLog, initialMessage);\r\n  }\r\n\r\n  public initLog = (name: string, parentLog?: Log, initialMessage?: string)\r\n    : void => this.initLogInternal(name, parentLog, initialMessage);\r\n\r\n  private initLogInternal(name:string, parentLog?:Log, initialMessage?:string): void\r\n  {\r\n    if (this.log == null)\r\n    // standard & most common case: just create log\r\n    this.log = new Log(name, parentLog, initialMessage);\r\n    else {\r\n    // late-init case, where the log was already created - just reconfig keeping what was in it\r\n      this.log.rename(name);\r\n      this.linkLog(parentLog);\r\n      if (initialMessage != null)\r\n        this.log.add(initialMessage);\r\n    }\r\n  }\r\n\r\n  private logId = 'unknwn';\r\n\r\n  linkLog = (parentLog: Log): void => this.log.linkLog(parentLog);\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/logging/has-log.ts","import { ContextOfButton } from '../context/context-of-button';\r\nimport { windowInPage as window } from '../interfaces/window-in-page';\r\nimport { getTag } from '../manage/api';\r\nimport { reset } from '../quick-edit/start';\r\nimport { disable } from '../toolbar/build-toolbars';\r\nimport { MainContentBlock } from './main-content-block';\r\nimport { getPreviewWithTemplate } from './web-api-promises';\r\n\r\n/*\r\n * this is the content block manager in the browser\r\n *\r\n * A Content Block is a stand alone unit of content, with it's own definition of\r\n * 1. content items\r\n * 2. template\r\n * + some other stuff\r\n *\r\n * it should be able to render itself\r\n */\r\n\r\n\r\nclass Renderer {\r\n  /**\r\n   * Show a message where the content of a module should be - usually as placeholder till something else happens\r\n   * @param {ContextOfButton} context\r\n   * @param {string} newContent\r\n   * @returns {} nothing\r\n   */\r\n  showMessage(context: ContextOfButton, newContent: any): void {\r\n    $(getTag(context.sxc)).html(newContent);\r\n  }\r\n\r\n\r\n  /**\r\n   * this one assumes a replace / change has already happened, but now must be finalized...\r\n   * @param {ContextOfButton} context\r\n   * @param {boolean} forceAjax\r\n   * @param {boolean} preview\r\n   */\r\n  reloadAndReInitialize(context: ContextOfButton, forceAjax?: boolean, preview?: boolean): Promise<any> {\r\n    // if ajax is not supported, we must reload the whole page\r\n    if (!forceAjax && !context.app.supportsAjax) {\r\n      window.location.reload();\r\n      return Promise.resolve();\r\n    }\r\n\r\n    return this.ajaxLoad(context, MainContentBlock.cUseExistingTemplate, preview)\r\n      .then((result) => {\r\n        // If Evoq, tell Evoq that page has changed if it has changed (Ajax call)\r\n        if (window.dnn_tabVersioningEnabled) { // this only exists in evoq or on new DNNs with tabVersioning\r\n          try {\r\n            window.dnn.ContentEditorManager.triggerChangeOnPageContentEvent();\r\n          } catch (e) {\r\n            // ignore\r\n          }\r\n        }\r\n\r\n        // 2017-09-02 2dm - believe this was meant to re-init the dialog manager, but it doesn't actually work\r\n        // must check for side-effects, which would need the manager to re-build the configuration\r\n        // 2018-11-03 2dm disabled completely for now\r\n        // quickDialog.hide();\r\n        return result;\r\n      }).catch((error) => console.log('Error in reloadAndReInitialize', error));\r\n  }\r\n\r\n  /**\r\n   * ajax-call, then replace\r\n   * @param {ContextOfButton} context\r\n   * @param {number} alternateTemplateId\r\n   * @param {boolean} justPreview\r\n   */\r\n  ajaxLoad(context: ContextOfButton, alternateTemplateId: number, justPreview: boolean): Promise<void> {\r\n    return getPreviewWithTemplate(context, alternateTemplateId)\r\n      .then((result: string) => {\r\n        this.replaceContentBlock(context, result, justPreview);\r\n      })\r\n      .then(() => {\r\n        reset();\r\n      }); // reset quick-edit, because the config could have changed\r\n  }\r\n\r\n\r\n  /**\r\n   * ajax update/replace the content of the content-block\r\n   * optionally also initialize the toolbar (if not just preview)\r\n   * @param {ContextOfButton} context\r\n   * @param {string} newContent\r\n   * @param {boolean} justPreview\r\n   */\r\n  private replaceContentBlock(context: ContextOfButton, newContent: string, justPreview: boolean): void {\r\n    try {\r\n      const newDom = $(newContent);\r\n\r\n      // Must disable toolbar before we attach to DOM\r\n      if (justPreview) disable(newDom);\r\n\r\n      $(getTag(context.sxc)).replaceWith(newDom);\r\n\r\n      // reset the cache, so the sxc-object is refreshed\r\n      context.sxc.recreate(true);\r\n    } catch (e) {\r\n      console.log('Error while rendering template:', e);\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\nexport const renderer = new Renderer();\n\n\n// WEBPACK FOOTER //\n// ./src/contentBlock/render.ts","\r\n// ReSharper disable once InconsistentNaming\r\nexport const DebugConfig = {\r\n  cms: {\r\n    autoDump: false,\r\n    run: true\r\n  },\r\n  qDialog: {\r\n    showHide: true\r\n  },\r\n  bootstrap: {\r\n    initInstance: true\r\n  },\r\n  state: {\r\n    change: true,\r\n    get: false\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/DebugConfig.ts","import { ContextOfButton } from '../context/context-of-button';\r\nimport { isDisabled } from '../toolbar/build-toolbars';\r\nimport { renderer } from './render';\r\nimport { saveTemplate } from './web-api-promises';\r\n\r\n/**\r\n * prepare the instance so content can be added\r\n * this ensure the content-group has been created, which is required to add content\r\n * @param {ContextOfButton} context\r\n * @returns {any}\r\n */\r\n\r\nexport function prepareToAddContent(context: ContextOfButton, useModuleList: boolean): Promise<any> {\r\n  const isCreated: boolean = context.contentBlock.isCreated;\r\n  if (isCreated || !useModuleList) return Promise.resolve();\r\n  // return persistTemplate(sxc, null);\r\n  // let manage = sxc.manage;\r\n  // let contentGroup = manage._editContext.ContentGroup;\r\n  // let showingAjaxPreview = $2sxc._toolbarManager.isDisabled(sxc);\r\n  // let groupExistsAndTemplateUnchanged = !!contentGroup.HasContent; // && !showingAjaxPreview;\r\n\r\n  const templateId = context.contentBlock.templateId;\r\n\r\n  // template has not changed\r\n  // if (groupExistsAndTemplateUnchanged) return $.when(null);\r\n\r\n  // persist the template\r\n  return updateTemplate(context, templateId, true);\r\n}\r\n\r\n/**\r\n * Update the template and adjust UI accordingly.\r\n * @param {ContextOfButton} context\r\n * @param {number} templateId\r\n * @param {boolean} forceCreate\r\n */\r\nexport function updateTemplateFromDia(context: ContextOfButton, templateId: number): Promise<void> {\r\n  const wasShowingPreview = isDisabled(context.sxc);\r\n\r\n  return updateTemplate(context, templateId, false)\r\n    .then(() => {\r\n      // only reload on ajax, not on app as that was already re-loaded on the preview\r\n      // necessary to show the original template again\r\n      if (wasShowingPreview)\r\n        renderer.reloadAndReInitialize(context);\r\n    });\r\n}\r\n\r\n/**\r\n * Update the template.\r\n */\r\nfunction updateTemplate(context: ContextOfButton, templateId: number, forceCreate: boolean): Promise<string | void> {\r\n\r\n  return saveTemplate(context, templateId, forceCreate).then((data) => {\r\n    if (!data) return null;\r\n\r\n    // fixes a special case where the guid is given with quotes (depends on version of angularjs) issue #532\r\n    const newGuid = data.replace(/[\\\",\\']/g, '');\r\n\r\n    if (console)\r\n      console.log(`created content group {${newGuid}}`);\r\n\r\n    return context.contentBlock.contentGroupId = newGuid;\r\n  }).catch(() => {\r\n    // error handling\r\n    return alert('error - result not ok, was not able to create ContentGroup');\r\n  });\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/contentBlock/templates.ts","import { ContextOfButton } from '../../context/context-of-button';\r\nimport { oldParametersAdapter } from '../adapters/old-parameters-adapter';\r\nimport { ButtonConfig } from '../button/button-config';\r\nimport { addClasses } from './render-helpers';\r\nimport { Settings } from '../../commands/settings';\r\nimport { ButtonDefinition } from '../button/button-definition';\r\n\r\n/**\r\n * generate the html for a button\r\n * @param sxc instance sxc\r\n * @param buttonConfig\r\n * @param groupIndex group-index in which the button is shown\r\n */\r\nexport function renderButton(context: ContextOfButton, groupIndex: number): HTMLElement {\r\n\r\n  const buttonConfig = context.button;\r\n\r\n  // retrieve configuration for this button\r\n  const oldParamsAdapter: any = oldParametersAdapter(buttonConfig.action);\r\n\r\n  let onclick: string = '';\r\n\r\n  if (!buttonConfig.disabled){\r\n    onclick = `$2sxc(${context.instance.id}, ${context.contentBlock.id}).manage.run(${JSON.stringify(oldParamsAdapter)}, event);`;\r\n    // onclick = `$2sxc(${context.instance.id}, ${context.contentBlock.id}).manage.run2($2sxc.context(this), ${JSON.stringify(oldParamsAdapter)}, event);`;\r\n  }\r\n\r\n  const button = document.createElement('a');\r\n\r\n  if (buttonConfig.action) {\r\n    button.classList.add(`sc-${buttonConfig.action.name}`);\r\n  }\r\n\r\n  button.classList.add(`group-${groupIndex}`);\r\n\r\n  if (buttonConfig.disabled) {\r\n    button.classList.add('disabled');\r\n  }\r\n\r\n  addClasses(button, buttonConfig.classes, ',');\r\n\r\n  if (buttonConfig.dynamicClasses) {\r\n    const dynamicClasses = buttonConfig.dynamicClasses(context);\r\n    addClasses(button, dynamicClasses, ' ');\r\n  }\r\n\r\n  button.setAttribute('onclick', onclick); // serialize JavaScript because of ajax\r\n\r\n  if (buttonConfig.title) {\r\n    button.setAttribute('data-i18n', `[title]${buttonConfig.title(context)}`); // localization support\r\n  }\r\n\r\n  const box = document.createElement('div');\r\n\r\n  const symbol = document.createElement('i');\r\n  if (buttonConfig.icon) {\r\n    addClasses(symbol, buttonConfig.icon(context), ' ');\r\n  }\r\n\r\n  symbol.setAttribute('aria-hidden', 'true');\r\n\r\n  box.appendChild(symbol);\r\n\r\n  button.appendChild(box);\r\n\r\n  return button;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/item/render-button.ts","import { CommandDefinition } from '../../commands/command-definition';\r\n\r\nexport class ButtonAction {\r\n  // name: string; // the command name from the action list\r\n  // params: any[]; // custom parameters if used or if these override other params\r\n  commandDefinition: CommandDefinition; // reference to action to be run\r\n  customCode: string; // custom code if used\r\n\r\n  constructor(public name: string, contentType?: string, public params?: any) {\r\n    if (!params) {\r\n      this.params = {};\r\n    }\r\n\r\n    if (contentType) {\r\n      Object.assign(this.params, { contentType: contentType });\r\n    }\r\n\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/button/button-action.ts","import { Command } from '../../commands/command';\r\nimport { Settings } from '../../commands/settings';\r\nimport { ContextOfButton } from '../../context/context-of-button';\r\nimport { ButtonAction } from './button-action';\r\n\r\nexport class ButtonConfig {\r\n  name: string = '';\r\n  action: ButtonAction;\r\n  classes: string = '';\r\n  show: boolean = null; // maybe\r\n\r\n  constructor(action?: ButtonAction, partialConfig?: Partial<ButtonConfig>) {\r\n    if (action && action.commandDefinition && action.commandDefinition.buttonConfig) {\r\n      this.action = action;\r\n      // get defaults from action commandDefinition\r\n      Object.assign(this, action.commandDefinition.buttonConfig);\r\n    }\r\n\r\n    if (partialConfig) {\r\n      Object.assign(this, partialConfig);\r\n    }\r\n  }\r\n\r\n  code: (context: ContextOfButton, event: any) =>  Promise<any>; // void;\r\n  configureCommand: (context: ContextOfButton, cmd: Command) => void;\r\n  dialog: (context: ContextOfButton) => string;\r\n  disabled: (context: ContextOfButton) => boolean;\r\n  dynamicClasses: (context: ContextOfButton) => string;\r\n  dynamicDisabled: (() => boolean) = () => false; // maybe\r\n  fullScreen: (context: ContextOfButton) => boolean;\r\n  icon: (context: ContextOfButton) => string;\r\n  inlineWindow: (context: ContextOfButton) => boolean;\r\n  newWindow: (context: ContextOfButton) => boolean;\r\n  params: (context: ContextOfButton) => any;\r\n  partOfPage: (context: ContextOfButton) => boolean;\r\n  showCondition: (context: ContextOfButton) => boolean;\r\n  title: (context: ContextOfButton) => string;\r\n  uiActionOnly: (context: ContextOfButton) => boolean;\r\n\r\n  [propName: string]: any;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/button/button-config.ts","import { ContextOfButton } from '../context/context-of-button';\r\nimport { DebugConfig } from '../DebugConfig';\r\nimport Container = require('./container');\r\nimport ContainerSize = require('./container-size');\r\nimport DialogFrameElement = require('./iDialogFrameElement');\r\nimport IDialogFrameElement = DialogFrameElement.IDialogFrameElement;\r\nimport { IFrameBridge } from './iframe-bridge';\r\nimport QuickEditState = require('./state');\r\nimport UrlHandler = require('./url-handler');\r\n\r\nconst dbg = DebugConfig.qDialog;\r\nconst diagShowClass: string = 'dia-select';\r\n\r\n/** dialog manager - the currently active dialog object */\r\nlet current: IDialogFrameElement = null;\r\n\r\n/**\r\n * this is a dialog manager which is in charge of all quick-dialogues\r\n * it always has a reference to the latest dialog created by any module instance\r\n */\r\nclass QuickDialogManager {\r\n  /**\r\n   * Determines if any dialog is currently showing\r\n   */\r\n  isVisible() {\r\n    return current != null;\r\n  }\r\n\r\n  /**\r\n   * toggle visibility\r\n   * @param {boolean} [show] true/false optional\r\n   */\r\n  setVisible(show: boolean): void {\r\n    const cont = Container.getOrCreate();\r\n    // if (show === undefined)\r\n    //  show = !cont.hasClass(diagShowClass);\r\n    // show/hide visually\r\n    cont.toggleClass(diagShowClass, show);\r\n    this.rememberDialogState(Container.getIFrame(cont), show);\r\n    current = show ? Container.getIFrame() : null;\r\n  }\r\n\r\n  /**\r\n   * show / reset the current iframe to use new url and callback\r\n   * @param {ContextOfButton} context object\r\n   * @param {string} url - url to show\r\n   * @param {function()} closeCallback - callback event\r\n   * @param {boolean} isFullscreen - if it should open full screen\r\n   * @param {string} [dialogName] - optional name of dialog, to check if it's already open\r\n   * @returns {any} jquery object of the iframe\r\n   */\r\n  showOrToggleFromToolbar(\r\n    context: ContextOfButton,\r\n    url: string,\r\n    isFullscreen: boolean,\r\n    dialogName: string,\r\n  ): Promise<boolean> {\r\n    ContainerSize.setSize(isFullscreen);\r\n    const iFrame = Container.getIFrame();\r\n\r\n    // in case it's a toggle\r\n    if (this.isVisible()) {\r\n      // check if we're just toggling the current, or will show a new one afterwards\r\n      const currentPromise =\r\n        dialogName &&\r\n        current &&\r\n        current.bridge.isConfiguredFor(context.sxc.cacheKey, dialogName)\r\n          ? this.promise\r\n          : null;\r\n      this.cancel(current.bridge);\r\n      // just a hide this, return the old promise\r\n      if (currentPromise) return currentPromise;\r\n    }\r\n\r\n    const dialogUrl = UrlHandler.setUrlToQuickDialog(url);\r\n    iFrame.bridge.setup(context.sxc, dialogName);\r\n    iFrame.setAttribute('src', dialogUrl);\r\n    // if the window had already been loaded, re-init\r\n    if (iFrame.contentWindow && (iFrame.contentWindow as any).reboot)\r\n      (iFrame.contentWindow as any).reboot();\r\n\r\n    // make sure it's visible'\r\n    this.setVisible(true);\r\n    return this.promiseRestart();\r\n  }\r\n\r\n  cancel(bridge: IFrameBridge) {\r\n    this.setVisible(false);\r\n    QuickEditState.cancelled.set('true');\r\n    this.resolvePromise(bridge.changed);\r\n  }\r\n\r\n  private rememberDialogState(\r\n    iframe: IDialogFrameElement,\r\n    state: boolean,\r\n  ): void {\r\n    if (dbg.showHide) console.log(`qDialog persistDia(..., ${state})`);\r\n    if (state) {\r\n      const cbId = (iframe.bridge as IFrameBridge)\r\n        .getContext()\r\n        .contentBlock.id.toString();\r\n      if (dbg.showHide) console.log(`contentBlockId: ${cbId})`);\r\n      return QuickEditState.cbId.set(cbId);\r\n    } else return QuickEditState.cbId.remove();\r\n  }\r\n\r\n  //#region promise handling\r\n  private promise: Promise<boolean>;\r\n  private resolvePromise: (value?: boolean) => void;\r\n  private promiseRestart(): Promise<boolean> {\r\n    this.promise = new Promise<boolean>(\r\n      (resolve) => (this.resolvePromise = resolve),\r\n    );\r\n    return this.promise;\r\n  }\r\n  //#endregion\r\n}\r\n\r\nexport let quickDialog = new QuickDialogManager();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-dialog/quick-dialog.ts","import { ContextOfButton } from '../context/context-of-button';\r\nimport { IUserOfEditContext } from '../interfaces/iuser-of-edit-context';\r\n\r\n\r\nexport class UserOfEditContext implements IUserOfEditContext {\r\n  canDesign: boolean;\r\n  canDevelop: boolean;\r\n\r\n  static fromContext(context: ContextOfButton): UserOfEditContext {\r\n    const user = new UserOfEditContext();\r\n    user.canDesign = context.user.canDesign;\r\n    user.canDevelop = context.user.canDevelop;\r\n    return user;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/manage/user-of-edit-context.ts","export enum DialogPaths {\r\n  ng1 = 'dist/dnn/ui.html', // AngularJS\r\n  quickDialog = 'dist/ng/ui.html', // quick-dialog\r\n  ng8 = 'dist/ng-edit/ui.html', // Angular\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/settings/DialogPaths.ts","import { getSxcInstance } from '../x-bootstrap/sxc';\r\nimport { CmdsStrategyFactory } from './cmds-strategy-factory';\r\nimport { Mod } from './mod';\r\nimport { $quickE as quickE } from './quick-e';\r\nimport { selectors } from './selectors-instance';\r\nimport { Specs } from './specs';\r\n\r\n/** add a clipboard to the quick edit */\r\n\r\n/**\r\n * perform copy and paste commands - needs the clipboard\r\n * @param cbAction\r\n * @param list\r\n * @param index\r\n * @param type\r\n */\r\nexport function copyPasteInPage(cbAction: string, list: any, index: number, type: any): any {\r\n  const newClip = createSpecs(type, list, index);\r\n\r\n  // action!\r\n  switch (cbAction) {\r\n    case 'select':\r\n      mark(newClip);\r\n      break;\r\n\r\n    case 'paste':\r\n      const from = data.index;\r\n      const to = newClip.index;\r\n       // check that we only move block-to-block or module to module\r\n      if (data.type !== newClip.type)\r\n        return alert(\"can't move module-to-block; move only works from module-to-module or block-to-block\");\r\n\r\n      if (isNaN(from) || isNaN(to) || from === to) // || from + 1 === to) // this moves it to the same spot, so ignore\r\n        return clear(); // don't do anything\r\n\r\n      // cb-numbering is a bit different, because the selector is at the bottom\r\n      // only there we should also skip on +1;\r\n      if (newClip.type === selectors.cb.id && from + 1 === to)\r\n        return clear(); // don't do anything\r\n\r\n      if (type === selectors.cb.id) {\r\n        const sxc = getSxcInstance(list) as SxcInstanceWithInternals;\r\n        sxc.manage._getCbManipulator().move(newClip.parent, newClip.field, from, to);\r\n      } else {\r\n        // sometimes missing oldClip.item\r\n        // if (clipboard.data.item)\r\n        Mod.move(data, newClip, from, to);\r\n      }\r\n      clear();\r\n      break;\r\n    default:\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * clipboard object - remembers what module (or content-block) was previously copied / needs to be pasted\r\n */\r\nexport let data: any = {};\r\n\r\nexport function mark(newData: Specs): void {\r\n  if (newData) {\r\n    // if it was already selected with the same thing, then release it\r\n    if (data && data.item === newData.item)\r\n      return clear();\r\n    data = newData;\r\n  }\r\n  $(`.${selectors.selected}`).removeClass(selectors.selected); // clear previous markings\r\n\r\n  // sometimes missing data.item\r\n  if (!data.item) {\r\n    return;\r\n  }\r\n\r\n  const cb: any = $(data.item);\r\n  cb.addClass(selectors.selected);\r\n  if (cb.prev().is('iframe'))\r\n    cb.prev().addClass(selectors.selected);\r\n  setSecondaryActionsState(true);\r\n  quickE.selected.toggle(cb, data.type);\r\n}\r\n\r\nexport function clear(): void {\r\n  $(`.${selectors.selected}`).removeClass(selectors.selected);\r\n  data = null;\r\n  setSecondaryActionsState(false);\r\n  quickE.selected.toggle(false);\r\n}\r\n\r\nexport function createSpecs(type: string, list: any, index: number): Specs {\r\n  const listItems: any = list.find(selectors[type].selector);\r\n  let currentItem: any;\r\n  if (index >= listItems.length) {\r\n    // when paste module below the last module in pane\r\n    // index is 1 larger than the length, then select last\r\n    currentItem = listItems[listItems.length - 1];\r\n  } else {\r\n    currentItem = listItems[index];\r\n  }\r\n  const editContext = JSON.parse(list.attr(selectors.cb.context) || null) || { parent: 'dnn', field: list.id };\r\n  return {\r\n    parent: editContext.parent,\r\n    field: editContext.field,\r\n    list: list,\r\n    item: currentItem,\r\n    index: index,\r\n    type: type,\r\n  };\r\n}\r\n\r\n\r\nfunction setSecondaryActionsState(state: boolean): any {\r\n  let btns = $('a.sc-content-block-menu-btn');\r\n  btns = btns.filter('.icon-sxc-paste');\r\n  btns.toggleClass('sc-unavailable', !state);\r\n}\r\n\r\nconst cmdsStrategyFactory = new CmdsStrategyFactory();\r\n\r\n/**\r\n * bind clipboard actions\r\n */\r\n$('a', quickE.selected).click(function () {\r\n  const action: string = $(this).data('action');\r\n  const clip: any = data;\r\n  switch (action) {\r\n    case 'delete':\r\n      return cmdsStrategyFactory.delete(clip);\r\n    case 'sendToPane':\r\n      return Mod.sendToPane();\r\n    default:\r\n      throw new Error(`unexpected action: ${action}`);\r\n  }\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-edit/clipboard.ts","import { Engine } from '../commands/engine';\r\nimport { Settings } from '../commands/settings';\r\nimport { context as getContext } from '../context/context';\r\nimport {\r\n  ContextOfInstance,\r\n  isContextOfInstance,\r\n} from '../context/context-of-instance';\r\nimport { DebugConfig } from '../DebugConfig';\r\nimport { HasLog } from '../logging/has-log';\r\nimport { Log } from '../logging/log';\r\n\r\nconst logId = 'Cms.Api';\r\n\r\nexport class Cms extends HasLog {\r\n  /**\r\n   * if true (default) will reset the log everytime something is done\r\n   * if false, will preserve the log over multiple calls\r\n   */\r\n  autoReset = true;\r\n  autoDump = DebugConfig.cms.autoDump;\r\n\r\n  constructor() {\r\n    super(logId, null);\r\n  }\r\n\r\n  /**\r\n   * reset / clear the log\r\n   */\r\n  resetLog() {\r\n    this.log = new Log(logId, null, 'log was reset');\r\n  }\r\n\r\n  run(\r\n    context: ContextOfInstance | HTMLElement,\r\n    nameOrSettings: string | Partial<Settings>,\r\n    eventOrSettings?: Partial<Settings> | MouseEvent,\r\n    event?: MouseEvent,\r\n  ): Promise<any> {\r\n    const realContext = isContextOfInstance(context)\r\n      ? context\r\n      : getContext(context);\r\n\r\n    return this.do(() =>\r\n      new Engine(this.log).detectParamsAndRun(\r\n        realContext,\r\n        nameOrSettings,\r\n        eventOrSettings,\r\n        event,\r\n      ),\r\n    );\r\n  }\r\n\r\n  /**\r\n   * reset/clear the log if alwaysResetLog is true\r\n   */\r\n  private do(innerCall: () => Promise<any>): Promise<any> {\r\n    if (this.autoReset) this.resetLog();\r\n    const result = innerCall();\r\n    if (this.autoDump) console.log(this.log.dump());\r\n    return result;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/cms/Cms.ts","import { ContextOfPage } from './context-of-page';\r\nimport { AppContext } from './instance-context/app-context';\r\nimport { InstanceContext } from './instance-context/instance-context';\r\nimport { UiContext } from './instance-context/ui-context';\r\n\r\n\r\nexport class ContextOfInstance extends ContextOfPage {\r\n  sxc: SxcInstanceWithInternals; // instance of sxc object\r\n  instance: InstanceContext; // information related to the current DNN module, incl.instanceId, etc.\r\n  app: AppContext; // this will be about the current app, settings of the app, app - paths, etc.\r\n  ui: UiContext; // ensure that the UI will load the correct assets to enable editing\r\n}\r\n\r\nexport function isContextOfInstance(thing: any): thing is ContextOfInstance {\r\n  const maybeButton = thing as ContextOfInstance;\r\n  return maybeButton.sxc !== undefined && maybeButton.instance !== undefined;\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/context/context-of-instance.ts","/**\r\n * helper method to add list of zero to many classes to Element\r\n * @param element\r\n * @param classes\r\n * @param spliter\r\n */\r\nexport function addClasses(element: HTMLElement, classes: string, spliter: string) {\r\n  if (classes) {\r\n    const classessArray = classes.split(spliter);\r\n    for (let c = 0; c < classessArray.length; c++) {\r\n      if (classessArray[c]) {\r\n        element.classList.add(classessArray[c]);\r\n      }\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/item/render-helpers.ts","import { Log } from '../../logging/log';\r\nimport { InstanceConfig } from '../../manage/instance-config';\r\nimport { oldToolbarSettingsAddapter } from '../adapters/old-toolbar-settings-adapter';\r\nimport { customize, removeDisableButtons } from '../button/expand-button-config';\r\nimport { expandButtonGroups } from '../button/expand-group-config';\r\nimport { ToolbarConfig } from './toolbar-config';\r\nimport { defaultToolbarSettings, settingsForEmptyToolbar, ToolbarSettings } from './toolbar-settings';\r\nimport { ToolbarConfigTemplates } from './toolbar-config-templates';\r\nimport { ContextOfButton } from '../../context/context-of-button';\r\n\r\nexport function expandToolbarConfig(context: ContextOfButton, toolbarData: any, toolbarSettings: ToolbarSettings, parentLog?: Log): ToolbarConfig {\r\n  const log = new Log('Tlb.ExpTop', parentLog, 'expand start');\r\n\r\n  if (toolbarData === {} && toolbarSettings === ({} as ToolbarSettings)) {\r\n    log.add('no data or settings found, will use default toolbar');\r\n    toolbarSettings = settingsForEmptyToolbar;\r\n  }\r\n\r\n  // if it has an action or is an array, keep that. Otherwise get standard buttons\r\n  toolbarData = toolbarData || {}; // if null/undefined, use empty object\r\n\r\n  let unstructuredConfig = toolbarData;\r\n  if (!toolbarData.action && !toolbarData.groups && !toolbarData.buttons && !Array.isArray(toolbarData)) {\r\n    log.add('no toolbar details found, will use standard toolbar template');\r\n    const toolbarTemplate = ToolbarConfigTemplates.Instance(log).get('default'); // use default toolbar template\r\n    unstructuredConfig = JSON.parse(JSON.stringify(toolbarTemplate)); // deep copy toolbar template\r\n    unstructuredConfig.params = ((toolbarData) && Array.isArray(toolbarData) && toolbarData[0]) || toolbarData; // these are the default command parameters\r\n  }\r\n\r\n  const instanceConfig = InstanceConfig.fromContext(context);\r\n\r\n  // whatever we had, if more settings were provided, override with these...\r\n  const config = buildFullDefinition(context, unstructuredConfig, instanceConfig, toolbarSettings, log);\r\n\r\n  log.add('expand done');\r\n  return config;\r\n}\r\n\r\n/**\r\n * take any common input format and convert it to a full toolbar-structure definition\r\n * can handle the following input formats (the param unstructuredConfig):\r\n * complete tree (detected by \"groups): { groups: [ {}, {}], name: ..., defaults: {...} }\r\n * group of buttons (detected by \"buttons): { buttons: \"...\" | [], name: ..., ... }\r\n * list of buttons (detected by IsArray with action): [ { action: \"...\" | []}, { action: \"\"|[]} ]\r\n * button (detected by \"command\"): { command: \"\"|[], icon: \"..\", ... }\r\n * just a command (detected by \"action\"): { entityId: 17, action: \"edit\" }\r\n * array of commands: [{entityId: 17, action: \"edit\"}, {contentType: \"blog\", action: \"new\"}]\r\n * @param unstructuredConfig\r\n * @param allActions\r\n * @param instanceConfig\r\n * @param toolbarSettings\r\n */\r\nfunction buildFullDefinition(toolbarContext: ContextOfButton, unstructuredConfig: any, instanceConfig: InstanceConfig, toolbarSettings: ToolbarSettings, parentLog: Log) {\r\n  const log = new Log('Tlb.BldFul', parentLog, 'start');\r\n  const fullConfig = ensureDefinitionTree(unstructuredConfig, toolbarSettings, log);\r\n\r\n  // ToDo: don't use console.log in production\r\n  if (unstructuredConfig.debug) console.log('toolbar: detailed debug on; start build full Def');\r\n\r\n  expandButtonGroups(fullConfig, log);\r\n\r\n  removeDisableButtons(toolbarContext, fullConfig, instanceConfig, log);\r\n\r\n  if (fullConfig.debug) console.log('after remove: ', fullConfig);\r\n\r\n  customize(fullConfig);\r\n\r\n  return fullConfig;\r\n};\r\n\r\n//#region build initial toolbar object\r\n/**\r\n * this will take an input which could already be a tree, but it could also be a\r\n * button-definition, or just a string, and make sure that afterwards it's a tree with groups\r\n * the groups could still be in compact form, or already expanded, depending on the input\r\n * output is object with:\r\n * - groups containing buttons[], but buttons could still be very flat\r\n * - defaults, already officially formatted\r\n * - params, officially formatted\r\n * @param unstructuredConfig\r\n * @param toolbarSettings\r\n */\r\nfunction ensureDefinitionTree(unstructuredConfig: any, toolbarSettings: ToolbarSettings, parentLog: Log): ToolbarConfig {\r\n  const log = new Log(\"Tlb.DefTre\", parentLog, \"start\");\r\n  // original is null/undefined, just return empty set\r\n  if (!unstructuredConfig) throw (`preparing toolbar, with nothing to work on: ${unstructuredConfig}`);\r\n\r\n  // ensure that if it's just actions or buttons, they are then processed as arrays with 1 entry\r\n  if (!Array.isArray(unstructuredConfig) && (unstructuredConfig.action || unstructuredConfig.buttons)) {\r\n    log.add('found no array, but detected action/buttons properties, will wrap config into array');\r\n    unstructuredConfig = [unstructuredConfig];\r\n  }\r\n\r\n  // ensure that arrays of actions or buttons are re-mapped to the right structure node\r\n  if (Array.isArray(unstructuredConfig) && unstructuredConfig.length) {\r\n    log.add('detected array with length');\r\n    if (unstructuredConfig[0].buttons) {\r\n      log.add('detected buttons on first item, assume button-group, moving into .groups');\r\n      (unstructuredConfig as any).groups = unstructuredConfig; // move \"down\"\r\n    } else if (unstructuredConfig[0].command || unstructuredConfig[0].action) {\r\n      log.add('detected command or action on first item, assume buttons, move into .groups[buttons] ');\r\n      unstructuredConfig = { groups: [{ buttons: unstructuredConfig }] };\r\n    } else {\r\n      log.add('can\\'t detect what this is - show warning');\r\n      console.warn(\"toolbar tried to build toolbar but couldn't detect type of this:\", unstructuredConfig);\r\n    }\r\n  } else\r\n    log.add('not array or has no items');\r\n\r\n  const toolbarConfig = new ToolbarConfig();\r\n  // toolbarConfig.groupConfig = new GroupConfig(original.groups as ButtonConfig[]);\r\n  toolbarConfig.groups = unstructuredConfig.groups || []; // the groups of buttons\r\n  toolbarConfig.params = unstructuredConfig.params || {}; // these are the default command parameters\r\n  toolbarConfig.settings = Object.assign({}, defaultToolbarSettings, unstructuredConfig.settings, oldToolbarSettingsAddapter(toolbarSettings)) as ToolbarSettings;\r\n\r\n  // todo: old props, remove\r\n  toolbarConfig.name = unstructuredConfig.name || 'toolbar'; // name, no real use\r\n  toolbarConfig.debug = unstructuredConfig.debug || false; // show more debug info\r\n  toolbarConfig.defaults = unstructuredConfig.defaults || {}; // the button defaults like icon, etc.\r\n\r\n  log.add('done');\r\n  return toolbarConfig;\r\n};\r\n//#endregion initial toolbar object\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/toolbar/toolbar-expand-config.ts","export function parametersAdapter(oldParameters: any): any {\r\n  const newParams = oldParameters;\r\n  // some clean-up\r\n  delete newParams.action; // remove the action property\r\n  return newParams;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/adapters/parameters-adapter.ts","import { ContextOfButton } from '../../context/context-of-button';\r\n\r\nexport function settingsAdapter(oldSettings: any): any {\r\n\r\n  const newSettings: any = {};\r\n\r\n  // 'classes',\r\n  if (oldSettings.classes) {\r\n    newSettings.classes = oldSettings.classes;\r\n  }\r\n\r\n  // 'dialog',\r\n  if (oldSettings.dialog) {\r\n    newSettings.dialog = evalPropOrFunction(oldSettings.dialog);\r\n  }\r\n  // 'disabled'\r\n  if (oldSettings.disabled) {\r\n    newSettings.disabled = evalPropOrFunction(oldSettings.disabled);\r\n  }\r\n\r\n  // 'dynamicClasses',\r\n  if (oldSettings.dynamicClasses) {\r\n    newSettings.dynamicClasses = evalPropOrFunction(oldSettings.dynamicClasses);\r\n  }\r\n\r\n  // 'fullScreen',\r\n  if (oldSettings.fullScreen) {\r\n    newSettings.fullScreen = evalPropOrFunction(oldSettings.fullScreen);\r\n  }\r\n\r\n  // 'icon',\r\n  if (oldSettings.icon) {\r\n    newSettings.icon = evalPropOrFunction(oldSettings.icon);\r\n  }\r\n\r\n  // 'inlineWindow',\r\n  if (oldSettings.inlineWindow) {\r\n    newSettings.inlineWindow = evalPropOrFunction(oldSettings.inlineWindow);\r\n  }\r\n\r\n  // 'newWindow',\r\n  if (oldSettings.newWindow) {\r\n    newSettings.newWindow = evalPropOrFunction(oldSettings.newWindow);\r\n  }\r\n\r\n  // partOfPage\r\n  if (oldSettings.partOfPage) {\r\n    newSettings.partOfPage = evalPropOrFunction(oldSettings.partOfPage);\r\n  }\r\n\r\n  // 'showCondition',\r\n  if (oldSettings.showCondition) {\r\n    newSettings.showCondition = evalPropOrFunction(oldSettings.showCondition);\r\n  }\r\n\r\n  // 'title',\r\n  if (oldSettings.title) {\r\n    newSettings.title = evalPropOrFunction(oldSettings.title);\r\n  }\r\n\r\n  return newSettings;\r\n}\r\n\r\nfunction evalPropOrFunction(propOrFunction: any): any {\r\n  if (propOrFunction === undefined || propOrFunction === null) {\r\n    return false;\r\n  }\r\n  if (typeof (propOrFunction) === 'function') {\r\n    return propOrFunction;\r\n  } else {\r\n    return (context: ContextOfButton) => propOrFunction;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/adapters/settings-adapter.ts","/**\r\n * entity support (vertical compatibility for pre 2sxc v9.x)\r\n * does some clean-up work on a button-definition object\r\n * because the target item could be specified directly, or in a complex internal object called entity\r\n * @param actDef\r\n */\r\nexport function flattenActionDefinition(actDef: any): void {\r\n\r\n  if (!actDef.entity || !actDef.entity._2sxcEditInformation) {\r\n    return;\r\n  }\r\n\r\n  const editInfo = actDef.entity._2sxcEditInformation;\r\n  actDef.useModuleList = (editInfo.sortOrder !== undefined); // has sort-order, so use list\r\n\r\n  if (actDef.entity.EntityId !== undefined) {\r\n    actDef.entityId = actDef.entity.EntityId;\r\n  }\r\n\r\n  if (editInfo.sortOrder !== undefined) {\r\n    actDef.sortOrder = editInfo.sortOrder;\r\n  }\r\n\r\n  delete actDef.entity; // clean up edit-info\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/adapters/flatten-action-definition.ts","import { ToolbarInitConfig } from '../toolbar-init-config';\r\n\r\n/** contains toolbar behaviour settings like float, etc. */\r\nexport class ToolbarSettings {\r\n  autoAddMore: null | 'start' | 'end' | true = null; //  [true: used to be right/start]\r\n  hover: 'left' | 'right' | 'none' = 'right';\r\n  show: 'always' | 'hover' = 'hover';\r\n  classes: string = '';\r\n  constructor(toolbarSettings?: Partial<ToolbarSettings>) {\r\n    if (toolbarSettings) {\r\n      Object.assign(this, toolbarSettings);\r\n    }\r\n  }\r\n}\r\n\r\n// ToDo: refactor to avoid side-effects\r\nexport const defaultToolbarSettings = new ToolbarSettings({\r\n  autoAddMore: null, // null | 'start' | 'end' | true\r\n  hover: 'right', // 'left' |'right' | 'none'\r\n  show: 'hover', // 'always' | 'hover'\r\n  // order or reverse, still thinking about this --> order: \"default\"    // default | reverse\r\n});\r\n\r\n/** default / fallback settings for toolbars when nothings is specified */\r\nexport const settingsForEmptyToolbar = new ToolbarSettings({\r\n  autoAddMore: 'start', // ex: 'left'\r\n  hover: 'left',\r\n  show: 'hover',\r\n});\r\n\r\nexport const emptyToolbar = {\r\n  toolbar: '',\r\n  settings: settingsForEmptyToolbar,\r\n} as ToolbarInitConfig;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/toolbar/toolbar-settings.ts","import { defaultToolbarTemplate } from './templates/default-toolbar-template';\r\nimport { leftToolbarTemplate } from './templates/left-toolbar-template';\r\nimport { ToolbarConfigTemplate } from './toolbar-config-template';\r\nimport { HasLog } from '../../logging/has-log';\r\nimport { Log } from '../../logging/log';\r\n\r\nexport class ToolbarConfigTemplates extends HasLog {\r\n  private static singleton: ToolbarConfigTemplates = null; // A variable which stores the singleton object. Initially, the variable acts like a placeholder\r\n  configTemplateList: ToolbarConfigTemplate[] = [];\r\n  list: HashTable<ToolbarConfigTemplate> = {}; // hash - table of templates, to be used a list()['template - name']\r\n  private constructor(parentLog: Log) {\r\n    super('Tlb.TmpMan', parentLog, \"build\");\r\n    this.add('default', defaultToolbarTemplate);\r\n    this.add('left', leftToolbarTemplate);\r\n  }\r\n\r\n  public static Instance(parentLog: Log): ToolbarConfigTemplates {\r\n    // check if an instance of the class is already created\r\n    if (this.singleton == null) {\r\n      // If not created create an instance of the class\r\n      // store the instance in the variable\r\n      this.singleton = new ToolbarConfigTemplates(parentLog);\r\n    }\r\n    // return the singleton object\r\n    return this.singleton;\r\n  }\r\n\r\n  // a single template  usually 'default'\r\n  get(name: string): ToolbarConfigTemplate {\r\n    return this.list[name];\r\n  }\r\n\r\n  // adds a config to the list, if it doesn't exist\r\n  add(name: string, template: ToolbarConfigTemplate, force?: boolean) {\r\n    this.list[name] = template;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/toolbar/toolbar-config-templates.ts","\r\n/** Toolbar constants */\r\nexport const toolbar = {\r\n  attr: {\r\n    full: 'sxc-toolbar',\r\n    hover: 'sxc-toolbar-hover',\r\n    disable: 'data-disable-toolbar',\r\n  },\r\n  classes: {\r\n    oldHover: 'sc-element',\r\n  },\r\n  selectors: {\r\n    ofOldHover: '.sc-element'\r\n  }\r\n}\r\n\r\n/** ContentBlock constants  */\r\nexport const cb = {\r\n  classes: {\r\n    name: 'sc-content-block'\r\n  },\r\n  selectors: {\r\n    ofName: '.sc-content-block'\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.ts","import { ContextOfButton } from '../context/context-of-button';\r\nimport { renderToolbar } from './item/render-toolbar';\r\n\r\n/**\r\n * Remove orphan tag-toolbars from DOM\r\n */\r\nexport function CleanupTagToolbars() {\r\n  const tagToolbars = $(`[${tagToolbarForAttr}]`);\r\n  tagToolbars.each((i, e) => {\r\n    const id = $(e).attr(tagToolbarForAttr);\r\n    if (!$(`[${tagToolbarAttr}=${id}]`).length) {\r\n      $(e).remove();\r\n    }\r\n  });\r\n}\r\n\r\nconst tagToolbarPadding = 4,\r\n  tagToolbarPaddingRight = 0,\r\n  toolbarHeight = 20;\r\nconst tagToolbarAttr = 'data-tagtoolbar';\r\nconst tagToolbarForAttr = 'data-tagtoolbar-for';\r\n\r\n/**\r\n * Returns the body offset if positioning is relative or absolute\r\n */\r\nfunction getBodyOffset() {\r\n  const body = $('body');\r\n  const bodyPos = body.css('position');\r\n  if (bodyPos === 'relative' || bodyPos === 'absolute') {\r\n    const offset = body.offset();\r\n    return {\r\n      top: offset.top,\r\n      left: offset.left\r\n    }\r\n  }\r\n  return {\r\n    top: 0, \r\n    left: 0\r\n  }\r\n}\r\n\r\n/**\r\n * Number generator used for TagToolbars\r\n */\r\nlet lastMenuId = 0;\r\nfunction getMenuNumber() {\r\n  return lastMenuId++;\r\n}\r\n\r\n\r\n/** The current mouseposition, always updated when the mouse changes */\r\nconst mousePosition = {\r\n  x: 0,\r\n  y: 0\r\n}\r\n\r\n/**\r\n * Keep the mouse-position update for future use\r\n */\r\n$(window).on('mousemove', (e) => {\r\n  mousePosition.x = e.clientX;\r\n  mousePosition.y = e.clientY;\r\n});\r\n\r\nexport class TagToolbar {\r\n  toolbarElement = null as JQuery<HTMLElement>;\r\n  initialized = false;\r\n\r\n  constructor(private readonly tag: JQuery<HTMLElement>, private readonly cnt: ContextOfButton) {\r\n    this.updatePosition = this.updatePosition.bind(this);\r\n\r\n    // Ensure toolbar gets visible when hovering\r\n    tag.on('mouseenter', () => {\r\n      this.initialize();\r\n      this.showToolbar();\r\n    });\r\n\r\n    tag.on('mouseleave', (e) => {\r\n      this.initialize();\r\n\r\n      // if we hover the menu itself now, don't hide it\r\n      if (!$.contains(this.toolbarElement[0], e.relatedTarget) && this.toolbarElement[0] !== e.relatedTarget)\r\n        this.hideToolbar();\r\n    });\r\n  }\r\n\r\n  initialize() {\r\n    if (this.initialized)\r\n      return;\r\n\r\n    const toolbarId = `${this.cnt.instance.id}-${this.cnt.contentBlock.id}-${getMenuNumber()}`;\r\n\r\n    // render toolbar and append tag to body\r\n    this.toolbarElement = $(renderToolbar(this.cnt));\r\n\r\n    this.toolbarElement.on('mouseleave', (e) => {\r\n      // if we do not hover the tag now, hide it\r\n      if (!$.contains(this.tag[0], e.relatedTarget) && this.tag[0] !== e.relatedTarget)\r\n        this.hideToolbar();\r\n    });\r\n\r\n    $('body').append(this.toolbarElement);\r\n\r\n    this.toolbarElement.attr(tagToolbarForAttr, toolbarId);\r\n    this.tag.attr(tagToolbarAttr, toolbarId);\r\n\r\n    this.toolbarElement.css({ display: 'none', position: 'absolute', transition: 'top 0.5s ease-out' });\r\n\r\n    this.initialized = true;\r\n  }\r\n\r\n  updatePosition() {\r\n\r\n    const position = {\r\n      top: 'auto' as any,\r\n      left: 'auto' as any,\r\n      right: 'auto' as any,\r\n      viewportOffset: this.tag[0].getBoundingClientRect().top,\r\n      bodyOffset: getBodyOffset(),\r\n      tagScrollOffset: 0,\r\n      tagOffset: this.tag.offset(),\r\n      tagWidth: this.tag.outerWidth(),\r\n      mousePos: mousePosition,\r\n      win: {\r\n        scrollY: window.scrollY,\r\n        width: $('body').width()\r\n      },\r\n      padding: tagToolbarPadding\r\n    };\r\n\r\n    // If we scrolled down, the toolbar might not be visible - calculate offset\r\n    position.tagScrollOffset = Math.min(position.viewportOffset - position.bodyOffset.top, 0);\r\n\r\n    // Update top coordinates\r\n    if (position.tagScrollOffset === 0)\r\n      position.top = position.tagOffset.top + tagToolbarPadding - position.bodyOffset.top;\r\n    else\r\n      position.top = position.mousePos.y + position.win.scrollY - position.bodyOffset.top - toolbarHeight / 2;\r\n\r\n    // Update left / right coordinates\r\n    // todo: try to change class to use attribute or something\r\n    if (this.toolbarElement.hasClass('sc-tb-hover-right'))\r\n      position.right = position.win.width - position.tagOffset.left - position.tagWidth + tagToolbarPaddingRight - position.bodyOffset.left;\r\n    else\r\n      position.left = position.tagOffset.left + tagToolbarPadding + position.bodyOffset.left;\r\n\r\n    const cssPos = {\r\n      top: position.top,\r\n      left: position.left,\r\n      right: position.right\r\n    }\r\n\r\n    this.toolbarElement.css(cssPos);\r\n  }\r\n\r\n \r\n  hideToolbar() {\r\n    $(window).off('scroll', this.updatePosition);\r\n    this.toolbarElement.css({ display: 'none' });\r\n  }\r\n\r\n\r\n\r\n  showToolbar() {\r\n    /*if (this.toolbarElement.is(':visible'))\r\n      return;*/\r\n    this.toolbarElement.css({ display: 'block' });\r\n\r\n    $(window).on('scroll', this.updatePosition);\r\n    this.updatePosition();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/tag-toolbar.ts","import { _readPageConfig } from './config';\r\nimport { getBodyPosition, refresh } from './positioning';\r\nimport { $quickE as quickE, prepareToolbarInDom } from './quick-e';\r\nimport { selectors } from './selectors-instance';\r\n\r\nfunction enable(): void {\r\n  // build all toolbar html-elements\r\n  prepareToolbarInDom();\r\n\r\n  // Cache the panes (because panes can't change dynamically)\r\n  initPanes();\r\n}\r\n\r\n/**\r\n * start watching for mouse-move\r\n */\r\nfunction watchMouse() {\r\n  let refreshTimeout: any = null;\r\n  $('body').on('mousemove',\r\n    (e: any) => {\r\n      if (refreshTimeout === null)\r\n        refreshTimeout = window.setTimeout(() => {\r\n            requestAnimationFrame(() => {\r\n              refresh(e);\r\n              refreshTimeout = null;\r\n            });\r\n          },\r\n          20);\r\n    });\r\n}\r\n\r\nexport function start(): void {\r\n  try {\r\n    _readPageConfig();\r\n    if (quickE.config.enable) {\r\n      // initialize first body-offset\r\n      quickE.bodyOffset = getBodyPosition();\r\n\r\n      enable();\r\n\r\n      toggleParts();\r\n\r\n      watchMouse();\r\n    }\r\n  } catch (e) {\r\n    console.error(\"couldn't start quick-edit\", e);\r\n  }\r\n}\r\n\r\n/**\r\n * cache the panes which can contain modules\r\n */\r\nfunction initPanes(): void {\r\n  quickE.cachedPanes = $(selectors.mod.listSelector);\r\n  quickE.cachedPanes.addClass('sc-cb-pane-glow');\r\n}\r\n\r\n/**\r\n * enable/disable module/content-blocks as configured\r\n */\r\nfunction toggleParts(): void {\r\n  //// content blocks actions\r\n  // quickE.cbActions.toggle(quickE.config.innerBlocks.enable);\r\n\r\n  //// module actions\r\n  // quickE.modActions.hide(quickE.config.modules.enable);\r\n}\r\n\r\n/**\r\n * reset the quick-edit\r\n * for example after ajax-loading a content-block, which may cause changed configurations\r\n */\r\nexport function reset(): void {\r\n  _readPageConfig();\r\n  toggleParts();\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-edit/start.ts","import { Coords } from './coords';\r\nimport { $quickE as quickE } from './quick-e';\r\nimport { selectors } from './selectors-instance';\r\n\r\n/**\r\n * Module with everything related to positioning the quick-edit in-page editing\r\n */\r\n\r\n/**\r\n * Point is used as return type to store X,Y coordinates\r\n */\r\n\r\n/**\r\n * Prepare offset calculation based on body positioning\r\n * @returns Point\r\n */\r\nexport function getBodyPosition(): Coords {\r\n  const bodyPos = quickE.body.css('position');\r\n  return bodyPos === 'relative' || bodyPos === 'absolute'\r\n    ? new Coords(quickE.body.offset().left, quickE.body.offset().top)\r\n    : new Coords(0, 0);\r\n}\r\n\r\n/**\r\n * Refresh content block and modules elements\r\n */\r\nfunction refreshDomObjects(): void {\r\n  quickE.bodyOffset =\r\n    getBodyPosition(); // must update this, as sometimes after finishing page load the position changes, like when dnn adds the toolbar\r\n\r\n  //// Cache the panes (because panes can't change dynamically)\r\n  // if (!quickE.cachedPanes)\r\n  //    quickE.cachedPanes = $(selectors.mod.listSelector);\r\n\r\n  if (quickE.config.innerBlocks.enable) {\r\n    // get all content-block lists which are empty, or which allow multiple child-items\r\n    const lists: any = $(selectors.cb.listSelector).filter(`:not(.${selectors.cb.singleItem}), :empty`);\r\n    quickE.contentBlocks = lists // $(selectors.cb.listSelector)\r\n      .find(selectors.cb.selector)\r\n      .add(lists); // selectors.cb.listSelector);\r\n  }\r\n  if (quickE.config.modules.enable)\r\n    quickE.modules = quickE.cachedPanes\r\n      .find(selectors.mod.selector)\r\n      .add(quickE.cachedPanes);\r\n}\r\n\r\n/**\r\n * Last time when contentblock and modules are refreshed.\r\n * Helps to skip unnecessary calls to refresh(e).\r\n */\r\nnamespace refreshDomObjects {\r\n  export let lastCall: Date;\r\n}\r\n\r\n/**\r\n * position, align and show a menu linked to another item\r\n */\r\nexport function positionAndAlign(element: any, coords: Coords) {\r\n  return element.css({\r\n    left: coords.x - quickE.bodyOffset.x,\r\n    top: coords.yh - quickE.bodyOffset.y,\r\n    width: coords.element.width(),\r\n  }).show();\r\n}\r\n\r\n/**\r\n * Refresh positioning / visibility of the quick-insert bar\r\n * @param e\r\n */\r\nexport function refresh(e: any) {\r\n  const highlightClass: string = 'sc-cb-highlight-for-insert';\r\n  const newDate = new Date();\r\n  if ((!refreshDomObjects.lastCall) || (newDate.getTime() - refreshDomObjects.lastCall.getTime() > 1000)) {\r\n    // console.log('refreshed contentblock and modules');\r\n    refreshDomObjects.lastCall = newDate;\r\n    refreshDomObjects();\r\n  }\r\n\r\n  if (quickE.config.innerBlocks.enable && quickE.contentBlocks) {\r\n    quickE.nearestCb = findNearest(quickE.contentBlocks, new Coords(e.clientX, e.clientY));\r\n  }\r\n\r\n  if (quickE.config.modules.enable && quickE.modules) {\r\n    quickE.nearestMod = findNearest(quickE.modules, new Coords(e.clientX, e.clientY));\r\n  }\r\n\r\n  quickE.modActions.toggleClass('sc-invisible', quickE.nearestMod === null);\r\n  quickE.cbActions.toggleClass('sc-invisible', quickE.nearestCb === null);\r\n\r\n  const oldParent = quickE.main.parentContainer;\r\n\r\n  if (quickE.nearestCb !== null || quickE.nearestMod !== null) {\r\n    const alignTo = quickE.nearestCb || quickE.nearestMod;\r\n\r\n    // find parent pane to highlight\r\n    const parentPane = $(alignTo.element).closest(selectors.mod.listSelector);\r\n    const parentCbList = $(alignTo.element).closest(selectors.cb.listSelector);\r\n    const parentContainer = (parentCbList.length ? parentCbList : parentPane)[0];\r\n\r\n    // put part of the pane-name into the button-labels\r\n    if (parentPane.length > 0) {\r\n      let paneName: string = parentPane.attr('id') || '';\r\n      if (paneName.length > 4) paneName = paneName.substr(4);\r\n      quickE.modActions.filter('[titleTemplate]').each(function() {\r\n        const t = $(this);\r\n        t.attr('title', t.attr('titleTemplate').replace('{0}', paneName));\r\n      });\r\n    }\r\n\r\n    positionAndAlign(quickE.main, alignTo);\r\n\r\n    // Keep current block as current on menu\r\n    quickE.main.actionsForCb = quickE.nearestCb ? quickE.nearestCb.element : null;\r\n    quickE.main.actionsForModule = quickE.nearestMod ? quickE.nearestMod.element : null;\r\n    quickE.main.parentContainer = parentContainer;\r\n    $(parentContainer).addClass(highlightClass);\r\n  } else {\r\n    quickE.main.parentContainer = null;\r\n    quickE.main.hide();\r\n  }\r\n\r\n  // if previously a parent-pane was highlighted, un-highlight it now\r\n  if (oldParent && oldParent !== quickE.main.parentContainer)\r\n    $(oldParent).removeClass(highlightClass);\r\n}\r\n\r\n/**\r\n * Return the nearest element to the mouse cursor from elements (jQuery elements)\r\n * @param elements\r\n * @param position\r\n */\r\nexport function findNearest(elements: any, position: Coords): Coords {\r\n  const maxDistance: number = 30; // Defines the maximal distance of the cursor when the menu is displayed\r\n\r\n  let nearestItem: any = null;\r\n  let nearestDistance = maxDistance;\r\n\r\n  const posX: number = position.x + quickE.win.scrollLeft();\r\n  const posY: number = position.y + quickE.win.scrollTop();\r\n\r\n  // Find nearest element\r\n  elements.each(function() {\r\n    const e = getCoordinates($(this));\r\n\r\n    // First check x coordinates - must be within container\r\n    if (posX < e.x || posX > e.x + e.w)\r\n      return;\r\n\r\n    // Check if y coordinates are within boundaries\r\n    const distance = Math.abs(posY - e.yh);\r\n\r\n    if (distance < maxDistance && distance < nearestDistance) {\r\n      nearestItem = e;\r\n      nearestDistance = distance;\r\n    }\r\n  });\r\n\r\n  return nearestItem;\r\n}\r\n\r\nexport function getCoordinates(element: any): Coords {\r\n  // sometimes element.length === 0 and element.offset() = undefined\r\n  // console.log(\"element.offset():\", element.offset());\r\n  // console.log(\"element.length:\", element.length);\r\n\r\n  const coords: Coords = {\r\n    element: element,\r\n    x: element.offset().left,\r\n    w: element.width(),\r\n    y: element.offset().top,\r\n    // For content-block ITEMS, the menu must be visible at the end\r\n    // For content-block-LISTS, the menu must be at top\r\n    yh: element.offset().top + (element.is(selectors.eitherCbOrMod) ? element.height() : 0),\r\n  };\r\n\r\n  return coords;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-edit/positioning.ts","import { WebApiParams } from './web-api-params';\r\nimport { ContextOfButton } from '../context/context-of-button';\r\n\r\n/*\r\n * this is a content block in the browser\r\n *\r\n * A Content Block is a stand alone unit of content, with it's own definition of\r\n * 1. content items\r\n * 2. template\r\n * + some other stuff\r\n *\r\n * it should be able to render itself\r\n */\r\n\r\n//#region functions working only with what they are given\r\n// 2017-08-27 2dm: I'm working on cleaning up this code, and an important part\r\n// is to have code which doesn't use old state (like object-properties initialized earlier)\r\n// extracting these methods is part of the work\r\n\r\n/**\r\n * TODO - unclear if still in use\r\n * @param {object} sxc\r\n * @param {boolean} state\r\n * @returns {promise}\r\n */\r\n// 2017-09-02 2dm removed, deprecated, it's not stored on the server any more\r\n// cbm.setTemplateChooserState = function(sxc, state) {\r\n//    return sxc.webApi.get({\r\n//        url: \"view/module/SetTemplateChooserState\",\r\n//        params: { state: state }\r\n//    });\r\n// };\r\n\r\n/**\r\n * Save the template configuration for this instance\r\n * @param {ContextOfButton} context\r\n * @param {number} templateId\r\n * @param {boolean} [forceCreateContentGroup]\r\n * @returns {promise}\r\n */\r\nexport function saveTemplate(context: ContextOfButton, templateId: number, forceCreateContentGroup: boolean): Promise<string> {\r\n  const params: WebApiParams = {\r\n    templateId: templateId,\r\n    forceCreateContentGroup: forceCreateContentGroup,\r\n    newTemplateChooserState: false,\r\n  };\r\n  return new Promise(\r\n    (resolve: any, reject: any) => {\r\n      context.sxc.webApi.get(\r\n        {\r\n          url: 'view/module/savetemplateid',\r\n          params: params,\r\n        }).done((data: any, textStatus: string, jqXhr: any) => {\r\n          // resolve or reject based on http-status: 200 & 204 = ok\r\n          if (jqXhr.status === 204 || jqXhr.status === 200)\r\n            resolve(data);\r\n          else\r\n            reject(Error(textStatus));\r\n      }).fail((jqXhr: any, textStatus: string, errorThrown: string) => {\r\n          reject(Error(errorThrown));\r\n        });\r\n    });\r\n}\r\n\r\n/**\r\n * Retrieve the preview from the web-api\r\n * @param {ContextOfButton} context\r\n * @param {number} templateId\r\n * @returns {promise} promise with the html in the result\r\n */\r\nexport function getPreviewWithTemplate(context: ContextOfButton, templateId: number): Promise<string> {\r\n  templateId = templateId || -1; // fallback, meaning use saved ID\r\n  const params: WebApiParams = {\r\n    templateId: templateId,\r\n    lang: context.app.currentLanguage,\r\n    cbisentity: context.contentBlock.isEntity,\r\n    cbid: context.contentBlock.id,\r\n    originalparameters: JSON.stringify(context.instance.parameters),\r\n  };\r\n  return new Promise((resolve: any, reject: any) => {\r\n      context.sxc.webApi.get({\r\n        url: 'view/module/rendertemplate',\r\n        params: params,\r\n        dataType: 'html',\r\n      }).done((data: any, textStatus: string, jqXhr: any) => {\r\n        if (jqXhr.status === 204 || jqXhr.status === 200) {\r\n          // resolve the promise with the response text\r\n          resolve(data);\r\n        } else {\r\n          // otherwise reject with the status text\r\n          // which will hopefully be a meaningful error\r\n          reject(Error(textStatus));\r\n        }\r\n        }).fail((jqXhr: any, textStatus: string, errorThrown: string) => {\r\n          reject(Error(errorThrown));\r\n      });\r\n    });\r\n}\r\n//#endregion\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/contentBlock/web-api-promises.ts","import { renderer } from '../contentBlock/render';\r\nimport { ContextOfButton } from '../context/context-of-button';\r\nimport { $2sxcInPage as $2sxc } from '../interfaces/sxc-controller-in-page';\r\nimport { windowInPage as window } from '../interfaces/window-in-page';\r\nimport { quickDialog } from '../quick-dialog/quick-dialog';\r\nimport { DialogPaths } from '../settings/DialogPaths';\r\nimport { commandLinkToNgDialog } from './command-link-to-ng-dialog';\r\n\r\n/**\r\n * open a new dialog of the angular-ui\r\n * @param settings\r\n * @param event\r\n * @param sxc\r\n * @param editContext\r\n */\r\nexport function commandOpenNgDialog(\r\n  context: ContextOfButton,\r\n  event: MouseEvent,\r\n): Promise<any> {\r\n  // the link contains everything to open a full dialog (lots of params added)\r\n  let link = commandLinkToNgDialog(context);\r\n\r\n  let fullScreen = false;\r\n  const origEvent = event || (window.event as MouseEvent);\r\n\r\n  return new Promise<any>((resolvePromise) => {\r\n    // prepare promise for callback when the dialog closes\r\n    // to reload the in-page view w/ajax or page reload\r\n    const resolveAndReInit = () => {\r\n      resolvePromise(context);\r\n      renderer.reloadAndReInitialize(context);\r\n    };\r\n\r\n    // check if inline window (quick-dialog)\r\n    if (context.button.inlineWindow) {\r\n      // test if it should be full screen (value or resolve-function)\r\n      if (typeof context.button.fullScreen === 'function')\r\n        fullScreen = context.button.fullScreen(context);\r\n      const diagName = context.button.dialog(context).toString();\r\n\r\n      quickDialog\r\n        .showOrToggleFromToolbar(context, link, fullScreen, diagName)\r\n        .then((isChanged) => {\r\n          if (isChanged) resolveAndReInit();\r\n        });\r\n\r\n      // else it's a normal pop-up dialog\r\n    } else {\r\n      // check if alt-key pressed, to open the old/new dialog instead\r\n      if (origEvent && origEvent.altKey) {\r\n        const toOld = link.indexOf(DialogPaths.ng8) > 0;\r\n        link = link.replace(\r\n          toOld ? DialogPaths.ng8 : DialogPaths.ng1,\r\n          toOld ? DialogPaths.ng1 : DialogPaths.ng8,\r\n        );\r\n      }\r\n\r\n      // check if new-window\r\n      if (context.button.newWindow || (origEvent && origEvent.shiftKey)) {\r\n        resolvePromise(context);\r\n        window.open(link);\r\n      } else {\r\n        $2sxc.totalPopup.open(link, resolveAndReInit);\r\n      }\r\n    }\r\n  });\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command-open-ng-dialog.ts","import Iframebridge = require('./iframe-bridge');\r\nimport ContainerSize = require('./container-size');\r\nimport DialogFrameElement = require('./iDialogFrameElement');\r\nimport IDialogFrameElement = DialogFrameElement.IDialogFrameElement;\r\n\r\n\r\n/**\r\n * this is a dialog manager which is in charge of all quick-dialogues\r\n * it always has a reference to the latest dialog created by any module instance\r\n */\r\n\r\nconst containerClass = 'inpage-frame-wrapper';\r\nconst iframeClass = 'inpage-frame';\r\nconst iframeTag = 'iframe';\r\nconst containerTemplate = `<div class=\"${containerClass}\"><div class=\"${iframeClass}\"></div></div>`;\r\n\r\n/**\r\n * get the current container\r\n * @returns {element} html element of the div\r\n */\r\nexport function getOrCreate(): JQuery<HTMLElement> {\r\n  const container = $(`.${containerClass}`);\r\n  return container.length > 0 ? container : buildContainerAndIFrame();\r\n}\r\n\r\n/**\r\n * find the iframe which hosts the dialog\r\n * @param {html} [container] - html-container as jQuery object\r\n * @returns {html} iframe object\r\n */\r\nexport function getIFrame(container?: JQuery): IDialogFrameElement {\r\n  if (!container) container = getOrCreate();\r\n  return container.find(iframeTag)[0] as IDialogFrameElement;\r\n}\r\n\r\n\r\n/**\r\n * build the container in the dom w/iframe for re-use\r\n * @return {jquery} jquery dom-object\r\n */\r\nfunction buildContainerAndIFrame(): JQuery<HTMLElement> {\r\n  const container = $(containerTemplate);\r\n  if ($(\"#personaBar-iframe\").length > 0)\r\n    container.addClass(\"persona-bar-visible\");\r\n  const newIFrame = document.createElement(iframeTag);\r\n  const extendedIFrame = Iframebridge.build(newIFrame);\r\n  container.find(`.${iframeClass}`).append(extendedIFrame);\r\n  $('body').append(container);\r\n  ContainerSize.watchForResize(container);\r\n  return container;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-dialog/container.ts","import Container = require('./container');\r\n/**\r\n * this is a dialog manager which is in charge of all quick-dialogues\r\n * it always has a reference to the latest dialog created by any module instance\r\n */\r\nlet isFullscreen: boolean = false;\r\n\r\n\r\n/**\r\n * set container css for size\r\n * @param {boolean} fullScreen\r\n */\r\nexport function setSize(fullScreen: boolean): void {\r\n  const container = Container.getOrCreate();\r\n  // set container height\r\n  container.css('min-height', fullScreen ? '100%' : '225px');\r\n  isFullscreen = fullScreen;\r\n}\r\n\r\n\r\n\r\n\r\nconst resizeInterval: number = 200;\r\nlet resizeWatcher: number = null;\r\n\r\n/**\r\n * create watcher which monitors the iframe size and adjusts the container as needed\r\n */\r\nexport function watchForResize(container: JQuery<HTMLElement>): void {\r\n\r\n  if (!resizeWatcher) // only add a timer if not already running\r\n    resizeWatcher = window.setInterval(() => {\r\n      try {\r\n        const frm: any = Container.getIFrame(container);\r\n        if (!frm) return;\r\n\r\n        const height: number = frm.contentDocument.body.offsetHeight;\r\n        if (frm.previousHeight === height) return;\r\n        frm.style.minHeight = container.css('min-height');\r\n        frm.style.height = height + 'px';\r\n        frm.previousHeight = height;\r\n        if (isFullscreen) {\r\n          frm.style.height = '100%';\r\n          frm.style.position = 'absolute';\r\n        }\r\n      } catch (e) {\r\n        // ignore\r\n      }\r\n    }, resizeInterval);\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-dialog/container-size.ts","import { SessionStateHandler } from '../manage/session-state-handler';\r\n\r\n\r\nexport let cbId = new SessionStateHandler<number>('dia-cbid');\r\nexport let cancelled = new SessionStateHandler<boolean>('cancelled-dialog');\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-dialog/state.ts","import { getSxcInstance } from '../x-bootstrap/sxc';\r\n\r\n/**\r\n * extend the quick edit with the core commands\r\n */\r\n\r\nexport class Cb implements Delete {\r\n  delete(clip: any): any {\r\n    const sxc = getSxcInstance(clip.list);\r\n    return sxc.manage._getCbManipulator().delete(clip.parent, clip.field, clip.index);\r\n  }\r\n\r\n  static create(parent: number, field: string, index: number, appOrContent: string, list: any, newGuid: string): any {\r\n    const sxc = getSxcInstance(list);\r\n    return sxc.manage._getCbManipulator().create(parent, field, index, appOrContent, list, newGuid);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-edit/cb.ts","import { modManage } from './mod-manage';\r\nimport { $quickE as quickE } from './quick-e';\r\nimport { selectors } from './selectors-instance';\r\n\r\nexport class Mod implements Delete {\r\n  delete(clip: any): void {\r\n    if (!confirm('are you sure?')) return;\r\n    const modId = modManage.getModuleId(clip.item.className);\r\n    modManage.delete(modId);\r\n  }\r\n\r\n  // todo: unsure if this is a good place for this bit of code...\r\n  static move(oldClip: any, newClip: any, from: number, to: number): void {\r\n    const modId = modManage.getModuleId(oldClip.item.className);\r\n    const pane: string = modManage.getPaneName(newClip.list);\r\n    modManage.move(modId, pane, to);\r\n  }\r\n\r\n  static sendToPane(): void {\r\n    const pane: string = quickE.main.actionsForModule.closest(selectors.mod.listSelector);\r\n\r\n    // show the pane-options\r\n    const pl = quickE.selected.find('#paneList');\r\n    // ReSharper disable once CssBrowserCompatibility\r\n    if (!pl.is(':empty'))\r\n      pl.empty();\r\n    pl.append(modManage.getMoveButtons(modManage.getPaneName(pane)));\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-edit/mod.ts","import { data } from './clipboard';\r\nimport { $quickE as quickE } from './quick-e';\r\n\r\n/**\r\n * module specific stuff\r\n */\r\nexport class ModManage {\r\n  delete = deleteMod;\r\n  create = createModWithTypeName;\r\n  move = moveMod;\r\n  getPaneName = getPaneName;\r\n  getModuleId = getModuleId;\r\n  getMoveButtons = generatePaneMoveButtons;\r\n}\r\n\r\nexport const modManage = new ModManage();\r\n\r\nfunction getPaneName(pane: string): any {\r\n  return $(pane).attr('id').replace('dnn_', '');\r\n}\r\n\r\n// find the correct module id from a list of classes - used on the module-wrapper\r\nfunction getModuleId(classes: string): number | null {\r\n  const result = classes.match(/DnnModule-([0-9]+)(?:\\W|$)/);\r\n  return (result && result.length === 2) ? Number(result[1]) : null;\r\n}\r\n\r\n// show an error when an xhr error occurs\r\nfunction xhrError(xhr: any, optionalMessage: string): void {\r\n  alert(optionalMessage || 'Error while talking to server.');\r\n  console.log(xhr);\r\n}\r\n\r\n// service calls we'll need\r\nfunction createModWithTypeName(paneName: string, index: number, type: string): any {\r\n  return sendDnnAjax(null,\r\n    'controlbar/GetPortalDesktopModules',\r\n    {\r\n      data: 'category=All&loadingStartIndex=0&loadingPageSize=100&searchTerm=',\r\n      success: (desktopModules: any) => {\r\n        const moduleToFind: string = type === 'Default' ? ' Content' : ' App';\r\n        let module: any = null;\r\n\r\n        // ReSharper disable once UnusedParameter\r\n        desktopModules.forEach((e: any, i: any) => {\r\n          if (e.ModuleName === moduleToFind)\r\n            module = e;\r\n        });\r\n\r\n        return (!module)\r\n          ? alert(moduleToFind + ' module not found.')\r\n          : createMod(paneName, index, module.ModuleID);\r\n      },\r\n    });\r\n}\r\n\r\n// move a dnn module\r\nfunction moveMod(modId: number, pane: string, order: number): any {\r\n  const service = $.dnnSF(modId);\r\n  const tabId = service.getTabId();\r\n  const dataVar = {\r\n    TabId: tabId,\r\n    ModuleId: modId,\r\n    Pane: pane,\r\n    ModuleOrder: (2 * order + 0), \r\n    // strange formula, copied from DNN https://github.com/dnnsoftware/Dnn.Platform/blob/fd225b8de07042837f7473cd49fba13de42a3cc0/Website/admin/Menus/ModuleActions/ModuleActions.js#L70\r\n    // stv: changed formula from: (2 * order + 4)\r\n    // ...to: (2 * order + 0)\r\n  };\r\n\r\n  sendDnnAjax(modId,\r\n    'ModuleService/MoveModule',\r\n    {\r\n      type: 'POST',\r\n      data: dataVar,\r\n      success: () => window.location.reload(),\r\n    });\r\n\r\n  // fire window resize to reposition action menus\r\n  $(window).resize();\r\n}\r\n\r\n// delete a module\r\nfunction deleteMod(modId: number): any {\r\n  const service: any = $.dnnSF(modId);\r\n  const tabId: number = service.getTabId();\r\n  return sendDnnAjax(modId,\r\n    '2sxc/dnn/module/delete',\r\n    {\r\n      url: $.dnnSF().getServiceRoot('2sxc') + 'dnn/module/delete',\r\n      type: 'GET',\r\n      data: {\r\n        tabId: tabId,\r\n        modId: modId,\r\n      },\r\n      // ReSharper disable once UnusedParameter\r\n      success: (d: any) => window.location.reload(),\r\n    });\r\n}\r\n\r\n// call an api on dnn\r\nfunction sendDnnAjax(modId: number, serviceName: string, options: any): any {\r\n  const service: any = $.dnnSF(modId);\r\n\r\n  return $.ajax($.extend({\r\n    type: 'GET',\r\n    url: service.getServiceRoot('internalservices') + serviceName,\r\n    beforeSend: service.setModuleHeaders,\r\n    error: xhrError,\r\n  },\r\n    options));\r\n}\r\n\r\n// create / insert a new module\r\nfunction createMod(paneName: string, position: number, modId: number): any {\r\n  const postData = {\r\n    Module: modId,\r\n    Page: '',\r\n    Pane: paneName,\r\n    Position: -1,\r\n    Sort: position,\r\n    Visibility: 0,\r\n    AddExistingModule: false,\r\n    CopyModule: false,\r\n  };\r\n  return sendDnnAjax(null,\r\n    'controlbar/AddModule',\r\n    {\r\n      type: 'POST',\r\n      data: postData,\r\n      // ReSharper disable once UnusedParameter\r\n      success: (d: any) => window.location.reload(),\r\n    });\r\n}\r\n\r\n\r\nfunction generatePaneMoveButtons(current: string): any {\r\n  const pns: any = quickE.cachedPanes;\r\n  // generate list of panes as links\r\n  const targets: any = $('<div>');\r\n  for (let p = 0; p < pns.length; p++) {\r\n    const pName: string = getPaneName(pns[p]);\r\n    const selected: string = (current === pName) ? ' selected ' : '';\r\n    if (selected === '')\r\n      targets.append(`<a data='${pName}'>${pName}</a>`);\r\n  }\r\n\r\n  // attach click event...\r\n  // ReSharper disable once UnusedParameter\r\n  targets.find('a').click(function (d: any) {\r\n    const link = $(this);\r\n    const clip = data;\r\n    const modId = getModuleId(clip.item.className);\r\n    const newPane = link.attr('data');\r\n\r\n    moveMod(modId, newPane, 0);\r\n  });\r\n\r\n  return targets;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-edit/mod-manage.ts","// polyfills\r\nimport './array.prototype.find';  // fix for IE11 Array.find\r\nimport './Object.assign'; // fix for IE11 Object.assign\r\nimport './es6-promise.auto.js'; // polyfill of the ES6 Promise\r\nimport './Element.closest'; // fix for IE11 Element.closest\r\nimport './window.CustomEvent'; // fix for IE11 window.CustomEvent\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/polyfills/include-polyfills.ts","// https://tc39.github.io/ecma262/#sec-array.prototype.find\r\n// https://stackoverflow.com/questions/31455805/find-object-in-array-using-typescript\r\nif (!Array.prototype.find) {\r\n  Object.defineProperty(Array.prototype,\r\n    'find',\r\n    {\r\n      value: function(predicate: any) {\r\n        // 1. Let O be ? ToObject(this value).\r\n        if (this == null) { // jshint ignore:line\r\n          throw new TypeError('\"this\" is null or not defined');\r\n        }\r\n\r\n        const o = Object(this);\r\n\r\n        // 2. Let len be ? ToLength(? Get(O, \"length\")).\r\n        const len = o.length >>> 0;\r\n\r\n        // 3. If IsCallable(predicate) is false, throw a TypeError exception.\r\n        if (typeof predicate !== 'function') {\r\n          throw new TypeError('predicate must be a function');\r\n        }\r\n\r\n        // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\r\n        const thisArg = arguments[1];\r\n\r\n        // 5. Let k be 0.\r\n        let k = 0;\r\n\r\n        // 6. Repeat, while k < len\r\n        while (k < len) {\r\n          // a. Let Pk be ! ToString(k).\r\n          // b. Let kValue be ? Get(O, Pk).\r\n          // c. Let testResult be ToBoolean(? Call(predicate, T,  kValue, k, O )).\r\n          // d. If testResult is true, return kValue.\r\n          const kValue = o[k];\r\n          if (predicate.call(thisArg, kValue, k, o)) {\r\n            return kValue;\r\n          }\r\n          // e. Increase k by 1.\r\n          k++;\r\n        }\r\n\r\n        // 7. Return undefined.\r\n        return undefined;\r\n      }\r\n    });\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/polyfills/array.prototype.find.ts","if (typeof Object.assign != 'function') {\r\n  // ReSharper disable once UnusedParameter\r\n  Object.assign = function(target, varArgs) { // .length of function is 2\r\n    'use strict';\r\n    if (target === null) { // TypeError if undefined or null\r\n      throw new TypeError('Cannot convert undefined or null to object');\r\n    }\r\n\r\n    const to = Object(target);\r\n\r\n    for (let index = 1; index < arguments.length; index++) {\r\n      const nextSource = arguments[index];\r\n\r\n      if (nextSource !== null) { // Skip over if undefined or null\r\n        for (let nextKey in nextSource) {\r\n          // Avoid bugs when hasOwnProperty is shadowed\r\n          if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\r\n            to[nextKey] = nextSource[nextKey];\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return to;\r\n  };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/polyfills/Object.assign.ts","// https://developer.mozilla.org/en-US/docs/Web/API/Element/closest\r\nif (!Element.prototype.closest) {\r\n  Element.prototype.closest =\r\n    function (s: string) {\r\n      const matches = (this.document || this.ownerDocument).querySelectorAll(s);\r\n      let i: number;\r\n      let el = this;\r\n      do {\r\n        i = matches.length;\r\n        while (--i >= 0 && matches.item(i) !== el) { };\r\n      } while ((i < 0) && (el = el.parentElement));\r\n      return el;\r\n    };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/polyfills/Element.closest.ts","// Polyfill for creating CustomEvents on IE9/10/11\r\n// https://raw.githubusercontent.com/krambuhl/custom-event-polyfill/master/custom-event-polyfill.js\r\n\r\ntry {\r\n  var ce = new (window as any).CustomEvent('test');\r\n  ce.preventDefault();\r\n  if (ce.defaultPrevented !== true) {\r\n    // IE has problems with .preventDefault() on custom events\r\n    // http://stackoverflow.com/questions/23349191\r\n    throw new Error('Could not prevent default');\r\n  }\r\n} catch (e) {\r\n  let CustomEvent = (event: string, params: any) => {\r\n\r\n    params = params || {\r\n      bubbles: false,\r\n      cancelable: false,\r\n      detail: undefined as any\r\n    };\r\n\r\n    const evt = document.createEvent('CustomEvent');\r\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\r\n    const origPrevent = evt.preventDefault;\r\n    evt.preventDefault = function () {\r\n      origPrevent.call(this);\r\n      try {\r\n        Object.defineProperty(this, 'defaultPrevented', {\r\n          get: () => true\r\n        });\r\n      } catch (e) {\r\n        this.defaultPrevented = true;\r\n      }\r\n    };\r\n    return evt;\r\n  };\r\n\r\n  CustomEvent.prototype = (window as any).Event.prototype;\r\n  (window as any).CustomEvent = CustomEvent; // expose definition to window\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/polyfills/window.CustomEvent.ts","import { prepareToAddContent } from '../contentBlock/templates';\r\nimport { ContextOfButton } from '../context/context-of-button';\r\nimport { ContextOfInstance } from '../context/context-of-instance';\r\nimport { HasLog } from '../logging/has-log';\r\nimport { Log } from '../logging/log';\r\nimport { settingsAdapter } from '../toolbar/adapters/settings-adapter';\r\nimport { ButtonAction } from '../toolbar/button/button-action';\r\nimport { ButtonConfig } from '../toolbar/button/button-config';\r\nimport { commandOpenNgDialog } from './command-open-ng-dialog';\r\nimport { Commands } from './commands';\r\nimport { Settings } from './settings';\r\n\r\nexport class Engine extends HasLog {\r\n  constructor(parentLog?: Log) {\r\n    super('Cmd.Exec', parentLog);\r\n  }\r\n\r\n  detectParamsAndRun(\r\n    context: ContextOfInstance,\r\n    nameOrSettings: string | Partial<Settings>,\r\n    eventOrSettings: Partial<Settings> | MouseEvent,\r\n    event?: MouseEvent,\r\n  ): Promise<any> {\r\n    this.log.add(\r\n      `detecting params and running - has ${arguments.length} params`,\r\n    );\r\n\r\n    let settings: Partial<Settings>;\r\n\r\n    const thirdParamIsEvent =\r\n      !event &&\r\n      eventOrSettings &&\r\n      typeof (eventOrSettings as MouseEvent).altKey !== 'undefined';\r\n    this.log.add(\r\n      `might cycle parameters, in case not all were given. third is event=${thirdParamIsEvent}`,\r\n    );\r\n    if (thirdParamIsEvent) {\r\n      // no event param, but settings contains the event-object\r\n      this.log.add(\r\n        'cycling parameters as event was missing & eventOrSettings seems to be an event; settings must be empty',\r\n      );\r\n      event = eventOrSettings as MouseEvent; // move it to the correct variable\r\n      settings = this.nameOrSettingsAdapter(nameOrSettings);\r\n    } else {\r\n      settings = Object.assign(\r\n        eventOrSettings || {},\r\n        this.nameOrSettingsAdapter(nameOrSettings),\r\n      ) as Partial<Settings>;\r\n    }\r\n\r\n    // ensure we have the right event despite browser differences\r\n    event = event || (window.event as MouseEvent);\r\n\r\n    return this.run(context as ContextOfButton, settings, event);\r\n  }\r\n\r\n  /**\r\n   * run a command\r\n   * this method expects a clear order of parameters\r\n   * @param context\r\n   * @param settings\r\n   * @param event\r\n   */\r\n  run(\r\n    context: ContextOfButton,\r\n    nameOrSettings: string | Partial<Settings>,\r\n    event: MouseEvent,\r\n  ): Promise<any> {\r\n    // | any is temporary, just to get it to work; should be improved to only give a promise\r\n\r\n    let settings = this.nameOrSettingsAdapter(nameOrSettings);\r\n\r\n    settings = this.expandSettingsWithDefaults(settings);\r\n\r\n    const origEvent = event;\r\n    const name = settings.action;\r\n    const contentType = settings.contentType;\r\n    this.log.add(`run command ${name} for type ${contentType}`);\r\n\r\n    // Toolbar API v2\r\n    const newButtonAction = new ButtonAction(name, contentType, settings);\r\n    newButtonAction.commandDefinition = Commands.getInstance().get(name);\r\n    const newButtonConfig = new ButtonConfig(newButtonAction);\r\n    newButtonConfig.name = name;\r\n\r\n    const button = (context.button = Object.assign(\r\n      newButtonConfig,\r\n      newButtonAction.commandDefinition.buttonConfig,\r\n      settingsAdapter(settings),\r\n    ) as ButtonConfig); // merge conf & settings, but settings has higher priority\r\n\r\n    // todo: stv, fix this in case that is function\r\n    if (!button.dialog) {\r\n      this.log.add(\r\n        'button.dialog method missing, must be old implementation which used the action-name - generating method',\r\n      );\r\n      button.dialog = () => {\r\n        return name;\r\n      };\r\n    }\r\n\r\n    // todo: stv, fix this in case that is function\r\n    if (!button.code) {\r\n      this.log.add(\r\n        'simple button without code - generating code to open standard dialog',\r\n      );\r\n      button.code = (\r\n        contextParam: ContextOfButton,\r\n        evt: MouseEvent,\r\n      ): Promise<any> => {\r\n        return commandOpenNgDialog(contextParam, evt);\r\n      };\r\n    }\r\n\r\n    if (button.uiActionOnly(context)) {\r\n      this.log.add(\r\n        'just a UI command, will not run pre-flight to ensure content-block - now running the code',\r\n      );\r\n      return button.code(context, origEvent);\r\n    }\r\n\r\n    // if more than just a UI-action, then it needs to be sure the content-group is created first\r\n    this.log.add(\r\n      'command might change data, will wrap in pre-flight to ensure content-block',\r\n    );\r\n    return prepareToAddContent(context, settings.useModuleList).then(() => {\r\n      return context.button.code(context, origEvent);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * name or settings adapter to settings\r\n   * @param nameOrSettings\r\n   * @returns settings\r\n   */\r\n  nameOrSettingsAdapter(\r\n    nameOrSettings: string | Partial<Settings>,\r\n  ): Partial<Settings> {\r\n    let settings: Partial<Settings>;\r\n    // check if nameOrString is name (string) or object (settings)\r\n    const nameIsString = typeof nameOrSettings === 'string';\r\n    this.log.add(\r\n      `adapting settings; name is string: ${nameIsString}; name = ${nameOrSettings}`,\r\n    );\r\n\r\n    if (nameIsString) {\r\n      settings = Object.assign({}, { action: nameOrSettings }) as Partial<\r\n        Settings\r\n      >; // place the name as an action-name into a command-object\r\n    } else {\r\n      settings = nameOrSettings as Partial<Settings>;\r\n    }\r\n\r\n    return settings;\r\n  }\r\n\r\n  /**\r\n   * Take a settings-name or partial settings object,\r\n   * and return a full settings object with all defaults from\r\n   * the command definition\r\n   * @param settings\r\n   */\r\n  expandSettingsWithDefaults(settings: Partial<Settings>): Settings {\r\n    const name = settings.action;\r\n    this.log.add(`will add defaults for ${name} from buttonConfig`);\r\n    const conf = Commands.getInstance().get(name).buttonConfig;\r\n    const full = Object.assign({}, conf, settings) as Settings; // merge conf & settings, but settings has higher priority\r\n\r\n    return full;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/engine.ts","/**\r\n * this will be everything about the current system, like system / api -paths etc.\r\n */\r\nexport class SystemContext {\r\n  error: string;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/context/base-context/system-context.ts","/**\r\n * this will be something about the current tenant(the dnn portal)\r\n */\r\nexport class TenantContext {\r\n  id: number;\r\n  url: string;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/context/base-context/tenant-context.ts","/**\r\n * things about the user\r\n */\r\nexport class UserContext {\r\n  canDesign: boolean;\r\n  canDevelop: boolean;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/context/base-context/user-context.ts","/**\r\n * information related to the current contentBlock, incl\r\n */\r\nexport class ContentBlockContext {\r\n  // ContentBlock\r\n  id: number; // the CB ID\r\n  isEntity: boolean;\r\n  showTemplatePicker: boolean;\r\n  versioningRequirements: string;\r\n  parentFieldName: string;\r\n  parentFieldSortOrder: number;\r\n  partOfPage: boolean;\r\n  // ContentGroup\r\n  isCreated: boolean;\r\n  isList: boolean;\r\n  queryId: number;\r\n  templateId: number;\r\n  contentTypeId: string;\r\n  contentGroupId: string;\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/context/content-block-context/content-block-context.ts","import { ButtonConfig } from '../toolbar/button/button-config';\r\nimport { ContextOfToolbar } from './context-of-toolbar';\r\n\r\nexport class ContextOfButton extends ContextOfToolbar {\r\n  button: ButtonConfig;\r\n}\r\n\r\n\r\n\r\n\r\nexport function isContextOfButton(thing: any): thing is ContextOfButton {\r\n  const maybeButton = thing as ContextOfButton;\r\n  return maybeButton.button !== undefined && maybeButton.tenant !== undefined;\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/context/context-of-button.ts","import { ToolbarConfig } from '../toolbar/toolbar/toolbar-config';\r\nimport { ContextOfItem } from './context-of-item';\r\n\r\nexport class ContextOfToolbar extends ContextOfItem {\r\n  toolbar: ToolbarConfig;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/context/context-of-toolbar.ts","import { ContextOfContentBlock } from './context-of-content-block';\r\nimport { ItemContext } from './item-context/item-context';\r\n\r\nexport class ContextOfItem extends ContextOfContentBlock {\r\n  item: ItemContext; // information about the current item\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/context/context-of-item.ts","import { ContentBlockContext } from './content-block-context/content-block-context';\r\nimport { ContextOfInstance } from './context-of-instance';\r\n\r\nexport class ContextOfContentBlock extends ContextOfInstance {\r\n  contentBlock: ContentBlockContext;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/context/context-of-content-block.ts","import { ContextOf } from './context-of';\r\nimport { PageContext } from './page-context/page-context';\r\n\r\nexport class ContextOfPage extends ContextOf {\r\n  page: PageContext; // this will be information related to the current page\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/context/context-of-page.ts","import { BaseContext } from './base-context/base-context';\r\nimport { SystemContext } from './base-context/system-context';\r\nimport { TenantContext } from './base-context/tenant-context';\r\nimport { UserContext } from './base-context/user-context';\r\n\r\nexport class ContextOf extends BaseContext {\r\n  system: SystemContext; // this will be everything about the current system, like system / api -paths etc.\r\n  tenant: TenantContext; // this will be something about the current tenant(the dnn portal)\r\n  user: UserContext; // things about the user\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/context/context-of.ts","\r\n\r\nexport class BaseContext {\r\n  // tbd\r\n\r\n// ReSharper disable once InconsistentNaming\r\n  _isContext = true;\r\n}\r\n\r\n\r\n\r\nexport function isContext(thing: any): thing is BaseContext {\r\n  const maybeButton = thing as BaseContext;\r\n  return maybeButton._isContext !== undefined;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/context/base-context/base-context.ts","/**\r\n * this will be about the current app, settings of the app, app - paths, etc.\r\n */\r\nexport class AppContext {\r\n  // ContentGroup\r\n  isContent: boolean; // if its the main Content app or not\r\n  settingsId: number;\r\n  resourcesId: number;\r\n  appPath: string;\r\n  hasContent: boolean;\r\n  supportsAjax: boolean;\r\n  zoneId: number;\r\n  id: number; // appId\r\n  // languages\r\n  currentLanguage: string;\r\n  primaryLanguage: string;\r\n  allLanguages: string[] | null;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/context/instance-context/app-context.ts","import { ParametersEntity } from \"../../data-edit-context/parameters-entity\";\r\n\r\n/**\r\n * information related to the current DNN module, incl.instanceId,\r\n */\r\nexport class InstanceContext {\r\n  id: number; // instance id (aka moduleId)\r\n  isEditable: boolean;\r\n  allowPublish: boolean;\r\n  // sxc\r\n  sxcVersion: string;\r\n  parameters: ParametersEntity[] | null;\r\n  sxcRootUrl: string;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/context/instance-context/instance-context.ts","/**\r\n * information about the current item\r\n */\r\nexport class ItemContext {\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/context/item-context/item-context.ts","/**\r\n * this will be information related to the current page\r\n */\r\nexport class PageContext {\r\n  id: number;\r\n  url: string;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/context/page-context/page-context.ts","\r\n\r\nexport function isSxcInstance(thing: any): thing is SxcInstanceWithInternals {\r\n  return (thing as SxcInstanceWithInternals).showDetailedHttpError !== undefined;\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plumbing/is.ts","/**\r\n * ensure that the UI will load the correct assets to enable editing\r\n */\r\nexport class UiContext {\r\n  // api?: boolean; // if JS etc.should be included to enable editing API\r\n  // forms?: boolean;\r\n  // context?: boolean; // if context should be added, to ensure in-instance data editing\r\n  autoToolbar?: boolean; // toolbar auto-show\r\n  // styles?: boolean;\r\n  form: string; // decide which dialog opens, eg ng10\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/context/instance-context/ui-context.ts","import { ContextOfButton } from '../../context/context-of-button';\r\nimport { renderButton } from './render-button';\r\n\r\n/**\r\n * render groups of buttons in toolbar\r\n * @param sxc\r\n * @param toolbarConfig\r\n */\r\nexport function renderGroups(context: ContextOfButton): HTMLElement[] {\r\n  const groupsBuffer: HTMLElement[] = []; // temporary storage for detached HTML DOM objects\r\n  const btnGroups = context.toolbar.groups;\r\n  for (let i = 0; i < btnGroups.length; i++) {\r\n    const btns = btnGroups[i].buttons;\r\n    for (let h = 0; h < btns.length; h++) {\r\n      context.button = btns[h];\r\n      // create one button\r\n      const button = renderButton(context, i);\r\n      // add button to group of buttons\r\n      const item = document.createElement('li');\r\n      item.appendChild(button);\r\n      groupsBuffer.push(item);\r\n    }\r\n  }\r\n  return groupsBuffer;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/item/render-groups.ts","export function oldParametersAdapter(action: any): any {\r\n\r\n  let params: any = {};\r\n\r\n  if (action) {\r\n\r\n    if (action.name) {\r\n      params.action = action.name;\r\n    }\r\n\r\n    if (action.params) {\r\n      Object.assign(\r\n        params,\r\n        action.params);\r\n    }\r\n  }\r\n\r\n  return params;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/adapters/old-parameters-adapter.ts","import { Log } from './log';\r\n\r\nexport class Entry {\r\n\r\n\r\n  public source = ():string => this.log.fullIdentifier();\r\n\r\n  constructor(private log: Log, public message: string)\r\n  {\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/logging/entry.ts","import { ContextOfButton } from '../context/context-of-button';\r\nimport { DataEditContext } from '../data-edit-context/data-edit-context';\r\n\r\n/**\r\n * used to build instance config\r\n */\r\nexport class InstanceConfig {\r\n  portalId: number;\r\n  tabId: number;\r\n  moduleId: number;\r\n  version: string;\r\n  contentGroupId: string;\r\n  cbIsEntity: boolean;\r\n  cbId: number;\r\n  appPath: string;\r\n  isList: boolean;\r\n\r\n  //constructor(editContext: DataEditContext) {\r\n  //  const ce = editContext.Environment;\r\n  //  const cg = editContext.ContentGroup;\r\n  //  const cb = editContext.ContentBlock;\r\n\r\n  //  this.portalId = ce.WebsiteId;\r\n  //  this.tabId = ce.PageId;\r\n  //  this.moduleId = ce.InstanceId;\r\n  //  this.version = ce.SxcVersion;\r\n  //  this.contentGroupId = cg.Guid;\r\n  //  this.cbIsEntity = cb.IsEntity;\r\n  //  this.cbId = cb.Id;\r\n  //  this.appPath = cg.AppUrl;\r\n  //  this.isList = cg.IsList;\r\n  //}\r\n\r\n  static fromContext(contextOfButton: ContextOfButton): InstanceConfig {\r\n    const config = new InstanceConfig();\r\n    config.portalId = contextOfButton.tenant.id;\r\n    config.tabId = contextOfButton.page.id;\r\n    config.moduleId = contextOfButton.instance.id;\r\n    config.version = contextOfButton.instance.sxcVersion;\r\n    config.contentGroupId = contextOfButton.contentBlock.contentGroupId;\r\n    config.cbIsEntity = contextOfButton.contentBlock.isEntity;\r\n    config.cbId = contextOfButton.contentBlock.id;\r\n    config.appPath = contextOfButton.app.appPath;\r\n    config.isList = contextOfButton.contentBlock.isList;\r\n    return config;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/manage/instance-config.ts","import { ToolbarSettings } from '../toolbar/toolbar-settings';\r\n\r\n/**\r\n * removes autoAddMore and classes if are null or empty, to keep same behaviour like in v1\r\n * @param toolbarSettings\r\n */\r\nexport function oldToolbarSettingsAddapter(toolbarSettings: ToolbarSettings): Partial<ToolbarSettings> {\r\n  const partialToolbaSettings: Partial<ToolbarSettings> = Object.assign({}, toolbarSettings);\r\n  if (!partialToolbaSettings.autoAddMore) {\r\n    delete partialToolbaSettings.autoAddMore;\r\n  }\r\n  if (!partialToolbaSettings.classes) {\r\n    delete partialToolbaSettings.classes;\r\n  }\r\n  return partialToolbaSettings;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/adapters/old-toolbar-settings-adapter.ts","import { Commands } from '../../commands/commands';\r\nimport { parametersAdapter } from '../adapters/parameters-adapter';\r\nimport { settingsAdapter } from '../adapters/settings-adapter';\r\nimport { ButtonAction } from './button-action';\r\nimport { ButtonConfig } from './button-config';\r\nimport { ToolbarConfig } from '../toolbar/toolbar-config';\r\nimport { ToolbarSettings } from '../toolbar/toolbar-settings';\r\nimport { addDefaultBtnSettings, expandButtonConfig } from './expand-button-config';\r\nimport { Log } from '../../logging/log';\r\nimport { flattenActionDefinition } from '../adapters/flatten-action-definition';\r\n\r\n/**\r\n * this will traverse a groups-tree and expand each group\r\n * so if groups were just strings like \"edit,new\" or compact buttons, they will be expanded afterwards\r\n * @param fullToolbarConfig\r\n */\r\nexport function expandButtonGroups(fullToolbarConfig: ToolbarConfig, parentLog: Log): void {\r\n  const log = new Log('Tlb.ExpGrp', parentLog, 'start');\r\n  \r\n  const actions = Commands.getInstance();\r\n\r\n  // by now we should have a structure, let's check/fix the buttons\r\n  log.add(`will expand groups - found ${fullToolbarConfig.groups.length} items`);\r\n  for (let g = 0; g < fullToolbarConfig.groups.length; g++) {\r\n    // expand a verb-list like \"edit,new\" into objects like [{ action: \"edit\" }, {action: \"new\"}]\r\n    expandButtonList(fullToolbarConfig.groups[g], fullToolbarConfig.settings, log);\r\n\r\n    // fix all the buttons\r\n    const btns = fullToolbarConfig.groups[g].buttons;\r\n\r\n    const buttonConfigs: ButtonConfig[] = [];\r\n\r\n    if (Array.isArray(btns)) {\r\n      log.add(`will process ${btns.length} buttons`);\r\n      for (let b = 0; b < btns.length; b++) {\r\n        const btn = btns[b] as any;\r\n\r\n        if (!(actions.get(btn.command.action))) {\r\n          log.add(`couldn't find action ${btn.command.action} - show warning`);\r\n          console.warn('warning: toolbar-button with unknown action-name:', btn.command.action);\r\n        }\r\n\r\n        const name = btn.command.action;\r\n        const contentType = btn.command.contentType;\r\n\r\n        // if the button belongs to a content-item, move the specs up to the item into the settings-object\r\n        flattenActionDefinition(btn.command);\r\n\r\n        // parameters adapter from v1 to v2\r\n        const params = parametersAdapter(btn.command);\r\n        Object.assign(params, fullToolbarConfig.params);\r\n\r\n        // Toolbar API v2\r\n        const newButtonAction = new ButtonAction(name, contentType, params);\r\n        newButtonAction.commandDefinition = actions.get(name);\r\n        const newButtonConfig = new ButtonConfig(newButtonAction);\r\n        newButtonConfig.name = name;\r\n\r\n        // settings adapter from v1 to v2\r\n        const settings = settingsAdapter(btn);\r\n        Object.assign(newButtonConfig, settings);\r\n\r\n        addDefaultBtnSettings(newButtonConfig,\r\n          fullToolbarConfig.groups[g],\r\n          fullToolbarConfig,\r\n          actions, log); // ensure all buttons have either own settings, or the fallback\r\n\r\n        buttonConfigs.push(newButtonConfig);\r\n      }\r\n    }\r\n    else log.add(`no button array found, won't do anything`);\r\n\r\n    // Toolbar API v2 overwrite V1\r\n    fullToolbarConfig.groups[g].buttons = buttonConfigs;\r\n  }\r\n}\r\n\r\n/**\r\n * take a list of buttons (objects OR strings)\r\n * and convert to proper array of buttons with actions\r\n * on the in is a object with buttons, which are either:\r\n * - a string like \"edit\" or multi-value \"layout,more\"\r\n * - an array of such strings incl. optional complex objects which are\r\n * @param root\r\n * @param settings\r\n */\r\nfunction expandButtonList(root: any, settings: ToolbarSettings, parentLog: Log): void {\r\n  const log = new Log('Tlb.ExpBts', parentLog, 'start');\r\n\r\n  // let root = grp; // the root object which has all params of the command\r\n  let btns: any[] = [];\r\n  let sharedProperties: any = null;\r\n\r\n  // convert compact buttons (with multi-verb action objects) into own button-objects\r\n  // important because an older syntax allowed {action: \"new,edit\", entityId: 17}\r\n  if (Array.isArray(root.buttons)) {\r\n    log.add(`detected array of btns (${root.buttons.length}), will ensure it's an object`);\r\n    for (let b = 0; b < root.buttons.length; b++) {\r\n      const btn = root.buttons[b];\r\n      const actionString: string = btn.action;\r\n      if (typeof actionString === 'string' && actionString.indexOf(',') > -1) {\r\n        log.add(`button def \"${btn} is string of many names, will expand into array with action-properties\"`);\r\n        const acts = actionString.split(',');\r\n        for (let a = 0; a < acts.length; a++) {\r\n          btns.push($.extend(true, {}, btn, { action: acts[a] }));\r\n        }\r\n      } else {\r\n        btns.push(btn);\r\n      }\r\n    }\r\n\r\n  } else if (typeof root.buttons === 'string') {\r\n    log.add(`detected that it is a string \"${root.buttons}\", will split by \",\" and ...`);\r\n    btns = root.buttons.split(',');\r\n\r\n    sharedProperties = Object.assign({}, root); // inherit all fields used in the button\r\n    delete sharedProperties.buttons; // this one's not needed\r\n    delete sharedProperties.name; // this one's not needed\r\n    delete sharedProperties.action; //\r\n\r\n  } else {\r\n    log.add(`no special case detected, will use the buttons-object as is`);\r\n    btns = root.buttons;\r\n  }\r\n  log.add(`after check, found ${btns.length} buttons`);\r\n\r\n  // optionally add a more-button in each group\r\n  if (settings.autoAddMore) {\r\n    if ((settings.autoAddMore === 'end')\r\n      || (settings.autoAddMore.toString() === 'right') // fallback for older v1 setting\r\n      ) {\r\n      log.add('will add a more \"...\" button to end');\r\n      btns.push('more');\r\n    }\r\n    else {\r\n      log.add('will add a more \"...\" button to start');\r\n      btns.unshift('more');\r\n    }\r\n  } else {\r\n    log.add('will not add more \"...\" button');\r\n  }\r\n\r\n  // add each button - check if it's already an object or just the string\r\n  for (let v = 0; v < btns.length; v++) {\r\n    btns[v] = expandButtonConfig(btns[v], sharedProperties, log);\r\n    // todo: refactor this out, not needed any more as they are all together now\r\n    // btns[v].group = root;// grp;    // attach group reference, needed for fallback etc.\r\n  }\r\n\r\n  root.buttons = btns; // ensure the internal def is also an array now\r\n  log.add('done');\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/button/expand-group-config.ts","import { GroupConfig } from '../button/group-config';\r\nimport { ToolbarSettings } from './toolbar-settings';\r\n\r\n/** contains a toolbar config + settings + many groups */\r\nexport class ToolbarConfig {\r\n  groups: GroupConfig[] = [];\r\n  settings: ToolbarSettings; // like floating of toolbar, etc.\r\n  params: any; // like EntityId, Content - Type - Name\r\n  // todo: old props, remove\r\n  name: string = 'toolbar'; // name, no real use\r\n  debug?: boolean = false; // show more debug info\r\n  defaults: any; // the button defaults like icon, etc.\r\n\r\n  [propName: string]: any;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/toolbar/toolbar-config.ts","import { ToolbarConfigTemplate } from '../toolbar-config-template';\r\n\r\n// the default / initial buttons in a standard toolbar\r\n// ToDo: refactor to avoid side-effects\r\nexport const defaultToolbarTemplate: ToolbarConfigTemplate = {\r\n  groups: [\r\n    {\r\n      name: 'default',\r\n      buttons: 'edit,new,metadata,publish,layout',\r\n    }, {\r\n      name: 'list',\r\n      buttons: 'add,remove,moveup,movedown,instance-list,replace,item-history',\r\n    }, {\r\n      name: 'data',\r\n      buttons: 'delete',\r\n    }, {\r\n      name: 'instance',\r\n      buttons: 'template-develop,template-settings,contentitems,template-query,contenttype',\r\n      defaults: {\r\n        classes: 'group-pro',\r\n      },\r\n    }, {\r\n      name: 'app',\r\n      buttons: 'app,app-settings,app-resources,zone',\r\n      defaults: {\r\n        classes: 'group-pro',\r\n      },\r\n    },\r\n  ],\r\n  defaults: {},\r\n  params: {},\r\n  settings: {\r\n    autoAddMore: 'end',\r\n    // these are defaults, don't set again\r\n    // hover: \"right\",\r\n  },\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/toolbar/templates/default-toolbar-template.ts","import { ToolbarConfigTemplate } from '../toolbar-config-template';\r\n\r\n// the default / initial buttons in a standard toolbar\r\n// ToDo: refactor to avoid side-effects\r\nexport const leftToolbarTemplate: ToolbarConfigTemplate = {\r\n  groups: [\r\n    {\r\n      name: 'default',\r\n      buttons: 'edit,new,metadata,publish,layout',\r\n    }, {\r\n      name: 'list',\r\n      buttons: 'add,remove,moveup,movedown,instance-list,replace,item-history',\r\n    }, {\r\n      name: 'data',\r\n      buttons: 'delete',\r\n    }, {\r\n      name: 'instance',\r\n      buttons: 'template-develop,template-settings,contentitems,template-query,contenttype',\r\n      defaults: {\r\n        classes: 'group-pro',\r\n      },\r\n    }, {\r\n      name: 'app',\r\n      buttons: 'app,app-settings,app-resources,zone',\r\n      defaults: {\r\n        classes: 'group-pro',\r\n      },\r\n    },\r\n  ],\r\n  defaults: {},\r\n  params: {},\r\n  settings: {\r\n    autoAddMore: 'start',\r\n    // these are defaults, don't set again\r\n    // hover: \"right\",\r\n  },\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/toolbar/templates/left-toolbar-template.ts","import { Conf } from './conf';\r\nimport { $quickE as quickE } from './quick-e';\r\nimport { selectors } from './selectors-instance';\r\n\r\nconst configAttr: string = 'quick-edit-config';\r\n\r\n/**\r\n * the initial configuration\r\n */\r\nconst conf = quickE.config = {\r\n  enable: true,\r\n  innerBlocks: {\r\n    enable: null, // default: auto-detect\r\n  },\r\n  modules: {\r\n    enable: null, // default: auto-detect\r\n  },\r\n} as Conf;\r\n\r\nexport function _readPageConfig() {\r\n  const configs /*: Conf[]*/ = $(`[${configAttr}]`);\r\n  let confJ: string;\r\n\r\n  // any inner blocks found? will currently affect if modules can be inserted...\r\n  const hasInnerCBs = ($(selectors.cb.listSelector).length > 0);\r\n\r\n  if (configs.length > 0) {\r\n    // go through reverse list, as the last is the most important...\r\n    const finalConfig = {} as Conf;\r\n    for (let c = configs.length; c >= 0; c--) {\r\n      confJ = configs[0].getAttribute(configAttr);\r\n      try {\r\n        const confO = JSON.parse(confJ) as Conf;\r\n        Object.assign(finalConfig, confO);\r\n      } catch (e) {\r\n        console.warn('had trouble with json', e);\r\n      }\r\n    }\r\n    Object.assign(conf, finalConfig);\r\n  }\r\n\r\n  // re-check \"auto\" or \"null\"\r\n  // if it has inner-content, then it's probably a details page, where quickly adding modules would be a problem, so for now, disable modules in this case\r\n  if (conf.modules.enable === null || conf.modules.enable === 'auto') conf.modules.enable = !hasInnerCBs;\r\n\r\n  // for now, ContentBlocks are only enabled if they exist on the page\r\n  if (conf.innerBlocks.enable === null || conf.innerBlocks.enable === 'auto') conf.innerBlocks.enable = hasInnerCBs;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-edit/config.ts","export class Coords {\r\n  constructor(\r\n    public x: number,\r\n    public y: number,\r\n    public w?: number,\r\n    public yh?: number,\r\n    public element?: any,\r\n  ) {\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-edit/coords.ts","import { prepareToAddContent } from './templates';\r\n\r\n/*\r\n * this is a content block in the browser\r\n *\r\n * A Content Block is a stand alone unit of content, with it's own definition of\r\n * 1. content items\r\n * 2. template\r\n * + some other stuff\r\n *\r\n * it should be able to render itself\r\n *\r\n * Maybe ToDo 2cb:\r\n * 2sxc should have one entry point (interface to browser context) only.\r\n * Otherwise, we cannot know, when which part will be executed and debugging becomes very difficult.\r\n *\r\n */\r\nexport class MainContentBlock {\r\n  // constants\r\n  static cViewWithoutContent: string = '_LayoutElement'; // needed to differentiate the \"select item\" from the \"empty-is-selected\" which are both empty\r\n  static cUseExistingTemplate = -1;\r\n  prepareToAddContent = prepareToAddContent;\r\n  //updateTemplateFromDia = updateTemplateFromDia;\r\n}\r\n\r\n/**\r\n * The main content-block manager\r\n */\r\n// ReSharper disable once InconsistentNaming\r\nexport let _contentBlock = new MainContentBlock();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/contentBlock/main-content-block.ts","import { renderer } from '../contentBlock/render';\r\nimport { updateTemplateFromDia } from '../contentBlock/templates';\r\nimport { context } from '../context/context';\r\nimport { getTag } from '../manage/api';\r\nimport { ContextOfButton } from '../context/context-of-button';\r\nimport { quickDialog } from './quick-dialog';\r\nimport { IDialogFrameElement } from './iDialogFrameElement';\r\nimport { QuickDialogConfig } from './quick-dialog-config';\r\nimport { IQuickDialogConfig } from '../interfaces/iquick-dialog-config';\r\nimport Iiframebridge = require('../interfaces/iiframe-bridge');\r\nimport IIFrameBridge = Iiframebridge.IIFrameBridge;\r\n\r\nconst scrollTopOffset: number = 80;\r\nconst animationTime: number = 400;\r\n\r\nexport function build(iFrame: HTMLIFrameElement): IDialogFrameElement {\r\n  console.log('prot: ', IFrameBridge.prototype);\r\n  const iFrameExtended = iFrame as IDialogFrameElement;\r\n  iFrameExtended.bridge = new IFrameBridge();\r\n  console.log('extensions: ', iFrameExtended.bridge);\r\n  return iFrameExtended;\r\n}\r\n\r\n/**\r\n * \r\n */\r\n// ReSharper disable once InconsistentNaming\r\nexport class IFrameBridge implements IIFrameBridge {\r\n\r\n  private sxcCacheKey: string;\r\n  private dialogName: string;\r\n\r\n  /** internal object to keep track of the sxc-instance */\r\n  private instanceSxc: SxcInstanceWithInternals;\r\n\r\n  /** The html-tag of the current module */\r\n  private tagModule: JQuery<HTMLElement>;\r\n\r\n  /**\r\n   * get the sxc-object of this iframe\r\n   * @returns {Object<any>} refreshed sxc-object\r\n   */\r\n  private uncachedSxc(): SxcInstanceWithInternals {\r\n    if (!this.instanceSxc) throw \"can't find sxc-instance of IFrame, probably it wasn't initialized yet\";\r\n    return this.instanceSxc.recreate();\r\n  }\r\n\r\n  getContext(): ContextOfButton { return context(this.uncachedSxc()); }\r\n\r\n  getAdditionalDashboardConfig() { return QuickDialogConfig.fromContext(this.getContext()); }\r\n\r\n  hide(): void { quickDialog.setVisible(false); }\r\n\r\n  run(verb: string) { this.uncachedSxc().manage.run(verb); }\r\n\r\n  cancel(): void { quickDialog.cancel(this); };\r\n\r\n  showMessage(message: string) {\r\n    renderer.showMessage(this.getContext(), `<p class=\"no-live-preview-available\">${message}</p>`);\r\n    scrollToTarget(this.tagModule);\r\n  }\r\n\r\n  reloadAndReInit(): Promise<IQuickDialogConfig> {\r\n    this.changed = false;\r\n    return renderer.reloadAndReInitialize(this.getContext(), true, true)\r\n      .then(() => scrollToTarget(this.tagModule))\r\n      .then(() => Promise.resolve(this.getAdditionalDashboardConfig()));\r\n  }\r\n\r\n  setTemplate(templateId: number, templateName: string, final: boolean): Promise<boolean> {\r\n    this.changed = true;\r\n    const config = this.getAdditionalDashboardConfig(),\r\n      context = this.getContext();\r\n    const ajax = config.isContent || config.supportsAjax;\r\n\r\n    // add msg on full-reload, as it takes longer\r\n    // don't add this on ajax, as it will have side-effects because sometimes\r\n    // in ajax the content won't be replaced\r\n    if (!ajax)\r\n      this.showMessage(`refreshing <b>${templateName}</b>...`);\r\n\r\n    const reallySave = final || !ajax;\r\n    let promise = reallySave\r\n      ? updateTemplateFromDia(context, templateId)\r\n      : renderer.ajaxLoad(context, templateId, true);\r\n\r\n    if (final) promise = promise\r\n      .then(() => quickDialog.setVisible(false));\r\n\r\n    promise = ajax\r\n      ? promise.then(() => scrollToTarget(this.tagModule))\r\n      : promise.then(() => window.parent.location.reload());\r\n\r\n    // return true if ajax, so upstream can update UIs\r\n    return promise.then(() => ajax);\r\n  }\r\n\r\n  changed = false;\r\n\r\n  /**\r\n   * prepare the bridge with the info of the current instance\r\n   */\r\n  setup(sxc: SxcInstanceWithInternals, dialogName: string): void {\r\n    console.log('rewire with sxc: ', sxc);\r\n\r\n    this.changed = false;\r\n    this.instanceSxc = sxc;\r\n    this.tagModule = $($(getTag(sxc)).parent().eq(0));\r\n    this.sxcCacheKey = sxc.cacheKey;\r\n    if (dialogName)\r\n      this.dialogName = dialogName;\r\n  };\r\n\r\n  /**\r\n  * check if the dialog is showing for the current sxc-instance\r\n  * @param {string} dialogName - name of dialog\r\n  * @returns {boolean} true if it's currently showing for this sxc-instance\r\n  */\r\n  isConfiguredFor(instanceId: string, dialogName: string): boolean {\r\n    return this.sxcCacheKey === instanceId // the iframe is showing for the current sxc\r\n      && this.dialogName === dialogName; // the view is the same as previously\r\n  }\r\n}\r\n\r\nfunction scrollToTarget(target: JQuery<HTMLElement>) {\r\n  const specs = {\r\n    scrollTop: target.offset().top - scrollTopOffset\r\n  } as any;\r\n  $('body').animate(specs, animationTime);\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-dialog/iframe-bridge.ts","import { ContextOfButton } from '../context/context-of-button';\r\nimport { UserOfEditContext } from '../manage/user-of-edit-context';\r\nimport { IQuickDialogConfig } from '../interfaces/iquick-dialog-config';\r\n\r\n\r\nexport class QuickDialogConfig implements IQuickDialogConfig {\r\n  appId: number;\r\n  isContent: boolean;\r\n  isInnerContent: boolean;\r\n  hasContent: boolean;\r\n  isList: boolean;\r\n  templateId: number;\r\n  contentTypeId: string;\r\n  //templateChooserVisible: boolean;\r\n  user: UserOfEditContext;\r\n  supportsAjax: boolean;\r\n  debug: boolean;\r\n\r\n  //constructor(editContext: DataEditContext) {\r\n  //  this.appId = editContext.ContentGroup.AppId;\r\n  //  this.isContent = editContext.ContentGroup.IsContent;\r\n  //  this.hasContent = editContext.ContentGroup.HasContent;\r\n  //  this.isList = editContext.ContentGroup.IsList;\r\n  //  this.templateId = editContext.ContentGroup.TemplateId;\r\n  //  this.contentTypeId = editContext.ContentGroup.ContentTypeName;\r\n  //  this.templateChooserVisible = editContext.ContentBlock.ShowTemplatePicker; // todo = maybe move to content-group\r\n  //  this.user = getUserOfEditContext(editContext);\r\n  //  this.supportsAjax = editContext.ContentGroup.SupportsAjax;\r\n  //}\r\n\r\n  static fromContext(context: ContextOfButton): QuickDialogConfig {\r\n    const config = new QuickDialogConfig();\r\n    config.appId = context.app.id;\r\n    config.isContent = context.app.isContent;\r\n    config.isInnerContent = context.instance.id !== context.contentBlock.id; // if it differs, it's inner\r\n    config.hasContent = context.app.hasContent;\r\n    config.isList = context.contentBlock.isList;\r\n    config.templateId = context.contentBlock.templateId;\r\n    config.contentTypeId = context.contentBlock.contentTypeId;\r\n    config.user = UserOfEditContext.fromContext(context);\r\n    config.supportsAjax = context.app.supportsAjax;\r\n    config.debug = ((window as any).$2sxc as SxcControllerWithInternals).debug.load;\r\n    return config;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-dialog/quick-dialog-config.ts","import { DebugConfig } from \"../DebugConfig\";\r\n\r\n/**\r\n * This object helps persist / load / reset \r\n * a setting in the session-state\r\n * */\r\nexport class SessionStateHandler<T> {\r\n  constructor(private readonly key: string) { }\r\n\r\n  set(value: string): void {\r\n    if(DebugConfig.state.change) console.log(`state '${this.key}' set(${value})`);\r\n    sessionStorage.setItem(this.key, value);\r\n  };\r\n\r\n  remove(): void {\r\n    if (DebugConfig.state.change) console.log(`state '${this.key}' remove()`);\r\n    sessionStorage.removeItem(this.key);\r\n  }\r\n\r\n  get(): T {\r\n    const result = SessionStorageHelper.getItemValue<T>(this.key);\r\n    if (DebugConfig.state.get) console.log(`state '${this.key}' get() = '${result}'`);\r\n    return result;\r\n  }\r\n}\r\n\r\n/**\r\n * session storage helper to get typed values from it\r\n */\r\nclass SessionStorageHelper {\r\n  static getItemValueString(key: string): string {\r\n    const value = sessionStorage.getItem(key);\r\n    return value;\r\n  }\r\n\r\n  static getItemValue<T>(key: string): T {\r\n    const value = sessionStorage.getItem(key);\r\n    return JSON.parse(value) as T;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/manage/session-state-handler.ts","import { DialogPaths } from '../settings/DialogPaths';\r\n\r\n\r\n/**\r\n * rewrite the url to fit the quick-dialog situation\r\n * optionally with a live-compiled version from ng-serve\r\n * @param {string} url - original url pointing to the default dialog\r\n * @returns {string} new url pointing to quick dialog\r\n */\r\nexport function setUrlToQuickDialog(url: string): string {\r\n  // change default url-schema from the primary angular-app to the quick-dialog\r\n  url = url.replace(DialogPaths.ng1, DialogPaths.quickDialog)\r\n    .replace(DialogPaths.ng8, DialogPaths.quickDialog);\r\n  url = changePathToLocalhostForDev(url);\r\n  return url;\r\n}\r\n\r\n/**\r\n * special debug-code when running on local ng-serve\r\n * this is only activated if the developer manually sets a value in the localStorage\r\n * @param url\r\n */\r\nfunction changePathToLocalhostForDev(url: string): string {\r\n  try {\r\n    const devMode = localStorage.getItem('devMode');\r\n    if (devMode && !!devMode) {\r\n      return url.replace('/desktopmodules/tosic_sexycontent/dist/ng/ui.html', 'http://localhost:4200');\r\n    }\r\n  } catch (e) {\r\n    // ignore\r\n  }\r\n  return url;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-dialog/url-handler.ts","import { ContextOfButton } from '../context/context-of-button';\r\nimport { commandCreate } from './command-create';\r\n\r\n/**\r\n * create a dialog link\r\n * @param sxc\r\n * @param specialSettings\r\n */\r\nexport function commandLinkToNgDialog(context: ContextOfButton): string {\r\n  const cmd = commandCreate(context);\r\n\r\n  if (cmd.context.button.action.params.useModuleList) {\r\n    cmd.addContentGroupItemSetsToEditList(true);\r\n  } else {\r\n    cmd.addSimpleItem();\r\n  };\r\n\r\n  // if the command has own configuration stuff, do that now\r\n  if (cmd.context.button.configureCommand) {\r\n    cmd.context.button.configureCommand(context, cmd);\r\n  }\r\n\r\n  return cmd.generateLink(context);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command-link-to-ng-dialog.ts","import { ContextOfButton } from '../context/context-of-button';\r\nimport { windowInPage as window } from '../interfaces/window-in-page';\r\nimport { DialogPaths as Dialog } from '../settings/DialogPaths';\r\nimport { Command } from './command';\r\n\r\n/**\r\n * assemble an object which will store the configuration and execute it\r\n */\r\nexport function commandCreate(context: ContextOfButton): Command {\r\n\r\n  const ngDialogUrl = context.instance.sxcRootUrl +\r\n    'desktopmodules/tosic_sexycontent/' +\r\n    ((context.ui.form === 'ng8' && context.button.dialog(context) === 'edit') ? Dialog.ng8 : Dialog.ng1) +\r\n    '?sxcver=' + context.instance.sxcVersion;\r\n\r\n  const debugUrlParam: string = window.$2sxc.urlParams.get('debug') ? '&debug=true' : '';\r\n\r\n  const cmd = new Command(context, ngDialogUrl, debugUrlParam);\r\n\r\n  return cmd;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command-create.ts","import { ContextOfButton } from '../context/context-of-button';\r\nimport { ItemIdentifierGroup, ItemIdentifierSimple } from '../interfaces/item-identifiers';\r\nimport { NgDialogParams } from '../manage/ng-dialog-params';\r\nimport { translate } from '../translate/2sxc.translate';\r\nimport { Params } from './params';\r\n\r\n\r\nexport class Command {\r\n  items: Array<ItemIdentifierSimple | ItemIdentifierGroup>;\r\n  params: Params;\r\n\r\n  constructor(public context: ContextOfButton, public ngDialogUrl: string, public isDebug: string) {\r\n    // this.settings = settings;\r\n    this.items = context.button.action.params.items || []; // use predefined or create empty array\r\n    // todo: stv, clean this\r\n    const params = this.evalPropOrFunction(context.button.params, context, {});\r\n    const dialog = this.evalPropOrFunction(context.button.dialog, context, {});\r\n    this.params = Object.assign({\r\n      dialog: dialog || context.button.action.name, // the variable used to name the dialog changed in the history of 2sxc from action to dialog\r\n    }, params) as Params;\r\n\r\n  }\r\n\r\n  private evalPropOrFunction = (propOrFunction: any, context: ContextOfButton, fallback: any) => {\r\n    if (propOrFunction === undefined || propOrFunction === null) {\r\n      return fallback;\r\n    }\r\n    return (typeof (propOrFunction) === 'function' ? propOrFunction(context) : propOrFunction);\r\n  }\r\n\r\n  addSimpleItem = () => {\r\n    const item = {} as ItemIdentifierSimple;\r\n    const params = this.context.button.action.params;\r\n    const ct = params.contentType || params.attributeSetName; // two ways to name the content-type-name this, v 7.2+ and older\r\n    if (params.entityId)\r\n      item.EntityId = params.entityId;\r\n\r\n    if (ct)\r\n      item.ContentTypeName = ct;\r\n\r\n    // only add if there was stuff to add\r\n    if (item.EntityId || item.ContentTypeName) {\r\n      console.warn('used the simple item header - test if dialog still works!');\r\n      // this.items.push(item);\r\n      this.items.push({ ...item, Title: translate(this.findTranslationKey(this.findPartName(true))) });\r\n    }\r\n  }\r\n\r\n  // this adds an item of the content-group, based on the group GUID and the sequence number\r\n  addContentGroupItem(\r\n    guid: string,\r\n    index: number,\r\n    part: string,\r\n    isAdd: boolean,\r\n    // isEntity: boolean,\r\n    // cbid: number,\r\n    // sectionLanguageKey: string\r\n    ) {\r\n    this.items.push({\r\n      Group: {\r\n        Guid: guid,\r\n        Index: index,\r\n        Part: part.toLocaleLowerCase(),\r\n        Add: isAdd,\r\n      },\r\n      Title: translate(this.findTranslationKey(part)),\r\n    });\r\n  }\r\n\r\n  // this will tell the command to edit a item from the sorted list in the group, optionally together with the presentation item\r\n  addContentGroupItemSetsToEditList = (withPresentation: boolean) => {\r\n    const isContentAndNotHeader = (this.context.button.action.params.sortOrder !== -1);\r\n    const index = isContentAndNotHeader ? this.context.button.action.params.sortOrder : 0;\r\n    const cTerm = this.findPartName(true);\r\n    const pTerm = this.findPartName(false);\r\n    const isAdd = this.context.button.action.name === 'new';\r\n    const groupId = this.context.contentBlock.contentGroupId;\r\n\r\n    this.addContentGroupItem(groupId, index, cTerm, isAdd);\r\n\r\n    if (withPresentation)\r\n      this.addContentGroupItem(groupId, index, pTerm, isAdd);\r\n  }\r\n\r\n  /** find the part name for both the API to give the right item (when using groups) and for i18n */\r\n  findPartName(content: boolean): string {\r\n    const isContentAndNotHeader = (this.context.button.action.params.sortOrder !== -1);\r\n    return (isContentAndNotHeader ? '' : 'List') + (content ? 'Content' : 'Presentation');\r\n  }\r\n\r\n  /** find the correct i18n key for this part */\r\n  findTranslationKey(partName: string): string {\r\n    return `EditFormTitle.${partName}`;\r\n  }\r\n\r\n  // build the link, combining specific params with global ones and put all in the url\r\n  generateLink = (context: ContextOfButton) => {\r\n    // if there is no items-array, create an empty one (it's required later on)\r\n    if (!context.button.action.params.items) {\r\n      context.button.action.params.items = [];\r\n    }\r\n    //#region steps for all actions: prefill, serialize, open-dialog\r\n    // when doing new, there may be a prefill in the link to initialize the new item\r\n    if (context.button.action.params.prefill) {\r\n      for (let i = 0; i < this.items.length; i++) {\r\n        this.items[i].Prefill = context.button.action.params.prefill;\r\n      }\r\n    }\r\n    this.params.items = JSON.stringify(this.items); // Serialize/json-ify the complex items-list\r\n\r\n    // clone the params and adjust parts based on partOfPage settings...\r\n    const ngDialogParams = NgDialogParams.fromContext(context); // 2dm simplified buildNgDialogParams(context);\r\n    const sharedParams = Object.assign({}, ngDialogParams) as NgDialogParams;\r\n    const partOfPage = context.button.partOfPage(context);\r\n    if (!partOfPage) {\r\n      delete sharedParams.versioningRequirements;\r\n      delete sharedParams.publishing;\r\n      sharedParams.partOfPage = false;\r\n    }\r\n\r\n    return this.ngDialogUrl +\r\n      '#' +\r\n      $.param(sharedParams) +\r\n      '&' +\r\n      $.param(this.params) +\r\n      this.isDebug;\r\n    //#endregion\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command.ts","import { ContextOfButton } from '../context/context-of-button';\r\nimport { UserOfEditContext } from './user-of-edit-context';\r\n\r\nexport class NgDialogParams {\r\n  zoneId: number;\r\n  appId: number;\r\n  tid: number;\r\n  mid: number;\r\n  cbid: number;\r\n  lang: string;\r\n  langpri: string;\r\n  langs: any; // string[] | null;\r\n  portalroot: string;\r\n  websiteroot: string;\r\n  partOfPage: boolean;\r\n  versioningRequirements: string;\r\n  publishing: string;\r\n  user: UserOfEditContext;\r\n  approot: string | null;\r\n\r\n  /** features of App - this is to tell the UI it can show advanced features of an app like permissions, API, REST etc. */\r\n  fa: boolean;\r\n\r\n  /** request verification token for form */\r\n  rvt: string;\r\n\r\n  // constructor(sxc: SxcInstanceWithInternals, editContext: DataEditContext) {\r\n  //  this.zoneId = editContext.ContentGroup.ZoneId;\r\n  //  this.appId = editContext.ContentGroup.AppId;\r\n  //  this.tid = editContext.Environment.PageId;\r\n  //  this.mid = editContext.Environment.InstanceId;\r\n  //  this.cbid = sxc.cbid;\r\n  //  this.lang = editContext.Language.Current;\r\n  //  this.langpri = editContext.Language.Primary;\r\n  //  this.langs = JSON.stringify(editContext.Language.All);\r\n  //  this.portalroot = editContext.Environment.WebsiteUrl;\r\n  //  this.websiteroot = editContext.Environment.SxcRootUrl;\r\n  //  this.partOfPage = editContext.ContentBlock.PartOfPage;\r\n  //  // versioningRequirements= editContext.ContentBlock.VersioningRequirements;\r\n  //  this.publishing = editContext.ContentBlock.VersioningRequirements;\r\n  //  // todo= probably move the user into the dashboard info\r\n  //  this.user = getUserOfEditContext(editContext);\r\n  //  this.approot = editContext.ContentGroup.AppUrl || null; // this is the only value which doesn't have a slash by default. note that the app-root doesn't exist when opening \"manage-app\"\r\n  // }\r\n\r\n  static fromContext(context: ContextOfButton): NgDialogParams {\r\n    const params = new NgDialogParams();\r\n    params.zoneId = context.app.zoneId;\r\n    params.appId = context.app.id;\r\n    params.tid = context.page.id;\r\n    params.mid = context.instance.id;\r\n    params.cbid = context.contentBlock.id;\r\n    params.lang = context.app.currentLanguage;\r\n    params.langpri = context.app.primaryLanguage;\r\n    params.langs = JSON.stringify(context.app.allLanguages);\r\n    params.portalroot = context.tenant.url;\r\n    params.websiteroot = context.instance.sxcRootUrl;\r\n    params.partOfPage = context.contentBlock.partOfPage;\r\n    // versioningRequirements= editContext.ContentBlock.VersioningRequirements;\r\n    params.publishing = context.contentBlock.versioningRequirements;\r\n    // todo= probably move the user into the dashboard info\r\n    params.user = UserOfEditContext.fromContext(context);\r\n    params.approot = context.app.appPath || null; // this is the only value which doesn't have a slash by default. note that the app-root doesn't exist when opening \"manage-app\"\r\n    params.fa = !context.app.isContent;\r\n    params.rvt = $.ServicesFramework(0).getAntiForgeryValue();\r\n    console.log('rvt', params.rvt);\r\n    return params;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/manage/ng-dialog-params.ts","import { initInstance } from './create';\r\n\r\n/**\r\n * A helper-controller in charge of opening edit-dialogues + creating the toolbars for it\r\n * all in-page toolbars etc.\r\n * if loaded, it's found under the $2sxc(module).manage\r\n * it has commands to\r\n * - getButton\r\n * - getToolbar\r\n * - run(...)\r\n * - isEditMode\r\n */\r\nclass Manage {\r\n  initInstance = initInstance;\r\n}\r\n\r\nexport const _manage = new Manage(); // used out of this project in ToSic.Sxc.Instance and 2sxc.api.js\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/manage/manage.ts","import { InstanceEngine } from '../commands/instance-engine';\r\nimport { manipulator } from '../contentBlock/manipulate';\r\nimport { context } from '../context/context';\r\nimport { DataEditContext } from '../data-edit-context/data-edit-context';\r\nimport { ButtonDefinition } from '../toolbar/button/button-definition';\r\nimport { renderButton } from '../toolbar/item/render-button';\r\nimport { renderToolbar } from '../toolbar/item/render-toolbar';\r\nimport { expandToolbarConfig } from '../toolbar/toolbar/toolbar-expand-config';\r\nimport { getEditContext, getTag} from './api';\r\nimport { UserOfEditContext } from './user-of-edit-context';\r\nimport { buttonConfigAdapter } from '../toolbar/adapters/button-config-adapter';\r\nimport { ToolbarSettings } from '../toolbar/toolbar/toolbar-settings';\r\nimport { ContextOfButton } from '../context/context-of-button';\r\n\r\n/**\r\n * A helper-controller in charge of opening edit-dialogues + creating the toolbars for it\r\n * all in-page toolbars etc.\r\n * if loaded, it's found under the $2sxc(module).manage\r\n * it has commands to\r\n * - getButton\r\n * - getToolbar\r\n * - run(...)\r\n * - isEditMode\r\n * @param sxc\r\n *\r\n * we must keep signature of initInstance for compatibility because it is used out of this project in ToSic.Sxc.Instance and 2sxc.api.js\r\n */\r\nexport function initInstance(sxc: SxcInstanceWithInternals) {\r\n  try {\r\n    _initInstance(sxc);\r\n  } catch (e) {\r\n    console.error('error in 2sxc - will log but not throw', e);\r\n  }\r\n}\r\n\r\n// ReSharper disable once InconsistentNaming\r\nfunction _initInstance(sxc: SxcInstanceWithInternals) {\r\n  const myContext = context(sxc);\r\n  const editContext = getEditContext(myContext.sxc);\r\n\r\n  const userInfo = UserOfEditContext.fromContext(myContext);// 2dm simplified getUserOfEditContext(context);\r\n  const cmdEngine = new InstanceEngine(myContext.sxc);\r\n\r\n  const editManager = new EditManager(myContext.sxc, editContext, userInfo, cmdEngine, myContext);\r\n  sxc.manage = editManager;\r\n  editManager.init(); \r\n  return editManager;\r\n}\r\n\r\nexport class EditManager {\r\n\r\n  constructor(private sxc: SxcInstanceWithInternals,\r\n    private editContext: DataEditContext,\r\n    private userInfo: UserOfEditContext,\r\n    private cmdEngine: InstanceEngine,\r\n    private context: ContextOfButton) {\r\n  }\r\n\r\n  //#region Official, public properties and commands, which are stable for use from the outside\r\n\r\n  /**\r\n   * run a command - command used in toolbars and custom buttons\r\n   * it is publicly used out of inpage, so take a care to preserve function signature\r\n   */\r\n  run = this.cmdEngine.run;\r\n\r\n  /**\r\n   * Generate a button (an <a>-tag) for one specific toolbar-action.\r\n   * @param {Object<any>} actDef - settings, an object containing the spec for the expected button\r\n   * @param {int} groupIndex - number what button-group it's in'\r\n   * @returns {string} html of a button\r\n   * it is publicly used out of inpage, so take a care to preserve function signature\r\n   */\r\n  getButton = (actDef: ButtonDefinition, groupIndex: number): string => {\r\n    //const tag: any = getTag(this.sxc);\r\n    //const myContext = context(tag);\r\n\r\n    const newButtonConfig = buttonConfigAdapter(\r\n      this.context,\r\n      actDef,\r\n      groupIndex);\r\n\r\n    this.context.button = newButtonConfig;\r\n \r\n    const button = renderButton(this.context, groupIndex);\r\n\r\n    return button.outerHTML;\r\n  }\r\n\r\n  /**\r\n   * Builds the toolbar and returns it as HTML\r\n   * @param {Object<any>} tbConfig - general toolbar config\r\n   * @param {Object<any>} moreSettings - additional / override settings\r\n   * @returns {string} html of the current toolbar\r\n   *\r\n   * it is publicly used out of inpage, so take a care to preserve function signature\r\n   */\r\n  getToolbar = (tbConfig: any, moreSettings: ToolbarSettings): string => {\r\n    //const tag: any = getTag(this.sxc);\r\n    //const myContext = context(tag);\r\n    const toolbarConfig = expandToolbarConfig(\r\n      this.context,\r\n      tbConfig,\r\n      moreSettings);\r\n\r\n    this.context.toolbar = toolbarConfig;\r\n\r\n    return renderToolbar(this.context);\r\n  };\r\n\r\n  //#endregion official, public properties - everything below this can change at any time\r\n\r\n  _context = this.context;\r\n\r\n  // ReSharper disable InconsistentNaming\r\n  /**\r\n   * internal method to find out if it's in edit-mode\r\n   */\r\n  _isEditMode = () => this.editContext.Environment.IsEditable;\r\n\r\n  /**\r\n   * used for various dialogues\r\n   */\r\n  _reloadWithAjax = this.context.app.supportsAjax;\r\n\r\n  // #region 2dm disabled / todo q2stv\r\n  // todo q2stv - I think we don't need this any more\r\n  // \r\n  //_dialogParameters = buildNgDialogParams(this.context);\r\n\r\n   // 2dm disabled\r\n  // todo q2stv - I think we don't need this any more\r\n /**\r\n   * used to configure buttons / toolbars\r\n   */\r\n  //_instanceConfig = buildInstanceConfig(this.context);\r\n  // 2dm disabled\r\n  // todo q2stv - I think we don't need this any more\r\n  /**\r\n   * used for in-page dialogues\r\n   */\r\n  //_quickDialogConfig = buildQuickDialogConfig(this.context);\r\n\r\n  //#endregion\r\n\r\n  /** metadata necessary to know what/how to edit */\r\n  _editContext = this.editContext;\r\n\r\n  /** used to handle the commands for this content-block */\r\n  _commands = this.cmdEngine;\r\n\r\n  _user = this.userInfo;\r\n\r\n\r\n\r\n  /**\r\n   * change config by replacing the guid, and refreshing dependent sub-objects\r\n   */\r\n  _updateContentGroupGuid(context: ContextOfButton, newGuid: string) {\r\n    context.contentBlock.contentGroupId = newGuid;\r\n    this.editContext.ContentGroup.Guid = newGuid;\r\n    // 2dm disabled, doesn't seem used - \r\n    // todo q2stv - question, pls confirm\r\n    //this._instanceConfig = InstanceConfig.fromContext(context);// 2dm simplified buildInstanceConfig(context);\r\n  }\r\n\r\n  _getCbManipulator = () => manipulator(this.sxc);\r\n  // ReSharper restore InconsistentNaming\r\n\r\n  /**\r\n   * init this object\r\n   */\r\n  init = (): void => {\r\n    const tag = getTag(this.sxc);\r\n    // enhance UI in case there are known errors / issues\r\n    const isErrorState = this.editContext && this.editContext.error && this.editContext.error.type;\r\n    if (isErrorState) \r\n      handleErrors(this.editContext.error.type, tag);\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * private: show error when the app-data hasn't been installed yet for this imported-module\r\n */\r\nfunction handleErrors(errType: any, cbTag: any): void {\r\n  const errWrapper = $('<div class=\"dnnFormMessage dnnFormWarning sc-element\"></div>');\r\n  let msg = '';\r\n  const toolbar = $(\"<ul class='sc-menu'></ul>\");\r\n  if (errType === 'DataIsMissing') {\r\n    msg =\r\n      'Error: System.Exception: Data is missing - usually when a site is copied but the content / apps have not been imported yet - check 2sxc.org/help?tag=export-import';\r\n    toolbar.attr('data-toolbar', '[{\\\"action\\\": \\\"zone\\\"}, {\\\"action\\\": \\\"more\\\"}]');\r\n  }\r\n  errWrapper.append(msg);\r\n  errWrapper.append(toolbar);\r\n  $(cbTag).append(errWrapper);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/manage/create.ts","import { Cms } from '../cms/Cms';\r\nimport { context } from '../context/context';\r\nimport { Settings } from './settings';\r\n\r\nexport class InstanceEngine {\r\n  constructor(private sxc: SxcInstanceWithInternals) {}\r\n\r\n  run(\r\n    nameOrSettings: string | Partial<Settings>,\r\n    eventOrSettings?: Partial<Settings> | MouseEvent,\r\n    event?: MouseEvent,\r\n  ): Promise<any> {\r\n    const cntx = context(this.sxc);\r\n    return new Cms().run(cntx, nameOrSettings, eventOrSettings, event);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/instance-engine.ts","import { _toolbarManager } from '../toolbar/toolbar-manager';\r\nimport { translate } from '../translate/2sxc.translate';\r\nimport { getSxcInstance } from '../x-bootstrap/sxc';\r\nimport { ManipulateParams } from './manipulate-params';\r\n\r\n/** contains commands to create/move/delete a contentBlock in a page */\r\nlet sxcInstance: SxcInstanceWithInternals;\r\n\r\n/**\r\n * create content block\r\n * @param parentId\r\n * @param fieldName\r\n * @param index\r\n * @param appName\r\n * @param container\r\n * @param newGuid\r\n */\r\nfunction create(parentId: number,\r\n                fieldName: string,\r\n                index: number,\r\n                appName: string,\r\n                container: any,\r\n                newGuid: string): any {\r\n  // the wrapper, into which this will be placed and the list of pre-existing blocks\r\n  const listTag = container;\r\n  if (listTag.length === 0) return alert('can\\'t add content-block as we couldn\\'t find the list');\r\n  const cblockList = listTag.find('div.sc-content-block');\r\n  if (index > cblockList.length) index = cblockList.length; // make sure index is never greater than the amount of items\r\n\r\n  const params: ManipulateParams = {\r\n    parentId: parentId,\r\n    field: fieldName,\r\n    sortOrder: index,\r\n    app: appName,\r\n    guid: newGuid,\r\n  };\r\n\r\n  return sxcInstance.webApi.get({ url: 'view/module/generatecontentblock', params: params })\r\n    .then((result: any) => {\r\n      const newTag = $(result); // prepare tag for inserting\r\n\r\n      // should I add it to a specific position...\r\n      if (cblockList.length > 0 && index > 0)\r\n        $(cblockList[cblockList.length > index - 1 ? index - 1 : cblockList.length - 1])\r\n          .after(newTag);\r\n      else // ...or just at the beginning?\r\n        listTag.prepend(newTag);\r\n\r\n      // ReSharper disable once UnusedLocals\r\n      const sxcNew = getSxcInstance(newTag);\r\n      _toolbarManager.buildToolbars(newTag);\r\n    });\r\n}\r\n\r\n/**\r\n * move content block\r\n * @param parentId\r\n * @param field\r\n * @param indexFrom\r\n * @param indexTo\r\n */\r\nfunction move(parentId: number, field: string, indexFrom: number, indexTo: number): any {\r\n\r\n  const params: ManipulateParams = {\r\n    parentId: parentId,\r\n    field: field,\r\n    indexFrom: indexFrom,\r\n    indexTo: indexTo,\r\n  };\r\n\r\n  return sxcInstance.webApi.get({ url: 'view/module/moveiteminlist', params: params })\r\n    .then(() => {\r\n      console.log('done moving!');\r\n      window.location.reload();\r\n    });\r\n}\r\n\r\n/**\r\n * delete a content-block inside a list of content-blocks\r\n * @param parentId\r\n * @param field\r\n * @param index\r\n */\r\nfunction remove(parentId: number, field: string, index: number): any {\r\n\r\n  if (!confirm(translate('QuickInsertMenu.ConfirmDelete'))) return null;\r\n\r\n  const params: ManipulateParams = {\r\n    parentId: parentId,\r\n    field: field,\r\n    index: index,\r\n  };\r\n\r\n  return sxcInstance.webApi.get({ url: 'view/module/RemoveItemInList', params: params })\r\n    .then(() => {\r\n      console.log('done deleting!');\r\n      window.location.reload();\r\n    });\r\n}\r\n\r\nexport class Manipulator {\r\n  create = create;\r\n  move = move;\r\n  delete = remove;\r\n}\r\n\r\nexport function manipulator(sxc: SxcInstanceWithInternals): Manipulator {\r\n  sxcInstance = sxc;\r\n  return new Manipulator();\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/contentBlock/manipulate.ts","import { HasLog } from '../logging/has-log';\r\nimport { Log } from '../logging/log';\r\nimport { buildToolbars, disable, isDisabled } from './build-toolbars';\r\nimport { renderButton } from './item/render-button';\r\nimport { renderToolbar } from './item/render-toolbar';\r\nimport { ToolbarConfigTemplates } from './toolbar/toolbar-config-templates';\r\n\r\n/**\r\n * Toolbar manager for the whole page - basically a set of APIs\r\n * the toolbar manager is an internal helper taking care of toolbars, buttons etc.\r\n */\r\nexport class ToolbarManager extends HasLog {\r\n  constructor(parentLog :Log) {\r\n    super('Tlb.Mngr', parentLog, 'init');\r\n  }\r\n  \r\n  buildToolbars(parentTag: JQuery<HTMLElement>, optionalId?: number) {\r\n    buildToolbars(this.log, parentTag, optionalId);\r\n  }\r\n\r\n  disable = disable;\r\n  isDisabled = isDisabled;\r\n  // generate button html\r\n  generateButtonHtml = renderButton;\r\n  generateToolbarHtml = renderToolbar;\r\n  toolbarTemplate = ToolbarConfigTemplates.Instance(this.log).get('default');\r\n}\r\n\r\n//2dm 2018-03-22 this seems to be unused\r\nconst sharedTbm = new ToolbarManager(null);\r\nexport const _toolbarManager = sharedTbm;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/toolbar-manager.ts","import { Commands } from '../../commands/commands';\r\nimport { ContextOfButton } from '../../context/context-of-button';\r\nimport { ButtonAction } from '../button/button-action';\r\nimport { ButtonDefinition } from '../button/button-definition';\r\nimport { ButtonConfig } from '../button/button-config';\r\nimport { expandButtonConfig } from '../button/expand-button-config';\r\nimport { ModConfig } from '../button/mod-config';\r\nimport { flattenActionDefinition } from './flatten-action-definition';\r\nimport { parametersAdapter } from './parameters-adapter';\r\n\r\nexport function buttonConfigAdapter(context: ContextOfButton, actDef: ButtonDefinition, groupIndex: number): ButtonConfig {\r\n\r\n  const partialButtonConfig: Partial<ButtonConfig> = {};\r\n  \r\n  if (actDef.code) {\r\n    partialButtonConfig.code = (context: ContextOfButton) => {\r\n\r\n      const modConfig = new ModConfig();\r\n      // todo: stv find this data\r\n      // modConfig.target = '';\r\n      // modConfig.isList = false;\r\n\r\n      return actDef.code(context.button.action.params, modConfig);\r\n    }\r\n  }\r\n\r\n  if (actDef.icon) {\r\n    partialButtonConfig.icon = (context: ContextOfButton) => {\r\n      return `icon-sxc-${actDef.icon}`;\r\n    }\r\n  }\r\n\r\n  if (actDef.classes) {\r\n    partialButtonConfig.classes = actDef.classes;\r\n  }\r\n\r\n  if (actDef.dialog) {\r\n    partialButtonConfig.dialog = (context: ContextOfButton) => {\r\n      return actDef.dialog;\r\n    };\r\n  }\r\n\r\n  if (actDef.disabled) {\r\n    partialButtonConfig.disabled = (context: ContextOfButton) => {\r\n      return actDef.disabled;\r\n    }\r\n  }\r\n\r\n  if (actDef.dynamicClasses) {\r\n    partialButtonConfig.dynamicClasses = (context: ContextOfButton) => {\r\n      return actDef.dynamicClasses(context.button.action.params);\r\n    }\r\n  }\r\n\r\n  if (actDef.fullScreen) {\r\n    partialButtonConfig.fullScreen = (context: ContextOfButton) => {\r\n      return actDef.fullScreen;\r\n    }\r\n  }\r\n\r\n  if (actDef.inlineWindow) {\r\n    partialButtonConfig.inlineWindow = (context: ContextOfButton) => {\r\n      return actDef.inlineWindow;\r\n    }\r\n  }\r\n\r\n  if (actDef.name) {\r\n    partialButtonConfig.name = actDef.name;\r\n  }\r\n\r\n  if (actDef.newWindow) {\r\n    partialButtonConfig.newWindow = (context: ContextOfButton) => {\r\n      return actDef.newWindow;\r\n    }\r\n  }\r\n\r\n  if (actDef.params) {\r\n    // todo: stv, this do not looking good, because old simple parameters become methods with context as parameter,\r\n    // we need parameter adapter to do this...\r\n    Object.assign(partialButtonConfig.params, actDef.params);\r\n  }\r\n\r\n  if (actDef.partOfPage) {\r\n    partialButtonConfig.partOfPage = (context: ContextOfButton) => {\r\n      return actDef.partOfPage;\r\n    }\r\n  }\r\n\r\n  if (actDef.showCondition) {\r\n    partialButtonConfig.showCondition = (context: ContextOfButton) => {\r\n      const modConfig = new ModConfig();\r\n\r\n      // todo: stv find this data\r\n      // modConfig.target = '';\r\n      // modConfig.isList = false;\r\n\r\n      return actDef.showCondition(context.button.action.params, modConfig);\r\n    }\r\n  }\r\n\r\n  if (actDef.title) {\r\n    partialButtonConfig.title = (context: ContextOfButton) => {\r\n      return `Toolbar.${actDef.title}`;\r\n    }\r\n  }\r\n\r\n  if (actDef.uiActionOnly) {\r\n    partialButtonConfig.uiActionOnly = (context: ContextOfButton) => {\r\n      return actDef.uiActionOnly;\r\n    }\r\n  }\r\n\r\n  actDef = (expandButtonConfig(actDef, [], null)) as ButtonDefinition;\r\n\r\n  const name = actDef.command.action;\r\n  const contentType = actDef.command.contentType;\r\n\r\n  // if the button belongs to a content-item, move the specs up to the item into the settings-object\r\n  flattenActionDefinition(actDef.command);\r\n\r\n  // parameters adapter from v1 to v2\r\n  const params = parametersAdapter(actDef.command);\r\n\r\n  // Toolbar API v2\r\n  const actions = Commands.getInstance();\r\n  const newButtonAction = new ButtonAction(name, contentType, params);\r\n  newButtonAction.commandDefinition = actions.get(name);\r\n  const newButtonConfig = new ButtonConfig(newButtonAction);\r\n  newButtonConfig.name = name;\r\n\r\n  return newButtonConfig;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/adapters/button-config-adapter.ts","export class ModConfig {\r\n  target: any;\r\n  isList: boolean;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/button/mod-config.ts","import * as i18next from './libs/i18next.min';\r\nimport * as i18nextXHRBackend from './libs/i18nextXHRBackend.min';\r\nimport * as jqueryI18next from './libs/jquery-i18next.min';\r\nimport { createContextFromEditContext } from '../context/context';\r\nimport { windowInPage as window } from '../interfaces/window-in-page';\r\nimport { getEditContext } from '../manage/api';\r\nimport { getSxcInstance } from '../x-bootstrap/sxc';\r\n\r\n/**\r\n * initialize the translation system; ensure toolbars etc. are translated\r\n */\r\n\r\nwindow.i18next = i18next;\r\nwindow.i18nextXHRBackend = i18nextXHRBackend;\r\n\r\nlet initialized: boolean = false;\r\n\r\n// ReSharper disable once InconsistentNaming\r\nexport function _translateInit(manage: any): void {\r\n  if (initialized) {\r\n    return;\r\n  }\r\n\r\n  let context = manage._context;\r\n  if (!context) {\r\n    initialized = true; // getScxInstance is calling _translate so that we can skip the loop...\r\n    // trying to get context...\r\n    const htmlElementOrId = $('div[data-cb-id]')[0];\r\n    const sxc = getSxcInstance(htmlElementOrId);\r\n    initialized = false; // for real, it is not initialized...\r\n    const editContext = getEditContext(sxc);\r\n    context = createContextFromEditContext(editContext);\r\n    context.sxc = sxc;\r\n  }\r\n\r\n  //console.log('stv: compare #1',\r\n  //  manage._editContext.Language.Current.substr(0, 2),\r\n  //  context.app.currentLanguage.substr(0, 2));\r\n\r\n  //console.log('stv: compare #2',\r\n  //  manage._editContext.Environment.SxcRootUrl,\r\n  //  context.instance.sxcRootUrl);\r\n\r\n  window.i18next\r\n    .use(i18nextXHRBackend)\r\n    .init({\r\n      lng: context.app.currentLanguage.substr(0, 2), // \"en\",\r\n      fallbackLng: 'en',\r\n      whitelist: ['en', 'de', 'fr', 'it', 'uk', 'nl'],\r\n      preload: ['en'],\r\n      backend: {\r\n        loadPath: context.instance.sxcRootUrl + 'desktopmodules/tosic_sexycontent/dist/i18n/inpage-{{lng}}.js',\r\n      },\r\n      // ReSharper disable UnusedParameter\r\n    },\r\n      (err: any, t: any) => {\r\n        // ReSharper restore UnusedParameter\r\n        // for options see\r\n        // https://github.com/i18next/jquery-i18next#initialize-the-plugin\r\n        // ReSharper disable once TsResolvedFromInaccessibleModule\r\n        jqueryI18next.init(i18next, $);\r\n        // start localizing, details:\r\n        // https://github.com/i18next/jquery-i18next#usage-of-selector-function\r\n        $('ul.sc-menu').localize(); // inline toolbars\r\n        $('.sc-i18n').localize(); // quick-insert menus\r\n    });\r\n  initialized = true;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/translate/2sxc._translateInit.ts","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"i18next\",t):e.i18next=t()}(this,function(){\"use strict\";function e(e){return null==e?\"\":\"\"+e}function t(e,t,n){e.forEach(function(e){t[e]&&(n[e]=t[e])})}function n(e,t,n){function o(e){return e&&e.indexOf(\"###\")>-1?e.replace(/###/g,\".\"):e}for(var r=\"string\"!=typeof t?[].concat(t):t.split(\".\");r.length>1;){if(!e)return{};var i=o(r.shift());!e[i]&&n&&(e[i]=new n),e=e[i]}return e?{obj:e,k:o(r.shift())}:{}}function o(e,t,o){var r=n(e,t,Object),i=r.obj,s=r.k;i[s]=o}function r(e,t,o,r){var i=n(e,t,Object),s=i.obj,a=i.k;s[a]=s[a]||[],r&&(s[a]=s[a].concat(o)),r||s[a].push(o)}function i(e,t){var o=n(e,t),r=o.obj,i=o.k;return r?r[i]:void 0}function s(e,t,n){for(var o in t)o in e?\"string\"==typeof e[o]||e[o]instanceof String||\"string\"==typeof t[o]||t[o]instanceof String?n&&(e[o]=t[o]):s(e[o],t[o],n):e[o]=t[o];return e}function a(e){return e.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,\"\\\\$&\")}function l(e){return\"string\"==typeof e?e.replace(/[&<>\"'\\/]/g,function(e){return C[e]}):e}function u(e){return e.interpolation={unescapeSuffix:\"HTML\"},e.interpolation.prefix=e.interpolationPrefix||\"__\",e.interpolation.suffix=e.interpolationSuffix||\"__\",e.interpolation.escapeValue=e.escapeInterpolation||!1,e.interpolation.nestingPrefix=e.reusePrefix||\"$t(\",e.interpolation.nestingSuffix=e.reuseSuffix||\")\",e}function c(e){return e.resStore&&(e.resources=e.resStore),e.ns&&e.ns.defaultNs?(e.defaultNS=e.ns.defaultNs,e.ns=e.ns.namespaces):e.defaultNS=e.ns||\"translation\",e.fallbackToDefaultNS&&e.defaultNS&&(e.fallbackNS=e.defaultNS),e.saveMissing=e.sendMissing,e.saveMissingTo=e.sendMissingTo||\"current\",e.returnNull=!e.fallbackOnNull,e.returnEmptyString=!e.fallbackOnEmpty,e.returnObjects=e.returnObjectTrees,e.joinArrays=\"\\n\",e.returnedObjectHandler=e.objectTreeKeyHandler,e.parseMissingKeyHandler=e.parseMissingKey,e.appendNamespaceToMissingKey=!0,e.nsSeparator=e.nsseparator,e.keySeparator=e.keyseparator,\"sprintf\"===e.shortcutFunction&&(e.overloadTranslationOptionHandler=function(e){for(var t=[],n=1;n<e.length;n++)t.push(e[n]);return{postProcess:\"sprintf\",sprintf:t}}),e.whitelist=e.lngWhitelist,e.preload=e.preload,\"current\"===e.load&&(e.load=\"currentOnly\"),\"unspecific\"===e.load&&(e.load=\"languageOnly\"),e.backend=e.backend||{},e.backend.loadPath=e.resGetPath||\"locales/__lng__/__ns__.json\",e.backend.addPath=e.resPostPath||\"locales/add/__lng__/__ns__\",e.backend.allowMultiLoading=e.dynamicLoad,e.cache=e.cache||{},e.cache.prefix=\"res_\",e.cache.expirationTime=6048e5,e.cache.enabled=!!e.useLocalStorage,e=u(e),e.defaultVariables&&(e.interpolation.defaultVariables=e.defaultVariables),e}function p(e){return e=u(e),e.joinArrays=\"\\n\",e}function f(e){return(e.interpolationPrefix||e.interpolationSuffix||e.escapeInterpolation)&&(e=u(e)),e.nsSeparator=e.nsseparator,e.keySeparator=e.keyseparator,e.returnObjects=e.returnObjectTrees,e}function h(e){e.lng=function(){return S.deprecate(\"i18next.lng() can be replaced by i18next.language for detected language or i18next.languages for languages ordered by translation lookup.\"),e.services.languageUtils.toResolveHierarchy(e.language)[0]},e.preload=function(t,n){S.deprecate(\"i18next.preload() can be replaced with i18next.loadLanguages()\"),e.loadLanguages(t,n)},e.setLng=function(t,n,o){return S.deprecate(\"i18next.setLng() can be replaced with i18next.changeLanguage() or i18next.getFixedT() to get a translation function with fixed language or namespace.\"),\"function\"==typeof n&&(o=n,n={}),n||(n={}),n.fixLng===!0&&o?o(null,e.getFixedT(t)):void e.changeLanguage(t,o)},e.addPostProcessor=function(t,n){S.deprecate(\"i18next.addPostProcessor() can be replaced by i18next.use({ type: 'postProcessor', name: 'name', process: fc })\"),e.use({type:\"postProcessor\",name:t,process:n})}}function g(e){return e.charAt(0).toUpperCase()+e.slice(1)}function d(){var e={};return R.forEach(function(t){t.lngs.forEach(function(n){return e[n]={numbers:t.nr,plurals:P[t.fc]}})}),e}function v(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}function y(){return{debug:!1,ns:[\"translation\"],defaultNS:[\"translation\"],fallbackLng:[\"dev\"],fallbackNS:!1,whitelist:!1,load:\"all\",preload:!1,keySeparator:\".\",nsSeparator:\":\",pluralSeparator:\"_\",contextSeparator:\"_\",saveMissing:!1,saveMissingTo:\"fallback\",missingKeyHandler:!1,postProcess:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:function(){},parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,overloadTranslationOptionHandler:function(e){return{defaultValue:e[1]}},interpolation:{escapeValue:!0,prefix:\"{{\",suffix:\"}}\",unescapePrefix:\"-\",nestingPrefix:\"$t(\",nestingSuffix:\")\",defaultVariables:void 0}}}function b(e){return\"string\"==typeof e.ns&&(e.ns=[e.ns]),\"string\"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),\"string\"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&e.whitelist.indexOf(\"cimode\")<0&&e.whitelist.push(\"cimode\"),e}var m={};m[\"typeof\"]=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol?\"symbol\":typeof e},m.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")},m[\"extends\"]=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},m.inherits=function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},m.possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t},m.slicedToArray=function(){function e(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(l){r=!0,i=l}finally{try{!o&&a[\"return\"]&&a[\"return\"]()}finally{if(r)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}();var x={type:\"logger\",log:function(e){this._output(\"log\",e)},warn:function(e){this._output(\"warn\",e)},error:function(e){this._output(\"error\",e)},_output:function(e,t){console&&console[e]&&console[e].apply(console,Array.prototype.slice.call(t))}},k=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];m.classCallCheck(this,e),this.subs=[],this.init(t,n)}return e.prototype.init=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.prefix=t.prefix||\"i18next:\",this.logger=e||x,this.options=t,this.debug=t.debug!==!1},e.prototype.setDebug=function(e){this.debug=e,this.subs.forEach(function(t){t.setDebug(e)})},e.prototype.log=function(){this.forward(arguments,\"log\",\"\",!0)},e.prototype.warn=function(){this.forward(arguments,\"warn\",\"\",!0)},e.prototype.error=function(){this.forward(arguments,\"error\",\"\")},e.prototype.deprecate=function(){this.forward(arguments,\"warn\",\"WARNING DEPRECATED: \",!0)},e.prototype.forward=function(e,t,n,o){o&&!this.debug||(\"string\"==typeof e[0]&&(e[0]=n+this.prefix+\" \"+e[0]),this.logger[t](e))},e.prototype.create=function(t){var n=new e(this.logger,m[\"extends\"]({prefix:this.prefix+\":\"+t+\":\"},this.options));return this.subs.push(n),n},e}(),S=new k,w=function(){function e(){m.classCallCheck(this,e),this.observers={}}return e.prototype.on=function(e,t){var n=this;e.split(\" \").forEach(function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})},e.prototype.off=function(e,t){var n=this;this.observers[e]&&this.observers[e].forEach(function(){if(t){var o=n.observers[e].indexOf(t);o>-1&&n.observers[e].splice(o,1)}else delete n.observers[e]})},e.prototype.emit=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;t>o;o++)n[o-1]=arguments[o];this.observers[e]&&this.observers[e].forEach(function(e){e.apply(void 0,n)}),this.observers[\"*\"]&&this.observers[\"*\"].forEach(function(t){var o;t.apply(t,(o=[e]).concat.apply(o,n))})},e}(),C={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\",\"/\":\"&#x2F;\"},L=function(e){function t(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],o=arguments.length<=1||void 0===arguments[1]?{ns:[\"translation\"],defaultNS:\"translation\"}:arguments[1];m.classCallCheck(this,t);var r=m.possibleConstructorReturn(this,e.call(this));return r.data=n,r.options=o,r}return m.inherits(t,e),t.prototype.addNamespaces=function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)},t.prototype.removeNamespaces=function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)},t.prototype.getResource=function(e,t,n){var o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],r=o.keySeparator||this.options.keySeparator;void 0===r&&(r=\".\");var s=[e,t];return n&&\"string\"!=typeof n&&(s=s.concat(n)),n&&\"string\"==typeof n&&(s=s.concat(r?n.split(r):n)),e.indexOf(\".\")>-1&&(s=e.split(\".\")),i(this.data,s)},t.prototype.addResource=function(e,t,n,r){var i=arguments.length<=4||void 0===arguments[4]?{silent:!1}:arguments[4],s=this.options.keySeparator;void 0===s&&(s=\".\");var a=[e,t];n&&(a=a.concat(s?n.split(s):n)),e.indexOf(\".\")>-1&&(a=e.split(\".\"),r=t,t=a[1]),this.addNamespaces(t),o(this.data,a,r),i.silent||this.emit(\"added\",e,t,n,r)},t.prototype.addResources=function(e,t,n){for(var o in n)\"string\"==typeof n[o]&&this.addResource(e,t,o,n[o],{silent:!0});this.emit(\"added\",e,t,n)},t.prototype.addResourceBundle=function(e,t,n,r,a){var l=[e,t];e.indexOf(\".\")>-1&&(l=e.split(\".\"),r=n,n=t,t=l[1]),this.addNamespaces(t);var u=i(this.data,l)||{};r?s(u,n,a):u=m[\"extends\"]({},u,n),o(this.data,l,u),this.emit(\"added\",e,t,n)},t.prototype.removeResourceBundle=function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit(\"removed\",e,t)},t.prototype.hasResourceBundle=function(e,t){return void 0!==this.getResource(e,t)},t.prototype.getResourceBundle=function(e,t){return t||(t=this.options.defaultNS),\"v1\"===this.options.compatibilityAPI?m[\"extends\"]({},this.getResource(e,t)):this.getResource(e,t)},t.prototype.toJSON=function(){return this.data},t}(w),N={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,o,r){var i=this;return e.forEach(function(e){i.processors[e]&&(t=i.processors[e].process(t,n,o,r))}),t}},O=function(e){function n(o){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];m.classCallCheck(this,n);var i=m.possibleConstructorReturn(this,e.call(this));return t([\"resourceStore\",\"languageUtils\",\"pluralResolver\",\"interpolator\",\"backendConnector\"],o,i),i.options=r,i.logger=S.create(\"translator\"),i}return m.inherits(n,e),n.prototype.changeLanguage=function(e){e&&(this.language=e)},n.prototype.exists=function(e){var t=arguments.length<=1||void 0===arguments[1]?{interpolation:{}}:arguments[1];return\"v1\"===this.options.compatibilityAPI&&(t=f(t)),void 0!==this.resolve(e,t)},n.prototype.extractFromKey=function(e,t){var n=t.nsSeparator||this.options.nsSeparator;void 0===n&&(n=\":\");var o=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var r=e.split(n);o=r[0],e=r[1]}return\"string\"==typeof o&&(o=[o]),{key:e,namespaces:o}},n.prototype.translate=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(\"object\"!==(\"undefined\"==typeof t?\"undefined\":m[\"typeof\"](t))?t=this.options.overloadTranslationOptionHandler(arguments):\"v1\"===this.options.compatibilityAPI&&(t=f(t)),void 0===e||null===e||\"\"===e)return\"\";\"number\"==typeof e&&(e=String(e)),\"string\"==typeof e&&(e=[e]);var n=t.lng||this.language;if(n&&\"cimode\"===n.toLowerCase())return e[e.length-1];var o=t.keySeparator||this.options.keySeparator||\".\",r=this.extractFromKey(e[e.length-1],t),i=r.key,s=r.namespaces,a=s[s.length-1],l=this.resolve(e,t),u=Object.prototype.toString.apply(l),c=[\"[object Number]\",\"[object Function]\",\"[object RegExp]\"],p=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays;if(l&&\"string\"!=typeof l&&c.indexOf(u)<0&&(!p||\"[object Array]\"!==u)){if(!t.returnObjects&&!this.options.returnObjects)return this.logger.warn(\"accessing an object - but returnObjects options is not enabled!\"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(i,l,t):\"key '\"+i+\" (\"+this.language+\")' returned an object instead of string.\";var h=\"[object Array]\"===u?[]:{};for(var g in l)h[g]=this.translate(\"\"+i+o+g,m[\"extends\"]({joinArrays:!1,ns:s},t));l=h}else if(p&&\"[object Array]\"===u)l=l.join(p),l&&(l=this.extendTranslation(l,i,t));else{var d=!1,v=!1;if(!this.isValidLookup(l)&&t.defaultValue&&(d=!0,l=t.defaultValue),this.isValidLookup(l)||(v=!0,l=i),(v||d)&&(this.logger.log(\"missingKey\",n,a,i,l),this.options.saveMissing)){var y=[];if(\"fallback\"===this.options.saveMissingTo&&this.options.fallbackLng&&this.options.fallbackLng[0])for(var b=0;b<this.options.fallbackLng.length;b++)y.push(this.options.fallbackLng[b]);else\"all\"===this.options.saveMissingTo?y=this.languageUtils.toResolveHierarchy(t.lng||this.language):y.push(t.lng||this.language);this.options.missingKeyHandler?this.options.missingKeyHandler(y,a,i,l):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(y,a,i,l),this.emit(\"missingKey\",y,a,i,l)}l=this.extendTranslation(l,i,t),v&&l===i&&this.options.appendNamespaceToMissingKey&&(l=a+\":\"+i),v&&this.options.parseMissingKeyHandler&&(l=this.options.parseMissingKeyHandler(l))}return l},n.prototype.extendTranslation=function(e,t,n){var o=this;n.interpolation&&this.interpolator.init(n);var r=n.replace&&\"string\"!=typeof n.replace?n.replace:n;this.options.interpolation.defaultVariables&&(r=m[\"extends\"]({},this.options.interpolation.defaultVariables,r)),e=this.interpolator.interpolate(e,r),e=this.interpolator.nest(e,function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return o.translate.apply(o,t)},n),n.interpolation&&this.interpolator.reset();var i=n.postProcess||this.options.postProcess,s=\"string\"==typeof i?[i]:i;return void 0!==e&&s&&s.length&&n.applyPostProcessor!==!1&&(e=N.handle(s,e,t,n,this)),e},n.prototype.resolve=function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=void 0;return\"string\"==typeof e&&(e=[e]),e.forEach(function(e){if(!t.isValidLookup(o)){var r=t.extractFromKey(e,n),i=r.key,s=r.namespaces;t.options.fallbackNS&&(s=s.concat(t.options.fallbackNS));var a=void 0!==n.count&&\"string\"!=typeof n.count,l=void 0!==n.context&&\"string\"==typeof n.context&&\"\"!==n.context,u=n.lngs?n.lngs:t.languageUtils.toResolveHierarchy(n.lng||t.language);s.forEach(function(e){t.isValidLookup(o)||u.forEach(function(r){if(!t.isValidLookup(o)){var s=i,u=[s],c=void 0;a&&(c=t.pluralResolver.getSuffix(r,n.count)),a&&l&&u.push(s+c),l&&u.push(s+=\"\"+t.options.contextSeparator+n.context),a&&u.push(s+=c);for(var p=void 0;p=u.pop();)t.isValidLookup(o)||(o=t.getResource(r,e,p,n))}})})}}),o},n.prototype.isValidLookup=function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&\"\"===e)},n.prototype.getResource=function(e,t,n){var o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return this.resourceStore.getResource(e,t,n,o)},n}(w),j=function(){function e(t){m.classCallCheck(this,e),this.options=t,this.whitelist=this.options.whitelist||!1,this.logger=S.create(\"languageUtils\")}return e.prototype.getLanguagePartFromCode=function(e){if(e.indexOf(\"-\")<0)return e;var t=[\"NB-NO\",\"NN-NO\",\"nb-NO\",\"nn-NO\",\"nb-no\",\"nn-no\"],n=e.split(\"-\");return this.formatLanguageCode(t.indexOf(e)>-1?n[1].toLowerCase():n[0])},e.prototype.formatLanguageCode=function(e){if(\"string\"==typeof e&&e.indexOf(\"-\")>-1){var t=[\"hans\",\"hant\",\"latn\",\"cyrl\",\"cans\",\"mong\",\"arab\"],n=e.split(\"-\");return this.options.lowerCaseLng?n=n.map(function(e){return e.toLowerCase()}):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=g(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),\"sgn\"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=g(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=g(n[2].toLowerCase()))),n.join(\"-\")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e},e.prototype.isWhitelisted=function(e){return\"languageOnly\"===this.options.load&&(e=this.getLanguagePartFromCode(e)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(e)>-1},e.prototype.toResolveHierarchy=function(e,t){var n=this;t=t||this.options.fallbackLng||[],\"string\"==typeof t&&(t=[t]);var o=[],r=function(e){n.isWhitelisted(e)?o.push(e):n.logger.warn(\"rejecting non-whitelisted language code: \"+e)};return\"string\"==typeof e&&e.indexOf(\"-\")>-1?(\"languageOnly\"!==this.options.load&&r(this.formatLanguageCode(e)),\"currentOnly\"!==this.options.load&&r(this.getLanguagePartFromCode(e))):\"string\"==typeof e&&r(this.formatLanguageCode(e)),t.forEach(function(e){o.indexOf(e)<0&&r(n.formatLanguageCode(e))}),o},e}(),R=[{lngs:[\"ach\",\"ak\",\"am\",\"arn\",\"br\",\"fil\",\"gun\",\"ln\",\"mfe\",\"mg\",\"mi\",\"oc\",\"tg\",\"ti\",\"tr\",\"uz\",\"wa\"],nr:[1,2],fc:1},{lngs:[\"af\",\"an\",\"ast\",\"az\",\"bg\",\"bn\",\"ca\",\"da\",\"de\",\"dev\",\"el\",\"en\",\"eo\",\"es\",\"es_ar\",\"et\",\"eu\",\"fi\",\"fo\",\"fur\",\"fy\",\"gl\",\"gu\",\"ha\",\"he\",\"hi\",\"hu\",\"hy\",\"ia\",\"it\",\"kn\",\"ku\",\"lb\",\"mai\",\"ml\",\"mn\",\"mr\",\"nah\",\"nap\",\"nb\",\"ne\",\"nl\",\"nn\",\"no\",\"nso\",\"pa\",\"pap\",\"pms\",\"ps\",\"pt\",\"pt_br\",\"rm\",\"sco\",\"se\",\"si\",\"so\",\"son\",\"sq\",\"sv\",\"sw\",\"ta\",\"te\",\"tk\",\"ur\",\"yo\"],nr:[1,2],fc:2},{lngs:[\"ay\",\"bo\",\"cgg\",\"fa\",\"id\",\"ja\",\"jbo\",\"ka\",\"kk\",\"km\",\"ko\",\"ky\",\"lo\",\"ms\",\"sah\",\"su\",\"th\",\"tt\",\"ug\",\"vi\",\"wo\",\"zh\"],nr:[1],fc:3},{lngs:[\"be\",\"bs\",\"dz\",\"hr\",\"ru\",\"sr\",\"uk\"],nr:[1,2,5],fc:4},{lngs:[\"ar\"],nr:[0,1,2,3,11,100],fc:5},{lngs:[\"cs\",\"sk\"],nr:[1,2,5],fc:6},{lngs:[\"csb\",\"pl\"],nr:[1,2,5],fc:7},{lngs:[\"cy\"],nr:[1,2,3,8],fc:8},{lngs:[\"fr\"],nr:[1,2],fc:9},{lngs:[\"ga\"],nr:[1,2,3,7,11],fc:10},{lngs:[\"gd\"],nr:[1,2,3,20],fc:11},{lngs:[\"is\"],nr:[1,2],fc:12},{lngs:[\"jv\"],nr:[0,1],fc:13},{lngs:[\"kw\"],nr:[1,2,3,4],fc:14},{lngs:[\"lt\"],nr:[1,2,10],fc:15},{lngs:[\"lv\"],nr:[1,2,0],fc:16},{lngs:[\"mk\"],nr:[1,2],fc:17},{lngs:[\"mnk\"],nr:[0,1,2],fc:18},{lngs:[\"mt\"],nr:[1,2,11,20],fc:19},{lngs:[\"or\"],nr:[2,1],fc:2},{lngs:[\"ro\"],nr:[1,2,20],fc:20},{lngs:[\"sl\"],nr:[5,1,2,3],fc:21}],P={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)},5:function(e){return Number(0===e?0:1==e?1:2==e?2:e%100>=3&&10>=e%100?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&4>=e?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:7>e?2:11>e?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&20>e?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(10>e%100||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0===e||e%100>1&&11>e%100?1:e%100>10&&20>e%100?2:3)},20:function(e){return Number(1==e?0:0===e||e%100>0&&20>e%100?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)}},E=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];m.classCallCheck(this,e),this.languageUtils=t,this.options=n,this.logger=S.create(\"pluralResolver\"),this.rules=d()}return e.prototype.addRule=function(e,t){this.rules[e]=t},e.prototype.getRule=function(e){return this.rules[this.languageUtils.getLanguagePartFromCode(e)]},e.prototype.needsPlural=function(e){var t=this.getRule(e);return!(t&&t.numbers.length<=1)},e.prototype.getSuffix=function(e,t){var n=this.getRule(e);if(n){if(1===n.numbers.length)return\"\";var o=n.noAbs?n.plurals(t):n.plurals(Math.abs(t)),r=n.numbers[o];if(2===n.numbers.length&&1===n.numbers[0]&&(2===r?r=\"plural\":1===r&&(r=\"\")),\"v1\"===this.options.compatibilityJSON){if(1===r)return\"\";if(\"number\"==typeof r)return\"_plural_\"+r.toString()}return this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}return this.logger.warn(\"no plural rule found for: \"+e),\"\"},e}(),_=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];m.classCallCheck(this,t),this.logger=S.create(\"interpolator\"),this.init(e,!0)}return t.prototype.init=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];t&&(this.options=e),e.interpolation||(e.interpolation={escapeValue:!0});var n=e.interpolation;this.escapeValue=n.escapeValue,this.prefix=n.prefix?a(n.prefix):n.prefixEscaped||\"{{\",this.suffix=n.suffix?a(n.suffix):n.suffixEscaped||\"}}\",this.unescapePrefix=n.unescapeSuffix?\"\":n.unescapePrefix||\"-\",this.unescapeSuffix=this.unescapePrefix?\"\":n.unescapeSuffix||\"\",this.nestingPrefix=n.nestingPrefix?a(n.nestingPrefix):n.nestingPrefixEscaped||a(\"$t(\"),this.nestingSuffix=n.nestingSuffix?a(n.nestingSuffix):n.nestingSuffixEscaped||a(\")\");var o=this.prefix+\"(.+?)\"+this.suffix;this.regexp=new RegExp(o,\"g\");var r=this.prefix+this.unescapePrefix+\"(.+?)\"+this.unescapeSuffix+this.suffix;this.regexpUnescape=new RegExp(r,\"g\");var i=this.nestingPrefix+\"(.+?)\"+this.nestingSuffix;this.nestingRegexp=new RegExp(i,\"g\")},t.prototype.reset=function(){this.options&&this.init(this.options)},t.prototype.interpolate=function(t,n){function o(e){return e.replace(/\\$/g,\"$$$$\")}for(var r=void 0,s=void 0;r=this.regexpUnescape.exec(t);){var a=i(n,r[1].trim());t=t.replace(r[0],a)}for(;r=this.regexp.exec(t);)s=i(n,r[1].trim()),\"string\"!=typeof s&&(s=e(s)),s||(this.logger.warn(\"missed to pass in variable \"+r[1]+\" for interpolating \"+t),s=\"\"),s=o(this.escapeValue?l(s):s),t=t.replace(r[0],s),this.regexp.lastIndex=0;return t},t.prototype.nest=function(t,n){function o(e){return e.replace(/\\$/g,\"$$$$\")}function r(e){if(e.indexOf(\",\")<0)return e;var t=e.split(\",\");e=t.shift();var n=t.join(\",\");n=this.interpolate(n,u);try{u=JSON.parse(n)}catch(o){this.logger.error(\"failed parsing options string in nesting for key \"+e,o)}return e}var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],s=void 0,a=void 0,u=JSON.parse(JSON.stringify(i));for(u.applyPostProcessor=!1;s=this.nestingRegexp.exec(t);)a=n(r.call(this,s[1].trim()),u),\"string\"!=typeof a&&(a=e(a)),a||(this.logger.warn(\"missed to pass in variable \"+s[1]+\" for interpolating \"+t),a=\"\"),a=o(this.escapeValue?l(a):a),t=t.replace(s[0],a),this.regexp.lastIndex=0;return t},t}(),T=function(e){function t(n,o,r){var i=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];m.classCallCheck(this,t);var s=m.possibleConstructorReturn(this,e.call(this));return s.backend=n,s.store=o,s.services=r,s.options=i,s.logger=S.create(\"backendConnector\"),s.state={},s.queue=[],s.backend&&s.backend.init&&s.backend.init(r,i.backend,i),s}return m.inherits(t,e),t.prototype.queueLoad=function(e,t,n){var o=this,r=[],i=[],s=[],a=[];return e.forEach(function(e){var n=!0;t.forEach(function(t){var s=e+\"|\"+t;o.store.hasResourceBundle(e,t)?o.state[s]=2:o.state[s]<0||(1===o.state[s]?i.indexOf(s)<0&&i.push(s):(o.state[s]=1,n=!1,i.indexOf(s)<0&&i.push(s),r.indexOf(s)<0&&r.push(s),a.indexOf(t)<0&&a.push(t)))}),n||s.push(e)}),(r.length||i.length)&&this.queue.push({pending:i,loaded:{},errors:[],callback:n}),{toLoad:r,pending:i,toLoadLanguages:s,toLoadNamespaces:a}},t.prototype.loaded=function(e,t,n){var o=this,i=e.split(\"|\"),s=m.slicedToArray(i,2),a=s[0],l=s[1];t&&this.emit(\"failedLoading\",a,l,t),n&&this.store.addResourceBundle(a,l,n),this.state[e]=t?-1:2,this.queue.forEach(function(n){r(n.loaded,[a],l),v(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(n.errors.length?n.callback(n.errors):n.callback(),o.emit(\"loaded\",n.loaded),n.done=!0)}),this.queue=this.queue.filter(function(e){return!e.done})},t.prototype.read=function(e,t,n,o,r,i){var s=this;return o||(o=0),r||(r=250),e.length?void this.backend[n](e,t,function(a,l){return a&&l&&5>o?void setTimeout(function(){s.read.call(s,e,t,n,++o,2*r,i)},r):void i(a,l)}):i(null,{})},t.prototype.load=function(e,t,n){var o=this;if(!this.backend)return this.logger.warn(\"No backend was added via i18next.use. Will not load resources.\"),n&&n();var r=m[\"extends\"]({},this.backend.options,this.options.backend);\"string\"==typeof e&&(e=this.services.languageUtils.toResolveHierarchy(e)),\"string\"==typeof t&&(t=[t]);var s=this.queueLoad(e,t,n);return s.toLoad.length?void(r.allowMultiLoading&&this.backend.readMulti?this.read(s.toLoadLanguages,s.toLoadNamespaces,\"readMulti\",null,null,function(e,t){e&&o.logger.warn(\"loading namespaces \"+s.toLoadNamespaces.join(\", \")+\" for languages \"+s.toLoadLanguages.join(\", \")+\" via multiloading failed\",e),!e&&t&&o.logger.log(\"loaded namespaces \"+s.toLoadNamespaces.join(\", \")+\" for languages \"+s.toLoadLanguages.join(\", \")+\" via multiloading\",t),s.toLoad.forEach(function(n){var r=n.split(\"|\"),s=m.slicedToArray(r,2),a=s[0],l=s[1],u=i(t,[a,l]);if(u)o.loaded(n,e,u);else{var c=\"loading namespace \"+l+\" for language \"+a+\" via multiloading failed\";o.loaded(n,c),o.logger.error(c)}})}):!function(){var e=function(e){var t=this,n=e.split(\"|\"),o=m.slicedToArray(n,2),r=o[0],i=o[1];this.read(r,i,\"read\",null,null,function(n,o){n&&t.logger.warn(\"loading namespace \"+i+\" for language \"+r+\" failed\",n),!n&&o&&t.logger.log(\"loaded namespace \"+i+\" for language \"+r,o),t.loaded(e,n,o)})};s.toLoad.forEach(function(t){e.call(o,t)})}()):void(s.pending.length||n())},t.prototype.saveMissing=function(e,t,n,o){this.backend&&this.backend.create&&this.backend.create(e,t,n,o),this.store.addResource(e[0],t,n,o)},t}(w),A=function(e){function t(n,o,r){var i=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];m.classCallCheck(this,t);var s=m.possibleConstructorReturn(this,e.call(this));return s.cache=n,s.store=o,s.services=r,s.options=i,s.logger=S.create(\"cacheConnector\"),s.cache&&s.cache.init&&s.cache.init(r,i.cache,i),s}return m.inherits(t,e),t.prototype.load=function(e,t,n){var o=this;if(!this.cache)return n&&n();var r=m[\"extends\"]({},this.cache.options,this.options.cache);\"string\"==typeof e&&(e=this.services.languageUtils.toResolveHierarchy(e)),\"string\"==typeof t&&(t=[t]),r.enabled?this.cache.load(e,function(t,r){if(t&&o.logger.error(\"loading languages \"+e.join(\", \")+\" from cache failed\",t),r)for(var i in r)for(var s in r[i])if(\"i18nStamp\"!==s){var a=r[i][s];a&&o.store.addResourceBundle(i,s,a)}n&&n()}):n&&n()},t.prototype.save=function(){this.cache&&this.options.cache&&this.options.cache.enabled&&this.cache.save(this.store.data)},t}(w),M=function(e){function t(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],o=arguments[1];m.classCallCheck(this,t);var r=m.possibleConstructorReturn(this,e.call(this));return r.options=b(n),r.services={},r.logger=S,r.modules={},o&&!r.isInitialized&&r.init(n,o),r}return m.inherits(t,e),t.prototype.init=function(e,t){function n(e){return e?\"function\"==typeof e?new e:e:void 0}var o=this;if(\"function\"==typeof e&&(t=e,e={}),e||(e={}),\"v1\"===e.compatibilityAPI?this.options=m[\"extends\"]({},y(),b(c(e)),{}):\"v1\"===e.compatibilityJSON?this.options=m[\"extends\"]({},y(),b(p(e)),{}):this.options=m[\"extends\"]({},y(),this.options,b(e)),t||(t=function(){}),!this.options.isClone){this.modules.logger?S.init(n(this.modules.logger),this.options):S.init(null,this.options);var r=new j(this.options);this.store=new L(this.options.resources,this.options);var i=this.services;i.logger=S,i.resourceStore=this.store,i.resourceStore.on(\"added removed\",function(e,t){i.cacheConnector.save()}),i.languageUtils=r,i.pluralResolver=new E(r,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON}),i.interpolator=new _(this.options),i.backendConnector=new T(n(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on(\"*\",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];o.emit.apply(o,[e].concat(n))}),i.backendConnector.on(\"loaded\",function(e){i.cacheConnector.save()}),i.cacheConnector=new A(n(this.modules.cache),i.resourceStore,i,this.options),i.cacheConnector.on(\"*\",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];o.emit.apply(o,[e].concat(n))}),this.modules.languageDetector&&(i.languageDetector=n(this.modules.languageDetector),i.languageDetector.init(i,this.options.detection,this.options)),this.translator=new O(this.services,this.options),this.translator.on(\"*\",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];o.emit.apply(o,[e].concat(n))})}var s=[\"getResource\",\"addResource\",\"addResources\",\"addResourceBundle\",\"removeResourceBundle\",\"hasResourceBundle\",\"getResourceBundle\"];s.forEach(function(e){o[e]=function(){return this.store[e].apply(this.store,arguments)}}),\"v1\"===this.options.compatibilityAPI&&h(this);var a=function(){o.changeLanguage(o.options.lng,function(e,n){o.emit(\"initialized\",o.options),o.logger.log(\"initialized\",o.options),t(e,n)})};return this.options.resources?a():setTimeout(a,10),this},t.prototype.loadResources=function(e){var t=this;if(e||(e=function(){}),this.options.resources)e(null);else{var n=function(){if(t.language&&\"cimode\"===t.language.toLowerCase())return{v:e()};var n=[],o=function(e){var o=t.services.languageUtils.toResolveHierarchy(e);o.forEach(function(e){n.indexOf(e)<0&&n.push(e)})};o(t.language),t.options.preload&&t.options.preload.forEach(function(e){o(e)}),t.services.cacheConnector.load(n,t.options.ns,function(){t.services.backendConnector.load(n,t.options.ns,e)})}();if(\"object\"===(\"undefined\"==typeof n?\"undefined\":m[\"typeof\"](n)))return n.v}},t.prototype.use=function(e){return\"backend\"===e.type&&(this.modules.backend=e),\"cache\"===e.type&&(this.modules.cache=e),(\"logger\"===e.type||e.log&&e.warn&&e.warn)&&(this.modules.logger=e),\"languageDetector\"===e.type&&(this.modules.languageDetector=e),\"postProcessor\"===e.type&&N.addPostProcessor(e),this},t.prototype.changeLanguage=function(e,t){var n=this,o=function(o){e&&(n.emit(\"languageChanged\",e),n.logger.log(\"languageChanged\",e)),t&&t(o,function(){for(var e=arguments.length,t=Array(e),o=0;e>o;o++)t[o]=arguments[o];return n.t.apply(n,t)})};!e&&this.services.languageDetector&&(e=this.services.languageDetector.detect()),e&&(this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.translator.changeLanguage(e),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage(e)),this.loadResources(function(e){o(e)})},t.prototype.getFixedT=function(e,t){var n=this,o=function r(e,t){return t=t||{},t.lng=t.lng||r.lng,t.ns=t.ns||r.ns,n.t(e,t)};return o.lng=e,o.ns=t,o},t.prototype.t=function(){return this.translator&&this.translator.translate.apply(this.translator,arguments)},t.prototype.exists=function(){return this.translator&&this.translator.exists.apply(this.translator,arguments)},t.prototype.setDefaultNamespace=function(e){this.options.defaultNS=e},t.prototype.loadNamespaces=function(e,t){var n=this;return this.options.ns?(\"string\"==typeof e&&(e=[e]),e.forEach(function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)}),void this.loadResources(t)):t&&t()},t.prototype.loadLanguages=function(e,t){\"string\"==typeof e&&(e=[e]);var n=this.options.preload||[],o=e.filter(function(e){return n.indexOf(e)<0});return o.length?(this.options.preload=n.concat(o),\r\nvoid this.loadResources(t)):t()},t.prototype.dir=function(e){e||(e=this.language);var t=[\"ar\",\"shu\",\"sqr\",\"ssh\",\"xaa\",\"yhd\",\"yud\",\"aao\",\"abh\",\"abv\",\"acm\",\"acq\",\"acw\",\"acx\",\"acy\",\"adf\",\"ads\",\"aeb\",\"aec\",\"afb\",\"ajp\",\"apc\",\"apd\",\"arb\",\"arq\",\"ars\",\"ary\",\"arz\",\"auz\",\"avl\",\"ayh\",\"ayl\",\"ayn\",\"ayp\",\"bbz\",\"pga\",\"he\",\"iw\",\"ps\",\"pbt\",\"pbu\",\"pst\",\"prp\",\"prd\",\"ur\",\"ydd\",\"yds\",\"yih\",\"ji\",\"yi\",\"hbo\",\"men\",\"xmn\",\"fa\",\"jpr\",\"peo\",\"pes\",\"prs\",\"dv\",\"sam\"];return t.indexOf(this.services.languageUtils.getLanguagePartFromCode(e))?\"ltr\":\"rtl\"},t.prototype.createInstance=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments[1];return new t(e,n)},t.prototype.cloneInstance=function(){var e=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],o=arguments[1],r=new t(m[\"extends\"]({},n,this.options,{isClone:!0}),o),i=[\"store\",\"translator\",\"services\",\"language\"];return i.forEach(function(t){r[t]=e[t]}),r},t}(w),H=new M;return H});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/translate/libs/i18next.min.js\n// module id = 98\n// module chunks = 0 1","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"i18nextXHRBackend\",t):e.i18nextXHRBackend=t()}(this,function(){\"use strict\";function e(e){return a.call(r.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e}function t(e,t,n,i,a){if(i&&\"object\"===(\"undefined\"==typeof i?\"undefined\":o[\"typeof\"](i))){var r=\"\",s=encodeURIComponent;for(var l in i)r+=\"&\"+s(l)+\"=\"+s(i[l]);i=r.slice(1)+(a?\"\":\"&_t=\"+new Date)}try{var c=new(XMLHttpRequest||ActiveXObject)(\"MSXML2.XMLHTTP.3.0\");c.open(i?\"POST\":\"GET\",e,1),t.crossDomain||c.setRequestHeader(\"X-Requested-With\",\"XMLHttpRequest\"),c.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\"),c.onreadystatechange=function(){c.readyState>3&&n&&n(c.responseText,c)},c.send(i)}catch(s){window.console&&console.log(s)}}function n(){return{loadPath:\"/locales/{{lng}}/{{ns}}.json\",addPath:\"locales/add/{{lng}}/{{ns}}\",allowMultiLoading:!1,parse:JSON.parse,crossDomain:!1,ajax:t}}var o={};o[\"typeof\"]=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol?\"symbol\":typeof e},o.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")},o.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var i=[],a=i.forEach,r=i.slice,s=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];o.classCallCheck(this,t),this.init(e,n),this.type=\"backend\"}return o.createClass(t,[{key:\"init\",value:function(t){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.services=t,this.options=e(o,this.options||{},n())}},{key:\"readMulti\",value:function(e,t,n){var o=this.services.interpolator.interpolate(this.options.loadPath,{lng:e.join(\"+\"),ns:t.join(\"+\")});this.loadUrl(o,n)}},{key:\"read\",value:function(e,t,n){var o=this.services.interpolator.interpolate(this.options.loadPath,{lng:e,ns:t});this.loadUrl(o,n)}},{key:\"loadUrl\",value:function(e,t){var n=this;this.options.ajax(e,this.options,function(o,i){var a=i.status.toString();if(0===a.indexOf(\"5\"))return t(\"failed loading \"+e,!0);if(0===a.indexOf(\"4\"))return t(\"failed loading \"+e,!1);var r=void 0,s=void 0;try{r=n.options.parse(o)}catch(l){s=\"failed parsing \"+e+\" to json\"}return s?t(s,!1):void t(null,r)})}},{key:\"create\",value:function(e,t,n,o){var i=this;\"string\"==typeof e&&(e=[e]);var a={};a[n]=o||\"\",e.forEach(function(e){var n=i.services.interpolator.interpolate(i.options.addPath,{lng:e,ns:t});i.options.ajax(n,i.options,function(e,t){},a)})}}]),t}();return s.type=\"backend\",s});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/translate/libs/i18nextXHRBackend.min.js\n// module id = 99\n// module chunks = 0 1","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(\"jqueryI18next\",e):t.jqueryI18next=e()}(this,function(){\"use strict\";function t(t,a){function r(n,a,r){function i(t,n){return s.parseDefaultValueFromContent?e[\"extends\"]({},t,{defaultValue:n}):t}if(0!==a.length){var o=\"text\";if(0===a.indexOf(\"[\")){var f=a.split(\"]\");a=f[1],o=f[0].substr(1,f[0].length-1)}if(a.indexOf(\";\")===a.length-1&&(a=a.substr(0,a.length-2)),\"html\"===o)n.html(t.t(a,i(r,n.html())));else if(\"text\"===o)n.text(t.t(a,i(r,n.text())));else if(\"prepend\"===o)n.prepend(t.t(a,i(r,n.html())));else if(\"append\"===o)n.append(t.t(a,i(r,n.html())));else if(0===o.indexOf(\"data-\")){var l=o.substr(\"data-\".length),d=t.t(a,i(r,n.data(l)));n.data(l,d),n.attr(o,d)}else n.attr(o,t.t(a,i(r,n.attr(o))))}}function i(t,n){var i=t.attr(s.selectorAttr);if(i||\"undefined\"==typeof i||i===!1||(i=t.text()||t.val()),i){var o=t,f=t.data(s.targetAttr);if(f&&(o=t.find(f)||t),n||s.useOptionsAttr!==!0||(n=t.data(s.optionsAttr)),n=n||{},i.indexOf(\";\")>=0){var l=i.split(\";\");a.each(l,function(t,e){\"\"!==e&&r(o,e,n)})}else r(o,i,n);if(s.useOptionsAttr===!0){var d={};d=e[\"extends\"]({clone:d},n),delete d.lng,t.data(s.optionsAttr,d)}}}function o(t){return this.each(function(){i(a(this),t);var e=a(this).find(\"[\"+s.selectorAttr+\"]\");e.each(function(){i(a(this),t)})})}var s=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];s=e[\"extends\"]({},n,s),a[s.tName]=t.t.bind(t),a[s.i18nName]=t,a.fn[s.handleName]=o}var e={};e[\"extends\"]=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};var n={tName:\"t\",i18nName:\"i18n\",handleName:\"localize\",selectorAttr:\"data-i18n\",targetAttr:\"i18n-target\",optionsAttr:\"i18n-options\",useOptionsAttr:!1,parseDefaultValueFromContent:!0},a={init:t};return a});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/translate/libs/jquery-i18next.min.js\n// module id = 100\n// module chunks = 0 1","import { getTag } from '../manage/api';\r\nimport { buildToolbars} from '../toolbar/build-toolbars';\r\nimport { getSxcInstance } from './sxc';\r\nimport { Log } from '../logging/log';\r\nimport { LogUtils } from '../logging/log-utils';\r\nimport { quickDialog } from '../quick-dialog/quick-dialog';\r\nimport QuickEditState = require('../quick-dialog/state');\r\nimport { windowInPage as window } from '../interfaces/window-in-page';\r\nimport { DebugConfig } from '../DebugConfig';\r\nimport { CleanupTagToolbars } from '../toolbar/tag-toolbar'\r\n\r\n/**\r\n * module & toolbar bootstrapping (initialize all toolbars after loading page)\r\n * this will run onReady...\r\n */\r\nconst initializedInstances: JQuery<HTMLElement>[] = [];\r\nlet openedTemplatePickerOnce = false;\r\nconst diagCancelStateOnStart = QuickEditState.cancelled.get();\r\n\r\n\r\n$(document).ready(() => {\r\n  // reset cancelled state after one reload\r\n  if (diagCancelStateOnStart)\r\n    QuickEditState.cancelled.remove();\r\n\r\n  // initialize all modules\r\n  initAllInstances(true);\r\n\r\n  // start observing the body for configured mutations\r\n  watchDomChanges();\r\n});\r\n\r\n/**\r\n * Scan all instances and initialize them\r\n * @param isFirstRun should be true only on the very initial call\r\n */\r\nfunction initAllInstances(isFirstRun: boolean): void {\r\n  (window.$2sxc as any).stats.watchDomChanges++;\r\n  $('div[data-edit-context]').each(function() { initInstance(this, isFirstRun)});\r\n  if (isFirstRun)\r\n    tryShowTemplatePicker();\r\n}\r\n\r\n/**\r\n * create an observer instance and start observing\r\n */\r\nfunction watchDomChanges() {\r\n  const observer = new MutationObserver(() => initAllInstances(false));\r\n  observer.observe(document.body, { attributes: false, childList: true, subtree: true });\r\n}\r\n\r\n/**\r\n * Show the template picker if\r\n * - template picker has not yet been opened\r\n * - dialog has not been cancelled\r\n * - only one uninitialized module on page\r\n * @returns\r\n */\r\nfunction tryShowTemplatePicker(): boolean {\r\n  let sxc: SxcInstanceWithInternals = undefined;\r\n  // first check if we should show one according to the state-settings\r\n  const openDialogId = QuickEditState.cbId.get();\r\n  if (openDialogId) {\r\n    // must check if it's on this page, as it could be from another page\r\n    const found = $(`[data-cb-id=\"${openDialogId}\"]`);\r\n    if(found.length)\r\n      sxc = window.$2sxc(openDialogId) as SxcInstanceWithInternals;\r\n  }\r\n\r\n  if (!sxc) {\r\n    const uninitializedModules: any = $('.sc-uninitialized');\r\n\r\n    if (diagCancelStateOnStart || openedTemplatePickerOnce) return false;\r\n\r\n    // already showing a dialog\r\n    if (quickDialog.isVisible()) return false;\r\n\r\n    // not exactly one uninitialized module\r\n    if (uninitializedModules.length !== 1) return false;\r\n\r\n    // show the template picker of this module\r\n    const module = uninitializedModules.parent('div[data-edit-context]')[0];\r\n    sxc = getSxcInstance(module);\r\n  }\r\n\r\n  if (sxc) {\r\n    sxc.manage.run('layout');\r\n    openedTemplatePickerOnce = true;\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction initInstance(module: JQuery<HTMLElement>, isFirstRun: boolean): void {\r\n  // check if module is already in the list of initialized modules\r\n  if (initializedInstances.find((m) => m === module)) return;\r\n\r\n  // add to modules-list first, in case we run into recursions\r\n  initializedInstances.push(module);\r\n\r\n  let sxc = getSxcInstance(module);\r\n  \r\n  // check if the sxc must be re-created. This is necessary when modules are dynamically changed\r\n  // because the configuration may change, and that is cached otherwise, resulting in toolbars with wrong config\r\n  if (!isFirstRun)\r\n    sxc = sxc.recreate(true);\r\n\r\n  // check if we must show the glasses\r\n  // this must always run because it can be added ajax-style\r\n  const wasEmpty = showGlassesButtonIfUninitialized(sxc);\r\n\r\n  // Remove orphan tag-toolbars\r\n  if (!isFirstRun)\r\n    CleanupTagToolbars();\r\n\r\n  if (isFirstRun || !wasEmpty) {\r\n    // use a logger for each iteration\r\n    const log = new Log('Bts.Module');\r\n\r\n    buildToolbars(log, module);\r\n    if(DebugConfig.bootstrap.initInstance)\r\n      LogUtils.logDump(log);\r\n  };\r\n}\r\n\r\nfunction showGlassesButtonIfUninitialized(sxci: SxcInstanceWithInternals): boolean {\r\n  // already initialized\r\n  if (isInitialized(sxci)) return false;\r\n\r\n  // already has a glasses button\r\n  const tag: any = $(getTag(sxci));\r\n  if (tag.find('.sc-uninitialized').length !== 0) return false;\r\n\r\n  // note: title is added on mouseover, as the translation isn't ready at page-load\r\n  const btn = $('<div class=\"sc-uninitialized\" onmouseover=\"this.title = $2sxc.translate(this.title)\" title=\"InPage.NewElement\">'\r\n    + '<div class=\"icon-sxc-glasses\"></div>'\r\n    + '</div>');\r\n\r\n  btn.on('click', () => sxci.manage.run('layout'));\r\n\r\n  tag.append(btn);\r\n  return true;\r\n}\r\n\r\nfunction isInitialized(sxci: SxcInstanceWithInternals): boolean {\r\n  const cg = sxci && sxci.manage && sxci.manage._editContext && sxci.manage._editContext.ContentGroup;\r\n  return (cg && cg.TemplateId !== 0);\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/x-bootstrap/module-bootstrapper.ts","import { $2sxcInPage as $2sxc } from '../interfaces/sxc-controller-in-page';\r\nimport { Log } from './log';\r\n\r\n/**\r\n * logDump - to write whole log to console if is enabled\r\n */\r\nexport class LogUtils {\r\n  /**\r\n   * Dump log to console, when debug logging is enabled by url query string parameters\r\n   * @param log\r\n   */\r\n  static logDump(log: Log): void {\r\n    // 'jslog' is additional query string url parameter, to enable log dump (debug=true is required)\r\n    // in the future would support more variations like jslog = toolbar etc.\r\n    const jsLogUrlParam = $2sxc.urlParams.get('jslog');\r\n    //if ($2sxc.debug.load) {\r\n    //  console.log(log.dump());\r\n    //}\r\n    if (jsLogUrlParam) {\r\n      console.log(log.dump());\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/logging/log-utils.ts","import { ButtonConfig } from '../toolbar/button/button-config';\r\n\r\nexport class CommandDefinition {\r\n  name: string;\r\n  buttonConfig: Partial<ButtonConfig>;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command-definition.ts","import { translate } from '../translate/2sxc.translate';\r\nimport { ContextOfButton } from '../context/context-of-button';\r\nimport { WebApiParams } from '../contentBlock/web-api-params';\r\n\r\n/**\r\n * this enhances the $2sxc client controller with stuff only needed when logged in\r\n */\r\n\r\n// #region contentItem Commands\r\nexport let contentItems = {\r\n  // delete command - try to really delete a content-item\r\n  delete: (context: ContextOfButton, itemId: number, itemGuid: string, itemTitle: string): Promise<any> => {\r\n    // first show main warning / get ok\r\n    const ok = confirm(translate('Delete.Confirm')\r\n      .replace('{id}', String(itemId))\r\n      .replace('{title}', itemTitle));\r\n\r\n    if (!ok) {\r\n      return Promise.resolve();\r\n    }\r\n\r\n    /**\r\n     * ZoneId and AppId are sent becase of rare, special case that is not default\r\n     * (default is that 2sxc is finding ZoneId and AppId on server side from ModuleId)\r\n     * when we need to delete entity from other app or zone, than current one.\r\n     * TODO: send this params, only when is necesary (value change detection for ZoneId, AppId)\r\n     */\r\n    const params: WebApiParams = {\r\n      zoneId: context.app.zoneId,\r\n      appId: context.app.id\r\n    };\r\n\r\n    return new Promise((resolve: any, reject: any) => {\r\n      context.sxc.webApi.delete(`app-content/any/${itemGuid}`, params, null, true)\r\n        .done((data: any, textStatus: string, jqXHR: any) => {\r\n          if (jqXHR.status === 204 || jqXHR.status === 200) {\r\n            // resolve the promise with the response text\r\n            resolve(data);\r\n          } else {\r\n            // check if it's a permission config problem\r\n            const msgJs = translate('Delete.ErrCheckConsole');\r\n            if (jqXHR.status === 401) alert(translate('Delete.ErrPermission') + msgJs);\r\n            if (jqXHR.status === 400) alert(translate('Delete.ErrInUse') + msgJs);\r\n            // otherwise reject with the status text\r\n            // which will hopefully be a meaningful error\r\n            reject(Error(textStatus));\r\n          }\r\n        }).fail((jqXHR: any, textStatus: string, errorThrown: string) => {\r\n          reject(Error(errorThrown));\r\n        });\r\n    }).then((result: any) => {\r\n      location.reload();\r\n    }).catch((error: any) => {\r\n      console.log(error);\r\n    });\r\n  },\r\n};\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/entity-manipulation/item-commands.ts","import { Cb } from './cb';\r\nimport { Mod } from './mod';\r\n\r\nexport class CmdsStrategyFactory {\r\n  cmds: Dictionary;\r\n\r\n  constructor() {\r\n    this.cmds = {};\r\n    this.cmds.cb = new Cb();\r\n    this.cmds.mod = new Mod();\r\n  }\r\n\r\n  getCmds(cliptype: string): Delete {\r\n    return this.cmds[cliptype];\r\n  }\r\n\r\n  delete(clip: any): Delete {\r\n    return this.cmds[clip.type].delete(clip);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-edit/cmds-strategy-factory.ts","import './polyfills/include-polyfills';\r\n\r\nimport { $2sxcInPage as $2sxc } from './interfaces/sxc-controller-in-page';\r\nimport { windowInPage as window } from './interfaces/window-in-page';\r\nimport { Commands } from './commands/commands';\r\nimport { Cms } from './cms/Cms';\r\nimport { context } from './context/context';\r\nimport { _manage } from './manage/manage';\r\nimport { $quickE } from './quick-edit/quick-e';\r\nimport { start } from './quick-edit/start';\r\nimport { _translateInit } from './translate/2sxc._translateInit';\r\nimport { translate } from './translate/2sxc.translate';\r\nimport './x-bootstrap/module-bootstrapper';\r\n\r\n\r\n$2sxc.context = context; // primary API to get the context\r\n$2sxc._translateInit = _translateInit; // reference in ./2sxc-api/js/ToSic.Sxc.Instance.ts\r\n$2sxc.translate = translate; // provide an official translate API for 2sxc\r\n$2sxc._commands = Commands.getInstance();\r\n$2sxc._manage = _manage; // used out of this project in ToSic.Sxc.Instance and 2sxc.api.js\r\n\r\nwindow.$quickE = $quickE;\r\n$(start); // run on-load\r\n\r\n$2sxc.cms = new Cms();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/inpage.{}.ts","/*!\r\n * @overview es6-promise - a tiny implementation of Promises/A+.\r\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\r\n * @license   Licensed under MIT license\r\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\r\n * @version   v4.2.4+314e4831\r\n */\r\n\r\n(function (global, factory) {\r\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\r\n\ttypeof define === 'function' && define.amd ? define(factory) :\r\n\t(global.ES6Promise = factory());\r\n}(this, (function () { 'use strict';\r\n\r\nfunction objectOrFunction(x) {\r\n  var type = typeof x;\r\n  return x !== null && (type === 'object' || type === 'function');\r\n}\r\n\r\nfunction isFunction(x) {\r\n  return typeof x === 'function';\r\n}\r\n\r\n\r\n\r\nvar _isArray = void 0;\r\nif (Array.isArray) {\r\n  _isArray = Array.isArray;\r\n} else {\r\n  _isArray = function (x) {\r\n    return Object.prototype.toString.call(x) === '[object Array]';\r\n  };\r\n}\r\n\r\nvar isArray = _isArray;\r\n\r\nvar len = 0;\r\nvar vertxNext = void 0;\r\nvar customSchedulerFn = void 0;\r\n\r\nvar asap = function asap(callback, arg) {\r\n  queue[len] = callback;\r\n  queue[len + 1] = arg;\r\n  len += 2;\r\n  if (len === 2) {\r\n    // If len is 2, that means that we need to schedule an async flush.\r\n    // If additional callbacks are queued before the queue is flushed, they\r\n    // will be processed by this flush that we are scheduling.\r\n    if (customSchedulerFn) {\r\n      customSchedulerFn(flush);\r\n    } else {\r\n      scheduleFlush();\r\n    }\r\n  }\r\n};\r\n\r\nfunction setScheduler(scheduleFn) {\r\n  customSchedulerFn = scheduleFn;\r\n}\r\n\r\nfunction setAsap(asapFn) {\r\n  asap = asapFn;\r\n}\r\n\r\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\r\nvar browserGlobal = browserWindow || {};\r\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\r\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\r\n\r\n// test for web worker but not in IE10\r\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\r\n\r\n// node\r\nfunction useNextTick() {\r\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\r\n  // see https://github.com/cujojs/when/issues/410 for details\r\n  return function () {\r\n    return process.nextTick(flush);\r\n  };\r\n}\r\n\r\n// vertx\r\nfunction useVertxTimer() {\r\n  if (typeof vertxNext !== 'undefined') {\r\n    return function () {\r\n      vertxNext(flush);\r\n    };\r\n  }\r\n\r\n  return useSetTimeout();\r\n}\r\n\r\nfunction useMutationObserver() {\r\n  var iterations = 0;\r\n  var observer = new BrowserMutationObserver(flush);\r\n  var node = document.createTextNode('');\r\n  observer.observe(node, { characterData: true });\r\n\r\n  return function () {\r\n    node.data = iterations = ++iterations % 2;\r\n  };\r\n}\r\n\r\n// web worker\r\nfunction useMessageChannel() {\r\n  var channel = new MessageChannel();\r\n  channel.port1.onmessage = flush;\r\n  return function () {\r\n    return channel.port2.postMessage(0);\r\n  };\r\n}\r\n\r\nfunction useSetTimeout() {\r\n  // Store setTimeout reference so es6-promise will be unaffected by\r\n  // other code modifying setTimeout (like sinon.useFakeTimers())\r\n  var globalSetTimeout = setTimeout;\r\n  return function () {\r\n    return globalSetTimeout(flush, 1);\r\n  };\r\n}\r\n\r\nvar queue = new Array(1000);\r\nfunction flush() {\r\n  for (var i = 0; i < len; i += 2) {\r\n    var callback = queue[i];\r\n    var arg = queue[i + 1];\r\n\r\n    callback(arg);\r\n\r\n    queue[i] = undefined;\r\n    queue[i + 1] = undefined;\r\n  }\r\n\r\n  len = 0;\r\n}\r\n\r\nfunction attemptVertx() {\r\n  try {\r\n    var vertx = Function('return this')().require('vertx');\r\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\r\n    return useVertxTimer();\r\n  } catch (e) {\r\n    return useSetTimeout();\r\n  }\r\n}\r\n\r\nvar scheduleFlush = void 0;\r\n// Decide what async method to use to triggering processing of queued callbacks:\r\nif (isNode) {\r\n  scheduleFlush = useNextTick();\r\n} else if (BrowserMutationObserver) {\r\n  scheduleFlush = useMutationObserver();\r\n} else if (isWorker) {\r\n  scheduleFlush = useMessageChannel();\r\n} else if (browserWindow === undefined && typeof require === 'function') {\r\n  scheduleFlush = attemptVertx();\r\n} else {\r\n  scheduleFlush = useSetTimeout();\r\n}\r\n\r\nfunction then(onFulfillment, onRejection) {\r\n  var parent = this;\r\n\r\n  var child = new this.constructor(noop);\r\n\r\n  if (child[PROMISE_ID] === undefined) {\r\n    makePromise(child);\r\n  }\r\n\r\n  var _state = parent._state;\r\n\r\n\r\n  if (_state) {\r\n    var callback = arguments[_state - 1];\r\n    asap(function () {\r\n      return invokeCallback(_state, child, callback, parent._result);\r\n    });\r\n  } else {\r\n    subscribe(parent, child, onFulfillment, onRejection);\r\n  }\r\n\r\n  return child;\r\n}\r\n\r\n/**\r\n  `Promise.resolve` returns a promise that will become resolved with the\r\n  passed `value`. It is shorthand for the following:\r\n\r\n  ```javascript\r\n  let promise = new Promise(function(resolve, reject){\r\n    resolve(1);\r\n  });\r\n\r\n  promise.then(function(value){\r\n    // value === 1\r\n  });\r\n  ```\r\n\r\n  Instead of writing the above, your code now simply becomes the following:\r\n\r\n  ```javascript\r\n  let promise = Promise.resolve(1);\r\n\r\n  promise.then(function(value){\r\n    // value === 1\r\n  });\r\n  ```\r\n\r\n  @method resolve\r\n  @static\r\n  @param {Any} value value that the returned promise will be resolved with\r\n  Useful for tooling.\r\n  @return {Promise} a promise that will become fulfilled with the given\r\n  `value`\r\n*/\r\nfunction resolve$1(object) {\r\n  /*jshint validthis:true */\r\n  var Constructor = this;\r\n\r\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\r\n    return object;\r\n  }\r\n\r\n  var promise = new Constructor(noop);\r\n  resolve(promise, object);\r\n  return promise;\r\n}\r\n\r\nvar PROMISE_ID = Math.random().toString(36).substring(2);\r\n\r\nfunction noop() {}\r\n\r\nvar PENDING = void 0;\r\nvar FULFILLED = 1;\r\nvar REJECTED = 2;\r\n\r\nvar TRY_CATCH_ERROR = { error: null };\r\n\r\nfunction selfFulfillment() {\r\n  return new TypeError(\"You cannot resolve a promise with itself\");\r\n}\r\n\r\nfunction cannotReturnOwn() {\r\n  return new TypeError('A promises callback cannot return that same promise.');\r\n}\r\n\r\nfunction getThen(promise) {\r\n  try {\r\n    return promise.then;\r\n  } catch (error) {\r\n    TRY_CATCH_ERROR.error = error;\r\n    return TRY_CATCH_ERROR;\r\n  }\r\n}\r\n\r\nfunction tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {\r\n  try {\r\n    then$$1.call(value, fulfillmentHandler, rejectionHandler);\r\n  } catch (e) {\r\n    return e;\r\n  }\r\n}\r\n\r\nfunction handleForeignThenable(promise, thenable, then$$1) {\r\n  asap(function (promise) {\r\n    var sealed = false;\r\n    var error = tryThen(then$$1, thenable, function (value) {\r\n      if (sealed) {\r\n        return;\r\n      }\r\n      sealed = true;\r\n      if (thenable !== value) {\r\n        resolve(promise, value);\r\n      } else {\r\n        fulfill(promise, value);\r\n      }\r\n    }, function (reason) {\r\n      if (sealed) {\r\n        return;\r\n      }\r\n      sealed = true;\r\n\r\n      reject(promise, reason);\r\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\r\n\r\n    if (!sealed && error) {\r\n      sealed = true;\r\n      reject(promise, error);\r\n    }\r\n  }, promise);\r\n}\r\n\r\nfunction handleOwnThenable(promise, thenable) {\r\n  if (thenable._state === FULFILLED) {\r\n    fulfill(promise, thenable._result);\r\n  } else if (thenable._state === REJECTED) {\r\n    reject(promise, thenable._result);\r\n  } else {\r\n    subscribe(thenable, undefined, function (value) {\r\n      return resolve(promise, value);\r\n    }, function (reason) {\r\n      return reject(promise, reason);\r\n    });\r\n  }\r\n}\r\n\r\nfunction handleMaybeThenable(promise, maybeThenable, then$$1) {\r\n  if (maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1) {\r\n    handleOwnThenable(promise, maybeThenable);\r\n  } else {\r\n    if (then$$1 === TRY_CATCH_ERROR) {\r\n      reject(promise, TRY_CATCH_ERROR.error);\r\n      TRY_CATCH_ERROR.error = null;\r\n    } else if (then$$1 === undefined) {\r\n      fulfill(promise, maybeThenable);\r\n    } else if (isFunction(then$$1)) {\r\n      handleForeignThenable(promise, maybeThenable, then$$1);\r\n    } else {\r\n      fulfill(promise, maybeThenable);\r\n    }\r\n  }\r\n}\r\n\r\nfunction resolve(promise, value) {\r\n  if (promise === value) {\r\n    reject(promise, selfFulfillment());\r\n  } else if (objectOrFunction(value)) {\r\n    handleMaybeThenable(promise, value, getThen(value));\r\n  } else {\r\n    fulfill(promise, value);\r\n  }\r\n}\r\n\r\nfunction publishRejection(promise) {\r\n  if (promise._onerror) {\r\n    promise._onerror(promise._result);\r\n  }\r\n\r\n  publish(promise);\r\n}\r\n\r\nfunction fulfill(promise, value) {\r\n  if (promise._state !== PENDING) {\r\n    return;\r\n  }\r\n\r\n  promise._result = value;\r\n  promise._state = FULFILLED;\r\n\r\n  if (promise._subscribers.length !== 0) {\r\n    asap(publish, promise);\r\n  }\r\n}\r\n\r\nfunction reject(promise, reason) {\r\n  if (promise._state !== PENDING) {\r\n    return;\r\n  }\r\n  promise._state = REJECTED;\r\n  promise._result = reason;\r\n\r\n  asap(publishRejection, promise);\r\n}\r\n\r\nfunction subscribe(parent, child, onFulfillment, onRejection) {\r\n  var _subscribers = parent._subscribers;\r\n  var length = _subscribers.length;\r\n\r\n\r\n  parent._onerror = null;\r\n\r\n  _subscribers[length] = child;\r\n  _subscribers[length + FULFILLED] = onFulfillment;\r\n  _subscribers[length + REJECTED] = onRejection;\r\n\r\n  if (length === 0 && parent._state) {\r\n    asap(publish, parent);\r\n  }\r\n}\r\n\r\nfunction publish(promise) {\r\n  var subscribers = promise._subscribers;\r\n  var settled = promise._state;\r\n\r\n  if (subscribers.length === 0) {\r\n    return;\r\n  }\r\n\r\n  var child = void 0,\r\n      callback = void 0,\r\n      detail = promise._result;\r\n\r\n  for (var i = 0; i < subscribers.length; i += 3) {\r\n    child = subscribers[i];\r\n    callback = subscribers[i + settled];\r\n\r\n    if (child) {\r\n      invokeCallback(settled, child, callback, detail);\r\n    } else {\r\n      callback(detail);\r\n    }\r\n  }\r\n\r\n  promise._subscribers.length = 0;\r\n}\r\n\r\nfunction tryCatch(callback, detail) {\r\n  try {\r\n    return callback(detail);\r\n  } catch (e) {\r\n    TRY_CATCH_ERROR.error = e;\r\n    return TRY_CATCH_ERROR;\r\n  }\r\n}\r\n\r\nfunction invokeCallback(settled, promise, callback, detail) {\r\n  var hasCallback = isFunction(callback),\r\n      value = void 0,\r\n      error = void 0,\r\n      succeeded = void 0,\r\n      failed = void 0;\r\n\r\n  if (hasCallback) {\r\n    value = tryCatch(callback, detail);\r\n\r\n    if (value === TRY_CATCH_ERROR) {\r\n      failed = true;\r\n      error = value.error;\r\n      value.error = null;\r\n    } else {\r\n      succeeded = true;\r\n    }\r\n\r\n    if (promise === value) {\r\n      reject(promise, cannotReturnOwn());\r\n      return;\r\n    }\r\n  } else {\r\n    value = detail;\r\n    succeeded = true;\r\n  }\r\n\r\n  if (promise._state !== PENDING) {\r\n    // noop\r\n  } else if (hasCallback && succeeded) {\r\n    resolve(promise, value);\r\n  } else if (failed) {\r\n    reject(promise, error);\r\n  } else if (settled === FULFILLED) {\r\n    fulfill(promise, value);\r\n  } else if (settled === REJECTED) {\r\n    reject(promise, value);\r\n  }\r\n}\r\n\r\nfunction initializePromise(promise, resolver) {\r\n  try {\r\n    resolver(function resolvePromise(value) {\r\n      resolve(promise, value);\r\n    }, function rejectPromise(reason) {\r\n      reject(promise, reason);\r\n    });\r\n  } catch (e) {\r\n    reject(promise, e);\r\n  }\r\n}\r\n\r\nvar id = 0;\r\nfunction nextId() {\r\n  return id++;\r\n}\r\n\r\nfunction makePromise(promise) {\r\n  promise[PROMISE_ID] = id++;\r\n  promise._state = undefined;\r\n  promise._result = undefined;\r\n  promise._subscribers = [];\r\n}\r\n\r\nfunction validationError() {\r\n  return new Error('Array Methods must be provided an Array');\r\n}\r\n\r\nvar Enumerator = function () {\r\n  function Enumerator(Constructor, input) {\r\n    this._instanceConstructor = Constructor;\r\n    this.promise = new Constructor(noop);\r\n\r\n    if (!this.promise[PROMISE_ID]) {\r\n      makePromise(this.promise);\r\n    }\r\n\r\n    if (isArray(input)) {\r\n      this.length = input.length;\r\n      this._remaining = input.length;\r\n\r\n      this._result = new Array(this.length);\r\n\r\n      if (this.length === 0) {\r\n        fulfill(this.promise, this._result);\r\n      } else {\r\n        this.length = this.length || 0;\r\n        this._enumerate(input);\r\n        if (this._remaining === 0) {\r\n          fulfill(this.promise, this._result);\r\n        }\r\n      }\r\n    } else {\r\n      reject(this.promise, validationError());\r\n    }\r\n  }\r\n\r\n  Enumerator.prototype._enumerate = function _enumerate(input) {\r\n    for (var i = 0; this._state === PENDING && i < input.length; i++) {\r\n      this._eachEntry(input[i], i);\r\n    }\r\n  };\r\n\r\n  Enumerator.prototype._eachEntry = function _eachEntry(entry, i) {\r\n    var c = this._instanceConstructor;\r\n    var resolve$$1 = c.resolve;\r\n\r\n\r\n    if (resolve$$1 === resolve$1) {\r\n      var _then = getThen(entry);\r\n\r\n      if (_then === then && entry._state !== PENDING) {\r\n        this._settledAt(entry._state, i, entry._result);\r\n      } else if (typeof _then !== 'function') {\r\n        this._remaining--;\r\n        this._result[i] = entry;\r\n      } else if (c === Promise$2) {\r\n        var promise = new c(noop);\r\n        handleMaybeThenable(promise, entry, _then);\r\n        this._willSettleAt(promise, i);\r\n      } else {\r\n        this._willSettleAt(new c(function (resolve$$1) {\r\n          return resolve$$1(entry);\r\n        }), i);\r\n      }\r\n    } else {\r\n      this._willSettleAt(resolve$$1(entry), i);\r\n    }\r\n  };\r\n\r\n  Enumerator.prototype._settledAt = function _settledAt(state, i, value) {\r\n    var promise = this.promise;\r\n\r\n\r\n    if (promise._state === PENDING) {\r\n      this._remaining--;\r\n\r\n      if (state === REJECTED) {\r\n        reject(promise, value);\r\n      } else {\r\n        this._result[i] = value;\r\n      }\r\n    }\r\n\r\n    if (this._remaining === 0) {\r\n      fulfill(promise, this._result);\r\n    }\r\n  };\r\n\r\n  Enumerator.prototype._willSettleAt = function _willSettleAt(promise, i) {\r\n    var enumerator = this;\r\n\r\n    subscribe(promise, undefined, function (value) {\r\n      return enumerator._settledAt(FULFILLED, i, value);\r\n    }, function (reason) {\r\n      return enumerator._settledAt(REJECTED, i, reason);\r\n    });\r\n  };\r\n\r\n  return Enumerator;\r\n}();\r\n\r\n/**\r\n  `Promise.all` accepts an array of promises, and returns a new promise which\r\n  is fulfilled with an array of fulfillment values for the passed promises, or\r\n  rejected with the reason of the first passed promise to be rejected. It casts all\r\n  elements of the passed iterable to promises as it runs this algorithm.\r\n\r\n  Example:\r\n\r\n  ```javascript\r\n  let promise1 = resolve(1);\r\n  let promise2 = resolve(2);\r\n  let promise3 = resolve(3);\r\n  let promises = [ promise1, promise2, promise3 ];\r\n\r\n  Promise.all(promises).then(function(array){\r\n    // The array here would be [ 1, 2, 3 ];\r\n  });\r\n  ```\r\n\r\n  If any of the `promises` given to `all` are rejected, the first promise\r\n  that is rejected will be given as an argument to the returned promises's\r\n  rejection handler. For example:\r\n\r\n  Example:\r\n\r\n  ```javascript\r\n  let promise1 = resolve(1);\r\n  let promise2 = reject(new Error(\"2\"));\r\n  let promise3 = reject(new Error(\"3\"));\r\n  let promises = [ promise1, promise2, promise3 ];\r\n\r\n  Promise.all(promises).then(function(array){\r\n    // Code here never runs because there are rejected promises!\r\n  }, function(error) {\r\n    // error.message === \"2\"\r\n  });\r\n  ```\r\n\r\n  @method all\r\n  @static\r\n  @param {Array} entries array of promises\r\n  @param {String} label optional string for labeling the promise.\r\n  Useful for tooling.\r\n  @return {Promise} promise that is fulfilled when all `promises` have been\r\n  fulfilled, or rejected if any of them become rejected.\r\n  @static\r\n*/\r\nfunction all(entries) {\r\n  return new Enumerator(this, entries).promise;\r\n}\r\n\r\n/**\r\n  `Promise.race` returns a new promise which is settled in the same way as the\r\n  first passed promise to settle.\r\n\r\n  Example:\r\n\r\n  ```javascript\r\n  let promise1 = new Promise(function(resolve, reject){\r\n    setTimeout(function(){\r\n      resolve('promise 1');\r\n    }, 200);\r\n  });\r\n\r\n  let promise2 = new Promise(function(resolve, reject){\r\n    setTimeout(function(){\r\n      resolve('promise 2');\r\n    }, 100);\r\n  });\r\n\r\n  Promise.race([promise1, promise2]).then(function(result){\r\n    // result === 'promise 2' because it was resolved before promise1\r\n    // was resolved.\r\n  });\r\n  ```\r\n\r\n  `Promise.race` is deterministic in that only the state of the first\r\n  settled promise matters. For example, even if other promises given to the\r\n  `promises` array argument are resolved, but the first settled promise has\r\n  become rejected before the other promises became fulfilled, the returned\r\n  promise will become rejected:\r\n\r\n  ```javascript\r\n  let promise1 = new Promise(function(resolve, reject){\r\n    setTimeout(function(){\r\n      resolve('promise 1');\r\n    }, 200);\r\n  });\r\n\r\n  let promise2 = new Promise(function(resolve, reject){\r\n    setTimeout(function(){\r\n      reject(new Error('promise 2'));\r\n    }, 100);\r\n  });\r\n\r\n  Promise.race([promise1, promise2]).then(function(result){\r\n    // Code here never runs\r\n  }, function(reason){\r\n    // reason.message === 'promise 2' because promise 2 became rejected before\r\n    // promise 1 became fulfilled\r\n  });\r\n  ```\r\n\r\n  An example real-world use case is implementing timeouts:\r\n\r\n  ```javascript\r\n  Promise.race([ajax('foo.json'), timeout(5000)])\r\n  ```\r\n\r\n  @method race\r\n  @static\r\n  @param {Array} promises array of promises to observe\r\n  Useful for tooling.\r\n  @return {Promise} a promise which settles in the same way as the first passed\r\n  promise to settle.\r\n*/\r\nfunction race(entries) {\r\n  /*jshint validthis:true */\r\n  var Constructor = this;\r\n\r\n  if (!isArray(entries)) {\r\n    return new Constructor(function (_, reject) {\r\n      return reject(new TypeError('You must pass an array to race.'));\r\n    });\r\n  } else {\r\n    return new Constructor(function (resolve, reject) {\r\n      var length = entries.length;\r\n      for (var i = 0; i < length; i++) {\r\n        Constructor.resolve(entries[i]).then(resolve, reject);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n  `Promise.reject` returns a promise rejected with the passed `reason`.\r\n  It is shorthand for the following:\r\n\r\n  ```javascript\r\n  let promise = new Promise(function(resolve, reject){\r\n    reject(new Error('WHOOPS'));\r\n  });\r\n\r\n  promise.then(function(value){\r\n    // Code here doesn't run because the promise is rejected!\r\n  }, function(reason){\r\n    // reason.message === 'WHOOPS'\r\n  });\r\n  ```\r\n\r\n  Instead of writing the above, your code now simply becomes the following:\r\n\r\n  ```javascript\r\n  let promise = Promise.reject(new Error('WHOOPS'));\r\n\r\n  promise.then(function(value){\r\n    // Code here doesn't run because the promise is rejected!\r\n  }, function(reason){\r\n    // reason.message === 'WHOOPS'\r\n  });\r\n  ```\r\n\r\n  @method reject\r\n  @static\r\n  @param {Any} reason value that the returned promise will be rejected with.\r\n  Useful for tooling.\r\n  @return {Promise} a promise rejected with the given `reason`.\r\n*/\r\nfunction reject$1(reason) {\r\n  /*jshint validthis:true */\r\n  var Constructor = this;\r\n  var promise = new Constructor(noop);\r\n  reject(promise, reason);\r\n  return promise;\r\n}\r\n\r\nfunction needsResolver() {\r\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\r\n}\r\n\r\nfunction needsNew() {\r\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\r\n}\r\n\r\n/**\r\n  Promise objects represent the eventual result of an asynchronous operation. The\r\n  primary way of interacting with a promise is through its `then` method, which\r\n  registers callbacks to receive either a promise's eventual value or the reason\r\n  why the promise cannot be fulfilled.\r\n\r\n  Terminology\r\n  -----------\r\n\r\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\r\n  - `thenable` is an object or function that defines a `then` method.\r\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\r\n  - `exception` is a value that is thrown using the throw statement.\r\n  - `reason` is a value that indicates why a promise was rejected.\r\n  - `settled` the final resting state of a promise, fulfilled or rejected.\r\n\r\n  A promise can be in one of three states: pending, fulfilled, or rejected.\r\n\r\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\r\n  state.  Promises that are rejected have a rejection reason and are in the\r\n  rejected state.  A fulfillment value is never a thenable.\r\n\r\n  Promises can also be said to *resolve* a value.  If this value is also a\r\n  promise, then the original promise's settled state will match the value's\r\n  settled state.  So a promise that *resolves* a promise that rejects will\r\n  itself reject, and a promise that *resolves* a promise that fulfills will\r\n  itself fulfill.\r\n\r\n\r\n  Basic Usage:\r\n  ------------\r\n\r\n  ```js\r\n  let promise = new Promise(function(resolve, reject) {\r\n    // on success\r\n    resolve(value);\r\n\r\n    // on failure\r\n    reject(reason);\r\n  });\r\n\r\n  promise.then(function(value) {\r\n    // on fulfillment\r\n  }, function(reason) {\r\n    // on rejection\r\n  });\r\n  ```\r\n\r\n  Advanced Usage:\r\n  ---------------\r\n\r\n  Promises shine when abstracting away asynchronous interactions such as\r\n  `XMLHttpRequest`s.\r\n\r\n  ```js\r\n  function getJSON(url) {\r\n    return new Promise(function(resolve, reject){\r\n      let xhr = new XMLHttpRequest();\r\n\r\n      xhr.open('GET', url);\r\n      xhr.onreadystatechange = handler;\r\n      xhr.responseType = 'json';\r\n      xhr.setRequestHeader('Accept', 'application/json');\r\n      xhr.send();\r\n\r\n      function handler() {\r\n        if (this.readyState === this.DONE) {\r\n          if (this.status === 200) {\r\n            resolve(this.response);\r\n          } else {\r\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\r\n          }\r\n        }\r\n      };\r\n    });\r\n  }\r\n\r\n  getJSON('/posts.json').then(function(json) {\r\n    // on fulfillment\r\n  }, function(reason) {\r\n    // on rejection\r\n  });\r\n  ```\r\n\r\n  Unlike callbacks, promises are great composable primitives.\r\n\r\n  ```js\r\n  Promise.all([\r\n    getJSON('/posts'),\r\n    getJSON('/comments')\r\n  ]).then(function(values){\r\n    values[0] // => postsJSON\r\n    values[1] // => commentsJSON\r\n\r\n    return values;\r\n  });\r\n  ```\r\n\r\n  @class Promise\r\n  @param {Function} resolver\r\n  Useful for tooling.\r\n  @constructor\r\n*/\r\n\r\nvar Promise$2 = function () {\r\n  function Promise(resolver) {\r\n    this[PROMISE_ID] = nextId();\r\n    this._result = this._state = undefined;\r\n    this._subscribers = [];\r\n\r\n    if (noop !== resolver) {\r\n      typeof resolver !== 'function' && needsResolver();\r\n      this instanceof Promise ? initializePromise(this, resolver) : needsNew();\r\n    }\r\n  }\r\n\r\n  /**\r\n  The primary way of interacting with a promise is through its `then` method,\r\n  which registers callbacks to receive either a promise's eventual value or the\r\n  reason why the promise cannot be fulfilled.\r\n   ```js\r\n  findUser().then(function(user){\r\n    // user is available\r\n  }, function(reason){\r\n    // user is unavailable, and you are given the reason why\r\n  });\r\n  ```\r\n   Chaining\r\n  --------\r\n   The return value of `then` is itself a promise.  This second, 'downstream'\r\n  promise is resolved with the return value of the first promise's fulfillment\r\n  or rejection handler, or rejected if the handler throws an exception.\r\n   ```js\r\n  findUser().then(function (user) {\r\n    return user.name;\r\n  }, function (reason) {\r\n    return 'default name';\r\n  }).then(function (userName) {\r\n    // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\r\n    // will be `'default name'`\r\n  });\r\n   findUser().then(function (user) {\r\n    throw new Error('Found user, but still unhappy');\r\n  }, function (reason) {\r\n    throw new Error('`findUser` rejected and we're unhappy');\r\n  }).then(function (value) {\r\n    // never reached\r\n  }, function (reason) {\r\n    // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\r\n    // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\r\n  });\r\n  ```\r\n  If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\r\n   ```js\r\n  findUser().then(function (user) {\r\n    throw new PedagogicalException('Upstream error');\r\n  }).then(function (value) {\r\n    // never reached\r\n  }).then(function (value) {\r\n    // never reached\r\n  }, function (reason) {\r\n    // The `PedgagocialException` is propagated all the way down to here\r\n  });\r\n  ```\r\n   Assimilation\r\n  ------------\r\n   Sometimes the value you want to propagate to a downstream promise can only be\r\n  retrieved asynchronously. This can be achieved by returning a promise in the\r\n  fulfillment or rejection handler. The downstream promise will then be pending\r\n  until the returned promise is settled. This is called *assimilation*.\r\n   ```js\r\n  findUser().then(function (user) {\r\n    return findCommentsByAuthor(user);\r\n  }).then(function (comments) {\r\n    // The user's comments are now available\r\n  });\r\n  ```\r\n   If the assimliated promise rejects, then the downstream promise will also reject.\r\n   ```js\r\n  findUser().then(function (user) {\r\n    return findCommentsByAuthor(user);\r\n  }).then(function (comments) {\r\n    // If `findCommentsByAuthor` fulfills, we'll have the value here\r\n  }, function (reason) {\r\n    // If `findCommentsByAuthor` rejects, we'll have the reason here\r\n  });\r\n  ```\r\n   Simple Example\r\n  --------------\r\n   Synchronous Example\r\n   ```javascript\r\n  let result;\r\n   try {\r\n    result = findResult();\r\n    // success\r\n  } catch(reason) {\r\n    // failure\r\n  }\r\n  ```\r\n   Errback Example\r\n   ```js\r\n  findResult(function(result, err){\r\n    if (err) {\r\n      // failure\r\n    } else {\r\n      // success\r\n    }\r\n  });\r\n  ```\r\n   Promise Example;\r\n   ```javascript\r\n  findResult().then(function(result){\r\n    // success\r\n  }, function(reason){\r\n    // failure\r\n  });\r\n  ```\r\n   Advanced Example\r\n  --------------\r\n   Synchronous Example\r\n   ```javascript\r\n  let author, books;\r\n   try {\r\n    author = findAuthor();\r\n    books  = findBooksByAuthor(author);\r\n    // success\r\n  } catch(reason) {\r\n    // failure\r\n  }\r\n  ```\r\n   Errback Example\r\n   ```js\r\n   function foundBooks(books) {\r\n   }\r\n   function failure(reason) {\r\n   }\r\n   findAuthor(function(author, err){\r\n    if (err) {\r\n      failure(err);\r\n      // failure\r\n    } else {\r\n      try {\r\n        findBoooksByAuthor(author, function(books, err) {\r\n          if (err) {\r\n            failure(err);\r\n          } else {\r\n            try {\r\n              foundBooks(books);\r\n            } catch(reason) {\r\n              failure(reason);\r\n            }\r\n          }\r\n        });\r\n      } catch(error) {\r\n        failure(err);\r\n      }\r\n      // success\r\n    }\r\n  });\r\n  ```\r\n   Promise Example;\r\n   ```javascript\r\n  findAuthor().\r\n    then(findBooksByAuthor).\r\n    then(function(books){\r\n      // found books\r\n  }).catch(function(reason){\r\n    // something went wrong\r\n  });\r\n  ```\r\n   @method then\r\n  @param {Function} onFulfilled\r\n  @param {Function} onRejected\r\n  Useful for tooling.\r\n  @return {Promise}\r\n  */\r\n\r\n  /**\r\n  `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\r\n  as the catch block of a try/catch statement.\r\n  ```js\r\n  function findAuthor(){\r\n  throw new Error('couldn't find that author');\r\n  }\r\n  // synchronous\r\n  try {\r\n  findAuthor();\r\n  } catch(reason) {\r\n  // something went wrong\r\n  }\r\n  // async with promises\r\n  findAuthor().catch(function(reason){\r\n  // something went wrong\r\n  });\r\n  ```\r\n  @method catch\r\n  @param {Function} onRejection\r\n  Useful for tooling.\r\n  @return {Promise}\r\n  */\r\n\r\n\r\n  Promise.prototype.catch = function _catch(onRejection) {\r\n    return this.then(null, onRejection);\r\n  };\r\n\r\n  /**\r\n    `finally` will be invoked regardless of the promise's fate just as native\r\n    try/catch/finally behaves\r\n  \r\n    Synchronous example:\r\n  \r\n    ```js\r\n    findAuthor() {\r\n      if (Math.random() > 0.5) {\r\n        throw new Error();\r\n      }\r\n      return new Author();\r\n    }\r\n  \r\n    try {\r\n      return findAuthor(); // succeed or fail\r\n    } catch(error) {\r\n      return findOtherAuther();\r\n    } finally {\r\n      // always runs\r\n      // doesn't affect the return value\r\n    }\r\n    ```\r\n  \r\n    Asynchronous example:\r\n  \r\n    ```js\r\n    findAuthor().catch(function(reason){\r\n      return findOtherAuther();\r\n    }).finally(function(){\r\n      // author was either found, or not\r\n    });\r\n    ```\r\n  \r\n    @method finally\r\n    @param {Function} callback\r\n    @return {Promise}\r\n  */\r\n\r\n\r\n  Promise.prototype.finally = function _finally(callback) {\r\n    var promise = this;\r\n    var constructor = promise.constructor;\r\n\r\n    return promise.then(function (value) {\r\n      return constructor.resolve(callback()).then(function () {\r\n        return value;\r\n      });\r\n    }, function (reason) {\r\n      return constructor.resolve(callback()).then(function () {\r\n        throw reason;\r\n      });\r\n    });\r\n  };\r\n\r\n  return Promise;\r\n}();\r\n\r\nPromise$2.prototype.then = then;\r\nPromise$2.all = all;\r\nPromise$2.race = race;\r\nPromise$2.resolve = resolve$1;\r\nPromise$2.reject = reject$1;\r\nPromise$2._setScheduler = setScheduler;\r\nPromise$2._setAsap = setAsap;\r\nPromise$2._asap = asap;\r\n\r\n/*global self*/\r\nfunction polyfill() {\r\n  var local = void 0;\r\n\r\n  if (typeof global !== 'undefined') {\r\n    local = global;\r\n  } else if (typeof self !== 'undefined') {\r\n    local = self;\r\n  } else {\r\n    try {\r\n      local = Function('return this')();\r\n    } catch (e) {\r\n      throw new Error('polyfill failed because global object is unavailable in this environment');\r\n    }\r\n  }\r\n\r\n  var P = local.Promise;\r\n\r\n  if (P) {\r\n    var promiseToString = null;\r\n    try {\r\n      promiseToString = Object.prototype.toString.call(P.resolve());\r\n    } catch (e) {\r\n      // silently ignored\r\n    }\r\n\r\n    if (promiseToString === '[object Promise]' && !P.cast) {\r\n      return;\r\n    }\r\n  }\r\n\r\n  local.Promise = Promise$2;\r\n}\r\n\r\n// Strange compat..\r\nPromise$2.polyfill = polyfill;\r\nPromise$2.Promise = Promise$2;\r\n\r\nPromise$2.polyfill();\r\n\r\nreturn Promise$2;\r\n\r\n})));\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/polyfills/es6-promise.auto.js\n// module id = 108\n// module chunks = 0 1","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/process/browser.js\n// module id = 109\n// module chunks = 0 1","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 110\n// module chunks = 0 1","import { $2sxcInPage as $2sxc } from '../interfaces/sxc-controller-in-page';\r\nimport { windowInPage as window } from '../interfaces/window-in-page';\r\n\r\nif (window.$2sxc && !window.$2sxc.consts) {\r\n  $2sxc.c = $2sxc.consts = {\r\n    // classes\r\n    cls: {\r\n      scMenu: 'sc-menu',\r\n      // 2019-02-18 2dm moved to constants\r\n      //scCb: 'sc-content-block',\r\n      //scElm: 'sc-element',\r\n    },\r\n    // attributes\r\n    attr: {\r\n      toolbar: 'toolbar',\r\n      toolbarData: 'data-toolbar',\r\n      settings: 'settings',\r\n      settingsData: 'data-settings',\r\n    },\r\n    publishAllowed: 'DraftOptional',\r\n  };\r\n  // selectors\r\n  const sel: any = $2sxc.c.sel = {};\r\n// ReSharper disable once UnusedParameter\r\n  Object.keys($2sxc.c.cls).forEach((key, index) => {\r\n    sel[key] = `.${$2sxc.c.cls[key]}`;\r\n  });\r\n\r\n  /*\r\n  ToDo: functional programming\r\n  $2sxc.c.sel = Object.entries($2sxc.c.cls).reduce((res, current) => {\r\n      res[entry[0]] = entry[1];\r\n      return t;\r\n  }, {});\r\n  */\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/2sxc-extensions/2sxc.consts.ts","import { windowInPage as window } from '../interfaces/window-in-page';\r\n\r\n/** this enhances the $2sxc client controller with stuff only needed when logged in */\r\nif (window.$2sxc && !window.$2sxc.system) {\r\n  window.$2sxc.system = {\r\n    finishUpgrade: finishUpgrade,\r\n  };\r\n}\r\n\r\n// upgrade command - started when an error contains a link to start this\r\nfunction finishUpgrade(domElement: HTMLElement): void {\r\n  const mc = window.$2sxc(domElement);\r\n  $.ajax({\r\n    type: 'get',\r\n    url: mc.resolveServiceUrl('view/module/finishinstallation'),\r\n    beforeSend: $.ServicesFramework(mc.id).setModuleHeaders,\r\n  }).success(() => {\r\n    alert('Upgrade ok, restarting the CMS and reloading...');\r\n    location.reload();\r\n  });\r\n  alert('starting upgrade. This could take a few minutes. You\\'ll see an \\'ok\\' when it\\'s done. Please wait...');\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/2sxc-extensions/2sxc.system.ts","import { addItem } from '../../contentBlock/actions';\r\nimport { CommandBase } from '../command-base';\r\n\r\n/**\r\n * add brings no dialog, just add an empty item\r\n *\r\n * import this module to commands.ts\r\n */\r\nexport class Add extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('add',\r\n      'AddDemo',\r\n      'plus-circled',\r\n      false,\r\n      true,\r\n      {\r\n        showCondition(context) {\r\n          return (context.contentBlock.isList) && (context.button.action.params.useModuleList) && (context.button.action.params.sortOrder !== -1);\r\n        },\r\n        code(context) {\r\n          return addItem(context, context.button.action.params.sortOrder + 1);\r\n        },\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new Add();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/add.ts","import { CommandBase } from '../command-base';\r\n\r\n/**\r\n * open the import dialog\r\n *\r\n * import this module to commands.ts\r\n */\r\nexport class AppImport extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('app-import', 'Dashboard', '', true, false, {});\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new AppImport();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/app-import.ts","import { CommandBase } from '../command-base';\r\n\r\n/**\r\n * import this module to commands.ts\r\n */\r\nexport class AppResources extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('app-resources',\r\n      'AppResources',\r\n      'language',\r\n      true,\r\n      false,\r\n      {\r\n        dialog: (context) => 'edit',\r\n        disabled: (context) => {\r\n          return context.app.resourcesId === null;\r\n        },\r\n        title: (context) => `Toolbar.AppResources${context.app.resourcesId === null ? 'Disabled' : ''}`,\r\n        showCondition: (context) => {\r\n          return (context.user.canDesign) && (!context.app.isContent); // only if resources exist or are 0 (to be created)...\r\n        },\r\n        configureCommand: (context, command) => {\r\n          command.items = [{ EntityId: context.app.resourcesId }];\r\n        },\r\n        dynamicClasses: (context) => {\r\n          return context.app.resourcesId !== null ? '' : 'empty'; // if it doesn't have a query, make it less strong\r\n        },\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new AppResources();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/app-resources.ts","import { CommandBase } from '../command-base';\r\n\r\n/**\r\n * import this module to commands.ts\r\n */\r\nexport class AppSettings extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('app-settings',\r\n      'AppSettings',\r\n      'sliders',\r\n      true,\r\n      false,\r\n      {\r\n        dialog: (context) => 'edit',\r\n        disabled: (context) => {\r\n          return context.app.settingsId === null;\r\n        },\r\n        title: (context) => `Toolbar.AppSettings${context.app.settingsId === null ? 'Disabled' : ''}`,\r\n        showCondition: (context) => {\r\n          return (context.user.canDesign) && (!context.app.isContent); // only if settings exist, or are 0 (to be created)\r\n        },\r\n        configureCommand: (context, command) => {\r\n          command.items = [{ EntityId: context.app.settingsId }];\r\n        },\r\n        dynamicClasses: (context) => {\r\n          return context.app.settingsId !== null ? '' : 'empty'; // if it doesn't have a query, make it less strong\r\n        },\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new AppSettings();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/app-settings.ts","import { CommandBase } from '../command-base';\r\n\r\n/**\r\n * import this module to commands.ts\r\n */\r\nexport class App extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('app',\r\n      'App',\r\n      'settings',\r\n      true,\r\n      false,\r\n      {\r\n        showCondition: (context) => {\r\n          return context.user.canDesign;\r\n        },\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new App();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/app.ts","import { CommandBase } from '../command-base';\r\n\r\n/**\r\n * import this module to commands.ts\r\n */\r\nexport class ContentItems extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('contentitems',\r\n      'ContentItems',\r\n      'table',\r\n      true,\r\n      false,\r\n      {\r\n        params: (context) => {\r\n          return { contentTypeName: context.contentBlock.contentTypeId };\r\n        },\r\n        showCondition: (context) => {\r\n          return (context.user.canDesign) && ((!!context.button.action.params.contentType) || (!!context.contentBlock.contentTypeId));\r\n        },\r\n        configureCommand: (context, command) => {\r\n          if (command.context.button.action.params.contentType) // optionally override with custom type\r\n            command.params.contentTypeName = command.context.button.action.params.contentType;\r\n          // maybe: if item doesn't have a type, use that of template\r\n          // else if (cmdSpecs.contentTypeId)\r\n          //    cmd.params.contentTypeName = cmdSpecs.contentTypeId;\r\n          if (context.button.action.params.filters) {\r\n            let enc = JSON.stringify(context.button.action.params.filters);\r\n\r\n            // special case - if it contains a \"+\" character, this won't survive\r\n            // encoding through the hash as it's always replaced with a space, even if it would be pre converted to %2b\r\n            // so we're base64 encoding it - see https://github.com/2sic/2sxc/issues/1061\r\n            if (enc.indexOf('+') > -1)\r\n              enc = btoa(enc);\r\n            command.params.filters = enc;\r\n          }\r\n        },\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new ContentItems();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/content-items.ts","import { CommandBase } from '../command-base';\r\n\r\n/**\r\n * import this module to commands.ts\r\n */\r\nexport class ContentType extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('contenttype',\r\n      'ContentType',\r\n      'fields',\r\n      true,\r\n      false,\r\n      {\r\n        showCondition: (context) => {\r\n          return context.user.canDesign;\r\n        },\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new ContentType();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/content-type.ts","import { CommandBase } from '../command-base';\r\n\r\n/**\r\n * import this module to commands.ts\r\n */\r\nexport class Custom extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('custom',\r\n      'Custom',\r\n      'bomb',\r\n      true,\r\n      false,\r\n      {\r\n        code(context, event) {\r\n          return new Promise((resolve, reject) => {\r\n            console.log('custom action with code - BETA feature, may change');\r\n            if (!context.button.action.params.customCode) {\r\n              console.warn('custom code action, but no onclick found to run', context.button.action.params);\r\n              resolve();\r\n            }\r\n            try {\r\n              const fn = new Function('context', 'event', context.button.action.params.customCode); // jshint ignore:line\r\n              resolve(fn(context, event));\r\n            } catch (err) {\r\n              console.error('error in custom button-code: ', context.button.action.params);\r\n              reject(err);\r\n            }\r\n          });\r\n        },\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new Custom();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/custom.ts","import { contentItems } from '../../entity-manipulation/item-commands';\r\nimport { CommandBase } from '../command-base';\r\n\r\n/**\r\n * todo: work in progress related to https://github.com/2sic/2sxc/issues/618\r\n *\r\n * import this module to commands.ts\r\n */\r\nexport class Delete extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('delete',\r\n      'Delete',\r\n      'cancel',\r\n      true,\r\n      false,\r\n      {\r\n        // disabled: true,\r\n        showCondition(context) {\r\n          // can never be used for a modulelist item, as it is always in use somewhere\r\n          if (context.button.action.params.useModuleList) {\r\n            return false;\r\n          }\r\n\r\n          // check if all data exists required for deleting\r\n          return ((!!context.button.action.params.entityId)\r\n            && (!!context.button.action.params.entityGuid)\r\n            && (!!context.button.action.params.entityTitle));\r\n        },\r\n        code(context) {\r\n          return contentItems.delete(context,\r\n            context.button.action.params.entityId,\r\n            context.button.action.params.entityGuid,\r\n            context.button.action.params.entityTitle);\r\n        },\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new Delete();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/delete.ts","import { CommandBase } from '../command-base';\r\n\r\n/**\r\n * open an edit-item dialog\r\n *\r\n * import this module to commands.ts\r\n */\r\nexport class Edit extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('edit',\r\n      'Edit',\r\n      'pencil',\r\n      false,\r\n      true,\r\n      {\r\n        params: (context) => {\r\n          return { mode: 'edit' };\r\n        },\r\n        showCondition(context) {\r\n          return (!!context.button.action.params.entityId) || (context.button.action.params.useModuleList); // need ID or a \"slot\", otherwise edit won't work\r\n        },\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new Edit();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/edit.ts","import { CommandBase } from '../command-base';\r\n\r\n/**\r\n * import this module to commands.ts\r\n */\r\nexport class InstanceList extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('instance-list',\r\n      'Sort',\r\n      'list-numbered',\r\n      false,\r\n      true,\r\n      {\r\n        showCondition(context) {\r\n          return (context.contentBlock.isList)\r\n            && (context.button.action.params.useModuleList)\r\n            && (context.button.action.params.sortOrder !== -1);\r\n        },\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new InstanceList();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/instance-list.ts","import { CommandBase } from '../command-base';\r\n\r\n/**\r\n * show the version dialog\r\n *\r\n * import this module to commands.ts\r\n */\r\nexport class ItemHistory extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('item-history',\r\n      'ItemHistory',\r\n      'clock',\r\n      true,\r\n      false,\r\n      {\r\n        inlineWindow: (context) => true,\r\n        fullScreen: (context) => true,\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new ItemHistory();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/item-history.ts","import { CommandBase } from '../command-base';\r\n\r\n/**\r\n * import this module to commands.ts\r\n */\r\nexport class Layout extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('layout',\r\n      'ChangeLayout',\r\n      'glasses',\r\n      true,\r\n      true,\r\n      {\r\n        inlineWindow: (context) => true,\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new Layout();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/layout.ts","import { CommandBase } from '../command-base';\r\n\r\n/**\r\n * create a metadata toolbar\r\n *\r\n * import this module to commands.ts\r\n */\r\nexport class Metadata extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('metadata',\r\n      'Metadata',\r\n      'tag',\r\n      false,\r\n      false,\r\n      {\r\n        params: (context) => {\r\n          return { mode: 'new' };\r\n        },\r\n        dialog: (context) => 'edit', // don't use \"new\" (default) but use \"edit\"\r\n        dynamicClasses(context): string {\r\n          // if it doesn't have data yet, make it less strong\r\n          return context.button.action.params.entityId ? '' : 'empty';\r\n          // return settings.items && settings.items[0].entityId ? \"\" : \"empty\";\r\n        },\r\n        showCondition(context) {\r\n          return (!!context.button.action.params.metadata);\r\n        }, // only add a metadata-button if it has metadata-infos\r\n        configureCommand(context, command) {\r\n          const itm = {\r\n            Title: 'EditFormTitle.Metadata',\r\n            Metadata: Object.assign({ keyType: 'string', targetType: 10 }, command.context.button.action.params.metadata),\r\n          };\r\n          Object.assign(command.items[0], itm);\r\n        },\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new Metadata();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/metadata.ts","import { CommandBase } from '../command-base';\r\nimport Constants = require('../../constants');\r\n\r\n/**\r\n * import this module to commands.ts\r\n */\r\nexport class More extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef(\r\n      'more',\r\n      'MoreActions',\r\n      'options btn-mode',\r\n      true,\r\n      false,\r\n      {\r\n        code(context, event) {\r\n          return new Promise((resolve, reject) => {\r\n            const btn2: Element = event.target;\r\n            const fullMenu2: Element = btn2.closest('ul.sc-menu');\r\n            const oldState2 = Number(fullMenu2.getAttribute('data-state') || 0);\r\n            const max2 = Number(fullMenu2.getAttribute('group-count'));\r\n            const newState2 = (oldState2 + 1) % max2;\r\n\r\n            fullMenu2.classList.remove(`group-${oldState2}`);\r\n            fullMenu2.classList.add(`group-${newState2}`);\r\n            fullMenu2.setAttribute('data-state', String(newState2));\r\n\r\n            event.preventDefault();\r\n\r\n            function mouseenterHandler(e: MouseEvent) {\r\n              (fullMenu2 as HTMLElement).style.opacity = '1';\r\n            }\r\n\r\n            function mouseleaveHandler(e: MouseEvent) {\r\n              if (e.screenX != 0 && e.screenY != 0) {\r\n                // hide toolbar on mouseleave\r\n                (fullMenu2 as HTMLElement).style.opacity = '0';\r\n              } else {\r\n                // this is fix for Chrome issue\r\n                // ensure to show toolbar because X=0 and Y=0\r\n                (fullMenu2 as HTMLElement).style.opacity = '1';\r\n                console.warn('workaround for toolbar hide onmouseleave issue', e.screenX, e.screenY, e.target);\r\n              }\r\n            }\r\n\r\n            // because of issue in Chrome we need to override CSS rules in edit.css for toolbar toggle on mouse hover\r\n            const scElement = fullMenu2.closest('.' + Constants.toolbar.classes.oldHover);\r\n            // add mouseenter and mouseleave events to parent sc-element if not already added\r\n            if (scElement && fullMenu2.getAttribute('listener') !== 'true') {\r\n              scElement.addEventListener('mouseenter', mouseenterHandler);\r\n              scElement.addEventListener('mouseleave', mouseleaveHandler);\r\n              fullMenu2.setAttribute('listener', 'true'); // flag that events are added\r\n            }\r\n\r\n            resolve();\r\n          });\r\n        },\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new More();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/more.ts","import { changeOrder } from '../../contentBlock/actions';\r\nimport { CommandBase } from '../command-base';\r\n\r\n/**\r\n * import this module to commands.ts\r\n */\r\nexport class MoveDown extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('movedown',\r\n      'MoveDown',\r\n      'move-down',\r\n      false,\r\n      true,\r\n      {\r\n        showCondition(context) {\r\n          // TODO: do not display if is last item in list\r\n          return (context.contentBlock.isList)\r\n            && (context.button.action.params.useModuleList)\r\n            && (context.button.action.params.sortOrder !== -1);\r\n        },\r\n        code(context) {\r\n          // TODO: make sure index is never greater than the amount of items\r\n          return changeOrder(context, context.button.action.params.sortOrder, context.button.action.params.sortOrder + 1);\r\n        },\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new MoveDown();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/movedown.ts","import { changeOrder } from '../../contentBlock/actions';\r\nimport { CommandBase } from '../command-base';\r\n\r\n/**\r\n * import this module to commands.ts\r\n */\r\nexport class MoveUp extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('moveup',\r\n      'MoveUp',\r\n      'move-up',\r\n      false,\r\n      true,\r\n      {\r\n        showCondition(context) {\r\n          return (context.contentBlock.isList) &&\r\n            (context.button.action.params.useModuleList) &&\r\n            (context.button.action.params.sortOrder !== -1) &&\r\n            (context.button.action.params.sortOrder !== 0);\r\n        },\r\n        code(context) {\r\n          return changeOrder(context, context.button.action.params.sortOrder, Math.max(context.button.action.params.sortOrder - 1, 0));\r\n        },\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new MoveUp();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/moveup.ts","import { CommandBase } from '../command-base';\r\nimport { commandOpenNgDialog } from '../command-open-ng-dialog';\r\n\r\n\r\n\r\n/**\r\n * new is a dialog to add something, and will not add if cancelled\r\n * new can also be used for mini-toolbars which just add an entity not attached to a module\r\n * in that case it's essential to add a contentType like\r\n * <ul class=\"sc-menu\" data-toolbar='{\"action\":\"new\", \"contentType\": \"Category\"}'></ul>\r\n *\r\n * import this module to commands.ts\r\n */\r\nexport class New extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('new',\r\n      'New',\r\n      'plus',\r\n      false,\r\n      true,\r\n      {\r\n        params: (context) => {\r\n          return { mode: 'new' };\r\n        },\r\n        dialog: (context) => 'edit', // don't use \"new\" (default) but use \"edit\"\r\n        showCondition(context) {\r\n          return (!!context.button.action.params.contentType) ||\r\n            ((context.contentBlock.isList) && (context.button.action.params.useModuleList) && (context.button.action.params.sortOrder !== -1)); // don't provide new on the header-item\r\n        },\r\n        code(context, event) {\r\n          // todo - should refactor this to be a toolbarManager.contentBlock command\r\n          Object.assign(context.button.action.params, { sortOrder: context.button.action.params.sortOrder + 1 });\r\n          return commandOpenNgDialog(context, event);\r\n        },\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new New();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/new.ts","import { publish, publishId } from '../../contentBlock/actions';\r\nimport { translate } from '../../translate/2sxc.translate';\r\nimport { CommandBase } from '../command-base';\r\n\r\n/**\r\n * todo: shouldn't be available if changes are not allowed\r\n *\r\n * import this module to commands.ts\r\n */\r\nexport class Publish extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('publish',\r\n      'Unpublished',\r\n      'eye-off',\r\n      false,\r\n      false,\r\n      {\r\n        showCondition(context) {\r\n          return (context.button.action.params.isPublished === false);\r\n        },\r\n        disabled(context) {\r\n          return !context.instance.allowPublish;\r\n        },\r\n        code(context, event) {\r\n          return new Promise((resolve, reject) => {\r\n            if (context.button.action.params.isPublished) {\r\n              alert(translate('Toolbar.AlreadyPublished'));\r\n              return resolve();\r\n            }\r\n\r\n            // if we have an entity-id, publish based on that\r\n            if (context.button.action.params.entityId) {\r\n              return publishId(context, context.button.action.params.entityId);\r\n            }\r\n\r\n            const part: string = context.button.action.params.sortOrder === -1 ? 'listcontent' : 'content';\r\n            const index = context.button.action.params.sortOrder === -1 ? 0 : context.button.action.params.sortOrder;\r\n            return publish(context, part, index);\r\n          });\r\n        },\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new Publish();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/publish.ts","import { removeFromList } from '../../contentBlock/actions';\r\nimport { translate } from '../../translate/2sxc.translate';\r\nimport { CommandBase } from '../command-base';\r\n\r\n/**\r\n * remove an item from the placeholder (usually for lists)\r\n *\r\n * import this module to commands.ts\r\n */\r\nexport class Remove extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('remove',\r\n      'Remove',\r\n      'minus-circled',\r\n      false,\r\n      true,\r\n      {\r\n        showCondition(context) {\r\n          return (context.contentBlock.isList) &&\r\n            (context.button.action.params.useModuleList) &&\r\n            (context.button.action.params.sortOrder !== -1);\r\n        },\r\n        code(context) {\r\n          return new Promise((resolve, reject) => {\r\n            if (confirm(translate('Toolbar.ConfirmRemove'))) {\r\n              return removeFromList(context, context.button.action.params.sortOrder);\r\n            }\r\n            return resolve();\r\n          });\r\n        },\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new Remove();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/remove.ts","import { CommandBase } from '../command-base';\r\n\r\n/**\r\n * import this module to commands.ts\r\n */\r\nexport class Replace extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('replace',\r\n      'Replace',\r\n      'replace',\r\n      false,\r\n      true,\r\n      {\r\n        showCondition(context) {\r\n          return (context.button.action.params.useModuleList);\r\n        },\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new Replace();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/replace.ts","import { CommandBase } from '../command-base';\r\n\r\n/**\r\n * import this module to commands.ts\r\n */\r\nexport class TemplateDevelop extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('template-develop',\r\n      'Develop',\r\n      'code',\r\n      true,\r\n      false,\r\n      {\r\n        newWindow: (context) => true,\r\n        dialog: (context) => 'develop',\r\n        showCondition: (context) => {\r\n          return (context.user.canDesign);\r\n        },\r\n        configureCommand: (context, command) => {\r\n          command.items = [{ EntityId: context.contentBlock.templateId }];\r\n        },\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new TemplateDevelop();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/template-develop.ts","import { CommandBase } from '../command-base';\r\n\r\n/**\r\n * import this module to commands.ts\r\n */\r\nexport class TemplateQuery extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('template-query',\r\n      'QueryEdit',\r\n      'filter',\r\n      true,\r\n      false,\r\n      {\r\n        dialog: (context) => 'pipeline-designer',\r\n        params: (context) => {\r\n          return { pipelineId: context.contentBlock.queryId };\r\n        },\r\n        newWindow: (context) =>true,\r\n        disabled: (context) => {\r\n          return context.app.settingsId === null;\r\n        },\r\n        title: (context) => `Toolbar.QueryEdit${context.contentBlock.queryId === null ? 'Disabled' : ''}`,\r\n        showCondition: (context) => {\r\n          return (context.user.canDesign) && (!context.app.isContent);\r\n        },\r\n        dynamicClasses: (context) => {\r\n          return context.contentBlock.queryId ? '' : 'empty'; // if it doesn't have a query, make it less strong\r\n        },\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new TemplateQuery();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/template-query.ts","import { CommandBase } from '../command-base';\r\n\r\n/**\r\n * import this module to commands.ts\r\n */\r\nexport class TemplateSettings extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('template-settings',\r\n      'TemplateSettings',\r\n      'sliders',\r\n      true,\r\n      false,\r\n      {\r\n        dialog: (context) => 'edit',\r\n        showCondition: (context) => {\r\n          return (context.user.canDesign) && (!context.app.isContent);\r\n        },\r\n        configureCommand: (context, command) => {\r\n          command.items = [{ EntityId: context.contentBlock.templateId }];\r\n        },\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new TemplateSettings();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/template-settings.ts","import { CommandBase } from '../command-base';\r\n\r\n/**\r\n * import this module to commands.ts\r\n */\r\nexport class Zone extends CommandBase {\r\n  constructor() {\r\n    super();\r\n    this.makeDef('zone',\r\n      'Zone',\r\n      'manage',\r\n      true,\r\n      false,\r\n      {\r\n        showCondition: (context) => {\r\n          return (context.user.canDesign);\r\n        },\r\n      });\r\n  }\r\n}\r\n\r\n// ReSharper disable once UnusedLocals\r\nconst cmd = new Zone();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/command/zone.ts","import { ContextOfButton } from '../context/context-of-button';\r\nimport { Command } from './command';\r\nimport { Params } from './params';\r\n\r\n/**\r\n * Command definition, for creation of commands\r\n */\r\nexport class Definition {\r\n  /**\r\n   * name of Action\r\n   */\r\n  name?: string;\r\n\r\n  /**\r\n   * custom code\r\n   * @param context\r\n   */\r\n  code?(context: ContextOfButton, event: any): Promise<any>;\r\n\r\n  /**\r\n   * command\r\n   * @param context\r\n   * @param cmd\r\n   */\r\n  configureCommand?(context: ContextOfButton, cmd: Command): void;\r\n\r\n  /**\r\n   * optional name of dialog, to check if it's already open\r\n   * @param context\r\n   */\r\n  dialog?(context: ContextOfButton): string;\r\n\r\n  /**\r\n   * button is disabled\r\n   * @param context\r\n   */\r\n  disabled?(context: ContextOfButton): boolean;\r\n\r\n  /**\r\n   * dynamic classes for button\r\n   * @param context\r\n   */\r\n  dynamicClasses?(context: ContextOfButton): string;\r\n\r\n  /**\r\n   * open dialog in full screen\r\n   * @param context\r\n   */\r\n  fullScreen?(context: ContextOfButton): boolean;\r\n\r\n  /**\r\n   * style of icon for button\r\n   * @param context\r\n   */\r\n  icon?(context: ContextOfButton): string;\r\n\r\n  /**\r\n   * inline window for dialog\r\n   * @param context\r\n   */\r\n  inlineWindow?(context: ContextOfButton): boolean;\r\n\r\n  /**\r\n   * open new window\r\n   * @param context\r\n   */\r\n  newWindow?(context: ContextOfButton): boolean;\r\n\r\n  /**\r\n   * button parameters\r\n   * @param context\r\n   */\r\n  params?(context: ContextOfButton): Params;\r\n\r\n  /**\r\n   * is part of page\r\n   * @param context\r\n   */\r\n  partOfPage?(context: ContextOfButton): boolean;\r\n\r\n  /**\r\n   * dynamic show button\r\n   * @param context\r\n   */\r\n  showCondition?(context: ContextOfButton): boolean;\r\n\r\n  /**\r\n   * title of button\r\n   * @param context\r\n   */\r\n  title?(context: ContextOfButton): string;\r\n\r\n  /**\r\n   * is Ui action only, like more button\r\n   * @param context\r\n   */\r\n  uiActionOnly?(context: ContextOfButton): boolean;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/definition.ts","export class Params {\r\n  items?: any; // string | string[];\r\n  mode?: string;\r\n  contentTypeName?: string;\r\n  pipelineId?: number;\r\n  filters?: string;\r\n  dialog?: string;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/params.ts","import { UserOfEditContext } from '../manage/user-of-edit-context';\r\nimport { Params } from './params';\r\n\r\nexport class Settings {\r\n  code: any;\r\n  configureCommand: any;\r\n  items: any; // string | string[];\r\n  metadata: any;\r\n  prefill: any;\r\n  //\r\n  action: string;\r\n  appId: number;\r\n  attributeSetName: string;\r\n  cbId: number;\r\n  cbIsEntity: boolean;\r\n  contentGroupId: number;\r\n  contentType: string;\r\n  contentTypeId: string;\r\n  customCode: string;\r\n  dialog: string;\r\n  entityGuid: string;\r\n  entityId: number;\r\n  entityTitle: string;\r\n  filters: string;\r\n  fullScreen: boolean;\r\n  hasContent: boolean;\r\n  inlineWindow: boolean;\r\n  isContent: boolean;\r\n  isList: boolean;\r\n  isPublished: boolean;\r\n  newWindow: boolean;\r\n  params: Params;\r\n  partOfPage: boolean;\r\n  sortOrder: number;\r\n  supportsAjax: boolean;\r\n  templateChooserVisible: boolean;\r\n  templateId: number;\r\n  useModuleList: boolean;\r\n  user: UserOfEditContext;\r\n  //\r\n  name: string;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/settings.ts","/**\r\n * params for getAndReload WebAPI\r\n */\r\nexport class ActionParams {\r\n  id?: number;\r\n  part?: string;\r\n  sortOrder?: number;\r\n  destinationSortOrder?: number;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/contentBlock/action-params.ts","export class ManipulateParams {\r\n  parentId: number;\r\n  field: string;\r\n  sortOrder?: number;\r\n  index?: number;\r\n  indexFrom?: number;\r\n  indexTo?: number;\r\n  app?: string;\r\n  guid?: string;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/contentBlock/manipulate-params.ts","export class WebApiParams {\r\n  templateId?: number;\r\n  lang?: string;\r\n  cbisentity?: boolean;\r\n  cbid?: number;\r\n  originalparameters?: any;\r\n  forceCreateContentGroup?: boolean;\r\n  newTemplateChooserState?: boolean;\r\n  zoneId?: number;\r\n  appId?: number;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/contentBlock/web-api-params.ts","export class ContentBlock {\r\n  // ReSharper disable InconsistentNaming\r\n  ShowTemplatePicker: boolean;\r\n  IsEntity: boolean;\r\n  VersioningRequirements: string;\r\n  Id: number;\r\n  ParentFieldName: string;\r\n  ParentFieldSortOrder: number;\r\n  PartOfPage: boolean;\r\n  // ReSharper restore InconsistentNaming\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-edit-context/content-block.ts","export class ContentGroup {\r\n// ReSharper disable InconsistentNaming\r\n  IsCreated: boolean;\r\n  IsList: boolean;\r\n  TemplateId: number;\r\n  QueryId: number | null;\r\n  ContentTypeName: string;\r\n  AppUrl: string;\r\n  AppSettingsId: number;\r\n  AppResourcesId: number;\r\n  IsContent: boolean;\r\n  HasContent: boolean;\r\n  SupportsAjax: boolean;\r\n  ZoneId: number;\r\n  AppId: number;\r\n  Guid: string;\r\n  Id: number;\r\n// ReSharper restore InconsistentNaming\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-edit-context/content-group.ts","import { ContentBlock } from './content-block';\r\nimport { ContentGroup } from './content-group';\r\nimport { Environment } from './environment';\r\nimport { Error } from './error';\r\nimport { Language } from './language';\r\nimport { Ui } from './ui';\r\nimport { User } from './user';\r\n\r\nexport class DataEditContext {\r\n  // ReSharper disable InconsistentNaming\r\n  Environment: Environment;\r\n  User: User;\r\n  Language: Language;\r\n  ContentBlock: ContentBlock;\r\n  ContentGroup: ContentGroup;\r\n  error: Error;\r\n  Ui: Ui;\r\n  // ReSharper restore InconsistentNaming\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-edit-context/data-edit-context.ts","import { ParametersEntity } from './parameters-entity';\r\n\r\nexport class Environment {\r\n  // ReSharper disable InconsistentNaming\r\n  WebsiteId: number;\r\n  WebsiteUrl: string;\r\n  PageId: number;\r\n  PageUrl: string;\r\n  parameters: ParametersEntity[] | null;\r\n  InstanceId: number;\r\n  SxcVersion: string;\r\n  SxcRootUrl: string;\r\n  IsEditable: boolean;\r\n  // ReSharper restore InconsistentNaming\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-edit-context/environment.ts","export class Error {\r\n  type: string;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-edit-context/error.ts","export class Language {\r\n  // ReSharper disable InconsistentNaming\r\n  Current: string;\r\n  Primary: string;\r\n  All: string[] | null;\r\n  // ReSharper restore InconsistentNaming\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-edit-context/language.ts","export class ParametersEntity {\r\n  // ReSharper disable InconsistentNaming\r\n  Key: string;\r\n  Value: string;\r\n  // ReSharper restore InconsistentNaming\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-edit-context/parameters-entity.ts","export class Ui {\r\n  AutoToolbar: boolean; // toolbar auto-show (Ability to disable auto-toolbar generation within 2sxc content-blocks #1518)\r\n  Form: string; // decide which dialog opens\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-edit-context/ui.ts","export class User {\r\n  // ReSharper disable InconsistentNaming\r\n  CanDesign: boolean;\r\n  CanDevelop: boolean;\r\n  // ReSharper restore InconsistentNaming\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-edit-context/user.ts","import { windowInPage as window } from '../interfaces/window-in-page';\r\nimport { getTag } from '../manage/api';\r\nimport { getSxcInstance } from '../x-bootstrap/sxc';\r\n\r\n/**\r\n * Maps actions of the module menu to JS actions - needed because onclick event can't be set (actually, a bug in DNN)\r\n */\r\nexport class ActionMenuMapper {\r\n  private run: any;\r\n  private tag: HTMLElement;\r\n  private sxc: SxcInstanceWithInternals;\r\n\r\n  constructor(moduleId: number) {\r\n    this.sxc = getSxcInstance(moduleId) as SxcInstanceWithInternals;\r\n    this.tag = getTag(this.sxc);\r\n    this.run = this.sxc.manage.run;\r\n  }\r\n\r\n  changeLayoutOrContent = () => { this.run('layout'); };\r\n\r\n  addItem = () => { this.run('add', { useModuleList: true, sortOrder: 0 }); };\r\n\r\n  edit = () => {\r\n    this.run('edit', { useModuleList: true, sortOrder: 0 });\r\n  };\r\n\r\n  adminApp = () => { this.run('app'); };\r\n\r\n  adminZone = () => { this.run('zone'); };\r\n\r\n  develop = () => { this.run('template-develop'); };\r\n}\r\n\r\nwindow.$2sxcActionMenuMapper = (moduleId: number) => {\r\n  return new ActionMenuMapper(moduleId);\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/dnn-menu-helper/dnn-inpage-edit.ts","// The following script fixes a bug in DNN 08.00.04\r\n// the bug tries to detect a module-ID based on classes in a tag,\r\n// but uses a bad regex and captures the number 2 on all 2sxc-modules\r\n// instead of the real id\r\n// this patch changes the order of the className of 2sxc modules when\r\n// they are accessed through '$.fn.attr'\r\n// 'DnnModule-2sxc DnnModule-xxx' -> DNN thinks the mod id is 2 (false)\r\n// 'DnnModule-xxx DnnModule-2sxc' -> DNN thinks the mod id is xxx (correct)\r\n// documented here https://github.com/2sic/2sxc/issues/986\r\n\r\n/**\r\n * Fix drag-drop functionality in dnn 08.00.04 - it has an incorrect regex\r\n */\r\n'use strict';\r\n(() => {\r\n  const fn = $.fn.attr;\r\n  $.fn.attr = function() {\r\n    const val = fn.apply(this, arguments);\r\n    if (arguments[0] !== 'class' || typeof val !== 'string' || val.search('DnnModule-2sxc ') === -1) return val;\r\n    return val.replace('DnnModule-2sxc ', '') + ' DnnModule-2sxc';\r\n  };\r\n})();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/dnn-workarounds/dnn-08.00.04.ts","//\r\n// Note: this interface is copied/shared between this and angular quick-edit\r\n//\r\n\r\nimport { IQuickDialogConfig } from './iquick-dialog-config';\r\n\r\n/**\r\n * Connection object between inpage and quick-edit dialog for messaging back and forth\r\n */\r\nexport interface IIFrameBridge {\r\n  getAdditionalDashboardConfig(): IQuickDialogConfig;\r\n  hide(): void;\r\n  run(verb: string): void;\r\n  showMessage(message: string): void;\r\n  reloadAndReInit(): Promise<IQuickDialogConfig>;\r\n  setTemplate(templateId: number, templateName: string, closeDialog: boolean): Promise<boolean>;\r\n\r\n  /**\r\n   * the cancel callback to close this dialog cancelling changes\r\n   */\r\n  cancel(): void;\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/interfaces/iiframe-bridge.ts","//\r\n// Note: this interface is copied/shared between this and angular quick-edit\r\n//\r\n\r\nimport { IUserOfEditContext } from './iuser-of-edit-context';\r\n\r\n/**\r\n * configuration for quick-dialog, so it can adjust the UI\r\n */\r\nexport interface IQuickDialogConfig {\r\n  appId: number;\r\n  isContent: boolean;\r\n  isInnerContent: boolean;\r\n  hasContent: boolean;\r\n  isList: boolean;\r\n  templateId: number;\r\n  contentTypeId: string;\r\n  user: IUserOfEditContext; // not part of the interface, which is shared to the angular project\r\n  supportsAjax: boolean;\r\n  debug: boolean;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/interfaces/iquick-dialog-config.ts","//\r\n// Note: this interface is copied/shared between this and angular quick-edit\r\n//\r\n\r\n/**\r\n * user information, basically so the UI knows user capabilities\r\n */\r\nexport interface IUserOfEditContext {\r\n  canDesign: boolean;\r\n  canDevelop: boolean;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/interfaces/iuser-of-edit-context.ts","// ReSharper disable once UnusedParameter\r\nexport function\r\n  extend(...args: any[]) { // same as angular.extend or jquery.extend, but without that additional dependency\r\n  for (let i = 1; i < arguments.length; i++)\r\n    for (let key in arguments[i])\r\n      if (arguments[i].hasOwnProperty(key))\r\n        arguments[0][key] = arguments[i][key];\r\n  return arguments[0];\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib-helpers/2sxc._lib.extend.ts","/**\r\n * jquery helper\r\n */\r\n//declare let $: any;\r\n\r\ninterface JQueryStatic {\r\n  // the generator for the DNN ServicesFramework\r\n// ReSharper disable once InconsistentNaming\r\n  dnnSF: any,\r\n\r\n  // The DNN Services Framework\r\n// ReSharper disable once InconsistentNaming\r\n  ServicesFramework: any,\r\n\r\n  // the translations extension on jquery\r\n  t: any,\r\n}\r\n\r\ninterface JQuery<TElement = HTMLElement> {\r\n  parentContainer: any,\r\n  actionsForModule: any,\r\n  localize: any,\r\n  actionsForCb: any,\r\n}\r\n\r\ninterface JQueryXHR {\r\n  // not sure if this is right, but otherwise typescript doesn't like our code\r\n  success: any,\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib-helpers/jquery.ts","/**\r\n * Symbol polyfill for es5 from lib.es6\r\n * https://github.com/Microsoft/TypeScript/blob/f17bf54bfe3f1e02e47af7660336a88f9ed2a316/lib/lib.es6.d.ts#L5501\r\n */\r\n\r\ninterface Symbol {\r\n  /** Returns a string representation of an object. */\r\n  toString(): string;\r\n\r\n  /** Returns the primitive value of the specified object. */\r\n  valueOf(): symbol;\r\n}\r\n\r\ninterface SymbolConstructor {\r\n  /**\r\n   * A reference to the prototype.\r\n   */\r\n  readonly prototype: Symbol;\r\n\r\n  /**\r\n   * Returns a new unique Symbol value.\r\n   * @param  description Description of the new Symbol object.\r\n   */\r\n  (description?: string | number): symbol;\r\n\r\n  /**\r\n   * Returns a Symbol object from the global symbol registry matching the given key if found.\r\n   * Otherwise, returns a new symbol with this key.\r\n   * @param key key to search for.\r\n   */\r\n  for(key: string): symbol;\r\n\r\n  /**\r\n   * Returns a key from the global symbol registry matching the given Symbol if found.\r\n   * Otherwise, returns a undefined.\r\n   * @param sym Symbol to find the key for.\r\n   */\r\n  keyFor(sym: symbol): string | undefined;\r\n}\r\n\r\ndeclare var Symbol: SymbolConstructor;\r\n\r\n/// <reference path=\"lib.es2015.symbol.d.ts\" />\r\ninterface SymbolConstructor {\r\n  /**\r\n   * A method that determines if a constructor object recognizes an object as one of the\r\n   * constructors instances. Called by the semantics of the instanceof operator.\r\n   */\r\n  readonly hasInstance: symbol;\r\n\r\n  /**\r\n   * A Boolean value that if true indicates that an object should flatten to its array elements\r\n   * by Array.prototype.concat.\r\n   */\r\n  readonly isConcatSpreadable: symbol;\r\n\r\n  /**\r\n   * A regular expression method that matches the regular expression against a string. Called\r\n   * by the String.prototype.match method.\r\n   */\r\n  readonly match: symbol;\r\n\r\n  /**\r\n   * A regular expression method that replaces matched substrings of a string. Called by the\r\n   * String.prototype.replace method.\r\n   */\r\n  readonly replace: symbol;\r\n\r\n  /**\r\n   * A regular expression method that returns the index within a string that matches the\r\n   * regular expression. Called by the String.prototype.search method.\r\n   */\r\n  readonly search: symbol;\r\n\r\n  /**\r\n   * A function valued property that is the constructor function that is used to create\r\n   * derived objects.\r\n   */\r\n  readonly species: symbol;\r\n\r\n  /**\r\n   * A regular expression method that splits a string at the indices that match the regular\r\n   * expression. Called by the String.prototype.split method.\r\n   */\r\n  readonly split: symbol;\r\n\r\n  /**\r\n   * A method that converts an object to a corresponding primitive value.\r\n   * Called by the ToPrimitive abstract operation.\r\n   */\r\n  readonly toPrimitive: symbol;\r\n\r\n  /**\r\n   * A String value that is used in the creation of the default string description of an object.\r\n   * Called by the built-in method Object.prototype.toString.\r\n   */\r\n  readonly toStringTag: symbol;\r\n\r\n  /**\r\n   * An Object whose own property names are property names that are excluded from the 'with'\r\n   * environment bindings of the associated objects.\r\n   */\r\n  readonly unscopables: symbol;\r\n}\r\n\r\ninterface Symbol {\r\n  readonly [Symbol.toStringTag]: \"Symbol\";\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/polyfills/Symbol.ts","/**\r\n * used in Selectors class\r\n */\r\nexport class CbOrMod {\r\n  id: string;\r\n  class: string;\r\n  selector: string;\r\n  listSelector: string;\r\n  context: string;\r\n  singleItem?: string;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-edit/cb-or-mod.ts","export class Conf {\r\n  enable: boolean;\r\n  innerBlocks: {\r\n    enable: boolean | string | null;\r\n  };\r\n  modules: {\r\n    enable: boolean | string | null;\r\n  };\r\n\r\n  getAttribute?(configAttr: string): any;\r\n\r\n  guid?: string;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-edit/conf.ts","import { Cb as cb } from './cb';\r\nimport { copyPasteInPage } from './clipboard';\r\nimport { $quickE as quickE } from './quick-e';\r\nimport { selectors } from './selectors-instance';\r\n\r\n/**\r\n * content-block specific stuff like actions\r\n */\r\nfunction onCbButtonClick() {\r\n  const list: any = quickE.main.actionsForCb.closest(selectors.cb.listSelector);\r\n  const listItems: any = list.find(selectors.cb.selector);\r\n  const actionConfig: any = JSON.parse(list.attr(selectors.cb.context));\r\n  let index: number = 0;\r\n  const newGuid: string | null = actionConfig.guid || null;\r\n\r\n  if (quickE.main.actionsForCb.hasClass(selectors.cb.class))\r\n    index = listItems.index(quickE.main.actionsForCb[0]) + 1;\r\n\r\n  // check cut/paste\r\n  const cbAction = $(this).data('action');\r\n  if (cbAction) {\r\n    // this is a cut/paste action\r\n    return copyPasteInPage(cbAction, list, index, selectors.cb.id);\r\n  } else {\r\n    const appOrContent = $(this).data('type');\r\n    return cb.create(actionConfig.parent, actionConfig.field, index, appOrContent, list, newGuid);\r\n  }\r\n}\r\n\r\nquickE.cbActions.click(onCbButtonClick);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-edit/content-block.ts","import { copyPasteInPage } from './clipboard';\r\nimport { modManage } from './mod-manage';\r\nimport { $quickE as quickE } from './quick-e';\r\nimport { selectors } from './selectors-instance';\r\n\r\n/**\r\n * module specific stuff\r\n */\r\nfunction onModuleButtonClick() {\r\n  const type = $(this).data('type');\r\n  const dnnMod = quickE.main.actionsForModule;\r\n  const pane = dnnMod.closest(selectors.mod.listSelector);\r\n  let index = 0;\r\n\r\n  if (dnnMod.hasClass('DnnModule'))\r\n    index = pane.find('.DnnModule').index(dnnMod[0]) + 1;\r\n\r\n  const cbAction = $(this).data('action');\r\n  if (cbAction) {\r\n    return copyPasteInPage(cbAction, pane, index, selectors.mod.id); // copy/paste\r\n  }\r\n  return modManage.create(modManage.getPaneName(pane), index, type);\r\n}\r\n\r\n/**\r\n * bind module actions click\r\n */\r\nquickE.modActions.click(onModuleButtonClick);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-edit/module.ts","import { CbOrMod } from './cb-or-mod';\r\n\r\n/**\r\n * Selectors class used to host all QickE selectors in one place\r\n */\r\nexport class Selectors {\r\n  cb: CbOrMod;\r\n  mod: CbOrMod;\r\n  eitherCbOrMod: string;\r\n  selected: string;\r\n\r\n  [propName: string]: any;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-edit/selectors.ts","export class Specs {\r\n  parent: any;\r\n  field: string;\r\n  list: any;\r\n  item: any;\r\n  index: number;\r\n  type: string;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/quick-edit/specs.ts","import { Settings } from '../../commands/settings';\r\nimport { Params } from '../../commands/params';\r\nimport { ModConfig } from './mod-config';\r\n\r\n/**\r\n * Button Definition v1. from old API\r\n * it is publicly used out of inpage, so take a care to preserve its signature\r\n */\r\nexport class ButtonDefinition {\r\n  // object command the internal command which will be called, should contain both the name and the parameters like { action: \"new\", contentType: \"BlogPost\"}\r\n  command?: any;\r\n\r\n  // string title a text which is shown on mouse-over. Note that 2sxc will try to run it through the translator, so you can also use placeholders like Toolbar.Metadata\r\n  title?: string;\r\n\r\n  // string icon a css class giving the button the icon. It can be one of the icons 2sxc provides, or it can be your own - just be sure to include a CSS & font which resolves the icon\r\n  icon?: string;\r\n\r\n  // string classes comma separated list of class-names like makeRed,glowHover\r\n  classes?: string;\r\n\r\n  // function dynamicClasses(settings) can be used to dynamically build classes depending on the situation\r\n  dynamicClasses?(settings: Settings): string;\r\n\r\n  // bool/function showCondition (API still experimental) - used to dynamically choose if this button should be shown or not\r\n  showCondition?(settings: Settings, modConfig: ModConfig): boolean;\r\n\r\n  // bool disabled (API still experimental) would disable the click on a button\r\n  disabled?: boolean;\r\n\r\n  // bool partOfPage (API still experimental, new in 2sxc 9.5) determines if resulting changes should effect the Evoq/DNN Page Publishing - note that it only effects the page-lifecyle, if the resulting dialogs and APIs respect this setting\r\n  partOfPage?: boolean;\r\n\r\n  // tbd, not documented\r\n  params?: Params;\r\n\r\n  // true/false if this is just something visual; otherwise a webservice will ensure that a content-group exists (for editing etc.)\r\n  uiActionOnly?: boolean;\r\n\r\n  // code(settings, event) - the code executed on click, if it's not the default action\r\n  code?(settings: Settings, event: ModConfig): any;\r\n\r\n  // created in the buttonConfig v1\r\n  name?: string;\r\n\r\n  // definition v1...\r\n  dialog?: string;\r\n  newWindow?: boolean;\r\n  inlineWindow?: boolean;\r\n  fullScreen?: boolean;\r\n\r\n  // entity support (vertical compatibility for pre 2sxc v9.x)\r\n  entity?: any;\r\n  useModuleList?: boolean;\r\n  entityId?: number;\r\n  sortOrder?: number;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/button/button-definition.ts","import { ButtonConfig} from './button-config';\r\n\r\nexport class GroupConfig {\r\n  buttons: ButtonConfig[] = []; // array of buttons\r\n  defaults: any = []; // v1\r\n\r\n  [propName: string]: any;\r\n\r\n  constructor(buttons: ButtonConfig[]) {\r\n    // adds these to the items\r\n    this.buttons = buttons;\r\n  }\r\n\r\n  static fromNameAndParams(name: string, params?: any[]): GroupConfig {\r\n    const groupConfig = new GroupConfig([]);\r\n    // builds buttons from name and params, then adds\r\n    return groupConfig;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/button/group-config.ts","export class ItemRender {\r\n  button: (buttonConfig: any) => {};\r\n  group: (groupConfig: any) => {};\r\n  toolbar: (toolbarConfig: any) => {};\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/item/item-render.ts","/*\r\n * Author: Alex Gibson\r\n * https://github.com/alexgibson/shake.js\r\n * License: MIT license\r\n */\r\n\r\n(function(global, factory) {\r\n  global.Shake = factory(global, global.document);\r\n}(typeof window !== 'undefined' ? window : this,\r\n  function(window: any, document: any) {\r\n\r\n    'use strict';\r\n\r\n    function Shake(options: any) {\r\n      //feature detect\r\n      this.hasDeviceMotion = 'ondevicemotion' in window;\r\n\r\n      this.options = {\r\n        threshold: 15, //default velocity threshold for shake to register\r\n        timeout: 1000,\r\n        callback:\r\n          null, // callback - will only be used if provided, otherwise generate event // function() {}//default interval between events\r\n      };\r\n\r\n      if (typeof options === 'object') {\r\n        for (let i in options) {\r\n          if (options.hasOwnProperty(i)) {\r\n            this.options[i] = options[i];\r\n          }\r\n        }\r\n      }\r\n\r\n      //use date to prevent multiple shakes firing\r\n      this.lastTime = new Date();\r\n\r\n      //accelerometer values\r\n      this.lastX = null;\r\n      this.lastY = null;\r\n      this.lastZ = null;\r\n    }\r\n\r\n    //reset timer values\r\n    Shake.prototype.reset = function() {\r\n      this.lastTime = new Date();\r\n      this.lastX = null;\r\n      this.lastY = null;\r\n      this.lastZ = null;\r\n    };\r\n\r\n    //start listening for devicemotion\r\n    Shake.prototype.start = function() {\r\n      this.reset();\r\n      if (this.hasDeviceMotion) {\r\n        window.addEventListener('devicemotion', this, false);\r\n      }\r\n    };\r\n\r\n    //stop listening for devicemotion\r\n    Shake.prototype.stop = function() {\r\n      if (this.hasDeviceMotion) {\r\n        window.removeEventListener('devicemotion', this, false);\r\n      }\r\n      this.reset();\r\n    };\r\n\r\n    //calculates if shake did occur\r\n    Shake.prototype.devicemotion = function(e: any) {\r\n      const current = e.accelerationIncludingGravity;\r\n      let deltaX = 0;\r\n      let deltaY = 0;\r\n      let deltaZ = 0;\r\n\r\n      if ((this.lastX === null) && (this.lastY === null) && (this.lastZ === null)) {\r\n        this.lastX = current.x;\r\n        this.lastY = current.y;\r\n        this.lastZ = current.z;\r\n        return;\r\n      }\r\n\r\n      deltaX = Math.abs(this.lastX - current.x);\r\n      deltaY = Math.abs(this.lastY - current.y);\r\n      deltaZ = Math.abs(this.lastZ - current.z);\r\n\r\n      if (((deltaX > this.options.threshold) && (deltaY > this.options.threshold)) ||\r\n        ((deltaX > this.options.threshold) && (deltaZ > this.options.threshold)) ||\r\n        ((deltaY > this.options.threshold) && (deltaZ > this.options.threshold))) {\r\n        //calculate time in milliseconds since last shake registered\r\n        let currentTime: any;\r\n        currentTime = new Date();\r\n        let timeDifference: any;\r\n        timeDifference = currentTime.getTime() - this.lastTime.getTime();\r\n\r\n        if (timeDifference > this.options.timeout) {\r\n          // once triggered, execute  the callback\r\n          if (typeof this.options.callback === 'function') {\r\n            this.options.callback();\r\n          } else\r\n            console.log('shake event without callback detected');\r\n          this.lastTime = new Date();\r\n        }\r\n      }\r\n\r\n      this.lastX = current.x;\r\n      this.lastY = current.y;\r\n      this.lastZ = current.z;\r\n    };\r\n\r\n    //event handler\r\n    Shake.prototype.handleEvent = function(e: any) {\r\n      if (typeof (this[e.type]) === 'function') {\r\n        return this[e.type](e);\r\n      }\r\n    };\r\n\r\n    return Shake;\r\n  }));\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/libs/shake.ts","import { $2sxcInPage as $2sxc } from '../interfaces/sxc-controller-in-page';\r\n\r\n// prevent propagation of the click (if menu was clicked)\r\n$($2sxc.c.sel.scMenu).click((e: any) => e.stopPropagation());\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/toolbar-events.ts","// ReSharper disable once InconsistentNaming\r\ndeclare let Shake: any;\r\n\r\n// enable shake detection on all toolbars\r\n$(() => {\r\n\r\n  // this will add a css-class to auto-show all toolbars (or remove it again)\r\n  function toggleAllToolbars() {\r\n    $(document.body).toggleClass('sc-tb-show-all');\r\n  }\r\n\r\n  // start shake-event monitoring, which will then generate a window-event\r\n  (new Shake({ callback: toggleAllToolbars })).start();\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/toolbar-shake.ts","import { ToolbarSettings } from './toolbar-settings';\r\n\r\nexport class ToolbarConfigTemplate {\r\n  groups: item[] = [];\r\n  defaults?: HashTable<string> = {};\r\n  params?: HashTable<string> = {};\r\n  settings?: Partial<ToolbarSettings> = {};\r\n}\r\n\r\nclass item {\r\n  name: string;\r\n  buttons: string;\r\n  defaults?: HashTable<string> = {};\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/toolbar/toolbar-config-template.ts"],"sourceRoot":""}